   1                             		.file	"APP_Fault.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.section	.text.FLT_applCurrentFaultReset,"ax",@progbits
   5                             		.global	_FLT_applCurrentFaultReset
   7                             	_FLT_applCurrentFaultReset:
   8                             	.LFB1:
   9                             		.file 1 "C:/Workspace/FW_Platform2_5/trunk/Application_Platform/APP_Fault.c"
   1:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /*
   2:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** ** **************************************************************************
   3:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** ** **************************************************************************
   4:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */ 
   5:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
   6:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
   7:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Gestisce la macchina a stati dei fault e l'architettura ad essi correlati.
   8:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Source file 
   9:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
  10:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \file    	App_Fault.c
  11:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
  12:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version 	1.0.0
  13:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date    	01/08/2013
  14:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \authors	Emanuela Antognoli
  15:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */ 
  16:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /*
  17:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** ** **************************************************************************
  18:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** ** **************************************************************************
  19:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
  20:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  21:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /*
  22:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Copyright (c) 2004-2006, Indesit Company, EDT.
  23:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Tutti i diritti sono riservati. All rights reserved.
  24:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
  25:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  26:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Old Versions
  27:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version
  28:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date
  29:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author
  30:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
  31:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  32:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ******** */
  33:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Includes */
  34:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ******** */
  35:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  36:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #include "CstmHeaders.h"
  37:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #include "LIB_ProductSafetyExp.h"
  38:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #include "StandardTypes.h"
  39:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  40:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ****************** */
  41:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Defines and Macros */
  42:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ****************** */
  43:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  44:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
  45:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Gestione specifica Fault Motore
  46:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
  47:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  48:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  49:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  50:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /** Before Faults Cycles */
  51:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define BFC_FAULT_CODE					0
  52:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define BFC_FAULT_SUBCODE				1
  53:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define BFC_CYCLE_NUMBER				2
  54:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define BFC_PHASE_NUMBER				3	
  55:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define BFC_DATA_LENGHT					4
  56:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  57:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  58:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  59:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Mask on field status of struct sft_module_faults_t */
  60:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define SFT_FAULTS_STATUS_MASK				0x7F
  61:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #define SFT_FAULT_STATUS_CHANGED_MASK		0x80
  62:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  63:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  64:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* *************************** */
  65:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Typedef, Structs and Unions */
  66:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* *************************** */
  67:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  68:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* **************************** */
  69:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Prototype of local functions */
  70:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* **************************** */
  71:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_prefaultFaultStateManagement(uint16_t n_max_prefault, uint8_t faultTimeTO, uint8_t 
  72:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  73:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_prefaultResetManagement(uint16_t config);
  74:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  75:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  76:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
  77:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  78:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_initFaultDetectProc(uint8_t compartment);
  79:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_checkFltStateMachineRestart( uint8_t code, uint8_t subcode, uint8_t compartment) ;
  80:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_ifGoToFaultStatus (uint8_t config);
  81:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_updateFaultStatistics(sft_fault_codes_t previousFaultCodes, sft_fault_codes_t curre
  82:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_faultUpdateStep(uint8_t step, uint8_t compartment);
  83:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  84:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else /* !MULTI_COMPARTMENT_APPL */
  85:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  86:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_initFaultDetectProc(void);
  87:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_checkFltStateMachineRestart( uint8_t code, uint8_t subcode) ;
  88:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  89:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_updateFaultStatistics(sft_fault_codes_t previousFaultCodes, sft_fault_codes_t curre
  90:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_ifGoToFaultStatus (void);
  91:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_faultUpdateStep(uint8_t step);
  92:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /*(MULTI_COMPARTMENT_APPL == 1)*/
  93:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  94:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #ifdef _STATISTICS_ON_ 
  95:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  96:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void STC_updateBlackBoxEvent(uint8_t i, uint8_t codesMatch);
  97:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
  98:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
  99:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 100:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ****************** */
 101:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Exported variables */
 102:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ****************** */
 103:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 104:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* **************** */
 105:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Global variables */
 106:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* **************** */
 107:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 108:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 109:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ***************** */
 110:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* Exported function */
 111:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /* ***************** */
 112:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 113:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 114:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 115:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Aggiorna lo step della procedura di rilevazione fault e setta stepChanged a TRUE.
 116:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 117:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	step
 118:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out] 	FaultMgmt_Data (global)
 119:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 120:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 121:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 122:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 123:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 124:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 125:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			18/12/2006
 126:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Alberto Camerin
 127:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 128:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 129:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_faultUpdateStep(uint8_t step, uint8_t compartment)
 130:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 131:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_faultUpdateStep(uint8_t step)
 132:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /*(MULTI_COMPARTMENT_APPL == 0)*/
 133:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 134:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
 135:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment = 0;
 136:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 137:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = step;
 138:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].stepChanged = TRUE;
 139:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 140:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 141:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 142:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 143:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 144:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Resetta la struttura ApplCurrentFault
 145:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 146:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	
 147:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out]	ApplCurrentFault
 148:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 149:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 150:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		
 151:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 152:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 153:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 154:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 155:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			25/09/2006
 156:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 157:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 158:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 159:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_applCurrentFaultReset(uint8_t compartment)
 160:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 161:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_applCurrentFaultReset(void)
 162:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 163:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
  10                             		.loc 1 163 0
  11                             	.LVL0:
 164:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
 165:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment=0;
 166:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 167:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	ApplCurrentFault[compartment].prefaultCodes = No_Fault;
  12                             		.loc 1 167 0
  13 0000 FB 42 00 00 00 00       		mov.L	#_No_Fault, r4
  14 0006 DC 44                   		mov.W	[r4], r4
  15 0008 FB E2 00 00 00 00       		mov.L	#_ApplCurrentFault, r14
  16 000e D7 E4 01                		mov.W	r4, 2[r14]
 168:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	ApplCurrentFault[compartment].faultCodes = No_Fault;
  17                             		.loc 1 168 0
  18 0011 D3 E4                   		mov.W	r4, [r14]
  19 0013 02                      		rts
  20                             	.LFE1:
  22                             		.section	.text.FLT_faultMgmtDataReset,"ax",@progbits
  23                             		.global	_FLT_faultMgmtDataReset
  25                             	_FLT_faultMgmtDataReset:
  26                             	.LFB2:
 169:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 170:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 171:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 172:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 173:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 174:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Resetta la struttura FaultMgmt_Data e le variabili specifiche per la rilevazione
 175:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** dei singoli guasti.
 176:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 177:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	
 178:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out] 	FaultMgmt_Data
 179:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 180:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 181:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		
 182:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 183:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 184:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 185:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 186:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			25/09/2006
 187:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 188:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 189:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 190:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_faultMgmtDataReset(uint8_t compartment)
 191:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 192:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_faultMgmtDataReset(void)
 193:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 194:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
  27                             		.loc 1 194 0
  28                             	.LVL1:
 195:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
 196:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	uint8_t compartment =0;
 197:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 198:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 199:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (SW_TIMER_NORM_MODE	== FALSE) 
 200:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****   Reset_MediumCounter((SWTC_CountersType)(MAIN_FAULT_MGMT_COUNTER_M + compartment));
  29                             		.loc 1 200 0
  30 0000 66 11                   		mov	#1, r1
  31 0002 05 00 00 00             		bsr	_Reset_MediumCounter
  32                             	.LVL2:
 201:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else  
 202:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	StopCounterToZero(MEDIUM_COUNTER, (SWTC_CountersType)(MAIN_FAULT_MGMT_COUNTER_M + compartment));
 203:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 204:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				
 205:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	LKT_FIELD_S(FaultMgmt_Data[compartment].filterCount) = 0;
  33                             		.loc 1 205 0
  34 0006 FB E2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r14
  35 000c 71 E4 03                		add	#3, r14, r4
  36 000f 3D 40 00                		mov.W	#0, [r4]
 206:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 207:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = FLT_IDLE_STEP;
  37                             		.loc 1 207 0
  38 0012 CD E4 02                		mov.B	2[r14], r4
  39 0015 75 24 80                		and	#0xffffff80, r4
  40 0018 C7 E4 02                		mov.B	r4, 2[r14]
 208:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 209:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].faultCodes = No_Fault;
  41                             		.loc 1 209 0
  42 001b FB 42 00 00 00 00       		mov.L	#_No_Fault, r4
  43 0021 DC 44                   		mov.W	[r4], r4
  44 0023 D3 E4                   		mov.W	r4, [r14]
  45 0025 02                      		rts
  46                             	.LFE2:
  48                             		.section	.text.FLT_lastFaultUpdate,"ax",@progbits
  49                             		.global	_FLT_lastFaultUpdate
  51                             	_FLT_lastFaultUpdate:
  52                             	.LFB3:
 210:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 211:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/** NOTA: il campo stepChanged viene gestito all'interno delle routines 
 212:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		FLT_prefaultFaultStateManagement() e FLT_prefaultResetManagement() e deve essere 
 213:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		controllato solo dopo aver chiamato una delle due routines. */
 214:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
 215:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 216:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 217:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 218:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 219:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 220:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Aggiorna il buffer puntato da ptrMostRecentFault, eliminando il fault più vecchio
 221:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** e introducendo in testa faultToBeSaved. Inoltre aggiorna il campo faultOccurencies
 222:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** relativo all'ultimo fault salvato.
 223:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 224:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	faultToBeSaved, struttura con codice e sottocodice del nuovo fault
 225:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				da inserire
 226:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in/out]	ptrMostRecentFault punta al primo elemento del buffer da aggiornare.
 227:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 228:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 229:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		la dimensione del buffer da shiftare dev'essere N_MAX_LAST_FAULT
 230:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 231:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:			se faultToBeSaved coincide ptrMostRecentFault->faultCodes, il buffer
 232:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				non viene shiftato, ma viene comunque incrementato il campo 
 233:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				ptrMostRecentFault->faultOccurencies
 234:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 235:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.2.0
 236:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			05/07/2007
 237:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 238:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 239:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_lastFaultUpdate(sft_fault_codes_t faultToBeSaved, LastFault_Struct *ptrMostRecentFault)
 240:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
  53                             		.loc 1 240 0
  54                             	.LVL3:
  55 0000 60 40                   		sub	#4, r0
  56                             	.LCFI0:
  57                             		.loc 1 240 0
  58 0002 EF 2E                   		mov.L	r2, r14
 241:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t i;
 242:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** LastFault_Struct *ptrLocal;
 243:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 244:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* Il buffer viene fatto scorrere solo se il nuovo fault è diverso dal primo
 245:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	   della lista */
 246:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( (faultToBeSaved.code != ptrMostRecentFault->faultCodes.code) || 
  59                             		.loc 1 246 0
  60 0004 B2 02                   		movu.B	8[r0], r2
  61                             	.LVL4:
  62 0006 99 04                   		mov.W	8[r0], r4
  63 0008 44 E2                   		cmp	[r14].UB, r2
  64 000a 21 0C                   		bne	.L4
  65                             		.loc 1 246 0 is_stmt 0 discriminator 1
  66 000c 59 E2 01                		movu.B	1[r14], r2
  67                             	.LVL5:
  68 000f 5B 43                   		movu.B	r4, r3
  69                             	.LVL6:
  70 0011 47 32                   		cmp	r3, r2
  71                             	.LVL7:
  72 0013 20 1D                   		beq	.L5
  73                             	.LVL8:
  74 0015 03                      		.balign 2,3,2
  75                             	.L4:
 247:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		(faultToBeSaved.subCode != ptrMostRecentFault->faultCodes.subCode) )
 248:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 249:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* Usato il while invece del for per evitare l'unrolling loop e risparmiare codice */
 250:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		ptrLocal = (ptrMostRecentFault + (N_MAX_LAST_FAULT - 1));
  76                             		.loc 1 250 0 is_stmt 1
  77 0016 71 E1 0C                		add	#12, r14, r1
  78                             	.LVL9:
  79 0019 03                      		.balign 2,3,2
  80                             	.L6:
 239:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_lastFaultUpdate(sft_fault_codes_t faultToBeSaved, LastFault_Struct *ptrMostRecentFault)
  81                             		.loc 1 239 0
  82 001a 71 15 FD                		add	#-3, r1, r5
 251:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		i = N_MAX_LAST_FAULT-1;
 252:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		while(i>0)
 253:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 254:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*ptrLocal = *(ptrLocal - 1);
  83                             		.loc 1 254 0
  84 001d EF 52                   		mov.L	r5, r2
  85 001f 66 33                   		mov.L	#3, r3
  86 0021 7F 8F                   		smovf
  87                             	.LVL10:
 252:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		while(i>0)
  88                             		.loc 1 252 0
  89 0023 47 E5                   		cmp	r14, r5
 255:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ptrLocal --;
  90                             		.loc 1 255 0
  91 0025 EF 51                   		mov.L	r5, r1
 252:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		while(i>0)
  92                             		.loc 1 252 0
  93 0027 21 F3                   		bne	.L6
  94                             	.LVL11:
 256:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			i--;
 257:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 258:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 259:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* Dopo il loop ptrLocal punta al primo elemento del buffer da aggiornare*/
 260:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		ptrLocal->faultCodes = faultToBeSaved;
  95                             		.loc 1 260 0
  96 0029 D3 E4                   		mov.W	r4, [r14]
 261:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		ptrLocal->faultOccurencies = 0;
  97                             		.loc 1 261 0
  98 002b F9 E4 02 00             		mov.B	#0, 2[r14]
  99                             	.LVL12:
 100 002f 03                      		.balign 2,3,2
 101                             	.L5:
 262:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 263:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 264:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	IncByteWithCheck(&(ptrMostRecentFault->faultOccurencies));
 102                             		.loc 1 264 0
 103 0030 71 E1 02                		add	#2, r14, r1
 265:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 104                             		.loc 1 265 0
 105 0033 62 40                   		add	#4, r0
 264:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	IncByteWithCheck(&(ptrMostRecentFault->faultOccurencies));
 106                             		.loc 1 264 0
 107 0035 04 00 00 00             		bra	_IncByteWithCheck
 108                             	.LVL13:
 109                             	.LFE3:
 111 0039 03                      		.section	.text.FLT_updateFaultStatistics,"ax",@progbits
 113                             	_FLT_updateFaultStatistics:
 114                             	.LFB15:
 266:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 267:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 268:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 269:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 270:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Inizializza la procedura di rilevazione fault.
 271:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 272:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	
 273:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out] 	
 274:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 275:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 276:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		
 277:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 278:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 279:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 280:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 281:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			03/10/2006
 282:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 283:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 284:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 285:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_initFaultDetectProc(uint8_t compartment)
 286:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 287:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_initFaultDetectProc(void)
 288:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 289:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 290:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
 291:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment = 0;
 292:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 293:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 294:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = ALARM_FLAG_STEP;
 295:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 296:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 297:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 298:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 299:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 300:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Gestisce la procedura di rilevazione fault, con le transizioni tra gli stati Alarm -> 
 301:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Prefault -> Fault.
 302:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 303:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in/out] FaultMgmt_Data, ApplCurrentFault
 304:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out] 	
 305:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 306:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 307:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		
 308:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 309:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 310:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 311:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 312:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			25/09/2006
 313:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 314:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 315:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_prefaultFaultStateManagement(uint16_t n_max_prefault, uint8_t faultTimeTO, uint8_t 
 316:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 317:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Loader_Struct tab_BFCycles;
 318:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t *p;
 319:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t k=0;
 320:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
 321:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 322:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment=(config & COMP_MASK)>>COMP_MASK_NUM_RIGHT_SHIFT;
 323:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 324:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment =0;
 325:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 326:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 327:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** FaultMgmt_Data_Struct *pFaultmgmt_Data= &FaultMgmt_Data[compartment];
 328:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Fault_Compl_Struct *pApplCurrentFault = &ApplCurrentFault[compartment];
 329:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** SWTC_CountersType counterIndex = MAIN_FAULT_MGMT_COUNTER_M + compartment;
 330:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 331:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	pFaultmgmt_Data->stepChanged = FALSE;
 332:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 333:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	switch (pFaultmgmt_Data->step)
 334:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 335:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case ALARM_FLAG_STEP:
 336:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 337:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SWTC_Stop((SWTC_CountersType) counterIndex);
 338:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 339:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Init contatore Alarm -> Prefault */
 340:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 341:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 342:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->step = PREFAULT_WAIT_STEP;
 343:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 344:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 345:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 346:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 347:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case PREFAULT_WAIT_STEP:
 348:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 349:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
 350:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			LKT_FIELD_S(pFaultmgmt_Data->filterCount) ++;
 351:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 352:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if(( LKT_FIELD_S(pFaultmgmt_Data->filterCount) >= n_max_prefault )||(n_max_prefault== 0 ))
 353:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 354:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* End conteggio Alarm -> Prefault: viene attivato il Prefault */
 355:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 356:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 357:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_faultUpdateStep( (uint8_t)PREFAULT_STEP, compartment);
 358:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else				
 359:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_faultUpdateStep((uint8_t)PREFAULT_STEP);
 360:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif				
 361:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pApplCurrentFault->prefaultCodes = pFaultmgmt_Data->faultCodes;
 362:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 363:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Salvataggio codici di prefault per le statistiche del ciclo di collaudo */
 364:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #ifndef _NO_STC_TESTCYCLE_
 365:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = pApplCurrentFault->prefaultCodes;
 366:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 367:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Aggiornamento buffer Last Prefault */
 368:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 369:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_lastFaultUpdate(pApplCurrentFault->prefaultCodes, &MachineStatistics.lastPreFault[compartme
 370:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 371:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_lastFaultUpdate(pApplCurrentFault->prefaultCodes, &MachineStatistics.lastPreFault[0]);
 372:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 373:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #ifdef _STATISTICS_ON_ 
 374:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Salvataggio dati nella Black Box (se non c'è già un fault di applicazione o di piattaforma
 375:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( (pApplCurrentFault->faultCodes.code == CODE_NO_FAULT) && (PltFaultCodes.code == CODE_NO_FAU
 376:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 377:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				
 378:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 379:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					STC_saveBlackBoxData(pApplCurrentFault->prefaultCodes, compartment);
 380:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else	
 381:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					STC_saveBlackBoxData(pApplCurrentFault->prefaultCodes);
 382:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif					
 383:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 384:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* _STATISTICS_ON_ */
 385:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 386:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Init timer Prefault -> Fault 
 387:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				*/
 388:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				
 389:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( (config & THEREATTEMPTFLT_MASK) == 0 )
 390:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 391:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					#if (SW_TIMER_NORM_MODE	== FALSE) 
 392:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				    Set_MediumCounter((SWTC_CountersType)counterIndex, (SWTC_PrescalerType)(config & FLT_PRESCA
 393:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					#else
 394:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					  Set_DownCounter(MEDIUM_COUNTER, (SWTC_CountersType)counterIndex, (SWTC_PrescalerType)(config
 395:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					#endif  
 396:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 397:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				else
 398:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 399:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					/*
 400:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					Il contatore non è utilizzato nei fault gestiti mediante tentativi: in questo caso per il pas
 401:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					a fault si contano i tentativi, mediante pFaultmgmt_Data->filterCount, che risulta già azzera
 402:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					*/
 403:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 404:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 405:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 406:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 407:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 408:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 409:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case PREFAULT_STEP:
 410:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 411:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if (config & THEREATTEMPTFLT_MASK)
 412:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 413:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* EA: nella gestione di eventuali tentativi anche in fault, questa variabile viene incrementat
 414:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 415:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				LKT_FIELD_S(pFaultmgmt_Data->filterCount) ++;
 416:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 417:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			else
 418:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 419:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Run((SWTC_CountersType) counterIndex);
 420:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 421:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 422:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( (SWTC_IsExpired((SWTC_CountersType)counterIndex)&& ((config & THEREATTEMPTFLT_MASK)==0) ) ||
 423:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					(( LKT_FIELD_S(pFaultmgmt_Data->filterCount) >= faultTimeTO )&&(config & THEREATTEMPTFLT_MASK)
 424:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{	
 425:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* End conteggio Prefault -> Fault: viene attivato il Fault */
 426:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Stop((SWTC_CountersType) counterIndex);
 427:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 428:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* verifica se è previsto il before fault cycle per il prefault corrente */
 429:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if ( BFC_PRESENCE_ON == TRUE)	
 430:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( BasicLoader( PTR_SAFETY_PARAM_DATA, DSPL_BEFORE_FAULT_CYCLES, &tab_BFCycles) == S_OK )
 431:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 432:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					while (MissedLoadCheck(&tab_BFCycles,k))
 433:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{		
 434:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						p=tab_BFCycles.Data+k;
 435:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						if (	FLT_checkForCurrentFault((*(p+BFC_FAULT_CODE)),(*(p+BFC_FAULT_SUBCODE))	) )
 436:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						{				
 437:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							
 438:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							FLT_BFC_Cstm_function(*(p+BFC_CYCLE_NUMBER),*(p+BFC_PHASE_NUMBER));
 439:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 440:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							FLT_faultUpdateStep((uint8_t)BEFORE_FAULT_STEP, compartment);
 441:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 442:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							FLT_faultUpdateStep((uint8_t)BEFORE_FAULT_STEP);
 443:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif							
 444:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						}	
 445:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							
 446:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						k +=BFC_DATA_LENGHT;							
 447:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}					
 448:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}		
 449:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 450:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* se non c'è il before fault cycle passa in fault */
 451:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if(pFaultmgmt_Data->step != BEFORE_FAULT_STEP)	
 452:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 453:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 454:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_ifGoToFaultStatus(config);
 455:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 456:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_ifGoToFaultStatus();
 457:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* (MULTI_COMPARTMENT_APPL == 1) */
 458:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 459:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}					
 460:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 461:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;	
 462:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 463:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if ( BFC_PRESENCE_ON == TRUE)	
 464:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case BEFORE_FAULT_STEP:	
 465:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 466:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if (FLT_BFC_End_Status())	
 467:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{	
 468:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 469:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 470:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_ifGoToFaultStatus(config);
 471:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 472:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_ifGoToFaultStatus();
 473:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* (MULTI_COMPARTMENT_APPL == 1)*/
 474:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 475:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			
 476:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 477:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 478:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 479:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case WAIT_PREFAULT_RESET_STEP:
 480:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 481:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->step = PREFAULT_STEP;
 482:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			
 483:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( (config & THEREATTEMPTFLT_MASK) == 0 )
 484:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 485:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				#if (SW_TIMER_NORM_MODE	== FALSE) 
 486:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				   Set_MediumCounter((SWTC_CountersType)counterIndex, (SWTC_PrescalerType)(config & FLT_PRESCAL
 487:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				#else
 488:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				  Set_DownCounter(MEDIUM_COUNTER, (SWTC_CountersType) counterIndex, (SWTC_PrescalerType)(config
 489:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				#endif  
 490:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 491:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			else
 492:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 493:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Fault gestito mediante tentativi: viene azzerato il contatore usato per i tentativi.	*/
 494:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 495:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 496:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Solo per pulizia, perchè comunque il timer non viene utilizzato */
 497:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Stop((SWTC_CountersType) counterIndex);
 498:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 499:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 500:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 501:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 502:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 503:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		default:
 504:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 505:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Include FLT_IDLE_STEP, FAULT_STEP */
 506:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 507:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 508:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
 509:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 510:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 511:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*
 512:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	Test per esecuzione azioni di sicurezza: va effettuato qui, e non in uno specifico case del switch
 513:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	è eseguito sin dalla prima iterazione in cui si la macchina a stati è in fault, e non dalla succ
 514:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	Infatti se succedesse che nell'iterazione successiva la macchina a stati non fosse più chiamata p
 515:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	della condizione di guasto, si resterebbe in una situazione in cui la macchina a stati è in fault
 516:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	è in fault, ma le azioni di sicurezza non sono eseguite.
 517:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	*/
 518:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( pFaultmgmt_Data->step == FAULT_STEP )
 519:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 520:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if (TESTBIT(config, FLT_SAFETY_ACTION_BIT))
 521:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 522:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_safetyBitmapStandard();
 523:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 524:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_SafetyBitmap_Cstm_Exclusion(compartment);
 525:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 526:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_SafetyBitmap_Cstm_Exclusion();
 527:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 528:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 529:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 530:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 531:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 532:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 533:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 534:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 535:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Decide e gestisce il passaggio allo stato di FAULT.
 536:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 537:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in]/[out]	
 538:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out] 	
 539:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 540:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		
 541:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		
 542:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 543:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 544:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 545:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 546:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			16/12/2011
 547:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Claudio Fontana
 548:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 549:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 550:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** note: nel caso della doppia cavità gestire bene il current fault e la macchina a stati.
 551:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 552:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 553:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 554:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 555:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_ifGoToFaultStatus (uint8_t config)
 556:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 557:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment= (config & COMP_MASK)>>COMP_MASK_NUM_RIGHT_SHIFT;
 558:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_faultUpdateStep((uint8_t)FAULT_STEP, compartment );
 559:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	ApplCurrentFault[compartment].faultCodes = FaultMgmt_Data[compartment].faultCodes;
 560:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 561:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 562:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_ifGoToFaultStatus(void)
 563:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 564:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_faultUpdateStep((uint8_t)FAULT_STEP);
 565:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 566:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	ApplCurrentFault[0].faultCodes = FaultMgmt_Data[0].faultCodes;
 567:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 568:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* (MULTI_COMPARTMENT_APPL == 1) */
 569:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 570:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Gestisce la procedura di reset dallo stato di Prefault.
 571:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 572:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in]/[out]	FaultMgmt_Data, ApplCurrentFault 	
 573:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out] 	
 574:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 575:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 576:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning		
 577:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 578:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 579:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 580:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 581:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			25/09/2006
 582:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 583:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 584:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 585:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_prefaultResetManagement(uint16_t config)
 586:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 587:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 588:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 589:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment = (uint8_t)((config >> COMPARTMENT_DISPLACEMENT) & 0x03);
 590:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 591:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment =0;
 592:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 593:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 594:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** FaultMgmt_Data_Struct *pFaultmgmt_Data= &FaultMgmt_Data[compartment];
 595:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Fault_Compl_Struct *pCurrentFault = &ApplCurrentFault[compartment];
 596:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** SWTC_CountersType counterIndex = MAIN_FAULT_MGMT_COUNTER_M + compartment;
 597:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 598:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	pFaultmgmt_Data->stepChanged = FALSE;
 599:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 600:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	switch (pFaultmgmt_Data->step)
 601:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 602:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
 603:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case WAIT_PREFAULT_RESET_STEP:
 604:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* EA prevedere il reset del fault della singola cavità in caso di più compartment */
 605:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SWTC_Run((SWTC_CountersType)counterIndex);
 606:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			
 607:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( ! SWTC_IsExpired((SWTC_CountersType)counterIndex) )
 608:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 609:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				break;
 610:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}	
 611:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 612:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/*lint -fallthrough : i due case si possono accorpare */
 613:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case ALARM_FLAG_STEP:
 614:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case PREFAULT_WAIT_STEP:
 615:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			
 616:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Se non ho ancora raggiunto lo stato di prefault la procedura di reset viene
 617:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			   eseguita subito */
 618:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 619:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 620:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			Se c'è un prefault attivo lo resetto comunque, anche se la procedura di reset
 621:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			è relativa ad un guasto diverso da quello che ha portato al prefault.
 622:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 623:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pCurrentFault->prefaultCodes = No_Fault;
 624:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 625:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if defined(FAULT_ARE_RESTORABLE)
 626:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( config  & FAULT_RECOVERY_MASK)
 627:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 628:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)			
 629:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if(FLT_checkForCurrentFault(pCurrentFault->faultCodes.code, pCurrentFault->faultCodes.subCode, 
 630:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 631:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_applCurrentFaultReset(compartment);
 632:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 633:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 634:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if (FLT_checkForCurrentFault( pCurrentFault->faultCodes.code, pCurrentFault->faultCodes.subCode
 635:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 636:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_applCurrentFaultReset();
 637:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 638:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif				
 639:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 640:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* defined(FAULT_ARE_RESTORABLE) */
 641:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 642:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_faultMgmtDataReset(compartment);
 643:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 644:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_faultMgmtDataReset();
 645:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /*if (MULTI_COMPARTMENT_APPL == 1)            */
 646:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 647:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->stepChanged = TRUE;
 648:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 649:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if(pCurrentFault->faultCodes.code != CODE_NO_FAULT)
 650:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 651:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/*
 652:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				Se c'è un fault attivo, vengono ripristinati i suoi codici (sono il riferimento nel caso
 653:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				intervenissero nuovi guasti) e lo step.
 654:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 655:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				Va ripresa la priorità del fault reale ma non di quello virtuale altrimenti verrebbero
 656:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				mascherati tutti i faults meno prioritari mentre la macchina sta ancora funzionando
 657:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				*/
 658:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pFaultmgmt_Data->faultCodes = pCurrentFault->faultCodes ;
 659:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 660:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pFaultmgmt_Data->step = FAULT_STEP;
 661:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 662:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			else
 663:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{/* reset bitmap per routine di sicurezza in caso di Fault */
 664:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_safetyBitmapReset();
 665:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 666:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 667:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 668:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 669:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if defined(FAULT_ARE_RESTORABLE)
 670:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case  FAULT_STEP:
 671:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( ( config  & FAULT_RECOVERY_MASK)==0)
 672:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{/* posso cancellare il fault anche quando sono già in fault. */
 673:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				break;
 674:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 675:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* defined(FAULT_ARE_RESTORABLE) */
 676:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 677:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case PREFAULT_STEP:
 678:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		case BEFORE_FAULT_STEP:	
 679:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 680:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Init Procedura di Reset */
 681:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			#if (SW_TIMER_NORM_MODE	== FALSE) 
 682:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  Set_MediumCounter((SWTC_CountersType)counterIndex, (SWTC_PrescalerType)COUNTERS2_TBASE_1SEC, (
 683:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			#else
 684:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  Set_DownCounter(MEDIUM_COUNTER, (SWTC_CountersType) counterIndex, (SWTC_PrescalerType)COUNTERS
 685:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			#endif  
 686:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							
 687:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->step = WAIT_PREFAULT_RESET_STEP;
 688:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 689:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		break;
 690:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				
 691:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 692:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		default:
 693:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 694:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Include FLT_IDLE_STEP e, se FAULT_ARE_RESTORABLE non è definita, FAULT_STEP */
 695:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			
 696:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			break;
 697:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 698:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 699:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 700:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 701:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 702:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 703:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 704:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 705:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 706:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Dichiara il fault per il file di setting.
 707:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 708:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out]	Fault (global)
 709:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 710:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****  
 711:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none.
 712:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 713:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 714:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date			02/10/2006
 715:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
 716:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 717:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_declareSettingFault(void)
 718:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 719:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment;
 720:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( FLT_checkForSettingFault() == FALSE )
 721:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{	/* Il fault file di setting non è ancora attivo */
 722:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/*
 723:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		MQ AN Perché chiamarla? Non viene chiamata quando scatta un fault, ma quando rientra (e non agis
 724:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		backuppate). Tra l'altro, anche nell'ipotesi che la macchina a stati dell'applicazione girasse an
 725:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		rilevazione di un fault ci pensa la chiamata a FLT_initFaultDetectProc() a resettare le variabili
 726:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*/
 727:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*	FLT_faultMgmtDataReset(); */
 728:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		for (compartment =0;compartment < APP_N_COMP; compartment++)
 729:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{		
 730:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 731:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* MQ AN Rivedere in base alle scelte sull'F09 */
 732:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].faultCodes.code = CODE_SETTING_FILE;
 733:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].faultCodes.subCode = SUBCODE_MAIN_BOARD_SETTING_FILE;
 734:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].prefaultCodes = No_Fault;
 735:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 736:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 737:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			Per coerenza viene aggiornata la macchina a stati, anche se con F09.01 attivo le routine
 738:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			di rilevazione guasti dell'applicazione non sono eseguite.
 739:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 740:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FaultMgmt_Data[compartment].step = FAULT_STEP;
 741:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FaultMgmt_Data[compartment].faultCodes = ApplCurrentFault[compartment].faultCodes;
 742:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 743:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* MQ AN Da verificare se è il caso si inserire qui il salvataggio dell'F09 nei Last fault */
 744:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 745:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 746:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			All'ingresso in FAULT viene resettato comunque il valore del delay e del numero di attivazioni d
 747:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			in un passo, per non ritrovare queste variabili sporche dopo un eventuale mancanza rete
 748:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 749:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* MQ AN Potrebbe non servire più, se l'F09.0x01 viene trattato come tutti gli altri fault e qu
 750:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)	
 751:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SPV_resetSensVariables(compartment);
 752:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
 753:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( TESTBIT(N_Application, FLAG_DOUBLE)==0)
 754:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 755:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				compartment=APP_N_COMP;
 756:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 757:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 758:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SPV_resetSensVariables(	);		
 759:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif			
 760:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 761:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 762:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 763:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**/
 764:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 765:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 766:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 767:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 768:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Controlla la priorità del fault ed eventualmente inizializza la procedura di rilevazione.
 769:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 770:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in]		code e subcode del fault da rilevare
 771:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in/out]	aggiorna la macchina a stati FaultMgmt_Data se il fault è prioritario
 772:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 773:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		none
 774:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 775:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 776:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date
 777:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Emanuela Antognoli
 778:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 779:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 780:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 781:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_manageFault( uint8_t code, uint8_t subcode, uint8_t compartment)
 782:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 783:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_manageFault( uint8_t code, uint8_t subcode)
 784:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* (MULTI_COMPARTMENT_APPL == 1)*/
 785:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 786:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Timeout_struct time_data = {0, 0, 0};
 787:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 788:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
 789:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****   uint8_t compartment = 0;
 790:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* (MULTI_COMPARTMENT_APPL == 0) */  
 791:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Fault_Compl_Struct *pCurrentFault= &ApplCurrentFault[compartment];
 792:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 793:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*lint -save -e960 */ /* There are not side effects */
 794:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( pCurrentFault->faultCodes.code == CODE_NO_FAULT )
 795:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		||
 796:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		( LIB_SEF_GetFaultToDisplay((bool_t)TRUE, pCurrentFault->faultCodes.code, pCurrentFault->faultCod
 797:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*lint -restore */
 798:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	  )
 799:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 800:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/*
 801:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		Non è presente un fault di applicazione o ne è presente uno di quelli che NON vanno visualizzat
 802:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		valutare l'ingresso nella macchina a stati di un nuovo fault.
 803:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*/
 804:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 805:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		FLT_checkFltStateMachineRestart( code,subcode, compartment);
 806:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 807:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		FLT_checkFltStateMachineRestart( code,subcode);
 808:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /*(MULTI_COMPARTMENT_APPL == 1)*/
 809:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 810:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 811:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else
 812:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 813:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/*
 814:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		Se è presente un fault di applicazione di quelli che vanno visualizzati nessun altro fault di ap
 815:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		può entrare nella macchina a stati. La sicurezza è comunque garantita dalla piattaforma, e si e
 816:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		fault da non visualizzare a priorità maggiore possa soppiantare un fault da visualizzare, facend
 817:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		la macchina dallo stato di FAULT.
 818:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*/
 819:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 820:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 821:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( FLT_checkForCurrentFault( code, subcode, compartment) )
 822:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 823:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( FLT_checkForCurrentFault( code, subcode) )
 824:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif	
 825:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 826:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 827:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		time_data.config |= (compartment << COMP_MASK_NUM_RIGHT_SHIFT);
 828:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 829:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if(FLT_getTimeout(code, subcode, &time_data))
 830:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 831:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 832:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			A questo punto in time_data.config c'è l'indicazione del prescaler, se ci sono i tentativi e se
 833:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			sono richieste le azioni di sicurezza standard in FAULT.
 834:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 835:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_prefaultFaultStateManagement(time_data.prefaultTime, time_data.faultTime,time_data.config);
 836:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 837:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		else
 838:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 839:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 840:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			Questo caso in realtà non può accadere. Se un fault occupa la macchina a stati vuol dire che q
 841:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			è verificato valeva una delle due seguenti condizioni:
 842:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			- aveva priorità maggiore del fault corrente in quel momento.
 843:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			- aveva priorità uguale a quella del fault corrente in quel momento, ma gli è subentrato perch
 844:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  di prefault minore.
 845:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			In entrambi i casi, all'interno di FLT_checkFltStateMachineRestart(), la funzione la funzione FL
 846:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			deve avere restituito OK, quindi FLT_getTimeout() restituisce OK con i codici correnti.
 847:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 848:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 849:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 850:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 851:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 852:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 853:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Controlla se il fault in esecuzione ha priorità maggiore di quello in ingresso
 854:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** o se ci vuole meno tempo per rilevarlo, SOLO se non si è già in prefault (hottima style).
 855:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 856:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** In questo caso aggiorna il il fault corrente da analizzare e re-inizializza la procedura di rilevaz
 857:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 858:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	code subcode
 859:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out]	FaultMgmt_Data-> STATO ALARM
 860:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 861:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		noone
 862:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning
 863:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 864:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:
 865:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 866:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
 867:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date 			31/01/2013
 868:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Emanuela Antognoli
 869:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
 870:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 871:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_checkFltStateMachineRestart( uint8_t code, uint8_t subcode, uint8_t compartment)
 872:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else	
 873:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_checkFltStateMachineRestart( uint8_t code, uint8_t subcode)
 874:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 875:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 876:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t faultPriority,currPriorityMonitor;
 877:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Timeout_struct time_Data;
 878:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint16_t currCodeTimeout;
 879:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 880:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL ==0)
 881:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment = 0;
 882:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 883:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** FaultMgmt_Data_Struct *pFaultmgmt_Data= &FaultMgmt_Data[compartment];
 884:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 885:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if (LIB_SEF_GetFaultPriority((bool_t)TRUE,code,subcode, &faultPriority) != SF_OK)
 886:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 887:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		faultPriority =0;
 888:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 889:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	faultPriority=LIB_SEF_FaultPriorityField(faultPriority);
 890:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 891:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if (pFaultmgmt_Data->faultCodes.code!=0)
 892:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 893:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if (LIB_SEF_GetFaultPriority((bool_t)TRUE,pFaultmgmt_Data->faultCodes.code,pFaultmgmt_Data->fault
 894:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 895:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			currPriorityMonitor =0;
 896:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 897:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		currPriorityMonitor=LIB_SEF_FaultPriorityField(currPriorityMonitor);
 898:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 899:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else
 900:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 901:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		currPriorityMonitor=0;
 902:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 903:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 904:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if ( faultPriority > currPriorityMonitor )
 905:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 906:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* La priorità del fault da dichiarare è maggiore di quella del fault eventualmente già presen
 907:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 908:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if(FLT_getTimeout(code, subcode, &time_Data))
 909:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 910:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 911:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			In questo caso la funzione FLT_getTimeout() viene chiamata solo per verificare che il timeout
 912:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			del nuovo fault sia gestito.
 913:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 914:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->faultCodes.code = code;
 915:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->faultCodes.subCode = subcode;
 916:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*imposta la macchina a stati dei Fault in ALARM, non è un prefault.*/
 917:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
 918:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_initFaultDetectProc(compartment);
 919:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 920:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_initFaultDetectProc();
 921:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
 922:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 923:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		else
 924:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 925:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/*
 926:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			Codice/sottocodice del nuovo fault non previsti nella funzione FLT_getTimeout(),
 927:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			il nuovo fault non può entrare nella macchina a stati.
 928:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			*/
 929:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 930:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
 931:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else
 932:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
 933:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if ( faultPriority == currPriorityMonitor )
 934:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
 935:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* se la priorità del fault è uguale a quello analizzato si controllano i timeout */
 936:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( ( pFaultmgmt_Data->step <= PREFAULT_WAIT_STEP) &&
 937:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				 (pFaultmgmt_Data->faultCodes.subCode!= subcode) &&
 938:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				 (pFaultmgmt_Data->faultCodes.code!= code) )
 939:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
 940:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* non siamo ancora nello stato di prefault */
 941:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 942:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				currCodeTimeout=0;
 943:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 944:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if (pFaultmgmt_Data->faultCodes.code != CODE_NO_FAULT)
 945:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 946:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if(FLT_getTimeout(pFaultmgmt_Data->faultCodes.code,pFaultmgmt_Data->faultCodes.subCode, &time_
 947:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
 948:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						currCodeTimeout=time_Data.prefaultTime;
 949:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
 950:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					else
 951:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
 952:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						/*
 953:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						Questo caso in realtà non può accadere. Se un fault occupa la macchina a stati vuol dire ch
 954:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						è verificato valeva una delle due seguenti condizioni:
 955:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						- aveva priorità maggiore del fault corrente in quel momento.
 956:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						- aveva priorità uguale a quella del fault corrente in quel momento, ma gli è subentrato pe
 957:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						  di prefault minore.
 958:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						In entrambi la funzione la funzione FLT_getTimeout() deve avere restituito OK, quindi FLT_get
 959:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						restituisce OK con i codici pFaultmgmt_Data->faultCodes.
 960:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						*/
 961:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
 962:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 963:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 964:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( FLT_getTimeout( code, subcode,&time_Data) )
 965:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 966:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if (time_Data.prefaultTime < currCodeTimeout)
 967:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
 968:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						pFaultmgmt_Data->faultCodes.code = code;
 969:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						pFaultmgmt_Data->faultCodes.subCode = subcode;
 970:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						/*imposta la macchina a stati dei Fault in ALARM, non è un prefault.*/
 971:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)	
 972:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						FLT_initFaultDetectProc(compartment);
 973:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
 974:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						FLT_initFaultDetectProc();
 975:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /*(MULTI_COMPARTMENT_APPL == 1)*/
 976:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
 977:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 978:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				else
 979:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
 980:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					/*
 981:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					Codice/sottocodice del nuovo non fault previsti nella funzione FLT_getTimeout(),
 982:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					il nuovo fault non può subentrare nella macchina a stati.
 983:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					*/
 984:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
 985:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
 986:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
 987:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}/* end else*/
 988:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 989:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 990:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 991:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
 992:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Verifica se le risorse per la rilevazione fault sono allocate per il fault in oggetto.
 993:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 994:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in]		FaultMgmt_Data (global)
 995:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 996:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 997:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return 		TRUE/FALSE.
 998:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
 999:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version		1.0.0
1000:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date			14/01/2010
1001:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Emanuela Antongnoli
1002:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1003:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1004:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1005:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** bool_t FLT_checkForCurrentFault(uint8_t code, uint8_t subcode, uint8_t compartment)
1006:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1007:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** bool_t FLT_checkForCurrentFault(uint8_t code, uint8_t subcode)
1008:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* (MULTI_COMPARTMENT_APPL == 1) */
1009:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
1010:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
1011:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment=0;
1012:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1013:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** FaultMgmt_Data_Struct *pFaultmgmt_Data= &FaultMgmt_Data[compartment];
1014:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1015:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1016:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if(	( pFaultmgmt_Data->faultCodes.subCode == subcode) &&
1017:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		( pFaultmgmt_Data->faultCodes.code== code) )
1018:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1019:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		return TRUE;
1020:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1021:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****     else
1022:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****     {
1023:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****     	return FALSE;
1024:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****     }
1025:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
1026:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1027:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1028:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1029:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1030:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_ResetFaultDetectProc(uint8_t code, uint8_t subcode, uint16_t reset_config)
1031:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
1032:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1033:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if(FLT_checkForCurrentFault(code, subcode, ((reset_config >> COMPARTMENT_DISPLACEMENT) & 0x03)))
1034:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1035:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if ( FLT_checkForCurrentFault( code,  subcode))
1036:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif		
1037:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{ /* si sta analizzando il fault corrente*/
1038:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
1039:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		 FLT_prefaultResetManagement(reset_config );
1040:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1041:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else 
1042:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1043:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* do nothing */
1044:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1045:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
1046:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1047:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
1048:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Richiede alla piattaforma il suo stato di fault, aggiorna le statistiche relative ai prefault di pi
1049:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** aggiorna PltFaultCodes. Aggiorna lo stato del WARNING DOOR sulla base del consistency del blocco po
1050:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1051:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return		void
1052:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1053:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \retval 	none
1054:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1055:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning	none
1056:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1057:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version	1.0.0
1058:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date		14/02/2013
1059:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author		Marco Quintini
1060:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1061:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \bug		none
1062:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1063:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \todo		nothing
1064:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1065:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \note		none
1066:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1067:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_updatePlatformFaultStatus(void)
1068:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
1069:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t moduleIndex;
1070:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t i=0;
1071:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** sft_module_faults_t moduleSafetyStatus;
1072:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1073:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* Loop di ricerca di eventuali nuovi prefault di sicurezza */
1074:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	for(moduleIndex = 0; moduleIndex < SFT_NUM_SAFETY_MODULES; moduleIndex++ )
1075:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1076:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if( LIB_SFT_GetSafetyModFaultStatus(moduleIndex, &moduleSafetyStatus) == 0 )
1077:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
1078:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1079:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( ( ( moduleSafetyStatus.status & SFT_FAULTS_STATUS_MASK ) == SFT_MODULE_PREFAULT )
1080:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				&&
1081:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				( ( moduleSafetyStatus.status & SFT_FAULT_STATUS_CHANGED_MASK ) != 0 )
1082:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				&&
1083:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				( moduleSafetyStatus.fault.code != CODE_NO_FAULT ) /* Dovrebbe essere un controllo superfluo se
1084:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				)
1085:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
1086:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Nuovo prefault di piattaforma */
1087:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1088:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Salvataggio codici di prefault per le statistiche del ciclo di collaudo */
1089:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #ifndef _NO_STC_TESTCYCLE_				
1090:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = moduleSafetyStatus.fault;
1091:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1092:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1093:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				for(i = 0; i < APP_N_COMP; i++)
1094:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif						
1095:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
1096:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					/* Aggiornamento buffer Last Prefault */
1097:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1098:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_lastFaultUpdate(moduleSafetyStatus.fault, &MachineStatistics.lastPreFault[i][0]);
1099:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1100:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_lastFaultUpdate(moduleSafetyStatus.fault, &MachineStatistics.lastPreFault[0]);
1101:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif					
1102:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #ifdef _STATISTICS_ON_
1103:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					/* Salvataggio dati nella Black Box (se non c'è già un fault di applicazione o di piattaform
1104:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if( (ApplCurrentFault[i].faultCodes.code == CODE_NO_FAULT) && (PltFaultCodes.code == CODE_NO_F
1105:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
1106:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1107:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						STC_saveBlackBoxData( moduleSafetyStatus.fault,i);
1108:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1109:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						STC_saveBlackBoxData(moduleSafetyStatus.fault);
1110:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif					
1111:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
1112:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1113:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1114:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if(TESTBIT(N_Application, FLAG_DOUBLE) == 0)
1115:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
1116:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						i = APP_N_COMP;
1117:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
1118:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif				
1119:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
1120:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
1121:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1122:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Salvataggio stato PEC nella variabile globale */
1123:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FltSafetyModuleStatus[moduleIndex] = moduleSafetyStatus;
1124:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
1125:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1126:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1127:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	LIB_SFT_GetOverallFaultStatus(&moduleSafetyStatus);
1128:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1129:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( moduleSafetyStatus.status & SFT_FAULTS_STATUS_MASK ) == SFT_MODULE_FAULT )
1130:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1131:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		PltFaultCodes = moduleSafetyStatus.fault;
1132:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1133:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else
1134:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1135:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		PltFaultCodes = No_Fault;
1136:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1137:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1138:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* Azzera le notifiche di variazione di stato dei moduli di sicurezza */
1139:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	LIB_SFT_ResetStatusChangeNotification();
1140:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
1141:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1142:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1143:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
1144:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Aggiorna il codice di fault globale della macchina
1145:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1146:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return		void
1147:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1148:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \retval 	none
1149:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1150:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning	none
1151:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1152:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version	1.0.0
1153:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date		18/02/2013
1154:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author		Marco Quintini
1155:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1156:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \bug		none
1157:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1158:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \todo		nothing
1159:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1160:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \note		none
1161:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1162:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1163:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_updateGlobalFaultCode(uint8_t compartment)
1164:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1165:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_updateGlobalFaultCode(void)
1166:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1167:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
1168:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)
1169:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment = 0;
1170:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1171:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** sft_fault_codes_t *pCurrentFault = &CurrentFault[compartment] ;	
1172:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Fault_Compl_Struct *pApplCurrentFault= &ApplCurrentFault[compartment];
1173:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1174:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1175:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( PltFaultCodes.code != CODE_NO_FAULT )
1176:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1177:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*pCurrentFault = PltFaultCodes;
1178:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* MQ AN Prevedere anche per i fault di Plat la possibilità di non essere visualizzati? */
1179:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1180:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*lint -save -e960 */ /* There are not side effects */
1181:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else if ( (pApplCurrentFault->faultCodes.code != CODE_NO_FAULT )
1182:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  &&
1183:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  ( LIB_SEF_GetFaultToDisplay((bool_t)TRUE, pApplCurrentFault->faultCodes.code, pApplCurrentFaul
1184:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			 )
1185:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*lint -restore */
1186:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1187:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* C'è un fault di applicazione e deve essere visualizzato */
1188:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*pCurrentFault = pApplCurrentFault->faultCodes;
1189:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1190:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else
1191:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1192:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*pCurrentFault = No_Fault;
1193:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1194:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
1195:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1196:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1197:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
1198:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Confronta i codici di fault all'iterazione precedente con quelli attuali e nel caso sia intervenuto
1199:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** lo salva nei Last Fault ed aggiorna l'evento della Black Box.
1200:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1201:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] previousFaultCodes sono codice e sottocodice all'iterazione precedente
1202:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] currentFaultCodes sono codice e sottocodice all'iterazione corrente
1203:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1204:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return		void
1205:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1206:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \retval 	none
1207:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1208:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning	none
1209:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1210:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version	1.0.0
1211:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date		20/02/2013
1212:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author		Marco Quintini
1213:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1214:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \bug		none
1215:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1216:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \todo		nothing
1217:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1218:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \note		none
1219:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1220:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1221:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_updateFaultStatistics(sft_fault_codes_t previousFaultCodes, sft_fault_codes_t curre
1222:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1223:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void FLT_updateFaultStatistics(sft_fault_codes_t previousFaultCodes, sft_fault_codes_t curre
1224:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif 
1225:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 115                             		.loc 1 1225 0
 116                             	.LVL14:
 117 0000 6E 7C                   		pushm	r7-r12
 118                             	.LCFI1:
 119 0002 60 80                   		sub	#8, r0
 120                             	.LCFI2:
 121                             		.loc 1 1225 0
 122 0004 75 47 24                		mov.L	#36, r7
 123 0007 4B 07                   		add	r0, r7
 124 0009 DD 7A 01                		mov.W	2[r7], r10
1226:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t i;
1227:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t matchFound =0;
1228:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1229:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( previousFaultCodes.code != currentFaultCodes.code ) || ( previousFaultCodes.subCode != curre
 125                             		.loc 1 1229 0
 126 000c 58 74                   		movu.B	[r7], r4
 127 000e 5F AC                   		movu.W	r10, r12
 128                             	.LVL15:
 129 0010 68 8C                   		shlr	#8, r12
 130                             	.LVL16:
 131 0012 DC 7E                   		mov.W	[r7], r14
 132 0014 5B C7                   		movu.B	r12, r7
 133 0016 47 74                   		cmp	r7, r4
 134                             	.LVL17:
 135 0018 CF AB                   		mov.B	r10, r11
 136                             	.LVL18:
 137 001a 21 0A                   		bne	.L10
 138                             		.loc 1 1229 0 is_stmt 0 discriminator 1
 139 001c 5B A4                   		movu.B	r10, r4
 140 001e 5B EE                   		movu.B	r14, r14
 141                             	.LVL19:
 142 0020 47 E4                   		cmp	r14, r4
 143                             	.LVL20:
 144 0022 20 4A                   		beq	.L9
 145                             	.LVL21:
 146                             		.balign 2,3,1
 147                             	.L10:
1230:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1231:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if( currentFaultCodes.code != CODE_NO_FAULT )
 148                             		.loc 1 1231 0 is_stmt 1
 149 0024 61 07                   		cmp	#0, r7
 150 0026 20 46                   		beq	.L9
1232:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
1233:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Nuovo fault */
1234:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1235:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			/* Aggiornamento Last Fault */
1236:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( SPV_isAutotestRunning() == FALSE )
 151                             		.loc 1 1236 0
 152 0028 05 00 00 00             		bsr	_SPV_isAutotestRunning
 153                             	.LVL22:
 154 002c 61 01                   		cmp	#0, r1
 155 002e 21 0E                   		bne	.L12
 156                             	.LVL23:
1237:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
1238:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				/* Non è in corso l'Autotest (i fault che si verificano in Autotest non devono essere salvati 
1239:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1240:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_lastFaultUpdate(currentFaultCodes, &MachineStatistics.lastFault[compartment][0]);
1241:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else	
1242:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_lastFaultUpdate(currentFaultCodes, &MachineStatistics.lastFault[0]);
 157                             		.loc 1 1242 0
 158 0030 D3 0A                   		mov.W	r10, [r0]
 159 0032 FB 22 00 00 00 00       		mov.L	#_MachineStatistics+266, r2
 160 0038 05 00 00 00             		bsr	_FLT_lastFaultUpdate
 161                             	.LVL24:
 162                             		.balign 2,3,5
 163                             	.L12:
1243:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1244:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
1245:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1246:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #ifdef _STATISTICS_ON_
1247:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* Aggiornamento evento Black Box */
1248:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1249:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			matchFound=(compartment & STC_BB_COMP_MASK);						
1250:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1251:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			for(i = 0; i < SIZE(MachineStatistics.blackBox_Data); i++)
1252:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			{
1253:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( MachineStatistics.blackBox_Data[i].event == BB_EVENT_PREFAULT )
 164                             		.loc 1 1253 0 discriminator 1
 165 003c FB E2 00 00 00 00       		mov.L	#_MachineStatistics, r14
 166 0042 5A EA 36 01             		movu.B	310[r14], r10
 167                             	.LVL25:
 168 0046 EF E7                   		mov.L	r14, r7
 169 0048 61 0A                   		cmp	#0, r10
 170 004a 21 22                   		bne	.L9
1254:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
1255:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					/*
1256:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					La Black Box è in "stato di prefault": se è in stato di fault vuol dire che si è già passa
1257:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					un aggiornamento, quindi non viene sovrascritta.
1258:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					*/
1259:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if( (matchFound && STC_BB_MATCHFOUND_MASK ) == FALSE )
1260:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
1261:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						if( ( MachineStatistics.blackBox_Data[i].faultCodes.code == currentFaultCodes.code )
 171                             		.loc 1 1261 0
 172 004c 5A EA 37 01             		movu.B	311[r14], r10
 173 0050 5B CC                   		movu.B	r12, r12
 174                             	.LVL26:
 175 0052 47 CA                   		cmp	r12, r10
 176 0054 21 13                   		bne	.L14
1262:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							&&
 177                             		.loc 1 1262 0
 178 0056 5A EA 38 01             		movu.B	312[r14], r10
 179 005a 5B BB                   		movu.B	r11, r11
 180 005c 47 BA                   		cmp	r11, r10
 181 005e 21 09                   		bne	.L14
 182                             	.LVL27:
 183                             	.LBB14:
 184                             	.LBB15:
1263:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							( MachineStatistics.blackBox_Data[i].faultCodes.subCode == currentFaultCodes.subCode )
1264:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						  )
1265:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						{
1266:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							/* Il codice e sottocodice di prefault salvati nella Black Box coincidono con quelli del fau
1267:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1268:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							/*
1269:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							Per come è scritto il ciclo for, nel caso ci fossero più eventi salvati il cui codice e so
1270:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							con quelli del fault corrente e tutti in stato di prefault, viene aggiornato considerato com
1271:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							l'evento più recente (MachineStatistics.blackBox_Data[i] è più recente di MachineStatisti
1272:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							*/
1273:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 							matchFound|= STC_BB_MATCHFOUND_MASK;
1274:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						}
1275:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1276:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						STC_updateBlackBoxEvent(i, matchFound);
1277:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
1278:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					else
1279:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					{
1280:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						STC_updateBlackBoxEvent(i, ( matchFound & STC_BB_COMP_MASK) );
1281:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					}
1282:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
1283:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				else
1284:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				{
1285:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					/* Stato Black Box != prefault: la Black Box viene lasciata invariata */
1286:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				}
1287:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			}
1288:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif /* _STATISTICS_ON_ */
1289:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1290:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
1291:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1292:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
1293:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1294:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1295:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
1296:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Gestisce lo stato globale di fault della macchina e le relative statistiche (Last Fault, Black Box)
1297:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1298:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return		void
1299:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1300:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \retval 	none
1301:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1302:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \warning	none
1303:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1304:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version	1.0.0
1305:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date		20/02/2013
1306:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author		Marco Quintini
1307:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1308:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \bug		none
1309:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1310:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \todo		nothing
1311:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1312:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \note		none
1313:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1314:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_manageGlobalFaultStatus(void)
1315:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
1316:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** uint8_t compartment = 0;
1317:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static sft_fault_codes_t previousPltFaultCodes = { CODE_NO_FAULT, SUBCODE_NO_FAULT };
1318:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1319:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 0)	
1320:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static sft_fault_codes_t previousApplFaultCodes = { CODE_NO_FAULT, SUBCODE_NO_FAULT };
1321:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1322:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1323:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* Aggiornamento codice fault globale */
1324:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)	
1325:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	for (compartment =0;compartment < APP_N_COMP; compartment++)
1326:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1327:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		FLT_updateGlobalFaultCode(compartment);
1328:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else
1329:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateGlobalFaultCode();
1330:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1331:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/*
1332:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	MQ AN Per non salvare nei Last Fault i fault di applicazione che non diventano attivi, rivedere le
1333:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	seguenti limitandole ai fault di applicazione che non vanno visualizzati e ai fault globali.
1334:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	Per l'evento della Black Box non dovrebbe essere un problema lasciare fuori i fault di applicazion
1335:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	perché se non sono attivi è perché c'è già un fault di piattaforma, e quindi la Black Box è 
1336:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	*/
1337:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* Aggiornamento Last Fault e Black Box fault applicazione */
1338:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
1339:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1340:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		FLT_updateFaultStatistics(previousApplFaultCodes[compartment], ApplCurrentFault[compartment].faul
1341:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		/* Aggiornamento Last Fault e Black Box fault piattaforma */
1342:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		FLT_updateFaultStatistics(previousPltFaultCodes, PltFaultCodes, compartment);
1343:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		previousApplFaultCodes[compartment] = ApplCurrentFault[compartment].faultCodes;
1344:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #else	
1345:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousApplFaultCodes, ApplCurrentFault[compartment].faultCodes);
1346:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	/* Aggiornamento Last Fault e Black Box fault piattaforma */
1347:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousPltFaultCodes, PltFaultCodes);
1348:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1349:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
1350:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
1351:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1352:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if ( TESTBIT(N_Application, FLAG_DOUBLE)==0){
1353:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				compartment=APP_N_COMP;
1354:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}
1355:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}/* parentesi del for*/
1356:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif			
1357:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	
1358:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	previousPltFaultCodes = PltFaultCodes;
1359:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
1360:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1361:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1362:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1363:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1364:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
1365:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Aggiorna il campo event della struttura MachineStatistics.blackBox_Data, per indicare
1366:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** che il prefault in corrispondenza del quale sono stati salvati i dati è degenerato
1367:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** in un fault.
1368:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1369:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	
1370:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out]	
1371:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	 
1372:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return     	none
1373:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1374:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:			
1375:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1376:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
1377:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date   		04/07/2007
1378:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version    	1.0.0
1379:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1380:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1381:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** /**
1382:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Aggiorna il campo event della struttura MachineStatistics.blackBox_Data, per indicare
1383:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** che il prefault in corrispondenza del quale sono stati salvati i dati è degenerato
1384:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** in un fault.
1385:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1386:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [in] 	
1387:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \param [out]	
1388:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	 
1389:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \return     	none
1390:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1391:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \notes:			
1392:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1393:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \author			Marco Quintini
1394:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \date   		04/07/2007
1395:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** \version    	1.0.0
1396:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 
1397:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** */
1398:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** static void STC_updateBlackBoxEvent(uint8_t bbIndex, uint8_t  codesMatch)
1399:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
1400:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( codesMatch && STC_BB_MATCHFOUND_MASK )
1401:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1402:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #if (MULTI_COMPARTMENT_APPL == 1)
1403:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if ( MachineStatistics.blackBox_Data[bbIndex].cycle_ref== (codesMatch & STC_BB_COMP_MASK))
1404:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** #endif
1405:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		{
1406:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			MachineStatistics.blackBox_Data[bbIndex].event = BB_EVENT_FAULT_MATCH;
 185                             		.loc 1 1406 0
 186 0060 FA E4 36 01 01          		mov.B	#1, 310[r14]
 187 0065 2E 07                   		bra	.L9
 188                             	.LVL28:
 189                             	.L14:
1407:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		}		
1408:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		
1409:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	}
1410:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else
1411:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	{
1412:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		MachineStatistics.blackBox_Data[bbIndex].event = BB_EVENT_FAULT_NOT_MATCH;
 190                             		.loc 1 1412 0
 191 0067 FA 74 36 01 02          		mov.B	#2, 310[r7]
 192                             	.LVL29:
 193                             		.balign 2,3,2
 194                             	.L9:
 195                             	.LBE15:
 196                             	.LBE14:
1292:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 197                             		.loc 1 1292 0
 198 006c 3F 7C 08                		rtsd	#32, r7-r12
 199                             	.LFE15:
 201 006f 03                      		.section	.text.FLT_declareSettingFault,"ax",@progbits
 202                             		.global	_FLT_declareSettingFault
 204                             	_FLT_declareSettingFault:
 205                             	.LFB8:
 718:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 206                             		.loc 1 718 0
 720:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( FLT_checkForSettingFault() == FALSE )
 207                             		.loc 1 720 0
 208 0000 05 00 00 00             		bsr	_FLT_checkForSettingFault
 209                             	.LVL30:
 210 0004 61 01                   		cmp	#0, r1
 211 0006 21 31                   		bne	.L20
 734:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].prefaultCodes = No_Fault;
 212                             		.loc 1 734 0 discriminator 2
 213 0008 FB 42 00 00 00 00       		mov.L	#_No_Fault, r4
 214 000e DC 44                   		mov.W	[r4], r4
 732:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].faultCodes.code = CODE_SETTING_FILE;
 215                             		.loc 1 732 0 discriminator 2
 216 0010 FB E2 00 00 00 00       		mov.L	#_ApplCurrentFault, r14
 734:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].prefaultCodes = No_Fault;
 217                             		.loc 1 734 0 discriminator 2
 218 0016 D7 E4 01                		mov.W	r4, 2[r14]
 732:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].faultCodes.code = CODE_SETTING_FILE;
 219                             		.loc 1 732 0 discriminator 2
 220 0019 F8 E4 09                		mov.B	#9, [r14]
 733:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			ApplCurrentFault[compartment].faultCodes.subCode = SUBCODE_MAIN_BOARD_SETTING_FILE;
 221                             		.loc 1 733 0 discriminator 2
 222 001c F9 E4 01 01             		mov.B	#1, 1[r14]
 740:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FaultMgmt_Data[compartment].step = FAULT_STEP;
 223                             		.loc 1 740 0 discriminator 2
 224 0020 FB 42 00 00 00 00       		mov.L	#_FaultMgmt_Data, r4
 225 0026 88 C3                   		mov.B	2[r4], r3
 226 0028 75 23 80                		and	#0xffffff80, r3
 227 002b 65 43                   		or	#4, r3
 228 002d 80 C3                   		mov.B	r3, 2[r4]
 741:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FaultMgmt_Data[compartment].faultCodes = ApplCurrentFault[compartment].faultCodes;
 229                             		.loc 1 741 0 discriminator 2
 230 002f DC EE                   		mov.W	[r14], r14
 231 0031 D3 4E                   		mov.W	r14, [r4]
 758:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SPV_resetSensVariables(	);		
 232                             		.loc 1 758 0 discriminator 2
 233 0033 04 00 00 00             		bra	_SPV_resetSensVariables
 234                             	.LVL31:
 235                             	.L20:
 236 0037 02                      		rts
 237                             	.LFE8:
 239                             		.section	.text.FLT_checkForCurrentFault,"ax",@progbits
 240                             		.global	_FLT_checkForCurrentFault
 242                             	_FLT_checkForCurrentFault:
 243                             	.LFB11:
1009:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 244                             		.loc 1 1009 0
 245                             	.LVL32:
1016:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if(	( pFaultmgmt_Data->faultCodes.subCode == subcode) &&
 246                             		.loc 1 1016 0
 247 0000 FB E2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r14
 248 0006 59 E4 01                		movu.B	1[r14], r4
 249 0009 5B 22                   		movu.B	r2, r2
 250 000b 47 24                   		cmp	r2, r4
 251 000d 21 0C                   		bne	.L24
1016:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if(	( pFaultmgmt_Data->faultCodes.subCode == subcode) &&
 252                             		.loc 1 1016 0 is_stmt 0 discriminator 1
 253 000f 58 EE                   		movu.B	[r14], r14
 254 0011 5B 11                   		movu.B	r1, r1
1019:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		return TRUE;
 255                             		.loc 1 1019 0 is_stmt 1 discriminator 1
 256 0013 47 1E                   		cmp	r1, r14
 257 0015 FC DB 10                		sceq.L	r1
 258                             	.LVL33:
 259 0018 02                      		rts
 260                             	.LVL34:
 261                             	.L24:
1023:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c ****     	return FALSE;
 262                             		.loc 1 1023 0
 263 0019 66 01                   		mov.L	#0, r1
 264                             	.LVL35:
1025:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 265                             		.loc 1 1025 0
 266 001b 02                      		rts
 267                             	.LFE11:
 269                             		.section	.text.FLT_manageFault,"ax",@progbits
 270                             		.global	_FLT_manageFault
 272                             	_FLT_manageFault:
 273                             	.LFB9:
 785:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 274                             		.loc 1 785 0
 275                             	.LVL36:
 276 0000 6E 7C                   		pushm	r7-r12
 277                             	.LCFI3:
 794:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( pCurrentFault->faultCodes.code == CODE_NO_FAULT )
 278                             		.loc 1 794 0
 279 0002 FB B2 00 00 00 00       		mov.L	#_ApplCurrentFault, r11
 785:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 280                             		.loc 1 785 0
 281 0008 CF 27                   		mov.B	r2, r7
 794:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( pCurrentFault->faultCodes.code == CODE_NO_FAULT )
 282                             		.loc 1 794 0
 283 000a CC B2                   		mov.B	[r11], r2
 284                             	.LVL37:
 785:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 285                             		.loc 1 785 0
 286 000c 71 00 EC                		add	#-20, r0
 287                             	.LCFI4:
 794:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( pCurrentFault->faultCodes.code == CODE_NO_FAULT )
 288                             		.loc 1 794 0
 289 000f 5B 2C                   		movu.B	r2, r12
 786:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** Timeout_struct time_data = {0, 0, 0};
 290                             		.loc 1 786 0
 291 0011 3D 05 00                		mov.W	#0, 10[r0]
 292 0014 3D 06 00                		mov.W	#0, 12[r0]
 293 0017 3C 0E 00                		mov.B	#0, 14[r0]
 294                             	.LVL38:
 794:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( pCurrentFault->faultCodes.code == CODE_NO_FAULT )
 295                             		.loc 1 794 0
 296 001a 61 0C                   		cmp	#0, r12
 785:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 297                             		.loc 1 785 0
 298 001c CF 1A                   		mov.B	r1, r10
 794:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( pCurrentFault->faultCodes.code == CODE_NO_FAULT )
 299                             		.loc 1 794 0
 300 001e 21 17                   		bne	.L26
 301                             	.LVL39:
 302                             		.balign 2,3,2
 303                             	.L29:
 304                             	.LBB30:
 305                             	.LBB31:
 885:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if (LIB_SEF_GetFaultPriority((bool_t)TRUE,code,subcode, &faultPriority) != SF_OK)
 306                             		.loc 1 885 0
 307 0020 71 04 11                		add	#17, r0, r4
 308 0023 66 11                   		mov.L	#1, r1
 309 0025 CF A2                   		mov.B	r10, r2
 310 0027 CF 73                   		mov.B	r7, r3
 311 0029 05 00 00 00             		bsr	_LIB_SEF_GetFaultPriority
 312                             	.LVL40:
 313 002d 5B 11                   		movu.B	r1, r1
 314 002f 61 01                   		cmp	#0, r1
 315 0031 21 14                   		bne	.L27
 316 0033 2E 15                   		bra	.L28
 317                             	.LVL41:
 318                             	.L26:
 319                             	.LBE31:
 320                             	.LBE30:
 796:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		( LIB_SEF_GetFaultToDisplay((bool_t)TRUE, pCurrentFault->faultCodes.code, pCurrentFault->faultCod
 321                             		.loc 1 796 0
 322 0035 CD B3 01                		mov.B	1[r11], r3
 323 0038 66 11                   		mov.L	#1, r1
 324                             	.LVL42:
 325 003a 05 00 00 00             		bsr	_LIB_SEF_GetFaultToDisplay
 326                             	.LVL43:
 795:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		||
 327                             		.loc 1 795 0
 328 003e 61 01                   		cmp	#0, r1
 329 0040 21 E0                   		bne	.L29
 330 0042 38 CE 00                		bra	.L30
 331                             	.LVL44:
 332                             	.L27:
 333                             	.LBB40:
 334                             	.LBB38:
 887:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		faultPriority =0;
 335                             		.loc 1 887 0
 336 0045 3C 81 00                		mov.B	#0, 17[r0]
 337                             	.LVL45:
 338                             		.balign 2,3,5
 339                             	.L28:
 889:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	faultPriority=LIB_SEF_FaultPriorityField(faultPriority);
 340                             		.loc 1 889 0
 341 0048 8C 09                   		mov.B	17[r0], r1
 891:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if (pFaultmgmt_Data->faultCodes.code!=0)
 342                             		.loc 1 891 0
 343 004a FB B2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r11
 889:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	faultPriority=LIB_SEF_FaultPriorityField(faultPriority);
 344                             		.loc 1 889 0
 345 0050 05 00 00 00             		bsr	_LIB_SEF_FaultPriorityField
 346                             	.LVL46:
 891:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if (pFaultmgmt_Data->faultCodes.code!=0)
 347                             		.loc 1 891 0
 348 0054 CC B2                   		mov.B	[r11], r2
 889:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	faultPriority=LIB_SEF_FaultPriorityField(faultPriority);
 349                             		.loc 1 889 0
 350 0056 84 09                   		mov.B	r1, 17[r0]
 891:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if (pFaultmgmt_Data->faultCodes.code!=0)
 351                             		.loc 1 891 0
 352 0058 5B 2C                   		movu.B	r2, r12
 353 005a 61 0C                   		cmp	#0, r12
 354 005c 20 22                   		beq	.L31
 893:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if (LIB_SEF_GetFaultPriority((bool_t)TRUE,pFaultmgmt_Data->faultCodes.code,pFaultmgmt_Data->fault
 355                             		.loc 1 893 0
 356 005e CD B3 01                		mov.B	1[r11], r3
 357 0061 71 04 10                		add	#16, r0, r4
 358 0064 66 11                   		mov.L	#1, r1
 359 0066 05 00 00 00             		bsr	_LIB_SEF_GetFaultPriority
 360                             	.LVL47:
 361 006a 5B 11                   		movu.B	r1, r1
 362 006c 61 01                   		cmp	#0, r1
 363 006e 20 06                   		beq	.L32
 895:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			currPriorityMonitor =0;
 364                             		.loc 1 895 0
 365 0070 3C 80 00                		mov.B	#0, 16[r0]
 366                             	.LVL48:
 367 0073 03                      		.balign 2,3,5
 368                             	.L32:
 897:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		currPriorityMonitor=LIB_SEF_FaultPriorityField(currPriorityMonitor);
 369                             		.loc 1 897 0
 370 0074 8C 01                   		mov.B	16[r0], r1
 371 0076 05 00 00 00             		bsr	_LIB_SEF_FaultPriorityField
 372                             	.LVL49:
 373 007a 84 01                   		mov.B	r1, 16[r0]
 374 007c 2E 04                   		bra	.L33
 375                             	.LVL50:
 376                             	.L31:
 901:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		currPriorityMonitor=0;
 377                             		.loc 1 901 0
 378 007e 84 02                   		mov.B	r2, 16[r0]
 379                             	.LVL51:
 380                             		.balign 2,3,3
 381                             	.L33:
 904:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if ( faultPriority > currPriorityMonitor )
 382                             		.loc 1 904 0
 383 0080 59 0C 11                		movu.B	17[r0], r12
 384 0083 45 0C 10                		cmp	16[r0].UB, r12
 385 0086 25 16                   		bleu	.L34
 908:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if(FLT_getTimeout(code, subcode, &time_Data))
 386                             		.loc 1 908 0
 387 0088 66 43                   		mov.L	#4, r3
 388 008a 4B 03                   		add	r0, r3
 389 008c CF A1                   		mov.B	r10, r1
 390 008e CF 72                   		mov.B	r7, r2
 391 0090 05 00 00 00             		bsr	_FLT_getTimeout
 392                             	.LVL52:
 393 0094 5B 11                   		movu.B	r1, r1
 394 0096 61 01                   		cmp	#0, r1
 395 0098 20 78                   		beq	.L30
 396 009a 2E 60                   		bra	.L83
 397                             	.L34:
 933:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if ( faultPriority == currPriorityMonitor )
 398                             		.loc 1 933 0
 399 009c 21 74                   		bne	.L30
 936:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( ( pFaultmgmt_Data->step <= PREFAULT_WAIT_STEP) &&
 400                             		.loc 1 936 0
 401 009e FB B2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r11
 402 00a4 CD BC 02                		mov.B	2[r11], r12
 403 00a7 75 2C 7F                		and	#0x7f, r12
 404 00aa 61 2C                   		cmp	#2, r12
 405 00ac 2A 64                   		bgt	.L30
 937:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				 (pFaultmgmt_Data->faultCodes.subCode!= subcode) &&
 406                             		.loc 1 937 0
 407 00ae CD B2 01                		mov.B	1[r11], r2
 936:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( ( pFaultmgmt_Data->step <= PREFAULT_WAIT_STEP) &&
 408                             		.loc 1 936 0
 409 00b1 5B 7C                   		movu.B	r7, r12
 410 00b3 5B 2E                   		movu.B	r2, r14
 411 00b5 47 CE                   		cmp	r12, r14
 412 00b7 20 59                   		beq	.L30
 938:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				 (pFaultmgmt_Data->faultCodes.code!= code) )
 413                             		.loc 1 938 0
 414 00b9 CC B1                   		mov.B	[r11], r1
 937:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				 (pFaultmgmt_Data->faultCodes.subCode!= subcode) &&
 415                             		.loc 1 937 0
 416 00bb 5B AC                   		movu.B	r10, r12
 417 00bd 5B 1B                   		movu.B	r1, r11
 418 00bf 47 CB                   		cmp	r12, r11
 419 00c1 20 4F                   		beq	.L30
 420                             	.LVL53:
 944:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if (pFaultmgmt_Data->faultCodes.code != CODE_NO_FAULT)
 421                             		.loc 1 944 0
 422 00c3 61 0B                   		cmp	#0, r11
 423 00c5 21 07                   		bne	.L38
 424 00c7 03                      		.balign 2,3,1
 425                             	.L40:
 426                             	.LBE38:
 427                             	.LBE40:
 942:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				currCodeTimeout=0;
 428                             		.loc 1 942 0
 429 00c8 66 0B                   		mov	#0, r11
 430 00ca 2E 14                   		bra	.L39
 431                             	.L38:
 432                             	.LBB41:
 433                             	.LBB39:
 946:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if(FLT_getTimeout(pFaultmgmt_Data->faultCodes.code,pFaultmgmt_Data->faultCodes.subCode, &time_
 434                             		.loc 1 946 0
 435 00cc 66 43                   		mov.L	#4, r3
 436 00ce 4B 03                   		add	r0, r3
 437 00d0 05 00 00 00             		bsr	_FLT_getTimeout
 438                             	.LVL54:
 439 00d4 5B 11                   		movu.B	r1, r1
 440 00d6 61 01                   		cmp	#0, r1
 441 00d8 20 F0                   		beq	.L40
 948:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						currCodeTimeout=time_Data.prefaultTime;
 442                             		.loc 1 948 0
 443 00da DD 0B 02                		mov.W	4[r0], r11
 444                             	.LVL55:
 445 00dd 03                      		.balign 2,3,1
 446                             	.L39:
 964:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( FLT_getTimeout( code, subcode,&time_Data) )
 447                             		.loc 1 964 0
 448 00de 66 43                   		mov.L	#4, r3
 449 00e0 4B 03                   		add	r0, r3
 450 00e2 CF A1                   		mov.B	r10, r1
 451 00e4 CF 72                   		mov.B	r7, r2
 452 00e6 05 00 00 00             		bsr	_FLT_getTimeout
 453                             	.LVL56:
 454 00ea 5B 11                   		movu.B	r1, r1
 455 00ec 61 01                   		cmp	#0, r1
 456 00ee 20 22                   		beq	.L30
 966:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if (time_Data.prefaultTime < currCodeTimeout)
 457                             		.loc 1 966 0
 458 00f0 5D 0C 02                		movu.W	4[r0], r12
 459 00f3 5F BB                   		movu.W	r11, r11
 460 00f5 47 BC                   		cmp	r11, r12
 461 00f7 22 19                   		bgeu	.L30
 462                             	.LVL57:
 463 00f9 03                      		.balign 2,3,5
 464                             	.L83:
 968:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						pFaultmgmt_Data->faultCodes.code = code;
 465                             		.loc 1 968 0
 466 00fa FB E2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r14
 467                             	.LBB32:
 468                             	.LBB33:
 294:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = ALARM_FLAG_STEP;
 469                             		.loc 1 294 0
 470 0100 CD EB 02                		mov.B	2[r14], r11
 471                             	.LBE33:
 472                             	.LBE32:
 968:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						pFaultmgmt_Data->faultCodes.code = code;
 473                             		.loc 1 968 0
 474 0103 C3 EA                   		mov.B	r10, [r14]
 475                             	.LBB36:
 476                             	.LBB34:
 294:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = ALARM_FLAG_STEP;
 477                             		.loc 1 294 0
 478 0105 75 2B 80                		and	#0xffffff80, r11
 479 0108 65 1B                   		or	#1, r11
 480                             	.LBE34:
 481                             	.LBE36:
 969:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						pFaultmgmt_Data->faultCodes.subCode = subcode;
 482                             		.loc 1 969 0
 483 010a C7 E7 01                		mov.B	r7, 1[r14]
 484                             	.LVL58:
 485                             	.LBB37:
 486                             	.LBB35:
 294:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = ALARM_FLAG_STEP;
 487                             		.loc 1 294 0
 488 010d C7 EB 02                		mov.B	r11, 2[r14]
 489                             	.LVL59:
 490                             		.balign 2,3,1
 491                             	.L30:
 492                             	.LBE35:
 493                             	.LBE37:
 494                             	.LBE39:
 495                             	.LBE41:
 823:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( FLT_checkForCurrentFault( code, subcode) )
 496                             		.loc 1 823 0
 497 0110 CF A1                   		mov.B	r10, r1
 498 0112 CF 72                   		mov.B	r7, r2
 499 0114 05 00 00 00             		bsr	_FLT_checkForCurrentFault
 500                             	.LVL60:
 501 0118 61 01                   		cmp	#0, r1
 502 011a 3A 9A 01                		beq	.L25
 829:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if(FLT_getTimeout(code, subcode, &time_data))
 503                             		.loc 1 829 0
 504 011d 66 A3                   		mov.L	#10, r3
 505 011f 4B 03                   		add	r0, r3
 506 0121 CF A1                   		mov.B	r10, r1
 507 0123 CF 72                   		mov.B	r7, r2
 508 0125 05 00 00 00             		bsr	_FLT_getTimeout
 509                             	.LVL61:
 510 0129 5B 11                   		movu.B	r1, r1
 511 012b 61 01                   		cmp	#0, r1
 512 012d 3A 87 01                		beq	.L25
 513                             	.LBB42:
 514                             	.LBB43:
 331:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	pFaultmgmt_Data->stepChanged = FALSE;
 515                             		.loc 1 331 0
 516 0130 FB 72 00 00 00 00       		mov.L	#_FaultMgmt_Data, r7
 517                             	.LVL62:
 518 0136 CD 7E 02                		mov.B	2[r7], r14
 519                             	.LBE43:
 520                             	.LBE42:
 835:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_prefaultFaultStateManagement(time_data.prefaultTime, time_data.faultTime,time_data.config);
 521                             		.loc 1 835 0
 522 0139 99 0B                   		mov.W	10[r0], r3
 523                             	.LBB55:
 524                             	.LBB52:
 331:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	pFaultmgmt_Data->stepChanged = FALSE;
 525                             		.loc 1 331 0
 526 013b 7A 7E                   		bclr	#7, r14
 333:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	switch (pFaultmgmt_Data->step)
 527                             		.loc 1 333 0
 528 013d EF E1                   		mov.L	r14, r1
 529 013f 75 21 7F                		and	#0x7f, r1
 530                             	.LBE52:
 531                             	.LBE55:
 835:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_prefaultFaultStateManagement(time_data.prefaultTime, time_data.faultTime,time_data.config);
 532                             		.loc 1 835 0
 533 0142 DD 0B 06                		mov.W	12[r0], r11
 534 0145 CD 0A 0E                		mov.B	14[r0], r10
 535                             	.LVL63:
 536                             	.LBB56:
 537                             	.LBB53:
 333:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	switch (pFaultmgmt_Data->step)
 538                             		.loc 1 333 0
 539 0148 61 21                   		cmp	#2, r1
 331:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	pFaultmgmt_Data->stepChanged = FALSE;
 540                             		.loc 1 331 0
 541 014a C7 7E 02                		mov.B	r14, 2[r7]
 333:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	switch (pFaultmgmt_Data->step)
 542                             		.loc 1 333 0
 543 014d 20 33                   		beq	.L46
 544 014f 2A 09                   		bgt	.L49
 545 0151 61 11                   		cmp	#1, r1
 546 0153 3B 43 01                		bne	.L44
 547 0156 2E 0F                   		bra	.L45
 548                             	.L49:
 549 0158 61 31                   		cmp	#3, r1
 550 015a 3A 95 00                		beq	.L47
 551 015d 61 51                   		cmp	#5, r1
 552 015f 3B 37 01                		bne	.L44
 553 0162 38 FE 00                		bra	.L48
 554                             	.L45:
 340:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 555                             		.loc 1 340 0
 556 0165 FB B2 00 00 00 00       		mov.L	#_FaultMgmt_Data+3, r11
 557                             	.LVL64:
 337:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SWTC_Stop((SWTC_CountersType) counterIndex);
 558                             		.loc 1 337 0
 559 016b 05 00 00 00             		bsr	_SWTC_Stop
 560                             	.LVL65:
 340:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 561                             		.loc 1 340 0
 562 016f F8 B5 00                		mov.W	#0, [r11]
 342:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->step = PREFAULT_WAIT_STEP;
 563                             		.loc 1 342 0
 564 0172 CD 7B 02                		mov.B	2[r7], r11
 565 0175 75 2B 80                		and	#0xffffff80, r11
 566 0178 65 2B                   		or	#2, r11
 567 017a C7 7B 02                		mov.B	r11, 2[r7]
 568 017d 38 19 01                		bra	.L44
 569                             	.LVL66:
 570                             	.L46:
 350:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			LKT_FIELD_S(pFaultmgmt_Data->filterCount) ++;
 571                             		.loc 1 350 0
 572 0180 FB C2 00 00 00 00       		mov.L	#_FaultMgmt_Data+3, r12
 573 0186 DC C4                   		mov.W	[r12], r4
 352:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if(( LKT_FIELD_S(pFaultmgmt_Data->filterCount) >= n_max_prefault )||(n_max_prefault== 0 ))
 574                             		.loc 1 352 0
 575 0188 5F 33                   		movu.W	r3, r3
 350:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			LKT_FIELD_S(pFaultmgmt_Data->filterCount) ++;
 576                             		.loc 1 350 0
 577 018a 62 14                   		add	#1, r4
 578 018c D3 C4                   		mov.W	r4, [r12]
 352:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if(( LKT_FIELD_S(pFaultmgmt_Data->filterCount) >= n_max_prefault )||(n_max_prefault== 0 ))
 579                             		.loc 1 352 0
 580 018e 5F 44                   		movu.W	r4, r4
 581 0190 47 34                   		cmp	r3, r4
 582 0192 22 05 38 02 01          		bltu	.L44
 583                             	.LBB44:
 584                             	.LBB45:
 137:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = step;
 585                             		.loc 1 137 0
 586 0197 75 2E 80                		and	#0xffffff80, r14
 138:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].stepChanged = TRUE;
 587                             		.loc 1 138 0
 588 019a 65 3E                   		or	#3, r14
 589                             	.LBE45:
 590                             	.LBE44:
 355:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 591                             		.loc 1 355 0
 592 019c F8 C5 00                		mov.W	#0, [r12]
 593                             	.LVL67:
 594                             	.LBB47:
 595                             	.LBB46:
 138:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].stepChanged = TRUE;
 596                             		.loc 1 138 0
 597 019f 78 7E                   		bset	#7, r14
 598 01a1 C7 7E 02                		mov.B	r14, 2[r7]
 599                             	.LBE46:
 600                             	.LBE47:
 361:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pApplCurrentFault->prefaultCodes = pFaultmgmt_Data->faultCodes;
 601                             		.loc 1 361 0
 602 01a4 DC 77                   		mov.W	[r7], r7
 603 01a6 FB C2 00 00 00 00       		mov.L	#_ApplCurrentFault, r12
 365:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = pApplCurrentFault->prefaultCodes;
 604                             		.loc 1 365 0
 605 01ac FB E2 00 00 00 00       		mov.L	#_MachineStatistics, r14
 361:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pApplCurrentFault->prefaultCodes = pFaultmgmt_Data->faultCodes;
 606                             		.loc 1 361 0
 607 01b2 D7 C7 01                		mov.W	r7, 2[r12]
 365:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = pApplCurrentFault->prefaultCodes;
 608                             		.loc 1 365 0
 609 01b5 D7 E7 9A                		mov.W	r7, 308[r14]
 371:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_lastFaultUpdate(pApplCurrentFault->prefaultCodes, &MachineStatistics.lastPreFault[0]);
 610                             		.loc 1 371 0
 611 01b8 D3 07                   		mov.W	r7, [r0]
 612 01ba FB 22 00 00 00 00       		mov.L	#_MachineStatistics+281, r2
 613 01c0 05 00 00 00             		bsr	_FLT_lastFaultUpdate
 614                             	.LVL68:
 375:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( (pApplCurrentFault->faultCodes.code == CODE_NO_FAULT) && (PltFaultCodes.code == CODE_NO_FAU
 615                             		.loc 1 375 0
 616 01c4 58 C7                   		movu.B	[r12], r7
 617 01c6 61 07                   		cmp	#0, r7
 618 01c8 21 18                   		bne	.L51
 619 01ca FB 72 00 00 00 00       		mov.L	#_PltFaultCodes, r7
 620 01d0 58 77                   		movu.B	[r7], r7
 621 01d2 61 07                   		cmp	#0, r7
 622 01d4 21 0C                   		bne	.L51
 381:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					STC_saveBlackBoxData(pApplCurrentFault->prefaultCodes);
 623                             		.loc 1 381 0
 624 01d6 DD CC 01                		mov.W	2[r12], r12
 625 01d9 D3 0C                   		mov.W	r12, [r0]
 626 01db 05 00 00 00             		bsr	_STC_saveBlackBoxData
 627                             	.LVL69:
 628 01df 03                      		.balign 2,3,1
 629                             	.L51:
 389:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if( (config & THEREATTEMPTFLT_MASK) == 0 )
 630                             		.loc 1 389 0
 631 01e0 EF A7                   		mov.L	r10, r7
 632 01e2 75 27 40                		and	#64, r7
 633 01e5 5B 77                   		movu.B	r7, r7
 634 01e7 61 07                   		cmp	#0, r7
 635 01e9 3B AD 00                		bne	.L44
 636 01ec 38 88 00                		bra	.L84
 637                             	.LVL70:
 638                             	.L47:
 639                             	.LBE53:
 411:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if (config & THEREATTEMPTFLT_MASK)
 640                             		.loc 1 411 0
 641 01ef EF A7                   		mov.L	r10, r7
 642 01f1 75 27 40                		and	#64, r7
 643                             	.LBB54:
 644 01f4 5B 7C                   		movu.B	r7, r12
 645 01f6 61 0C                   		cmp	#0, r12
 646 01f8 20 10                   		beq	.L53
 415:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				LKT_FIELD_S(pFaultmgmt_Data->filterCount) ++;
 647                             		.loc 1 415 0
 648 01fa FB C2 00 00 00 00       		mov.L	#_FaultMgmt_Data+3, r12
 649 0200 DC CE                   		mov.W	[r12], r14
 650 0202 62 1E                   		add	#1, r14
 651 0204 D3 CE                   		mov.W	r14, [r12]
 652 0206 2E 08                   		bra	.L54
 653                             	.L53:
 419:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Run((SWTC_CountersType) counterIndex);
 654                             		.loc 1 419 0
 655 0208 66 11                   		mov	#1, r1
 656 020a 05 00 00 00             		bsr	_SWTC_Run
 657                             	.LVL71:
 658                             		.balign 2,3,1
 659                             	.L54:
 422:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( (SWTC_IsExpired((SWTC_CountersType)counterIndex)&& ((config & THEREATTEMPTFLT_MASK)==0) ) ||
 660                             		.loc 1 422 0
 661 020e 66 11                   		mov	#1, r1
 662 0210 05 00 00 00             		bsr	_SWTC_IsExpired
 663                             	.LVL72:
 664 0214 61 01                   		cmp	#0, r1
 665 0216 20 08                   		beq	.L55
 666 0218 5B 7C                   		movu.B	r7, r12
 667 021a 61 0C                   		cmp	#0, r12
 668 021c 20 16                   		beq	.L56
 669                             		.balign 2,3,5
 670                             	.L55:
 671 021e FB C2 00 00 00 00       		mov.L	#_FaultMgmt_Data+3, r12
 672 0224 5C CC                   		movu.W	[r12], r12
 673 0226 5B BB                   		movu.B	r11, r11
 674                             	.LVL73:
 675 0228 47 BC                   		cmp	r11, r12
 676 022a 23 6C                   		bltu	.L44
 423:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					(( LKT_FIELD_S(pFaultmgmt_Data->filterCount) >= faultTimeTO )&&(config & THEREATTEMPTFLT_MASK)
 677                             		.loc 1 423 0
 678 022c 5B 77                   		movu.B	r7, r7
 679 022e 61 07                   		cmp	#0, r7
 680 0230 20 66                   		beq	.L44
 681                             		.balign 2,3,1
 682                             	.L56:
 426:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Stop((SWTC_CountersType) counterIndex);
 683                             		.loc 1 426 0
 684 0232 66 11                   		mov	#1, r1
 451:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if(pFaultmgmt_Data->step != BEFORE_FAULT_STEP)	
 685                             		.loc 1 451 0
 686 0234 FB 72 00 00 00 00       		mov.L	#_FaultMgmt_Data, r7
 426:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Stop((SWTC_CountersType) counterIndex);
 687                             		.loc 1 426 0
 688 023a 05 00 00 00             		bsr	_SWTC_Stop
 689                             	.LVL74:
 451:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				if(pFaultmgmt_Data->step != BEFORE_FAULT_STEP)	
 690                             		.loc 1 451 0
 691 023e CD 7B 02                		mov.B	2[r7], r11
 692 0241 EF BC                   		mov.L	r11, r12
 693 0243 75 2C 7F                		and	#0x7f, r12
 694 0246 61 6C                   		cmp	#6, r12
 695 0248 20 4E                   		beq	.L44
 696                             	.LVL75:
 697                             	.LBB48:
 698                             	.LBB49:
 699                             	.LBB50:
 700                             	.LBB51:
 137:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].step = step;
 701                             		.loc 1 137 0
 702 024a 75 2B 80                		and	#0xffffff80, r11
 138:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FaultMgmt_Data[compartment].stepChanged = TRUE;
 703                             		.loc 1 138 0
 704 024d 65 4B                   		or	#4, r11
 705 024f 78 7B                   		bset	#7, r11
 706 0251 C7 7B 02                		mov.B	r11, 2[r7]
 707                             	.LBE51:
 708                             	.LBE50:
 566:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	ApplCurrentFault[0].faultCodes = FaultMgmt_Data[0].faultCodes;
 709                             		.loc 1 566 0
 710 0254 DC 77                   		mov.W	[r7], r7
 711 0256 FB B2 00 00 00 00       		mov.L	#_ApplCurrentFault, r11
 712 025c D3 B7                   		mov.W	r7, [r11]
 713 025e 2E 38                   		bra	.L44
 714                             	.LVL76:
 715                             	.L48:
 716                             	.LBE49:
 717                             	.LBE48:
 481:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->step = PREFAULT_STEP;
 718                             		.loc 1 481 0
 719 0260 75 2E 80                		and	#0xffffff80, r14
 720 0263 65 3E                   		or	#3, r14
 721 0265 C7 7E 02                		mov.B	r14, 2[r7]
 483:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( (config & THEREATTEMPTFLT_MASK) == 0 )
 722                             		.loc 1 483 0
 723 0268 EF A7                   		mov.L	r10, r7
 724 026a 75 27 40                		and	#64, r7
 725 026d 5B 77                   		movu.B	r7, r7
 726 026f 61 07                   		cmp	#0, r7
 727 0271 21 15                   		bne	.L57
 728                             	.LVL77:
 729 0273 03                      		.balign 2,3,1
 730                             	.L84:
 783:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_manageFault( uint8_t code, uint8_t subcode)
 731                             		.loc 1 783 0
 732 0274 EF B3                   		mov.L	r11, r3
 486:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				   Set_MediumCounter((SWTC_CountersType)counterIndex, (SWTC_PrescalerType)(config & FLT_PRESCAL
 733                             		.loc 1 486 0
 734 0276 EF A2                   		mov.L	r10, r2
 783:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_manageFault( uint8_t code, uint8_t subcode)
 735                             		.loc 1 783 0
 736 0278 76 23 FF 00             		and	#0xff, r3
 486:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				   Set_MediumCounter((SWTC_CountersType)counterIndex, (SWTC_PrescalerType)(config & FLT_PRESCAL
 737                             		.loc 1 486 0
 738 027c 66 11                   		mov	#1, r1
 739 027e 64 F2                   		and	#15, r2
 740 0280 05 00 00 00             		bsr	_Set_MediumCounter
 741                             	.LVL78:
 742 0284 2E 12                   		bra	.L44
 743                             	.LVL79:
 744                             	.L57:
 494:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				LKT_FIELD_S(pFaultmgmt_Data->filterCount) = 0;
 745                             		.loc 1 494 0
 746 0286 FB 72 00 00 00 00       		mov.L	#_FaultMgmt_Data+3, r7
 747 028c 3D 70 00                		mov.W	#0, [r7]
 497:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				SWTC_Stop((SWTC_CountersType) counterIndex);
 748                             		.loc 1 497 0
 749 028f 66 11                   		mov	#1, r1
 750 0291 05 00 00 00             		bsr	_SWTC_Stop
 751                             	.LVL80:
 752 0295 03                      		.balign 2,3,5
 753                             	.L44:
 518:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( pFaultmgmt_Data->step == FAULT_STEP )
 754                             		.loc 1 518 0
 755 0296 FB 72 00 00 00 00       		mov.L	#_FaultMgmt_Data, r7
 756 029c 88 F7                   		mov.B	2[r7], r7
 757 029e 75 27 7F                		and	#0x7f, r7
 758 02a1 61 47                   		cmp	#4, r7
 759 02a3 21 11                   		bne	.L25
 520:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if (TESTBIT(config, FLT_SAFETY_ACTION_BIT))
 760                             		.loc 1 520 0
 761 02a5 CF AA                   		mov.B	r10, r10
 762 02a7 61 0A                   		cmp	#0, r10
 763 02a9 28 0B                   		bge	.L25
 522:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_safetyBitmapStandard();
 764                             		.loc 1 522 0
 765 02ab 05 00 00 00             		bsr	_FLT_safetyBitmapStandard
 766                             	.LVL81:
 526:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_SafetyBitmap_Cstm_Exclusion();
 767                             		.loc 1 526 0
 768 02af 05 00 00 00             		bsr	_FLT_SafetyBitmap_Cstm_Exclusion
 769                             	.LVL82:
 770 02b3 03                      		.balign 2,3,2
 771                             	.L25:
 772                             	.LBE54:
 773                             	.LBE56:
 850:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 774                             		.loc 1 850 0
 775 02b4 3F 7C 0B                		rtsd	#44, r7-r12
 776                             	.LFE9:
 778 02b7 03                      		.section	.text.FLT_ResetFaultDetectProc,"ax",@progbits
 779                             		.global	_FLT_ResetFaultDetectProc
 781                             	_FLT_ResetFaultDetectProc:
 782                             	.LFB12:
1031:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 783                             		.loc 1 1031 0
 784 0000 6E 7A                   		pushm	r7-r10
 785                             	.LCFI5:
1031:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 786                             		.loc 1 1031 0
 787 0002 DF 3A                   		mov.W	r3, r10
1035:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if ( FLT_checkForCurrentFault( code,  subcode))
 788                             		.loc 1 1035 0
 789 0004 05 00 00 00             		bsr	_FLT_checkForCurrentFault
 790 0008 61 01                   		cmp	#0, r1
 791 000a 3A 92 00                		beq	.L85
 792                             	.LBB59:
 793                             	.LBB60:
 598:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	pFaultmgmt_Data->stepChanged = FALSE;
 794                             		.loc 1 598 0
 795 000d FB E2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r14
 796 0013 CD E7 02                		mov.B	2[r14], r7
 797 0016 7A 77                   		bclr	#7, r7
 798 0018 C7 E7 02                		mov.B	r7, 2[r14]
 600:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	switch (pFaultmgmt_Data->step)
 799                             		.loc 1 600 0
 800 001b 75 27 7F                		and	#0x7f, r7
 801 001e 60 17                   		sub	#1, r7
 802 0020 61 57                   		cmp	#5, r7
 803 0022 24 7A                   		bgtu	.L85
 804 0024 FB E2 00 00 00 00       		mov.L	#.L91, r14
 805 002a FE 67 E7                		mov.L	[r7,r14], r7
 806                             		
 807 002d 7F 07                   	1:jmp	r7
 808                             		.section	.rodata.FLT_ResetFaultDetectProc,"a",@progbits
 809                             		.balign 4
 810                             		.balign 4
 811                             	.L91:
 812 0000 00 00 00 00             		.long .L88
 813 0004 00 00 00 00             		.long .L88
 814 0008 00 00 00 00             		.long .L89
 815 000c 00 00 00 00             		.long .L85
 816 0010 00 00 00 00             		.long .L90
 817 0014 00 00 00 00             		.long .L89
 818                             		.section	.text.FLT_ResetFaultDetectProc
 819                             	.L90:
 605:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			SWTC_Run((SWTC_CountersType)counterIndex);
 820                             		.loc 1 605 0
 821 002f 66 11                   		mov	#1, r1
 822 0031 05 00 00 00             		bsr	_SWTC_Run
 607:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if ( ! SWTC_IsExpired((SWTC_CountersType)counterIndex) )
 823                             		.loc 1 607 0
 824 0035 66 11                   		mov	#1, r1
 825 0037 05 00 00 00             		bsr	_SWTC_IsExpired
 826 003b 61 01                   		cmp	#0, r1
 827 003d 20 5F                   		beq	.L85
 828 003f 03                      		.balign 2,3,5
 829                             	.L88:
 623:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pCurrentFault->prefaultCodes = No_Fault;
 830                             		.loc 1 623 0
 831 0040 FB A2 00 00 00 00       		mov.L	#_No_Fault, r10
 832 0046 DC AA                   		mov.W	[r10], r10
 833 0048 FB 72 00 00 00 00       		mov.L	#_ApplCurrentFault, r7
 834 004e D7 7A 01                		mov.W	r10, 2[r7]
 644:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FLT_faultMgmtDataReset();
 835                             		.loc 1 644 0
 836 0051 05 00 00 00             		bsr	_FLT_faultMgmtDataReset
 647:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->stepChanged = TRUE;
 837                             		.loc 1 647 0
 838 0055 FB E2 00 00 00 00       		mov.L	#_FaultMgmt_Data, r14
 839 005b CD E4 02                		mov.B	2[r14], r4
 840 005e 78 74                   		bset	#7, r4
 841 0060 C7 E4 02                		mov.B	r4, 2[r14]
 649:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if(pCurrentFault->faultCodes.code != CODE_NO_FAULT)
 842                             		.loc 1 649 0
 843 0063 58 7A                   		movu.B	[r7], r10
 844 0065 61 0A                   		cmp	#0, r10
 845 0067 20 10                   		beq	.L93
 658:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pFaultmgmt_Data->faultCodes = pCurrentFault->faultCodes ;
 846                             		.loc 1 658 0
 847 0069 DC 77                   		mov.W	[r7], r7
 660:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pFaultmgmt_Data->step = FAULT_STEP;
 848                             		.loc 1 660 0
 849 006b 75 24 80                		and	#0xffffff80, r4
 850 006e 65 44                   		or	#4, r4
 658:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pFaultmgmt_Data->faultCodes = pCurrentFault->faultCodes ;
 851                             		.loc 1 658 0
 852 0070 D3 E7                   		mov.W	r7, [r14]
 660:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				pFaultmgmt_Data->step = FAULT_STEP;
 853                             		.loc 1 660 0
 854 0072 C7 E4 02                		mov.B	r4, 2[r14]
 855 0075 2E 27                   		bra	.L85
 856                             	.L93:
 857                             	.LBE60:
 858                             	.LBE59:
1045:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 859                             		.loc 1 1045 0
 860 0077 6F 7A                   		popm	r7-r10
 861                             	.LBB62:
 862                             	.LBB61:
 664:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				FLT_safetyBitmapReset();
 863                             		.loc 1 664 0
 864 0079 04 00 00 00             		bra	_FLT_safetyBitmapReset
 865                             	.L89:
 682:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  Set_MediumCounter((SWTC_CountersType)counterIndex, (SWTC_PrescalerType)COUNTERS2_TBASE_1SEC, (
 866                             		.loc 1 682 0
 867 007d EF A3                   		mov.L	r10, r3
 868 007f 66 11                   		mov	#1, r1
 869 0081 66 32                   		mov	#3, r2
 870 0083 76 23 FF 3F             		and	#0x3fff, r3
 871 0087 05 00 00 00             		bsr	_Set_MediumCounter
 687:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			pFaultmgmt_Data->step = WAIT_PREFAULT_RESET_STEP;
 872                             		.loc 1 687 0
 873 008b FB 72 00 00 00 00       		mov.L	#_FaultMgmt_Data, r7
 874 0091 CD 7E 02                		mov.B	2[r7], r14
 875 0094 75 2E 80                		and	#0xffffff80, r14
 876 0097 65 5E                   		or	#5, r14
 877 0099 C7 7E 02                		mov.B	r14, 2[r7]
 878                             		.balign 2,3,2
 879                             	.L85:
 880                             	.LBE61:
 881                             	.LBE62:
1045:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 882                             		.loc 1 1045 0
 883 009c 3F 7A 04                		rtsd	#16, r7-r10
 884                             	.LFE12:
 886 009f 03                      		.section	.text.FLT_updatePlatformFaultStatus,"ax",@progbits
 887                             		.global	_FLT_updatePlatformFaultStatus
 889                             	_FLT_updatePlatformFaultStatus:
 890                             	.LFB13:
1068:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 891                             		.loc 1 1068 0
 892                             	.LVL83:
 893 0000 6E 7C                   		pushm	r7-r12
 894                             	.LCFI6:
 895 0002 60 80                   		sub	#8, r0
 896                             	.LCFI7:
1068:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 897                             		.loc 1 1068 0
 898 0004 66 07                   		mov.L	#0, r7
1090:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = moduleSafetyStatus.fault;
 899                             		.loc 1 1090 0
 900 0006 FB A2 00 00 00 00       		mov.L	#_MachineStatistics, r10
1104:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if( (ApplCurrentFault[i].faultCodes.code == CODE_NO_FAULT) && (PltFaultCodes.code == CODE_NO_F
 901                             		.loc 1 1104 0
 902 000c FB B2 00 00 00 00       		mov.L	#_ApplCurrentFault, r11
 903                             	.LVL84:
 904                             		.balign 2,3,1
 905                             	.L103:
1076:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		if( LIB_SFT_GetSafetyModFaultStatus(moduleIndex, &moduleSafetyStatus) == 0 )
 906                             		.loc 1 1076 0
 907 0012 66 42                   		mov.L	#4, r2
 908 0014 4B 02                   		add	r0, r2
 909 0016 CF 71                   		mov.B	r7, r1
 910 0018 05 00 00 00             		bsr	_LIB_SFT_GetSafetyModFaultStatus
 911                             	.LVL85:
 912 001c 5B 11                   		movu.B	r1, r1
 913 001e 61 01                   		cmp	#0, r1
 914 0020 21 5A                   		bne	.L99
1079:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			if( ( ( moduleSafetyStatus.status & SFT_FAULTS_STATUS_MASK ) == SFT_MODULE_PREFAULT )
 915                             		.loc 1 1079 0
 916 0022 CD 0E 06                		mov.B	6[r0], r14
 917 0025 EF E4                   		mov.L	r14, r4
 918 0027 75 24 7F                		and	#0x7f, r4
 919 002a 61 54                   		cmp	#5, r4
 920 002c 21 3C                   		bne	.L101
1080:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				&&
 921                             		.loc 1 1080 0
 922 002e CF EE                   		mov.B	r14, r14
 923 0030 61 0E                   		cmp	#0, r14
 924 0032 28 36                   		bge	.L101
1082:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				&&
 925                             		.loc 1 1082 0
 926 0034 59 0E 04                		movu.B	4[r0], r14
 927 0037 61 0E                   		cmp	#0, r14
 928 0039 20 2F                   		beq	.L101
1090:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = moduleSafetyStatus.fault;
 929                             		.loc 1 1090 0
 930 003b DD 0E 02                		mov.W	4[r0], r14
1100:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_lastFaultUpdate(moduleSafetyStatus.fault, &MachineStatistics.lastPreFault[0]);
 931                             		.loc 1 1100 0
 932 003e FB 22 00 00 00 00       		mov.L	#_MachineStatistics+281, r2
1090:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 				MachineStatistics.testCycleStats.prefaultCodes = moduleSafetyStatus.fault;
 933                             		.loc 1 1090 0
 934 0044 D7 AE 9A                		mov.W	r14, 308[r10]
1100:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					FLT_lastFaultUpdate(moduleSafetyStatus.fault, &MachineStatistics.lastPreFault[0]);
 935                             		.loc 1 1100 0
 936 0047 D3 0E                   		mov.W	r14, [r0]
 937 0049 05 00 00 00             		bsr	_FLT_lastFaultUpdate
 938                             	.LVL86:
1104:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if( (ApplCurrentFault[i].faultCodes.code == CODE_NO_FAULT) && (PltFaultCodes.code == CODE_NO_F
 939                             		.loc 1 1104 0
 940 004d 58 BE                   		movu.B	[r11], r14
 941 004f 61 0E                   		cmp	#0, r14
 942 0051 21 17                   		bne	.L101
1104:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 					if( (ApplCurrentFault[i].faultCodes.code == CODE_NO_FAULT) && (PltFaultCodes.code == CODE_NO_F
 943                             		.loc 1 1104 0 is_stmt 0 discriminator 1
 944 0053 FB E2 00 00 00 00       		mov.L	#_PltFaultCodes, r14
 945 0059 58 EE                   		movu.B	[r14], r14
 946 005b 61 0E                   		cmp	#0, r14
 947 005d 21 0B                   		bne	.L101
1109:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 						STC_saveBlackBoxData(moduleSafetyStatus.fault);
 948                             		.loc 1 1109 0 is_stmt 1
 949 005f DD 0C 02                		mov.W	4[r0], r12
 950 0062 D3 0C                   		mov.W	r12, [r0]
 951 0064 05 00 00 00             		bsr	_STC_saveBlackBoxData
 952                             	.LVL87:
 953                             		.balign 2,3,1
 954                             	.L101:
1067:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** void FLT_updatePlatformFaultStatus(void)
 955                             		.loc 1 1067 0
 956 0068 EF 71                   		mov.L	r7, r1
 957 006a 63 31                   		mul	#3, r1
1123:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			FltSafetyModuleStatus[moduleIndex] = moduleSafetyStatus;
 958                             		.loc 1 1123 0
 959 006c 66 42                   		mov.L	#4, r2
 960 006e 70 11 00 00 00 00       		add	#_FltSafetyModuleStatus, r1
 961 0074 4B 02                   		add	r0, r2
 962 0076 66 33                   		mov.L	#3, r3
 963 0078 7F 8F                   		smovf
 964                             		.balign 2,3,1
 965                             	.L99:
 966                             	.LVL88:
 967 007a 62 17                   		add	#1, r7
 968                             	.LVL89:
1074:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	for(moduleIndex = 0; moduleIndex < SFT_NUM_SAFETY_MODULES; moduleIndex++ )
 969                             		.loc 1 1074 0
 970 007c 61 67                   		cmp	#6, r7
 971 007e 21 94                   		bne	.L103
1127:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	LIB_SFT_GetOverallFaultStatus(&moduleSafetyStatus);
 972                             		.loc 1 1127 0
 973 0080 66 41                   		mov.L	#4, r1
 974 0082 4B 01                   		add	r0, r1
 975 0084 05 00 00 00             		bsr	_LIB_SFT_GetOverallFaultStatus
 976                             	.LVL90:
1129:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( ( moduleSafetyStatus.status & SFT_FAULTS_STATUS_MASK ) == SFT_MODULE_FAULT )
 977                             		.loc 1 1129 0
 978 0088 CD 0A 06                		mov.B	6[r0], r10
 979 008b FB 72 00 00 00 00       		mov.L	#_PltFaultCodes, r7
 980                             	.LVL91:
 981 0091 75 2A 7F                		and	#0x7f, r10
 982 0094 61 6A                   		cmp	#6, r10
 983 0096 21 07                   		bne	.L104
1131:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		PltFaultCodes = moduleSafetyStatus.fault;
 984                             		.loc 1 1131 0
 985 0098 DD 0A 02                		mov.W	4[r0], r10
 986 009b 2E 0B                   		bra	.L111
 987                             	.L104:
1135:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		PltFaultCodes = No_Fault;
 988                             		.loc 1 1135 0
 989 009d FB A2 00 00 00 00       		mov.L	#_No_Fault, r10
 990 00a3 DC AA                   		mov.W	[r10], r10
 991 00a5 03                      		.balign 2,3,1
 992                             	.L111:
 993 00a6 D3 7A                   		mov.W	r10, [r7]
1139:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	LIB_SFT_ResetStatusChangeNotification();
 994                             		.loc 1 1139 0
 995 00a8 05 00 00 00             		bsr	_LIB_SFT_ResetStatusChangeNotification
 996                             	.LVL92:
1140:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 997                             		.loc 1 1140 0
 998 00ac 3F 7C 08                		rtsd	#32, r7-r12
 999                             	.LFE13:
 1001 00af 03                      		.section	.text.FLT_updateGlobalFaultCode,"ax",@progbits
 1002                             		.global	_FLT_updateGlobalFaultCode
 1004                             	_FLT_updateGlobalFaultCode:
 1005                             	.LFB14:
1167:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 1006                             		.loc 1 1167 0
 1007                             	.LVL93:
 1008 0000 7E A7                   		push.l	r7
 1009                             	.LCFI8:
1175:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	if( PltFaultCodes.code != CODE_NO_FAULT )
 1010                             		.loc 1 1175 0
 1011 0002 FB 72 00 00 00 00       		mov.L	#_PltFaultCodes, r7
 1012 0008 58 7E                   		movu.B	[r7], r14
 1013 000a 61 0E                   		cmp	#0, r14
 1014 000c 20 04                   		beq	.L113
 1015 000e 2E 1C                   		bra	.L120
 1016                             	.L113:
1181:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	else if ( (pApplCurrentFault->faultCodes.code != CODE_NO_FAULT )
 1017                             		.loc 1 1181 0
 1018 0010 FB 72 00 00 00 00       		mov.L	#_ApplCurrentFault, r7
 1019 0016 CC 72                   		mov.B	[r7], r2
 1020 0018 5B 2E                   		movu.B	r2, r14
 1021 001a 61 0E                   		cmp	#0, r14
 1022 001c 20 1A                   		beq	.L115
1183:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  ( LIB_SEF_GetFaultToDisplay((bool_t)TRUE, pApplCurrentFault->faultCodes.code, pApplCurrentFaul
 1023                             		.loc 1 1183 0
 1024 001e 88 7B                   		mov.B	1[r7], r3
 1025 0020 66 11                   		mov.L	#1, r1
 1026 0022 05 00 00 00             		bsr	_LIB_SEF_GetFaultToDisplay
 1027                             	.LVL94:
1182:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 			  &&
 1028                             		.loc 1 1182 0
 1029 0026 61 01                   		cmp	#0, r1
 1030 0028 21 0E                   		bne	.L115
 1031                             		.balign 2,3,5
 1032                             	.L120:
1188:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*pCurrentFault = pApplCurrentFault->faultCodes;
 1033                             		.loc 1 1188 0
 1034 002a DC 77                   		mov.W	[r7], r7
 1035 002c FB E2 00 00 00 00       		mov.L	#_CurrentFault, r14
 1036 0032 D3 E7                   		mov.W	r7, [r14]
 1037 0034 2E 12                   		bra	.L112
 1038                             	.L115:
1192:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 		*pCurrentFault = No_Fault;
 1039                             		.loc 1 1192 0
 1040 0036 FB E2 00 00 00 00       		mov.L	#_No_Fault, r14
 1041 003c DC EE                   		mov.W	[r14], r14
 1042 003e FB 72 00 00 00 00       		mov.L	#_CurrentFault, r7
 1043 0044 D3 7E                   		mov.W	r14, [r7]
 1044                             		.balign 2,3,2
 1045                             	.L112:
1194:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 1046                             		.loc 1 1194 0
 1047 0046 3F 77 01                		rtsd	#4, r7-r7
 1048                             	.LFE14:
 1050 0049 03                      		.section	.text.FLT_manageGlobalFaultStatus,"ax",@progbits
 1051                             		.global	_FLT_manageGlobalFaultStatus
 1053                             	_FLT_manageGlobalFaultStatus:
 1054                             	.LFB16:
1315:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** {
 1055                             		.loc 1 1315 0
 1056                             	.LVL95:
 1057 0000 6E 7B                   		pushm	r7-r11
 1058                             	.LCFI9:
 1059 0002 60 40                   		sub	#4, r0
 1060                             	.LCFI10:
1345:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousApplFaultCodes, ApplCurrentFault[compartment].faultCodes);
 1061                             		.loc 1 1345 0
 1062 0004 FB 72 00 00 00 00       		mov.L	#_previousApplFaultCodes.11004, r7
1329:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateGlobalFaultCode();
 1063                             		.loc 1 1329 0
 1064 000a 05 00 00 00             		bsr	_FLT_updateGlobalFaultCode
 1065                             	.LVL96:
1345:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousApplFaultCodes, ApplCurrentFault[compartment].faultCodes);
 1066                             		.loc 1 1345 0
 1067 000e DC 77                   		mov.W	[r7], r7
 1068 0010 D3 07                   		mov.W	r7, [r0]
 1069 0012 FB 72 00 00 00 00       		mov.L	#_ApplCurrentFault, r7
 1070 0018 DC 77                   		mov.W	[r7], r7
 1071 001a 90 0F                   		mov.W	r7, 2[r0]
1347:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousPltFaultCodes, PltFaultCodes);
 1072                             		.loc 1 1347 0
 1073 001c FB 72 00 00 00 00       		mov.L	#_previousPltFaultCodes.11003, r7
1345:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousApplFaultCodes, ApplCurrentFault[compartment].faultCodes);
 1074                             		.loc 1 1345 0
 1075 0022 05 00 00 00             		bsr	_FLT_updateFaultStatistics
 1076                             	.LVL97:
1347:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	FLT_updateFaultStatistics(previousPltFaultCodes, PltFaultCodes);
 1077                             		.loc 1 1347 0
 1078 0026 DC 7A                   		mov.W	[r7], r10
 1079 0028 D3 0A                   		mov.W	r10, [r0]
 1080 002a FB A2 00 00 00 00       		mov.L	#_PltFaultCodes, r10
 1081 0030 DC AB                   		mov.W	[r10], r11
 1082 0032 D7 0B 01                		mov.W	r11, 2[r0]
 1083 0035 05 00 00 00             		bsr	_FLT_updateFaultStatistics
 1084                             	.LVL98:
1358:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** 	previousPltFaultCodes = PltFaultCodes;
 1085                             		.loc 1 1358 0
 1086 0039 DC AA                   		mov.W	[r10], r10
 1087 003b D3 7A                   		mov.W	r10, [r7]
1359:C:/Workspace/FW_Platform2_5/trunk/Application_Platform\APP_Fault.c **** }
 1088                             		.loc 1 1359 0
 1089 003d 3F 7B 06                		rtsd	#24, r7-r11
 1090                             	.LFE16:
 1092                             		.section	.rodata.previousApplFaultCodes.11004,"a",@progbits
 1095                             	_previousApplFaultCodes.11004:
 1096 0000 00 00                   		.zero	2
 1097                             		.section	.bss.previousPltFaultCodes.11003,"aw",@nobits
 1100                             	_previousPltFaultCodes.11003:
 1101 0000 00 00                   		.zero	2
 1308                             	.Letext0:
 1309                             		.file 2 "C:\\Workspace\\FW_Platform2_5\\trunk\\HAL\\HAL_General/StandardTypes.h"
 1310                             		.file 3 "C:\\Workspace\\FW_Platform2_5\\trunk\\ProductModules\\PM_SwTimersCounters/SwTimersCounter
 1311                             		.file 4 "C:\\Workspace\\FW_Platform2_5\\trunk\\CFG_DishWasher\\CFG_Inertia/ProductSafety_cfg.h"
 1312                             		.file 5 "C:\\Workspace\\FW_Platform2_5\\trunk\\Inertia\\General/CstmDefines.h"
 1313                             		.file 6 "C:\\Workspace\\FW_Platform2_5\\trunk\\Application_Platform/APP_Types.h"
 1314                             		.file 7 "C:\\Workspace\\FW_Platform2_5\\trunk\\Inertia\\General/CstmTypes.h"
 1315                             		.file 8 "C:\\Workspace\\FW_Platform2_5\\trunk\\ProductModules\\PM_Library/LIB_Utilities.h"
 1316                             		.file 9 "C:\\Workspace\\FW_Platform2_5\\trunk\\Application_Platform/APP_Fault.h"
 1317                             		.file 10 "C:\\Workspace\\FW_Platform2_5\\trunk\\PlatformLibrary\\LIB_SecurityCheck/LIB_ProductSafe
 1318                             		.file 11 "C:\\Workspace\\FW_Platform2_5\\trunk\\Application_Platform/APP_Global.h"
 1319                             		.file 12 "C:\\Workspace\\FW_Platform2_5\\trunk\\Inertia\\General/CstmGlobal.h"
 1320                             		.file 13 "C:\\Workspace\\FW_Platform2_5\\trunk\\Application_Platform/APP_FuncLib.h"
 1321                             		.file 14 "C:\\Workspace\\FW_Platform2_5\\trunk\\Inertia\\Control/DW_Supervisor.h"
 1322                             		.file 15 "C:\\Workspace\\FW_Platform2_5\\trunk\\Inertia\\Control/DW_Fault.h"
