   1                             		.file	"PM_EnergyMeterSw.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.global	___floatunsisf
   5                             		.global	___divsf3
   6                             		.global	___fixunssfsi
   7                             		.section	.text.VoltAvgMeasuresUpdate.constprop.0,"ax",@progbits
   9                             	_VoltAvgMeasuresUpdate.constprop.0:
  10                             	.LFB29:
  11                             		.file 1 "C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw/PM_EnergyMeterSw.c"
   1:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*
   2:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Copyright (c) 2004-2011, Indesit Company, I.D.D..
   3:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Tutti i diritti sono riservati. All rights reserved.
   4:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  */
   5:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
   6:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
   7:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
   8:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \Par    Software Energy Meter
   9:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  10:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  11:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \file     ${PM_EnergyMeterSw.c}
  12:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \ingroup  PM_EnergyMeterSw
  13:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     13-06-2011
  14:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  Platform2_00.00.12 (project baseline related to creation of this module)
  15:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
  16:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  17:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  18:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \Par\b  History:
  19:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  20:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    00.00.12
  21:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    13-06-2011
  22:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    developer Intecs
  23:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    changes First revision
  24:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  25:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  26:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    01.03.00 <baseline di progetto relativa alla versione precedente la corrente>
  27:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    gg/mm/aaaa <data in cui ï¿½ stata realizzata >
  28:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    developer <progettista autore della modifica>
  29:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    changes <principali modifiche apportate>
  30:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    - change 1
  31:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n    - change 2
  32:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  33:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  34:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \n
  35:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
  36:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ********** */
  37:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Includes   */
  38:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ********** */
  39:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  40:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  41:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(OS_EmbOS)
  42:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "RTOS.h"
  43:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #else
  44:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "OSEK.h" 
  45:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "SkeletonGlobal.h" 
  46:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
  47:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  48:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  49:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  50:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  51:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  52:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*lint -e537*/
  53:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "Config.h"
  54:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "callback.h"
  55:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "LIB_Utilities.h"
  56:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "PM_EnergyMeterSw.h"
  57:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "PM_EnergyMeterSwTable.h"
  58:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "OutputManagerExp.h"
  59:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include "PM_EnergyMeterSw.h"
  60:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*lint +e537*/
  61:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_PM_ENERGY_METER_SW)
  62:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  63:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  64:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  65:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if (EMS_V_PEAK_AVERAGE == 0)
  66:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #include <math.h>
  67:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
  68:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  69:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  70:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
  71:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Defines and Macros */
  72:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
  73:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  74:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Indexes for loads */
  75:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_ui8RLoadIndex           (m_sLoadIndex.resistor)
  76:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_ui8MLoadIndex           (m_sLoadIndex.motor)
  77:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_ui8TLoadIndex           (m_sLoadIndex.table)
  78:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Flags */
  79:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_bAccuEnabled            (m_sFlags.accuEnabled)
  80:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_bOneShot                (m_sFlags.oneShot)
  81:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_ui8EnergyUpdateCnt      (m_sFlags.energyUpdateCnt)
  82:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  83:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if (EMS_BUFFER_DOUBLE_USE == 0)
  84:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_psVMeasAccCurr          (&m_sVMeasAcc)
  85:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define m_psVMeasAccHold          (&m_sVMeasAcc)
  86:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
  87:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  88:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Energy Meter Data: Algorithm Parameters */
  89:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define ALGO_PARAMS_NOT_VALID()   ((m_sAlgoParams.Data == NULL) || (m_sAlgoParams.DataLenght < ALGO
  90:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_ui16ALGO_PMAX           (*((uint16_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_PMAX])))
  91:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_ui16ALGO_EMAX           (*((uint16_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_EMAX])))
  92:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_ui16ALGO_KENERGY_MANT   (*((uint16_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_KENERGY_MAN
  93:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_i8ALGO_KENERGY_EXP      (*((int8_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_KENERGY_EXP])
  94:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_ui8ALGO_TS              (*((uint8_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_TS])))
  95:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_ui16ALGO_VMAX10         (*((uint16_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_VMAX10])))
  96:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #define g_ui16ALGO_NORM_RTN       (*((uint16_t*)&(m_sAlgoParams.Data[ALGO_PARAMS_OFFSET_NORM_RTN]))
  97:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  98:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
  99:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* *************************** */
 100:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Typedef, Structs and Unions */
 101:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* *************************** */
 102:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 103:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 104:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** typedef struct
 105:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 106:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if (EMS_V_PEAK_AVERAGE || EMS_V_RMS_AVERAGE)
 107:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* accumulator for normalized Vpeak values */
 108:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32VPeakAcc;
 109:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 110:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 111:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* accumulator for normalized Vpeak^2 values */
 112:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32VPeak2Acc;
 113:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 114:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t   ui8NSamples;
 115:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** } sVMeasAcc_t;
 116:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 117:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 118:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** typedef struct
 119:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 120:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t   ui8Mask;      /* mask to perform control on active load */
 121:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t*  pui8Status;   /* active load variable pointer: NULL = always active */
 122:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t  ui16Gmant;    /* 1/R' (mantissa) */
 123:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   int8_t    i8Gexp;       /* 1/R' (exponent) */
 124:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** } sRLoadParam_t;
 125:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 126:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 127:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** typedef struct
 128:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 129:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t   ui8Mask;      /* mask to perform control on active load */
 130:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t*  pui8Status;   /* active load variable pointer: NULL = always active */
 131:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t* pui16PVal;    /* pointer were retrieve the current value of power */
 132:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t* pui32EVal;    /* pointer were retrieve the current value of energy */
 133:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 134:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** } sMLoadParam_t;
 135:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 136:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 137:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** typedef struct
 138:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 139:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t   ui8Mask;      /* mask to perform control on active load */
 140:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t*  pui8Status;   /* active load variable pointer: NULL = always active */
 141:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   stTable_t sTable;       /* load data table */
 142:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** } sTLoadParam_t;
 143:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 144:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 145:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** typedef struct
 146:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 147:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t accuEnabled     : 1;  /* energy meter store and measurement activation */
 148:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t oneShot         : 1;  /* one shot or continuous store and measurement */
 149:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t energyUpdateCnt : 6;  /* counter for update energy period elapsed */
 150:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** } sFlags_t;
 151:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 152:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 153:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** typedef struct
 154:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 155:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t resistor      : 2;  /* index for resistive load */
 156:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t motor         : 2;  /* index for motor load */
 157:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t table         : 4;  /* index for table load */
 158:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** } sLoadIndex_t;
 159:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 160:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 161:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 162:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Exported variables */
 163:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 164:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 165:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 166:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 167:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Energy counter from start of life in Watt*h*/
 168:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*static*/ uint32_t b_ui32EnergyCounterWh;          /* SI Backup */
 169:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 170:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Accumulator for energy in a second (Watt) */
 171:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*static*/ uint16_t b_ui16EnergyCounterWhAcc;       /* SI Backup */
 172:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 173:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_USE_ELAPSED_TIMER
 174:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Time in seconds elapsed from start of life */
 175:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static uint32_t b_ui32TimeElapsedSinceStart;    /* NO Backup */
 176:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 177:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 178:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 179:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Local variables    */
 180:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 181:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_LIB_EXTERNAL_BOARD_SUPPORT) && defined(CONFIG_EMS_MLOAD_ITEMS_MAX)
 182:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** sEMS_ExtInfo_t EMSInfoBuffer[CONFIG_EMS_MLOAD_ITEMS_MAX];
 183:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 184:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 185:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Debug variables    */
 186:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 187:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 188:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 189:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 190:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* PLOS */
 191:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Pointer to DSPInfoBuffer */
 192:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_LIB_EXTERNAL_BOARD_SUPPORT)
 193:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint8_t * pDSPInfoBuffer;
 194:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 195:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 196:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Normalization algorithm parameters */
 197:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 198:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC Loader_Struct m_sAlgoParams = { /*lint -epp*/ NULL /*lint -epp*/, 0 };
 199:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 200:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 201:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if CONFIG_EMS_RLOAD_ITEMS_MAX
 202:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Array for resistive loads parameters collection */
 203:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC sRLoadParam_t m_asRLoadParam[CONFIG_EMS_RLOAD_ITEMS_MAX];
 204:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 205:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 206:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if CONFIG_EMS_MLOAD_ITEMS_MAX
 207:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Array for motor loads parameters collection */
 208:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC sMLoadParam_t m_asMLoadParam[CONFIG_EMS_MLOAD_ITEMS_MAX];
 209:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 210:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 211:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if CONFIG_EMS_TLOAD_ITEMS_MAX
 212:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Array for Table loads parameters collection */
 213:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC sTLoadParam_t m_asTLoadParam[CONFIG_EMS_TLOAD_ITEMS_MAX];
 214:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 215:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 216:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC sLoadIndex_t m_sLoadIndex = { 0, 0, 0 };
 217:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 218:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* flag to activate energy meter store and measurement */
 219:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC sFlags_t m_sFlags = { 1, 0, 0 };
 220:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 221:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* last normalized peak voltage measured */
 222:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_V_PEAK_HOLD
 223:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC uint16_t m_ui16VPeak = 0;
 224:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 225:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 226:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_V_PEAK_THRESHOLD
 227:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  /* last max normalized peak voltage measured */
 228:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC uint16_t m_ui16VPeakThreshold = 0;
 229:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 230:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 231:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_V_RMS_AVERAGE
 232:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  /* Average physical/normalized Vrms on last N samples */
 233:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC uint16_t m_ui16VrmsAvg = 0;
 234:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 235:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 236:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* double buffer management data structure */
 237:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_BUFFER_DOUBLE_USE
 238:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC sVMeasAcc_t  m_asVMeasAcc[2];
 239:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC sVMeasAcc_t* m_psVMeasAccCurr = &m_asVMeasAcc[0];
 240:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC sVMeasAcc_t* m_psVMeasAccHold = &m_asVMeasAcc[1];
 241:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #else
 242:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC sVMeasAcc_t  m_sVMeasAcc;
 243:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 244:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 245:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Power in the last period */
 246:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint16_t m_ui16PowerPeriod = 0;
 247:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 248:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Normalized Energy accumulator for Resistors and Tables */
 249:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint32_t m_ui32EnergyRTAcc = 0;
 250:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 251:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*(Phisical) Energy */
 252:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint32_t m_ui32EnergyOffset = 0;
 253:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 254:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* #define DONT_MANAGE_OVERFLOW  1 */
 255:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* #define DONT_MANAGE_OVERFLOW_MAINK  1 */
 256:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* #define DONT_MANAGE_OVERFLOW_DSP  1 */
 257:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #ifndef DONT_MANAGE_OVERFLOW
 258:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #ifndef DONT_MANAGE_OVERFLOW_MAINK
 259:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint32_t m_ui32EnergyMainK_1 = 0;
 260:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 261:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint32_t m_ui32EnergyMainOffset = 0;
 262:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #ifndef DONT_MANAGE_OVERFLOW_DSP
 263:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint32_t m_ui32EnergyDspK_1 = 0;
 264:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint32_t m_ui32EnergyDspOffset = 0;
 265:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 266:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 267:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 268:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static uint32_t m_ui32EnergyMotOld = 0;
 269:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 270:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_ENERGY_COUNTERS_MAX
 271:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  STATIC stEnergyCounters_t m_asCounters[EMS_ENERGY_COUNTERS_MAX];
 272:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 273:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 274:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 275:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if (CONFIG_EMS_TLOAD_ITEMS_MAX && EMS_USE_TABLE_PARAMD)
 276:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Pointer to current D param required to calculate power consumption with Tables */
 277:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint16_t* m_pui16TableParamD = NULL;
 278:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 279:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 280:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 281:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ******************* */
 282:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Function prototypes */
 283:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ******************* */
 284:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static uint16_t VoltAvgMeasuresUpdate (sVMeasAcc_t* psVMeasAcc);
 285:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_BUFFER_DOUBLE_USE
 286:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void VMeasBufferHold       (void);
 287:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 288:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void VMeasBufferReset      (void);
 289:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void EnergyMeterUpdate     (uint32_t ui32EnergyPeriod);
 290:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void EnergyCountersUpdate  (void);
 291:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 292:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 293:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC eEMS_Err EM_LoadRegister (const Loader_Struct* psEMDataStruct, const Loader_Struct* psResCal
 294:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                  const Loader_Struct* psOutputsMap);
 295:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 296:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint8_t* EM_LoadResCalib (uint8_t ui8LoadTablePositionRes, const Loader_Struct* psResCalibDa
 297:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                  const Loader_Struct* psOutputsMap, uint8_t numLoad,const sEMS_ResC
 298:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 299:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 300:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 301:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 302:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Exported functions */
 303:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ****************** */
 304:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 305:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
 306:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \n This function is called by the application to get the pointer
 307:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \n to the motor's energy buffer in platform
 308:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \n
 309:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \param [in] posMotor: position of the motor according to the order in Setting File
 310:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \n		(i.e. the first motor has posMotor = 0, the second posMotor = 1 and so on)
 311:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \n
 312:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \return  pointer to sEMS_ExtInfo_t*
 313:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \n
 314:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \author 	Salvatore Fimiani
 315:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \date		08/11/2012
 316:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  * \version
 317:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  */
 318:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_LIB_EXTERNAL_BOARD_SUPPORT) && CONFIG_EMS_MLOAD_ITEMS_MAX
 319:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** sEMS_ExtInfo_t* EMS_GetPtrToDSPInfoBuffer(uint8_t posMotor)
 320:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 321:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	if(posMotor < CONFIG_EMS_MLOAD_ITEMS_MAX)
 322:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	{
 323:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 		return (&EMSInfoBuffer[posMotor]);
 324:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	}
 325:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	else
 326:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	{
 327:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 		return NULL;
 328:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	}
 329:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 330:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 331:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 332:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 333:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Perform module initialization for
 334:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  a cold reset
 335:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 336:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_HWReset (void)
 337:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 338:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 339:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 340:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 341:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 342:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 343:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*------------------------------------
 344:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Set set the parameters used for
 345:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  power consumption calculation.
 346:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 347:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  09/11/2012: Added initialization for EMSInfoBuffer[CONFIG_EMS_MLOAD_ITEMS_MAX]
 348:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 349:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_InitConfig(Loader_Struct* psEnergyAlgoDataStruct
 350:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_USE_TABLE_PARAMD
 351:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                , uint16_t* pui16TableParamD
 352:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 353:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                               )
 354:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 355:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 356:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 357:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #ifdef CHECK_PARAM
 358:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (psEnergyAlgoDataStruct == NULL)
 359:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 360:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 361:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 362:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (psEnergyAlgoDataStruct->Data == NULL)
 363:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || (psEnergyAlgoDataStruct->DataLenght < ALGO_PARAMS_WLEN))
 364:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 365:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 366:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 367:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 368:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 369:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Set normalization algorithm parameters */
 370:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_sAlgoParams = *psEnergyAlgoDataStruct;
 371:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 372:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if (CONFIG_EMS_TLOAD_ITEMS_MAX && EMS_USE_TABLE_PARAMD)
 373:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Set the D param address required to calculate power consumption with Tables. */
 374:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_pui16TableParamD = pui16TableParamD;
 375:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 376:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 377:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_LIB_EXTERNAL_BOARD_SUPPORT) && CONFIG_EMS_MLOAD_ITEMS_MAX
 378:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t i;
 379:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   for(i = 0; i<CONFIG_EMS_MLOAD_ITEMS_MAX;i++)
 380:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 381:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  EMSInfoBuffer[i].ui16PVal = 0;
 382:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  EMSInfoBuffer[i].ui32EVal = 0;
 383:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 384:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 385:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
 386:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 387:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 388:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 389:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 390:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 391:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 392:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 393:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Perform module initialization for
 394:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  a warm reset
 395:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 396:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_InitSw ()
 397:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 398:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 399:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 400:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 401:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_PEAK_HOLD
 402:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16VPeak = 0;
 403:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 404:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 405:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_PEAK_THRESHOLD
 406:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16VPeakThreshold = 0;
 407:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 408:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 409:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_RMS_AVERAGE
 410:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16VrmsAvg = 0;
 411:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 412:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 413:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = TRUE;
 414:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bOneShot = FALSE;
 415:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 416:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16PowerPeriod      = 0;
 417:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 418:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui8EnergyUpdateCnt   = 0;
 419:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 420:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyRTAcc      = 0;
 421:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 422:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyOffset     = 0;
 423:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 424:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifndef DONT_MANAGE_OVERFLOW
 425:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifndef DONT_MANAGE_OVERFLOW_MAINK
 426:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyMainK_1 = 0;
 427:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 428:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 429:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyMainOffset = 0;
 430:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 431:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifndef DONT_MANAGE_OVERFLOW_DSP
 432:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyDspK_1     = 0;
 433:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 434:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyDspOffset  = 0;
 435:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 436:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 437:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 438:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Setting done successfully */
 439:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 440:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 441:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 442:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 443:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 444:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 445:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Not implemented
 446:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 447:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_StartCal (void)
 448:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 449:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 450:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 451:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 452:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 453:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 454:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-------------------------------------
 455:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Store information to get load status
 456:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  anytime is required to calculate power
 457:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  consumption
 458:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  --------------------------------------*/
 459:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 460:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_LoadRegister (sLoadRegister_t* psLoadRegister)
 461:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 462:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Parameter control */
 463:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 464:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (psLoadRegister == NULL)
 465:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 466:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 467:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 468:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 469:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if ((psLoadRegister->eType < LOAD_FIRST_ITEM) && (psLoadRegister->eType > LOAD_LAST_ITEM))
 470:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 471:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 472:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 473:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 474:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   int16_t compValue;
 475:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   int16_t diffToOvflw;
 476:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   int32_t tempVal1;
 477:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*
 478:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    * Setting new load's parameters
 479:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    */
 480:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   switch (psLoadRegister->eType)
 481:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 482:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     case RESISTOR:
 483:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #if CONFIG_EMS_RLOAD_ITEMS_MAX
 484:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (   (psLoadRegister->params.res.pui16GMant == NULL)
 485:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           || (psLoadRegister->params.res.pi8Gexp == NULL))
 486:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 487:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_INVALID_VALUE;
 488:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 489:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8RLoadIndex >= CONFIG_EMS_RLOAD_ITEMS_MAX)
 490:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 491:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_PARAM_IGNORED;
 492:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 493:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 494:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Setting load parameters for resistor */
 495:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].ui8Mask       = psLoadRegister->ui8Mask;
 496:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].pui8Status    = psLoadRegister->pui8Status;
 497:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant     = *(psLoadRegister->params.res.pui16GMant);
 498:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].i8Gexp        = *(psLoadRegister->params.res.pi8Gexp);
 499:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 500:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 501:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Check for RESISTOR calibration */
 502:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (psLoadRegister->params.res.pui8Calib != NULL)
 503:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 504:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (   (*(psLoadRegister->params.res.pui8Calib) != RESISTOR_CALIB_NO_CALIB)
 505:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             && (*(psLoadRegister->params.res.pui8Calib) != RESISTOR_CALIB_DEF_VALUE))
 506:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
 507:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         	/* Calibrate RESISTOR */
 508:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			diffToOvflw = 0xFFFF - m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant;
 509:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			tempVal1 = (((((int32_t)(RESISTOR_CALIB_DEF_VALUE - *(psLoadRegister->params.res.pui8Calib))) <<
 510:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			compValue = (uint16_t)((  m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant * tempVal1)>>15);
 511:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			if(compValue <= diffToOvflw)
 512:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			{
 513:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant += compValue;
 514:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			}
 515:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			else
 516:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			{
 517:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 518:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				if(tempVal1 >= 0)
 519:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				{
 520:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant = (m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant >> 1) +
 521:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 						(compValue >> 1);
 522:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 523:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].i8Gexp += 1;
 524:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				}
 525:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				else
 526:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				{
 527:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant += compValue;
 528:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				}
 529:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 530:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			}
 531:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 532:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
 533:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 534:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 535:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       ++m_ui8RLoadIndex;
 536:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #endif  /* CONFIG_EMS_RLOAD_ITEMS_MAX */
 537:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
 538:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 539:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     case MOTOR:
 540:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #if CONFIG_EMS_MLOAD_ITEMS_MAX
 541:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (   (psLoadRegister->params.mot.pui16PVal == NULL)
 542:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           || (psLoadRegister->params.mot.pui32EVal == NULL))
 543:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 544:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_INVALID_VALUE;
 545:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 546:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8MLoadIndex >= CONFIG_EMS_MLOAD_ITEMS_MAX)
 547:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 548:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_PARAM_IGNORED;
 549:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 550:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 551:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 552:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 553:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Setting energy load parameters for motor energy */
 554:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].ui8Mask       = psLoadRegister->ui8Mask;
 555:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui8Status    = psLoadRegister->pui8Status;
 556:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui16PVal     = psLoadRegister->params.mot.pui16PVal;
 557:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui32EVal     = psLoadRegister->params.mot.pui32EVal;
 558:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 559:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 560:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_ui8MLoadIndex++;
 561:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #endif /* CONFIG_EMS_MLOAD_ITEMS_MAX */
 562:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
 563:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 564:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     case TABLEP:
 565:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #if CONFIG_EMS_TLOAD_ITEMS_MAX
 566:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8TLoadIndex >= CONFIG_EMS_TLOAD_ITEMS_MAX)
 567:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 568:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_PARAM_IGNORED;
 569:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 570:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 571:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 572:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 573:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Setting load parameters for table */
 574:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (EMS_E_OK == TableInit(psLoadRegister->params.tab.pui8Table, psLoadRegister->params.tab.ui
 575:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                 &m_asTLoadParam[m_ui8TLoadIndex].sTable))
 576:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 577:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asTLoadParam[m_ui8TLoadIndex].ui8Mask     = psLoadRegister->ui8Mask;
 578:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asTLoadParam[m_ui8TLoadIndex].pui8Status  = psLoadRegister->pui8Status;
 579:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 580:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ++m_ui8TLoadIndex;
 581:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 582:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #endif  /* CONFIG_EMS_TLOAD_ITEMS_MAX */
 583:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
 584:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 585:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     default:
 586:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       return EMS_E_INVALID_VALUE;
 587:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 588:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 589:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Setting done successfully */
 590:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 591:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 592:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 593:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 594:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 595:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*------------------------------------
 596:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Sends Start measure command according
 597:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  to parameter passed.
 598:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  -------------------------------------*/
 599:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_StartMeasure (eConvertion_t C_Conv, bool_t bResetCounters)
 600:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 601:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (bResetCounters == TRUE)
 602:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 603:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 604:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 605:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     b_ui32EnergyCounterWh = 0;
 606:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     b_ui16EnergyCounterWhAcc = 0;
 607:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    #if EMS_USE_ELAPSED_TIMER
 608:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     b_ui32TimeElapsedSinceStart = 0;
 609:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    #endif
 610:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 611:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 612:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = TRUE;
 613:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 614:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (C_Conv == SINGLE_CONV)
 615:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 616:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_bOneShot = TRUE;
 617:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 618:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else
 619:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 620:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_bOneShot = FALSE;
 621:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 622:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 623:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 624:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 625:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 626:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 627:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 628:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*---------------------------------
 629:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Reset flag to disable accumulation
 630:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ----------------------------------*/
 631:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_StopMeasure (void)
 632:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 633:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = FALSE;
 634:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 635:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 636:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 637:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 638:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 639:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 640:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 641:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Not implemented
 642:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 643:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetInstant_I (uint8_t* pui8I)
 644:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 645:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 646:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 647:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 648:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 649:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 650:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-----------------------------------------------
 651:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Returns the value of the last peak Voltage measured
 652:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ------------------------------------------------*/
 653:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetInstant_V (uint16_t* pui16V)
 654:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 655:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_PEAK_HOLD
 656:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 657:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (pui16V == NULL)
 658:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || VLINE_PARAMS_NOT_VALID())
 659:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 660:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 661:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 662:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 663:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 664:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Normalized to physical conversion */
 665:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16V = (uint16_t)((((uint32_t)m_ui16VPeak * g_ui16ALGO_VMAX10) / 10) >> 16);
 666:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 667:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 668:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else /* EMS_V_PEAK_HOLD */
 669:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 670:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif /* EMS_V_PEAK_HOLD */
 671:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 672:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 673:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 674:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 675:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-----------------------------------------------
 676:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Set the value of the current normalized V peak measured
 677:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ------------------------------------------------*/
 678:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_SetInstant_V (uint32_t ui32VADcalib)
 679:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 680:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 681:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (m_psVMeasAccCurr == NULL)
 682:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || VLINE_PARAMS_NOT_VALID())
 683:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 684:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 685:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 686:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 687:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 688:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* ui32VADcalib is on at most 11 bits,
 689:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    * extend (multiply by 2^6) on at most 17 bits ... */
 690:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32VADcalib <<= 6;
 691:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* ... if necessary, saturate on 16 bits ... */
 692:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui32VADcalib > 65535)
 693:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 694:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32VADcalib = 65535;
 695:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 696:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* ... and, subtract normalized RTN */
 697:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32VADcalib -= (uint32_t)g_ui16ALGO_NORM_RTN;
 698:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 699:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 700:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* here ui32VADcalib contains the normalized V peak (at most 16 bits) */
 701:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 702:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_PEAK_HOLD
 703:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16VPeak = (uint16_t)ui32VADcalib;
 704:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 705:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 706:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_PEAK_THRESHOLD
 707:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui32VADcalib > m_ui16VPeakThreshold)
 708:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 709:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_ui16VPeakThreshold = (uint16_t)ui32VADcalib;
 710:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 711:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 712:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 713:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if (EMS_V_PEAK_AVERAGE || EMS_V_RMS_AVERAGE)
 714:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Add to V peak accumulator */
 715:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeakAcc += ui32VADcalib;
 716:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 717:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 718:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* The voltage samples counter is increased */
 719:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui8NSamples++;
 720:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 721:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* check if energy meter store and measurement is active */
 722:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (m_bAccuEnabled == TRUE)
 723:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 724:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* energy meter store and measurement is active */
 725:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 726:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* Perform the squared values ... */
 727:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32VADcalib *= ui32VADcalib;
 728:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* ... and the division by 2^16, in order to distribuite the computation of the normalized powe
 729:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32VADcalib >>= 16;
 730:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 731:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* The new value (at most 16 bits) is added to the accumulator in order to perform the average 
 732:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_psVMeasAccCurr->ui32VPeak2Acc += ui32VADcalib;
 733:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 734:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else if (m_psVMeasAccCurr->ui8NSamples > EMS_V_AVERAGE_N_SAMPLES)
 735:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 736:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* energy meter store and measurement is not active */
 737:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 738:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* updates avg Vpeak and Vrms each second */
 739:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     VoltAvgMeasuresUpdate(m_psVMeasAccCurr);
 740:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     VMeasBufferReset();
 741:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 742:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 743:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 744:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 745:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 746:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 747:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 748:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-----------------------------------------------
 749:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Returns the value of last measured instant power
 750:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ------------------------------------------------*/
 751:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetInstant_P (uint16_t* pui16P)
 752:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 753:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 754:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (pui16P == NULL)
 755:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 756:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 757:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 758:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 759:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 760:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16P = m_ui16PowerPeriod;
 761:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 762:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 763:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 764:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 765:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 766:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 767:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-------------------------------------------
 768:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Return the value of average power calculated
 769:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  on last N samples (tip. 1 sec).
 770:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  --------------------------------------------*/
 771:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetAvgLastCycle_P (uint16_t* pui16P)
 772:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 773:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 774:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (pui16P == NULL)
 775:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || ALGO_PARAMS_NOT_VALID())
 776:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 777:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 778:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 779:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 780:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 781:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16P = m_ui16PowerPeriod;
 782:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 783:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 784:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 785:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 786:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 787:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 788:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-----------------------------------------------------
 789:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Return the value of average power calculated
 790:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  on last N samples (tip. 1 sec) in hundredths of a watt.
 791:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ------------------------------------------------------*/
 792:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetAvgLastCycle_P_100mW (uint16_t* pui16P)
 793:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 794:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 795:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (pui16P == NULL)
 796:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || ALGO_PARAMS_NOT_VALID())
 797:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 798:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 799:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 800:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 801:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 802:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16P = m_ui16PowerPeriod * 10;
 803:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 804:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 805:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 806:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 807:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 808:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 809:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 810:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Not implemented
 811:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 812:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_Get_I_RMS (uint8_t* pui8I)
 813:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 814:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 815:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 816:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 817:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 818:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 819:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 820:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Not implemented
 821:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 822:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_Get_I_RMS_100mA (uint32_t* pui32I)
 823:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 824:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 825:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 826:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 827:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 828:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 829:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
 830:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Return the last rms volt measured
 831:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ---------------------------------*/
 832:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_Get_V_RMS (uint16_t* pui16V)
 833:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 834:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 835:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (pui16V == NULL)
 836:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 837:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 838:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 839:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 840:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 841:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_RMS_AVERAGE
 842:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 843:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (VLINE_PARAMS_NOT_VALID())
 844:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 845:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 846:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 847:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 848:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 849:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_RMS_AVERAGE_PHY
 850:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16V = m_ui16VrmsAvg;
 851:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else
 852:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Normalized to physical conversion */
 853:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16V = (uint16_t)((((uint32_t)m_ui16VrmsAvg * g_ui16ALGO_VMAX10) / 10) >> 16);
 854:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 855:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 856:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 857:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else /* EMS_V_RMS_AVERAGE */
 858:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 859:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif /* EMS_V_RMS_AVERAGE */
 860:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 861:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 862:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 863:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 864:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*----------------------------------------------------------
 865:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Return the last rms volt measured in hundredths of a volts.
 866:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  -----------------------------------------------------------*/
 867:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_Get_V_RMS_100mV (uint32_t* pui32V)
 868:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 869:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 870:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (pui32V == NULL)
 871:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 872:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 873:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 874:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 875:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 876:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_RMS_AVERAGE
 877:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 878:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (VLINE_PARAMS_NOT_VALID())
 879:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 880:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 881:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 882:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 883:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 884:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_V_RMS_AVERAGE_PHY
 885:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui32V = (uint32_t)m_ui16VrmsAvg * 10;
 886:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else
 887:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Normalized to physical conversion */
 888:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui32V = ((uint32_t)m_ui16VrmsAvg * g_ui16ALGO_VMAX10) >> 16;
 889:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 890:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 891:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 892:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else /* EMS_V_RMS_AVERAGE */
 893:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
 894:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif /* EMS_V_RMS_AVERAGE */
 895:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 896:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 897:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 898:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 899:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*---------------------------------------------------------------
 900:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Returns the value of energy in Wh since the last start measure.
 901:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ----------------------------------------------------------------*/
 902:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetAvgSinceStart_E_Wh (uint32_t* pui32EWh, uint32_t* pui32TimeElapsed)
 903:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 904:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 905:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (pui32EWh == NULL)
 906:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 907:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 908:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 909:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 910:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_USE_ELAPSED_TIMER
 911:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (pui32TimeElapsed == NULL)
 912:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 913:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 914:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 915:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 916:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 917:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 918:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_USE_ELAPSED_TIMER
 919:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Returning current timer value */
 920:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui32TimeElapsed = b_ui32TimeElapsedSinceStart;
 921:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 922:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 923:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui32EWh = b_ui32EnergyCounterWh;
 924:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 925:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 926:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 927:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 928:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 929:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 930:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*---------------------------------------------
 931:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  Called every second to perform counters update
 932:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  ----------------------------------------------*/
 933:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_Accum (void)
 934:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 935:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t   ui8Index;                   /* index used for accessing load data structure */
 936:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t  ui16Vpeak2Avg_Norm;         /* average of normalized Vpeak squared: used to calculate p
 937:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if CONFIG_EMS_TLOAD_ITEMS_MAX
 938:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t  ui16VinTab_Norm;            /* average normalized Vpeak: used to calculate power with T
 939:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 940:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if (CONFIG_EMS_TLOAD_ITEMS_MAX | CONFIG_EMS_RLOAD_ITEMS_MAX)
 941:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t  ui16PowerInstant_Norm;      /* normalized power instant for a load */
 942:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 943:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32PowerInstantRT_Norm;    /* normalized power instant for RESISTOR and TABLE load */
 944:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t  ui16PowerInstantMot;        /* (phisical) power instant for power section of MOTOR load
 945:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32Energy;                 /* (phisical) energy in the update period */
 946:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32EnergyMot;              /* calculated difference between the current and the previo
 947:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                          * time period (tip. 1 sec) with energy section of MOTOR lo
 948:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifndef DONT_MANAGE_OVERFLOW
 949:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32DeltaEnergyRTAcc;       /* Energia normalizzata del ciclo corrente per RESISTOR, TA
 950:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef DONT_MANAGE_OVERFLOW_MAINK
 951:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t  ui32MaxDeltaEnergyRTAcc;
 952:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 953:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 954:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   bool_t    bLoadIsActive;              /* TRUE if load is active */
 955:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 956:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 957:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #ifdef CHECK_PARAM
 958:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ALGO_PARAMS_NOT_VALID())
 959:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 960:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
 961:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 962:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
 963:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 964:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* initialize automatic variables */
 965:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32PowerInstantRT_Norm = 0;
 966:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui16PowerInstantMot     = 0;
 967:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32EnergyMot           = 0;
 968:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 969:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* initialize global variables */
 970:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 971:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* function body */
 972:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 973:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* check if energy meter store and measurement is active */
 974:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (m_bAccuEnabled == TRUE)
 975:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
 976:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* energy meter store and measurement is active */
 977:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 978:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* check if energy update period is elapsed */
 979:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_ui8EnergyUpdateCnt++;
 980:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* if (m_ui8EnergyUpdateCnt >= (1000/EMS_PW_UPDATE_PERIOD)) */
 981:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     if (m_ui8EnergyUpdateCnt >= g_ui8ALGO_TS)
 982:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     {
 983:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* energy update period is elapsed */
 984:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 985:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #if EMS_BUFFER_DOUBLE_USE
 986:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* hold the data that are going to use */
 987:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       VMeasBufferHold();
 988:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #endif
 989:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
 990:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_psVMeasAccHold->ui8NSamples > 0)
 991:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 992:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /*  calculate average of collected Vpeak squared */
 993:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16Vpeak2Avg_Norm = (uint16_t)(m_psVMeasAccHold->ui32VPeak2Acc / m_psVMeasAccHold->ui8NSam
 994:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 995:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       else
 996:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
 997:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16Vpeak2Avg_Norm = 0;
 998:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
 999:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1000:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1001:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* set tension value for table load */
1002:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       #if CONFIG_EMS_TLOAD_ITEMS_MAX
1003:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if (EMS_V_PEAK_AVERAGE || EMS_V_RMS_AVERAGE)
1004:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16VinTab_Norm =                                           /* average Vpeak */
1005:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #else
1006:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16VinTab_Norm = ((uint16_t)sqrt(ui16Vpeak2Avg_Norm));    /* square root of average Vpeak 
1007:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1008:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       #endif
1009:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1010:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* updates avg Vpeak and Vrms */
1011:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         VoltAvgMeasuresUpdate(m_psVMeasAccHold);
1012:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1013:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if (EMS_BUFFER_DOUBLE_USE == 0)
1014:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* reset data just used */
1015:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         VMeasBufferReset();
1016:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1017:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1018:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* --------- Calculating power ---------- */
1019:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1020:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if CONFIG_EMS_RLOAD_ITEMS_MAX
1021:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Check on active RESISTOR loads */
1022:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1023:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1024:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1025:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8RLoadIndex; ui8Index++)
1026:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1027:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1028:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1029:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1030:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           bLoadIsActive = FALSE;
1031:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (m_asRLoadParam[ui8Index].pui8Status == NULL)
1032:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1033:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             bLoadIsActive = TRUE;
1034:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1035:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****          /* FIXME: ?
1036:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if (   (*m_asRLoadParam[ui8Index].pui8Status & m_asRLoadParam[ui8Index].ui8Mask)
1037:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                    == m_asRLoadParam[ui8Index].ui8Mask)
1038:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           */
1039:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if ((*m_asRLoadParam[ui8Index].pui8Status & m_asRLoadParam[ui8Index].ui8Mask) != 0)
1040:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1041:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             bLoadIsActive = TRUE;
1042:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1043:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1044:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (bLoadIsActive)
1045:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1046:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             /* calculate normalized power ... */
1047:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = (uint16_t)(((uint32_t)ui16Vpeak2Avg_Norm * m_asRLoadParam[ui8In
1048:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                >> (16 - m_asRLoadParam[ui8Index].i8Gexp));
1049:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1050:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1051:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1052:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             /* ... and add to the accumulator */
1053:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui32PowerInstantRT_Norm += ui16PowerInstant_Norm;
1054:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1055:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1056:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif /* CONFIG_EMS_RLOAD_ITEMS_MAX */
1057:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1058:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if CONFIG_EMS_MLOAD_ITEMS_MAX
1059:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Check on active MOTOR loads */
1060:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1061:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1062:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1063:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8MLoadIndex; ui8Index++)
1064:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1065:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1066:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1067:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1068:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           bLoadIsActive = FALSE;
1069:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (m_asMLoadParam[ui8Index].pui8Status == NULL)
1070:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1071:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             bLoadIsActive = TRUE;
1072:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1073:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           /* FIXME: ?
1074:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            else if (   (*m_asMLoadParam[ui8Index].pui8Status & m_asMLoadParam[ui8Index].ui8Mask)
1075:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                     == m_asMLoadParam[ui8Index].ui8Mask)
1076:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            */
1077:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if ((*m_asMLoadParam[ui8Index].pui8Status & m_asMLoadParam[ui8Index].ui8Mask) != 0)
1078:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1079:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             bLoadIsActive = TRUE;
1080:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1081:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1082:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (bLoadIsActive)
1083:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1084:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1085:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1086:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1087:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             /* add the (physical) power to a separate accumulator */
1088:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstantMot += *m_asMLoadParam[ui8Index].pui16PVal;
1089:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1090:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1091:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           /* get energy from energy loads: energy loads use cumulative energy so we have to take in
1092:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            * difference between the current and the previous energy values. */
1093:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1094:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           ui32EnergyMot += *m_asMLoadParam[ui8Index].pui32EVal;
1095:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1096:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif /* CONFIG_EMS_MLOAD_ITEMS_MAX */
1097:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1098:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if CONFIG_EMS_TLOAD_ITEMS_MAX
1099:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Check on active loads (table)*/
1100:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1101:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1102:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1103:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8TLoadIndex; ui8Index++)
1104:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1105:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1106:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1107:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1108:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           bLoadIsActive = FALSE;
1109:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (m_asTLoadParam[ui8Index].pui8Status == NULL)
1110:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1111:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             bLoadIsActive = TRUE;
1112:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1113:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           /* FIXME: ?
1114:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            else if (   (*m_asTLoadParam[ui8Index].pui8Status & m_asTLoadParam[ui8Index].ui8Mask)
1115:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                     == m_asTLoadParam[ui8Index].ui8Mask)
1116:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            */
1117:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if ((*m_asTLoadParam[ui8Index].pui8Status & m_asTLoadParam[ui8Index].ui8Mask) != 0)
1118:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1119:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             bLoadIsActive = TRUE;
1120:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1121:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1122:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (bLoadIsActive)
1123:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           {
1124:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             /* calculate normalized power for Table load ... */
1125:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = 0;
1126:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             if (EMS_E_OK == TablePower(&m_asTLoadParam[ui8Index].sTable, (
1127:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            #if (CONFIG_EMS_TLOAD_ITEMS_MAX && EMS_USE_TABLE_PARAMD)
1128:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                        m_pui16TableParamD ? *m_pui16TableParamD :
1129:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****            #endif
1130:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                        EMS_TABLE_PARAM_D_DEFAULT),
1131:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                        ui16VinTab_Norm,
1132:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                        &ui16PowerInstant_Norm))
1133:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             {
1134:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1135:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1136:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1137:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****               /* ... and add to accumulator */
1138:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****               ui32PowerInstantRT_Norm += (uint32_t)ui16PowerInstant_Norm;
1139:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             }
1140:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           }
1141:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1142:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif /* CONFIG_EMS_TLOAD_ITEMS_MAX */
1143:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1144:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* update global variable for user query */
1145:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui16PowerPeriod =   (uint16_t)((ui32PowerInstantRT_Norm * g_ui16ALGO_PMAX) >> 16)   /* ph
1146:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                             + ui16PowerInstantMot;                                            /* ..
1147:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1148:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* --------- Calculating energy ---------- */
1149:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1150:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #ifndef DONT_MANAGE_OVERFLOW
1151:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Begin Overflow Energy Acc Management */
1152:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1153:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Energia normalizzata del ciclo corrente per RESISTOR, TABLE*/
1154:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32DeltaEnergyRTAcc = (((ui32PowerInstantRT_Norm * g_ui16ALGO_KENERGY_MANT) / 10) >> (16 -
1155:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1156:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #ifndef DONT_MANAGE_OVERFLOW_MAINK
1157:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1158:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyRTAcc += ui32DeltaEnergyRTAcc;
1159:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1160:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* ui32Energy = (m_ui32EnergyRTAcc * g_ui16ALGO_EMAX) >> 16; */
1161:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   /* 32 bit */
1162:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                      + (((m_ui32EnergyRTAcc & 0x0000FFFF) * g_ui16ALGO_EMAX) >> 16);  /* 32 bit */
1163:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1164:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* update energy with m_ui32EnergyPeriod */
1165:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1166:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (ui32Energy < (m_ui32EnergyMainK_1 - m_ui32EnergyMainOffset)) /* Reset Overflow Energy M
1167:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1168:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyMainOffset = m_ui32EnergyMainK_1;
1169:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1170:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1171:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy += m_ui32EnergyMainOffset;
1172:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyMainK_1 = ui32Energy;
1173:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1174:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #else
1175:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1176:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Controllo se c'ï¿½ l'overflow del contatore globale normalizzato */
1177:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32MaxDeltaEnergyRTAcc = 0xFFFFFFFF - m_ui32EnergyRTAcc;
1178:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if ( ui32MaxDeltaEnergyRTAcc < ui32DeltaEnergyRTAcc)
1179:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1180:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           /* C'ï¿½ l'overflow del contatore normalizzato: aggiungo all'offset il valore fisico corr
1181:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyMainOffset +=  g_ui16ALGO_EMAX << 16;
1182:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1183:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1184:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Sommp al contatore globale normalizzato l'energia normalizzata del ciclo corrente:
1185:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****          * eventualmente ci sarï¿½ l'overflow */
1186:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyRTAcc += ui32DeltaEnergyRTAcc;
1187:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1188:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* calcolo l'energia fisica associata al contatore globale normalizzato */
1189:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         //ui32Energy = (m_ui32EnergyRTAcc * g_ui16ALGO_EMAX) >> 16;
1190:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   // 32 bit
1191:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                      + (((m_ui32EnergyRTAcc & 0x0000FFFF) * g_ui16ALGO_EMAX) >> 16);  // 32 bit
1192:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1193:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Aggiungo l'offset che tiene conto degli overflow */
1194:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy += m_ui32EnergyMainOffset;
1195:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1196:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1197:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1198:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* PATCH: Chiusura porta */
1199:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if ( ui32EnergyMot == 0 )
1200:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1201:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           ui32EnergyMot = m_ui32EnergyMotOld;
1202:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1203:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         else
1204:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1205:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyMotOld = ui32EnergyMot;
1206:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1207:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* END PATCH */
1208:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1209:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #ifndef DONT_MANAGE_OVERFLOW_DSP
1210:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (ui32EnergyMot < (m_ui32EnergyDspK_1 - m_ui32EnergyDspOffset)) /* Reset Overflow Energy 
1211:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1212:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyDspOffset = m_ui32EnergyDspK_1;
1213:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1214:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1215:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32EnergyMot += m_ui32EnergyDspOffset;
1216:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyDspK_1 = ui32EnergyMot;
1217:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1218:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* End Overflow Energy Acc management */
1219:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #else
1220:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyRTAcc += (((ui32PowerInstantRT_Norm * g_ui16ALGO_KENERGY_MANT) / 10) >> (16 - g
1221:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1222:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* physical energy for RESISTOR, TABLE */
1223:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         //ui32Energy = (m_ui32EnergyRTAcc * g_ui16ALGO_EMAX) >> 16;
1224:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   // 32 bit
1225:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                      + (((m_ui32EnergyRTAcc & 0x0000FFFF) * g_ui16ALGO_EMAX) >> 16);  // 32 bit
1226:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1227:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1228:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* update energy with m_ui32EnergyPeriod */
1229:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         EnergyMeterUpdate(ui32Energy + ui32EnergyMot);
1230:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1231:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* update partial counters */
1232:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         EnergyCountersUpdate();
1233:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1234:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if EMS_USE_ELAPSED_TIMER
1235:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Incrementing local vitality counter */
1236:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         b_ui32TimeElapsedSinceStart++;
1237:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1238:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       } /* (m_psVMeasAccHold->ui8NSamples > 0) */
1239:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1240:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_bOneShot == TRUE)
1241:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1242:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_bAccuEnabled = FALSE;
1243:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1244:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1245:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_ui8EnergyUpdateCnt = 0;
1246:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     } /* (m_ui8EnergyUpdateCnt >= g_ui8ALGO_TS) */
1247:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   } /* (m_bAccuEnabled == TRUE) */
1248:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1249:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
1250:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1251:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1252:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1253:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
1254:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   Starts the given Energy counter
1255:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   --------------------------------*/
1256:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_StartEnergyCount (uint8_t ui8CounterId, stEnergyCounters_t* pstCounterData)
1257:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1258:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_ENERGY_COUNTERS_MAX
1259:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (  (ui8CounterId < EMS_ENERGY_COUNTERS_MAX)
1260:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       &&(pstCounterData != NULL))
1261:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1262:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* copy pstCounterData content to m_asCounters[ui8CounterId] */
1263:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId]=(*pstCounterData);
1264:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* reset some m_asCounters[ui8CounterId] field (all except ui16EnergyTreshold and ui16TimePerio
1265:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui8Flags               = EM_COUNT_STAT_MASK;
1266:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui16EnergyCons         = 0;
1267:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui16TimeElapsed        = 0;
1268:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui16MaxEnergy10sec     = 0;
1269:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui32RawAccum           = 0;
1270:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui32Raw10secAcc        = 0;
1271:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui32RawMaxEnergy10sec  = 0;
1272:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1273:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_OK;
1274:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1275:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else
1276:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1277:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
1278:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1279:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else
1280:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
1281:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1282:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1283:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1284:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1285:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1286:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*-----------------------------------------------------------------
1287:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   Returns energy consumption data about the given Energy counter id
1288:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   -----------------------------------------------------------------*/
1289:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_GetEnergyCount (uint8_t ui8CounterId, stEnergyCounters_t* pstCounterData)
1290:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1291:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_ENERGY_COUNTERS_MAX
1292:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t ui32Tmp;
1293:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1294:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (ui8CounterId < EMS_ENERGY_COUNTERS_MAX)
1295:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       && (pstCounterData != NULL))
1296:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1297:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* calculate Energy in Wh */
1298:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1299:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32Tmp = m_asCounters[ui8CounterId].ui32RawAccum / 3600;
1300:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui16EnergyCons = ui32Tmp & 0x0000FFFF;
1301:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1302:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32Tmp = m_asCounters[ui8CounterId].ui32RawMaxEnergy10sec / 3600;
1303:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui16MaxEnergy10sec = ui32Tmp & 0x0000FFFF;
1304:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1305:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     pstCounterData->ui8Flags            = m_asCounters[ui8CounterId].ui8Flags;
1306:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     pstCounterData->ui16EnergyCons      = m_asCounters[ui8CounterId].ui16EnergyCons;
1307:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     pstCounterData->ui16TimeElapsed     = m_asCounters[ui8CounterId].ui16TimeElapsed;
1308:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     pstCounterData->ui16MaxEnergy10sec  = m_asCounters[ui8CounterId].ui16MaxEnergy10sec;
1309:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1310:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_OK;
1311:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1312:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else
1313:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1314:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
1315:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1316:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else
1317:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
1318:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1319:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1320:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1321:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1322:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1323:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /*--------------------------------
1324:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   Stops the given Energy counter
1325:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   --------------------------------*/
1326:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** eEMS_Err PowerMeter_StopEnergyCount (uint8_t ui8CounterId)
1327:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1328:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_ENERGY_COUNTERS_MAX
1329:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui8CounterId < EMS_ENERGY_COUNTERS_MAX)
1330:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1331:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_asCounters[ui8CounterId].ui8Flags &= ~EM_COUNT_STAT_MASK;
1332:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1333:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_OK;
1334:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1335:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else
1336:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1337:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return EMS_E_INVALID_VALUE;
1338:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1339:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #else
1340:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_UNKNOWN_MODE;
1341:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1342:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1343:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1344:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1345:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1346:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ******************* */
1347:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* Local function      */
1348:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* ******************* */
1349:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1350:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1351:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_BUFFER_DOUBLE_USE
1352:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1353:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1354:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** Swap the double data structures used to decuple the Vrms accumulator measured and
1355:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** Vrms used to calculate power
1356:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1357:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      void
1358:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     void
1359:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1360:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1361:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1362:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1363:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return   void
1364:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1365:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1366:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1367:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1368:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1369:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1370:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     30-05-2011
1371:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1372:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1373:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1374:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1375:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1376:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1377:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1378:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1379:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1380:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1381:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void VMeasBufferHold (void)
1382:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1383:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   sVMeasAcc_t*  psVMeasAccTmp;
1384:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1385:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if INTERRUPT_MANAGE
1386:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*  Disabling Interrupt */
1387:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   SUSPEND_ALL_INTERRUPTS
1388:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1389:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1390:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Switching accumulator */
1391:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   psVMeasAccTmp  = m_psVMeasAccCurr;
1392:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr = m_psVMeasAccHold;
1393:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccHold = psVMeasAccTmp;
1394:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1395:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* reset the data structure that will be used */
1396:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   VMeasBufferReset();
1397:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1398:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if INTERRUPT_MANAGE
1399:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Enabling Interrupt */
1400:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   RESUME_ALL_INTERRUPTS
1401:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1402:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1403:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1404:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif /*EMS_BUFFER_DOUBLE_USE*/
1405:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1406:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1407:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1408:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** Reset the current structure used to manage Voltage: peack, rms, rms2
1409:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1410:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      void
1411:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     void
1412:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1413:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1414:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1415:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1416:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return   void
1417:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1418:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1419:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1420:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1421:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1422:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1423:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     30-05-2011
1424:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1425:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1426:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1427:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1428:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1429:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1430:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1431:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1432:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1433:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1434:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void VMeasBufferReset (void)
1435:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1436:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Reset structure for next measure session */
1437:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if (EMS_V_PEAK_AVERAGE || EMS_V_RMS_AVERAGE)
1438:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeakAcc  = 0;
1439:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1440:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1441:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeak2Acc  = 0;
1442:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui8NSamples   = 0;
1443:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1444:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1445:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1446:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1447:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** Perform the average calculation of Vpeak accumulator (if enabled) or Vrms2 accumulator
1448:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** (if enabled) than reset accumulator/s
1449:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1450:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      void
1451:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     void
1452:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1453:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1454:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1455:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1456:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return   Average normalized VPeak on last N samples
1457:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1458:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1459:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1460:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1461:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1462:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1463:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     30-05-2011
1464:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1465:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1466:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1467:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1468:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1469:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1470:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1471:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1472:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1473:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1474:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static uint16_t VoltAvgMeasuresUpdate (sVMeasAcc_t* psVMeasAcc)
  12                             		.loc 1 1474 0
  13                             	.LVL0:
  14 0000 7E A7                   		push.l	r7
  15                             	.LCFI0:
1475:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1476:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t  ui16VPeakAvg = 0;
1477:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1478:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if ( psVMeasAcc == NULL )
1479:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1480:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return ui16VPeakAvg;
1481:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1482:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1483:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* the psVMeasAcc->ui8NSamples value cannot be 0 */
1484:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1485:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if (EMS_V_PEAK_AVERAGE || EMS_V_RMS_AVERAGE)
1486:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (psVMeasAcc->ui8NSamples > 0)
  16                             		.loc 1 1486 0
  17 0002 FB E2 00 00 00 00       		mov.L	#_m_sVMeasAcc, r14
  18 0008 59 E4 08                		movu.B	8[r14], r4
  19 000b 61 04                   		cmp	#0, r4
  20 000d 20 0B                   		beq	.L2
1487:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1488:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     psVMeasAcc->ui32VPeakAcc /= psVMeasAcc->ui8NSamples;
  21                             		.loc 1 1488 0
  22 000f EC E3                   		mov.L	[r14], r3
  23 0011 FC 27 43                		divu	r4, r3
  24 0014 E3 E3                   		mov.L	r3, [r14]
  25 0016 2E 04                   		bra	.L3
  26                             	.L2:
1489:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1490:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else
1491:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1492:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     psVMeasAcc->ui32VPeakAcc = 0;
  27                             		.loc 1 1492 0
  28 0018 E3 E4                   		mov.L	r4, [r14]
  29                             		.balign 2,3,1
  30                             	.L3:
1493:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1494:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1495:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1496:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui16VPeakAvg = (uint16_t)psVMeasAcc->ui32VPeakAcc;
  31                             		.loc 1 1496 0
  32 001a EC E7                   		mov.L	[r14], r7
  33                             	.LVL1:
1497:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1498:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    #if EMS_V_RMS_AVERAGE
1499:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_ui16VrmsAvg = (uint16_t)((psVMeasAcc->ui32VPeakAcc * 1000) / (SQUARE_ROOT_2 * 1000));
  34                             		.loc 1 1499 0
  35 001c EF 71                   		mov.L	r7, r1
  36 001e 76 11 E8 03             		mul	#0x3e8, r1
  37 0022 05 00 00 00             		bsr	___floatunsisf
  38                             	.LVL2:
  39 0026 FB 22 00 C0 B0 44       		mov.L	#0x44b0c000, r2
  40 002c 05 00 00 00             		bsr	___divsf3
  41                             	.LVL3:
  42 0030 05 00 00 00             		bsr	___fixunssfsi
  43                             	.LVL4:
1500:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1501:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    #if EMS_V_RMS_AVERAGE_PHY
1502:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* Normalized to physical conversion */
1503:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_ui16VrmsAvg = (uint16_t)((((uint32_t)m_ui16VrmsAvg * g_ui16ALGO_VMAX10) / 10) >> 16);
  44                             		.loc 1 1503 0
  45 0034 FB E2 00 00 00 00       		mov.L	#_m_sAlgoParams, r14
  46 003a EC EE                   		mov.L	[r14], r14
  47 003c 5F 11                   		movu.W	r1, r1
  48 003e 5D EE 04                		movu.W	8[r14], r14
  49 0041 FB 42 00 00 00 00       		mov.L	#_m_ui16VrmsAvg, r4
  50 0047 4F 1E                   		mul	r1, r14
  51 0049 FD 74 9E 0A             		divu	#10, r14
  52 004d 69 0E                   		shlr	#16, r14
  53 004f D3 4E                   		mov.W	r14, [r4]
1504:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    #endif /* EMS_V_RMS_AVERAGE_PHY */
1505:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1506:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    #endif /* EMS_V_RMS_AVERAGE */
1507:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1508:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1509:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1510:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return ui16VPeakAvg;
1511:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
  54                             		.loc 1 1511 0
  55 0051 5F 71                   		movu.W	r7, r1
  56 0053 3F 77 01                		rtsd	#4, r7-r7
  57                             	.LFE29:
  59                             		.section	.text.EMS_GetPtrToDSPInfoBuffer,"ax",@progbits
  60                             		.global	_EMS_GetPtrToDSPInfoBuffer
  62                             	_EMS_GetPtrToDSPInfoBuffer:
  63                             	.LFB0:
 320:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
  64                             		.loc 1 320 0
  65                             	.LVL5:
 321:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	if(posMotor < CONFIG_EMS_MLOAD_ITEMS_MAX)
  66                             		.loc 1 321 0
  67 0000 5B 11                   		movu.B	r1, r1
  68 0002 61 01                   		cmp	#0, r1
  69 0004 20 05                   		beq	.L7
 327:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 		return NULL;
  70                             		.loc 1 327 0
  71 0006 66 01                   		mov.L	#0, r1
  72                             	.LVL6:
  73 0008 02                      		rts
  74                             	.L7:
 323:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 		return (&EMSInfoBuffer[posMotor]);
  75                             		.loc 1 323 0
  76 0009 FB 12 00 00 00 00       		mov.L	#_EMSInfoBuffer, r1
 329:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
  77                             		.loc 1 329 0
  78 000f 02                      		rts
  79                             	.LFE0:
  81                             		.section	.text.PowerMeter_HWReset,"ax",@progbits
  82                             		.global	_PowerMeter_HWReset
  84                             	_PowerMeter_HWReset:
  85                             	.LFB1:
 337:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
  86                             		.loc 1 337 0
 339:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
  87                             		.loc 1 339 0
  88 0000 66 01                   		mov.L	#0, r1
  89 0002 02                      		rts
  90                             	.LFE1:
  92                             		.section	.text.PowerMeter_InitConfig,"ax",@progbits
  93                             		.global	_PowerMeter_InitConfig
  95                             	_PowerMeter_InitConfig:
  96                             	.LFB2:
 354:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
  97                             		.loc 1 354 0
  98                             	.LVL7:
  99 0000 7E A7                   		push.l	r7
 100                             	.LCFI1:
 370:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_sAlgoParams = *psEnergyAlgoDataStruct;
 101                             		.loc 1 370 0
 102 0002 EC 17                   		mov.L	[r1], r7
 103 0004 FB E2 00 00 00 00       		mov.L	#_m_sAlgoParams, r14
 104 000a E3 E7                   		mov.L	r7, [r14]
 105 000c A8 19                   		mov.L	4[r1], r1
 106                             	.LVL8:
 107 000e E7 E1 01                		mov.L	r1, 4[r14]
 108                             	.LVL9:
 381:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  EMSInfoBuffer[i].ui16PVal = 0;
 109                             		.loc 1 381 0
 110 0011 FB E2 00 00 00 00       		mov.L	#_EMSInfoBuffer, r14
 111 0017 F8 E5 00                		mov.W	#0, [r14]
 382:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  EMSInfoBuffer[i].ui32EVal = 0;
 112                             		.loc 1 382 0
 113 001a F9 E6 01 00             		mov.L	#0, 4[r14]
 114                             	.LVL10:
 388:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 115                             		.loc 1 388 0
 116 001e 66 01                   		mov.L	#0, r1
 117 0020 3F 77 01                		rtsd	#4, r7-r7
 118                             	.LFE2:
 120                             		.section	.text.PowerMeter_InitSw,"ax",@progbits
 121                             		.global	_PowerMeter_InitSw
 123                             	_PowerMeter_InitSw:
 124                             	.LFB3:
 397:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 125                             		.loc 1 397 0
 410:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16VrmsAvg = 0;
 126                             		.loc 1 410 0
 127 0000 FB E2 00 00 00 00       		mov.L	#_m_ui16VrmsAvg, r14
 128 0006 F8 E5 00                		mov.W	#0, [r14]
 416:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui16PowerPeriod      = 0;
 129                             		.loc 1 416 0
 130 0009 FB E2 00 00 00 00       		mov.L	#_m_ui16PowerPeriod, r14
 131 000f F8 E5 00                		mov.W	#0, [r14]
 418:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui8EnergyUpdateCnt   = 0;
 132                             		.loc 1 418 0
 133 0012 FB E2 00 00 00 00       		mov.L	#_m_sFlags, r14
 134 0018 F8 E4 80                		mov.B	#0xffffff80, [r14]
 420:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyRTAcc      = 0;
 135                             		.loc 1 420 0
 136 001b FB E2 00 00 00 00       		mov.L	#_m_ui32EnergyRTAcc, r14
 137 0021 F8 E6 00                		mov.L	#0, [r14]
 422:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyOffset     = 0;
 138                             		.loc 1 422 0
 139 0024 FB E2 00 00 00 00       		mov.L	#_m_ui32EnergyOffset, r14
 140 002a F8 E6 00                		mov.L	#0, [r14]
 426:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyMainK_1 = 0;
 141                             		.loc 1 426 0
 142 002d FB E2 00 00 00 00       		mov.L	#_m_ui32EnergyMainK_1, r14
 143 0033 F8 E6 00                		mov.L	#0, [r14]
 429:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyMainOffset = 0;
 144                             		.loc 1 429 0
 145 0036 FB E2 00 00 00 00       		mov.L	#_m_ui32EnergyMainOffset, r14
 146 003c F8 E6 00                		mov.L	#0, [r14]
 432:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyDspK_1     = 0;
 147                             		.loc 1 432 0
 148 003f FB E2 00 00 00 00       		mov.L	#_m_ui32EnergyDspK_1, r14
 149 0045 F8 E6 00                		mov.L	#0, [r14]
 434:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_ui32EnergyDspOffset  = 0;
 150                             		.loc 1 434 0
 151 0048 FB E2 00 00 00 00       		mov.L	#_m_ui32EnergyDspOffset, r14
 152 004e F8 E6 00                		mov.L	#0, [r14]
 440:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 153                             		.loc 1 440 0
 154 0051 66 01                   		mov.L	#0, r1
 155 0053 02                      		rts
 156                             	.LFE3:
 158                             		.section	.text.PowerMeter_StartCal,"ax",@progbits
 159                             		.global	_PowerMeter_StartCal
 161                             	_PowerMeter_StartCal:
 162                             	.LFB4:
 448:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 163                             		.loc 1 448 0
 450:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 164                             		.loc 1 450 0
 165 0000 66 11                   		mov.L	#1, r1
 166 0002 02                      		rts
 167                             	.LFE4:
 169                             		.section	.text.PowerMeter_LoadRegister,"ax",@progbits
 170                             		.global	_PowerMeter_LoadRegister
 172                             	_PowerMeter_LoadRegister:
 173                             	.LFB5:
 461:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 174                             		.loc 1 461 0
 175                             	.LVL11:
 176 0000 6E 7B                   		pushm	r7-r11
 177                             	.LCFI2:
 480:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   switch (psLoadRegister->eType)
 178                             		.loc 1 480 0
 179 0002 ED 1E 02                		mov.L	8[r1], r14
 461:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 180                             		.loc 1 461 0
 181 0005 EF 17                   		mov.L	r1, r7
 480:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   switch (psLoadRegister->eType)
 182                             		.loc 1 480 0
 183 0007 61 2E                   		cmp	#2, r14
 184 0009 3A A6 00                		beq	.L16
 185 000c 61 3E                   		cmp	#3, r14
 186 000e 3A DC 00                		beq	.L17
 187 0011 61 1E                   		cmp	#1, r14
 188 0013 3B 27 01                		bne	.L26
 484:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (   (psLoadRegister->params.res.pui16GMant == NULL)
 189                             		.loc 1 484 0
 190 0016 ED 1E 03                		mov.L	12[r1], r14
 191 0019 61 0E                   		cmp	#0, r14
 192 001b 3A 1F 01                		beq	.L26
 485:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           || (psLoadRegister->params.res.pi8Gexp == NULL))
 193                             		.loc 1 485 0
 194 001e ED 1A 04                		mov.L	16[r1], r10
 195 0021 61 0A                   		cmp	#0, r10
 196 0023 3A 17 01                		beq	.L26
 489:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8RLoadIndex >= CONFIG_EMS_RLOAD_ITEMS_MAX)
 197                             		.loc 1 489 0
 198 0026 FB 42 00 00 00 00       		mov.L	#_m_sLoadIndex, r4
 199 002c 58 44                   		movu.B	[r4], r4
 200 002e 68 64                   		shlr	#6, r4
 201 0030 3B 06 01                		bne	.L24
 495:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].ui8Mask       = psLoadRegister->ui8Mask;
 202                             		.loc 1 495 0
 203 0033 CC 1B                   		mov.B	[r1], r11
 204 0035 FB 42 00 00 00 00       		mov.L	#_m_asRLoadParam, r4
 205 003b C3 4B                   		mov.B	r11, [r4]
 497:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant     = *(psLoadRegister->params.res.pui16GMant);
 206                             		.loc 1 497 0
 207 003d DC EE                   		mov.W	[r14], r14
 496:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].pui8Status    = psLoadRegister->pui8Status;
 208                             		.loc 1 496 0
 209 003f ED 1B 01                		mov.L	4[r1], r11
 497:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant     = *(psLoadRegister->params.res.pui16GMant);
 210                             		.loc 1 497 0
 211 0042 D7 4E 04                		mov.W	r14, 8[r4]
 496:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].pui8Status    = psLoadRegister->pui8Status;
 212                             		.loc 1 496 0
 213 0045 E7 4B 01                		mov.L	r11, 4[r4]
 498:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].i8Gexp        = *(psLoadRegister->params.res.pi8Gexp);
 214                             		.loc 1 498 0
 215 0048 CC AA                   		mov.B	[r10], r10
 502:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (psLoadRegister->params.res.pui8Calib != NULL)
 216                             		.loc 1 502 0
 217 004a A9 1F                   		mov.L	20[r1], r7
 498:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asRLoadParam[m_ui8RLoadIndex].i8Gexp        = *(psLoadRegister->params.res.pi8Gexp);
 218                             		.loc 1 498 0
 219 004c C7 4A 0A                		mov.B	r10, 10[r4]
 502:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (psLoadRegister->params.res.pui8Calib != NULL)
 220                             		.loc 1 502 0
 221 004f 61 07                   		cmp	#0, r7
 222 0051 20 4B                   		beq	.L18
 504:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (   (*(psLoadRegister->params.res.pui8Calib) != RESISTOR_CALIB_NO_CALIB)
 223                             		.loc 1 504 0
 224 0053 58 77                   		movu.B	[r7], r7
 225 0055 75 57 FF                		cmp	#0xff, r7
 226 0058 20 44                   		beq	.L18
 505:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             && (*(psLoadRegister->params.res.pui8Calib) != RESISTOR_CALIB_DEF_VALUE))
 227                             		.loc 1 505 0
 228 005a 75 57 80                		cmp	#0x80, r7
 229 005d 20 3F                   		beq	.L18
 230                             	.LVL12:
 509:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			tempVal1 = (((((int32_t)(RESISTOR_CALIB_DEF_VALUE - *(psLoadRegister->params.res.pui8Calib))) <<
 231                             		.loc 1 509 0
 232 005f 75 43 80                		mov.L	#0x80, r3
 233 0062 FF 07 73                		sub	r7, r3, r7
 234 0065 6C 87                   		shll	#8, r7
 235 0067 76 17 9A 19             		mul	#0x199a, r7
 236 006b FD B0 72                		shar	#16, r7, r2
 237                             	.LVL13:
 510:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			compValue = (uint16_t)((  m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant * tempVal1)>>15);
 238                             		.loc 1 510 0
 239 006e 5F E7                   		movu.W	r14, r7
 508:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			diffToOvflw = 0xFFFF - m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant;
 240                             		.loc 1 508 0
 241 0070 FC 3B E1                		not	r14, r1
 242                             	.LVL14:
 510:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			compValue = (uint16_t)((  m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant * tempVal1)>>15);
 243                             		.loc 1 510 0
 244 0073 4F 27                   		mul	r2, r7
 245 0075 6A F7                   		shar	#15, r7
 246                             	.LVL15:
 511:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 			if(compValue <= diffToOvflw)
 247                             		.loc 1 511 0
 248 0077 DF 11                   		mov.W	r1, r1
 249 0079 47 17                   		cmp	r1, r7
 250 007b EF 73                   		mov.L	r7, r3
 251 007d 2A 04                   		bgt	.L19
 252 007f 2E 17                   		bra	.L20
 253                             	.L19:
 518:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 				if(tempVal1 >= 0)
 254                             		.loc 1 518 0
 255 0081 61 02                   		cmp	#0, r2
 256 0083 29 13                   		blt	.L20
 520:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant = (m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant >> 1) +
 257                             		.loc 1 520 0
 258 0085 5F EE                   		movu.W	r14, r14
 259                             	.LVL16:
 260 0087 6A 13                   		shar	#1, r3
 261 0089 68 1E                   		shlr	#1, r14
 262 008b 4B E3                   		add	r14, r3
 523:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].i8Gexp += 1;
 263                             		.loc 1 523 0
 264 008d 62 1A                   		add	#1, r10
 520:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant = (m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant >> 1) +
 265                             		.loc 1 520 0
 266 008f 91 43                   		mov.W	r3, 8[r4]
 523:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].i8Gexp += 1;
 267                             		.loc 1 523 0
 268 0091 C7 4A 0A                		mov.B	r10, 10[r4]
 269 0094 2E 08                   		bra	.L18
 270                             	.LVL17:
 271                             	.L20:
 527:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 					m_asRLoadParam[m_ui8RLoadIndex].ui16Gmant += compValue;
 272                             		.loc 1 527 0
 273 0096 4B 7E                   		add	r7, r14
 274                             	.LVL18:
 275 0098 D7 4E 04                		mov.W	r14, 8[r4]
 276                             	.LVL19:
 277 009b 03                      		.balign 2,3,5
 278                             	.L18:
 535:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       ++m_ui8RLoadIndex;
 279                             		.loc 1 535 0
 280 009c FB A2 00 00 00 00       		mov.L	#_m_sLoadIndex, r10
 281 00a2 CC A7                   		mov.B	[r10], r7
 282 00a4 75 27 3F                		and	#63, r7
 283 00a7 75 37 40                		or	#64, r7
 284 00aa C3 A7                   		mov.B	r7, [r10]
 285 00ac 38 92 00                		bra	.L29
 286                             	.LVL20:
 287                             	.L16:
 541:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (   (psLoadRegister->params.mot.pui16PVal == NULL)
 288                             		.loc 1 541 0
 289 00af A8 9B                   		mov.L	12[r1], r3
 290 00b1 61 03                   		cmp	#0, r3
 291 00b3 3A 87 00                		beq	.L26
 542:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           || (psLoadRegister->params.mot.pui32EVal == NULL))
 292                             		.loc 1 542 0
 293 00b6 A9 14                   		mov.L	16[r1], r4
 294 00b8 61 04                   		cmp	#0, r4
 295 00ba 3A 80 00                		beq	.L26
 546:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8MLoadIndex >= CONFIG_EMS_MLOAD_ITEMS_MAX)
 296                             		.loc 1 546 0
 297 00bd FB A2 00 00 00 00       		mov.L	#_m_sLoadIndex, r10
 298 00c3 58 A1                   		movu.B	[r10], r1
 299                             	.LVL21:
 300 00c5 68 41                   		shlr	#4, r1
 301 00c7 64 31                   		and	#3, r1
 302 00c9 21 6D                   		bne	.L24
 554:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].ui8Mask       = psLoadRegister->ui8Mask;
 303                             		.loc 1 554 0
 304 00cb CC 7B                   		mov.B	[r7], r11
 555:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui8Status    = psLoadRegister->pui8Status;
 305                             		.loc 1 555 0
 306 00cd A8 7F                   		mov.L	4[r7], r7
 307                             	.LVL22:
 554:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].ui8Mask       = psLoadRegister->ui8Mask;
 308                             		.loc 1 554 0
 309 00cf FB E2 00 00 00 00       		mov.L	#_m_asMLoadParam, r14
 310 00d5 C3 EB                   		mov.B	r11, [r14]
 555:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui8Status    = psLoadRegister->pui8Status;
 311                             		.loc 1 555 0
 312 00d7 E7 E7 01                		mov.L	r7, 4[r14]
 556:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui16PVal     = psLoadRegister->params.mot.pui16PVal;
 313                             		.loc 1 556 0
 314 00da E7 E3 02                		mov.L	r3, 8[r14]
 557:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asMLoadParam[m_ui8MLoadIndex].pui32EVal     = psLoadRegister->params.mot.pui32EVal;
 315                             		.loc 1 557 0
 316 00dd E7 E4 03                		mov.L	r4, 12[r14]
 560:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_ui8MLoadIndex++;
 317                             		.loc 1 560 0
 318 00e0 CC A7                   		mov.B	[r10], r7
 319 00e2 75 27 CF                		and	#-49, r7
 320 00e5 75 37 10                		or	#16, r7
 321 00e8 2E 4A                   		bra	.L41
 322                             	.LVL23:
 323                             	.L17:
 566:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8TLoadIndex >= CONFIG_EMS_TLOAD_ITEMS_MAX)
 324                             		.loc 1 566 0
 325 00ea FB A2 00 00 00 00       		mov.L	#_m_sLoadIndex, r10
 326 00f0 CC A3                   		mov.B	[r10], r3
 491:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_PARAM_IGNORED;
 327                             		.loc 1 491 0
 328 00f2 66 21                   		mov.L	#2, r1
 329                             	.LVL24:
 566:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_ui8TLoadIndex >= CONFIG_EMS_TLOAD_ITEMS_MAX)
 330                             		.loc 1 566 0
 331 00f4 64 F3                   		and	#15, r3
 332 00f6 61 13                   		cmp	#1, r3
 333 00f8 2A 48                   		bgt	.L14
 574:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (EMS_E_OK == TableInit(psLoadRegister->params.tab.pui8Table, psLoadRegister->params.tab.ui
 334                             		.loc 1 574 0
 335 00fa 75 13 14                		mul	#20, r3
 336 00fd A8 F9                   		mov.L	12[r7], r1
 337 00ff 8C 72                   		mov.B	16[r7], r2
 338 0101 70 33 00 00 00 00       		add	#_m_asTLoadParam+8, r3
 339 0107 05 00 00 00             		bsr	_TableInit
 340                             	.LVL25:
 341 010b 61 01                   		cmp	#0, r1
 342 010d 21 31                   		bne	.L29
 577:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asTLoadParam[m_ui8TLoadIndex].ui8Mask     = psLoadRegister->ui8Mask;
 343                             		.loc 1 577 0
 344 010f CC AE                   		mov.B	[r10], r14
 345 0111 CC 7B                   		mov.B	[r7], r11
 346 0113 EF E4                   		mov.L	r14, r4
 347 0115 64 F4                   		and	#15, r4
 348 0117 EF 43                   		mov.L	r4, r3
 349 0119 75 13 14                		mul	#20, r3
 350 011c 70 33 00 00 00 00       		add	#_m_asTLoadParam, r3
 351 0122 C3 3B                   		mov.B	r11, [r3]
 578:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asTLoadParam[m_ui8TLoadIndex].pui8Status  = psLoadRegister->pui8Status;
 352                             		.loc 1 578 0
 353 0124 A8 7F                   		mov.L	4[r7], r7
 354                             	.LVL26:
 580:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ++m_ui8TLoadIndex;
 355                             		.loc 1 580 0
 356 0126 75 2E F0                		and	#-16, r14
 578:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asTLoadParam[m_ui8TLoadIndex].pui8Status  = psLoadRegister->pui8Status;
 357                             		.loc 1 578 0
 358 0129 A0 3F                   		mov.L	r7, 4[r3]
 580:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ++m_ui8TLoadIndex;
 359                             		.loc 1 580 0
 360 012b 71 47 01                		add	#1, r4, r7
 361 012e 64 F7                   		and	#15, r7
 362 0130 57 E7                   		or	r14, r7
 363                             		.balign 2,3,1
 364                             	.L41:
 365 0132 C3 A7                   		mov.B	r7, [r10]
 366 0134 2E 0C                   		bra	.L14
 367                             	.LVL27:
 368                             	.L24:
 491:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_PARAM_IGNORED;
 369                             		.loc 1 491 0
 370 0136 66 21                   		mov.L	#2, r1
 371 0138 2E 08                   		bra	.L14
 372                             	.LVL28:
 373                             	.L26:
 487:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         return EMS_E_INVALID_VALUE;
 374                             		.loc 1 487 0
 375 013a 66 31                   		mov.L	#3, r1
 376                             	.LVL29:
 377 013c 2E 04                   		bra	.L14
 378                             	.LVL30:
 379                             	.L29:
 590:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
 380                             		.loc 1 590 0
 381 013e 66 01                   		mov.L	#0, r1
 382                             		.balign 2,3,2
 383                             	.L14:
 591:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 384                             		.loc 1 591 0
 385 0140 3F 7B 05                		rtsd	#20, r7-r11
 386                             	.LFE5:
 388 0143 03                      		.section	.text.PowerMeter_StartMeasure,"ax",@progbits
 389                             		.global	_PowerMeter_StartMeasure
 391                             	_PowerMeter_StartMeasure:
 392                             	.LFB6:
 600:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 393                             		.loc 1 600 0
 394                             	.LVL31:
 601:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (bResetCounters == TRUE)
 395                             		.loc 1 601 0
 396 0000 61 12                   		cmp	#1, r2
 397 0002 21 14                   		bne	.L43
 605:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     b_ui32EnergyCounterWh = 0;
 398                             		.loc 1 605 0
 399 0004 FB E2 00 00 00 00       		mov.L	#_b_ui32EnergyCounterWh, r14
 400 000a F8 E6 00                		mov.L	#0, [r14]
 606:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     b_ui16EnergyCounterWhAcc = 0;
 401                             		.loc 1 606 0
 402 000d FB E2 00 00 00 00       		mov.L	#_b_ui16EnergyCounterWhAcc, r14
 403 0013 F8 E5 00                		mov.W	#0, [r14]
 404                             		.balign 2,3,5
 405                             	.L43:
 612:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = TRUE;
 406                             		.loc 1 612 0
 407 0016 FB E2 00 00 00 00       		mov.L	#_m_sFlags, r14
 408 001c CC E4                   		mov.B	[r14], r4
 614:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (C_Conv == SINGLE_CONV)
 409                             		.loc 1 614 0
 410 001e 61 01                   		cmp	#0, r1
 612:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = TRUE;
 411                             		.loc 1 612 0
 412 0020 78 74                   		bset	#7, r4
 614:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (C_Conv == SINGLE_CONV)
 413                             		.loc 1 614 0
 414 0022 21 06                   		bne	.L44
 616:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_bOneShot = TRUE;
 415                             		.loc 1 616 0
 416 0024 78 64                   		bset	#6, r4
 417 0026 2E 04                   		bra	.L46
 418                             	.L44:
 620:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_bOneShot = FALSE;
 419                             		.loc 1 620 0
 420 0028 7A 64                   		bclr	#6, r4
 421                             		.balign 2,3,1
 422                             	.L46:
 423 002a C3 E4                   		mov.B	r4, [r14]
 624:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 424                             		.loc 1 624 0
 425 002c 66 01                   		mov.L	#0, r1
 426                             	.LVL32:
 427 002e 02                      		rts
 428                             	.LFE6:
 430 002f 03                      		.section	.text.PowerMeter_StopMeasure,"ax",@progbits
 431                             		.global	_PowerMeter_StopMeasure
 433                             	_PowerMeter_StopMeasure:
 434                             	.LFB7:
 632:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 435                             		.loc 1 632 0
 633:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = FALSE;
 436                             		.loc 1 633 0
 437 0000 FB E2 00 00 00 00       		mov.L	#_m_sFlags, r14
 438 0006 CC E4                   		mov.B	[r14], r4
 636:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 439                             		.loc 1 636 0
 440 0008 66 01                   		mov.L	#0, r1
 633:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_bAccuEnabled = FALSE;
 441                             		.loc 1 633 0
 442 000a 7A 74                   		bclr	#7, r4
 443 000c C3 E4                   		mov.B	r4, [r14]
 636:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 444                             		.loc 1 636 0
 445 000e 02                      		rts
 446                             	.LFE7:
 448                             		.section	.text.PowerMeter_GetInstant_I,"ax",@progbits
 449                             		.global	_PowerMeter_GetInstant_I
 451                             	_PowerMeter_GetInstant_I:
 452                             	.LFB8:
 644:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 453                             		.loc 1 644 0
 454                             	.LVL33:
 646:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 455                             		.loc 1 646 0
 456 0000 66 11                   		mov.L	#1, r1
 457                             	.LVL34:
 458 0002 02                      		rts
 459                             	.LFE8:
 461                             		.section	.text.PowerMeter_GetInstant_V,"ax",@progbits
 462                             		.global	_PowerMeter_GetInstant_V
 464                             	_PowerMeter_GetInstant_V:
 465                             	.LFB9:
 654:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 466                             		.loc 1 654 0
 467                             	.LVL35:
 671:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 468                             		.loc 1 671 0
 469 0000 66 11                   		mov.L	#1, r1
 470                             	.LVL36:
 471 0002 02                      		rts
 472                             	.LFE9:
 474                             		.section	.text.PowerMeter_SetInstant_V,"ax",@progbits
 475                             		.global	_PowerMeter_SetInstant_V
 477                             	_PowerMeter_SetInstant_V:
 478                             	.LFB10:
 679:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 479                             		.loc 1 679 0
 480                             	.LVL37:
 481 0000 6C 61                   		shll	#6, r1
 482                             	.LVL38:
 483 0002 6E 7B                   		pushm	r7-r11
 484                             	.LCFI3:
 485 0004 77 01 FF FF 00          		cmp	#0xffff, r1
 486 0009 25 07                   		bleu	.L51
 487 000b FB 1E FF FF 00          		mov.L	#0xffff, r1
 488                             	.LVL39:
 489                             		.balign 2,3,5
 490                             	.L51:
 697:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32VADcalib -= (uint32_t)g_ui16ALGO_NORM_RTN;
 491                             		.loc 1 697 0
 492 0010 FB 72 00 00 00 00       		mov.L	#_m_sAlgoParams, r7
 493 0016 EC 77                   		mov.L	[r7], r7
 494 0018 06 C1 71 05             		sub	10[r7].UW, r1
 495                             	.LVL40:
 715:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeakAcc += ui32VADcalib;
 496                             		.loc 1 715 0
 497 001c EF 1A                   		mov.L	r1, r10
 498 001e FB 72 00 00 00 00       		mov.L	#_m_sVMeasAcc, r7
 499 0024 06 88 7A                		add	[r7].L, r10
 500 0027 E3 7A                   		mov.L	r10, [r7]
 719:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui8NSamples++;
 501                             		.loc 1 719 0
 502 0029 CD 7A 08                		mov.B	8[r7], r10
 503 002c 62 1A                   		add	#1, r10
 504 002e C7 7A 08                		mov.B	r10, 8[r7]
 505 0031 CF AE                   		mov.B	r10, r14
 722:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (m_bAccuEnabled == TRUE)
 506                             		.loc 1 722 0
 507 0033 FB A2 00 00 00 00       		mov.L	#_m_sFlags, r10
 508 0039 CC AB                   		mov.B	[r10], r11
 509 003b 75 2B 80                		and	#0xffffff80, r11
 510 003e EF BA                   		mov.L	r11, r10
 511 0040 76 2A 80 00             		and	#0x80, r10
 512 0044 20 10                   		beq	.L52
 727:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32VADcalib *= ui32VADcalib;
 513                             		.loc 1 727 0
 514 0046 4F 11                   		mul	r1, r1
 515                             	.LVL41:
 729:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     ui32VADcalib >>= 16;
 516                             		.loc 1 729 0
 517 0048 FD 90 1A                		shlr	#16, r1, r10
 518                             	.LVL42:
 732:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_psVMeasAccCurr->ui32VPeak2Acc += ui32VADcalib;
 519                             		.loc 1 732 0
 520 004b 06 89 7A 01             		add	4[r7].L, r10
 521                             	.LVL43:
 522 004f E7 7A 01                		mov.L	r10, 4[r7]
 523 0052 2E 16                   		bra	.L53
 524                             	.LVL44:
 525                             	.L52:
 734:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else if (m_psVMeasAccCurr->ui8NSamples > EMS_V_AVERAGE_N_SAMPLES)
 526                             		.loc 1 734 0
 527 0054 5B EE                   		movu.B	r14, r14
 528 0056 75 5E 64                		cmp	#0x64, r14
 529 0059 25 0F                   		bleu	.L53
 739:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     VoltAvgMeasuresUpdate(m_psVMeasAccCurr);
 530                             		.loc 1 739 0
 531 005b 05 00 00 00             		bsr	_VoltAvgMeasuresUpdate.constprop.0
 532                             	.LVL45:
 533                             	.LBB6:
 534                             	.LBB7:
1438:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeakAcc  = 0;
 535                             		.loc 1 1438 0
 536 005f E3 7A                   		mov.L	r10, [r7]
1441:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeak2Acc  = 0;
 537                             		.loc 1 1441 0
 538 0061 E7 7A 01                		mov.L	r10, 4[r7]
1442:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui8NSamples   = 0;
 539                             		.loc 1 1442 0
 540 0064 C7 7B 08                		mov.B	r11, 8[r7]
 541 0067 03                      		.balign 2,3,1
 542                             	.L53:
 543                             	.LBE7:
 544                             	.LBE6:
 744:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 545                             		.loc 1 744 0
 546 0068 66 01                   		mov.L	#0, r1
 547 006a 3F 7B 05                		rtsd	#20, r7-r11
 548                             	.LFE10:
 550 006d 03                      		.section	.text.PowerMeter_GetInstant_P,"ax",@progbits
 551                             		.global	_PowerMeter_GetInstant_P
 553                             	_PowerMeter_GetInstant_P:
 554                             	.LFB11:
 752:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 555                             		.loc 1 752 0
 556                             	.LVL46:
 760:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16P = m_ui16PowerPeriod;
 557                             		.loc 1 760 0
 558 0000 FB E2 00 00 00 00       		mov.L	#_m_ui16PowerPeriod, r14
 559 0006 DC EE                   		mov.W	[r14], r14
 560 0008 D3 1E                   		mov.W	r14, [r1]
 763:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 561                             		.loc 1 763 0
 562 000a 66 01                   		mov.L	#0, r1
 563                             	.LVL47:
 564 000c 02                      		rts
 565                             	.LFE11:
 567                             		.section	.text.PowerMeter_GetAvgLastCycle_P,"ax",@progbits
 568                             		.global	_PowerMeter_GetAvgLastCycle_P
 570                             	_PowerMeter_GetAvgLastCycle_P:
 571                             	.LFB12:
 772:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 572                             		.loc 1 772 0
 573                             	.LVL48:
 781:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16P = m_ui16PowerPeriod;
 574                             		.loc 1 781 0
 575 0000 FB E2 00 00 00 00       		mov.L	#_m_ui16PowerPeriod, r14
 576 0006 DC EE                   		mov.W	[r14], r14
 577 0008 D3 1E                   		mov.W	r14, [r1]
 784:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 578                             		.loc 1 784 0
 579 000a 66 01                   		mov.L	#0, r1
 580                             	.LVL49:
 581 000c 02                      		rts
 582                             	.LFE12:
 584                             		.section	.text.PowerMeter_GetAvgLastCycle_P_100mW,"ax",@progbits
 585                             		.global	_PowerMeter_GetAvgLastCycle_P_100mW
 587                             	_PowerMeter_GetAvgLastCycle_P_100mW:
 588                             	.LFB13:
 793:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 589                             		.loc 1 793 0
 590                             	.LVL50:
 802:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16P = m_ui16PowerPeriod * 10;
 591                             		.loc 1 802 0
 592 0000 FB E2 00 00 00 00       		mov.L	#_m_ui16PowerPeriod, r14
 593 0006 DC EE                   		mov.W	[r14], r14
 594 0008 63 AE                   		mul	#10, r14
 595 000a D3 1E                   		mov.W	r14, [r1]
 805:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 596                             		.loc 1 805 0
 597 000c 66 01                   		mov.L	#0, r1
 598                             	.LVL51:
 599 000e 02                      		rts
 600                             	.LFE13:
 602                             		.section	.text.PowerMeter_Get_I_RMS,"ax",@progbits
 603                             		.global	_PowerMeter_Get_I_RMS
 605                             	_PowerMeter_Get_I_RMS:
 606                             	.LFB14:
 813:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 607                             		.loc 1 813 0
 608                             	.LVL52:
 815:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 609                             		.loc 1 815 0
 610 0000 66 11                   		mov.L	#1, r1
 611                             	.LVL53:
 612 0002 02                      		rts
 613                             	.LFE14:
 615                             		.section	.text.PowerMeter_Get_I_RMS_100mA,"ax",@progbits
 616                             		.global	_PowerMeter_Get_I_RMS_100mA
 618                             	_PowerMeter_Get_I_RMS_100mA:
 619                             	.LFB15:
 823:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 620                             		.loc 1 823 0
 621                             	.LVL54:
 825:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 622                             		.loc 1 825 0
 623 0000 66 11                   		mov.L	#1, r1
 624                             	.LVL55:
 625 0002 02                      		rts
 626                             	.LFE15:
 628                             		.section	.text.PowerMeter_Get_V_RMS,"ax",@progbits
 629                             		.global	_PowerMeter_Get_V_RMS
 631                             	_PowerMeter_Get_V_RMS:
 632                             	.LFB16:
 833:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 633                             		.loc 1 833 0
 634                             	.LVL56:
 850:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui16V = m_ui16VrmsAvg;
 635                             		.loc 1 850 0
 636 0000 FB E2 00 00 00 00       		mov.L	#_m_ui16VrmsAvg, r14
 637 0006 DC EE                   		mov.W	[r14], r14
 638 0008 D3 1E                   		mov.W	r14, [r1]
 860:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 639                             		.loc 1 860 0
 640 000a 66 01                   		mov.L	#0, r1
 641                             	.LVL57:
 642 000c 02                      		rts
 643                             	.LFE16:
 645                             		.section	.text.PowerMeter_Get_V_RMS_100mV,"ax",@progbits
 646                             		.global	_PowerMeter_Get_V_RMS_100mV
 648                             	_PowerMeter_Get_V_RMS_100mV:
 649                             	.LFB17:
 868:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 650                             		.loc 1 868 0
 651                             	.LVL58:
 885:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui32V = (uint32_t)m_ui16VrmsAvg * 10;
 652                             		.loc 1 885 0
 653 0000 FB E2 00 00 00 00       		mov.L	#_m_ui16VrmsAvg, r14
 654 0006 5C EE                   		movu.W	[r14], r14
 655 0008 63 AE                   		mul	#10, r14
 656 000a E3 1E                   		mov.L	r14, [r1]
 895:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 657                             		.loc 1 895 0
 658 000c 66 01                   		mov.L	#0, r1
 659                             	.LVL59:
 660 000e 02                      		rts
 661                             	.LFE17:
 663                             		.section	.text.PowerMeter_GetAvgSinceStart_E_Wh,"ax",@progbits
 664                             		.global	_PowerMeter_GetAvgSinceStart_E_Wh
 666                             	_PowerMeter_GetAvgSinceStart_E_Wh:
 667                             	.LFB18:
 903:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 668                             		.loc 1 903 0
 669                             	.LVL60:
 923:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   *pui32EWh = b_ui32EnergyCounterWh;
 670                             		.loc 1 923 0
 671 0000 FB E2 00 00 00 00       		mov.L	#_b_ui32EnergyCounterWh, r14
 672 0006 EC EE                   		mov.L	[r14], r14
 673 0008 E3 1E                   		mov.L	r14, [r1]
 926:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 674                             		.loc 1 926 0
 675 000a 66 01                   		mov.L	#0, r1
 676                             	.LVL61:
 677 000c 02                      		rts
 678                             	.LFE18:
 680                             		.section	.text.PowerMeter_Accum,"ax",@progbits
 681                             		.global	_PowerMeter_Accum
 683                             	_PowerMeter_Accum:
 684                             	.LFB19:
 934:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 685                             		.loc 1 934 0
 686                             	.LVL62:
 687 0000 6E 7D                   		pushm	r7-r13
 688                             	.LCFI4:
 974:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (m_bAccuEnabled == TRUE)
 689                             		.loc 1 974 0
 690 0002 FB B2 00 00 00 00       		mov.L	#_m_sFlags, r11
 691 0008 CC BA                   		mov.B	[r11], r10
 934:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 692                             		.loc 1 934 0
 693 000a 60 40                   		sub	#4, r0
 694                             	.LCFI5:
 974:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (m_bAccuEnabled == TRUE)
 695                             		.loc 1 974 0
 696 000c EF A7                   		mov.L	r10, r7
 697 000e 76 27 80 00             		and	#0x80, r7
 698 0012 5B 77                   		movu.B	r7, r7
 699 0014 61 07                   		cmp	#0, r7
 700 0016 3A 5C 02                		beq	.L96
 979:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_ui8EnergyUpdateCnt++;
 701                             		.loc 1 979 0
 702 0019 71 A7 01                		add	#1, r10, r7
 703 001c 75 27 3F                		and	#63, r7
 704 001f 75 2A C0                		and	#-64, r10
 705 0022 57 7A                   		or	r7, r10
 706 0024 C3 BA                   		mov.B	r10, [r11]
 981:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     if (m_ui8EnergyUpdateCnt >= g_ui8ALGO_TS)
 707                             		.loc 1 981 0
 708 0026 FB A2 00 00 00 00       		mov.L	#_m_sAlgoParams, r10
 709 002c EC AA                   		mov.L	[r10], r10
 710 002e 45 A7 07                		cmp	7[r10].UB, r7
 711 0031 28 05 38 3F 02          		blt	.L96
 990:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_psVMeasAccHold->ui8NSamples > 0)
 712                             		.loc 1 990 0
 713 0036 FB A2 00 00 00 00       		mov.L	#_m_sVMeasAcc, r10
 714 003c 59 A7 08                		movu.B	8[r10], r7
 715 003f 61 07                   		cmp	#0, r7
 716 0041 20 0A                   		beq	.L87
 993:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16Vpeak2Avg_Norm = (uint16_t)(m_psVMeasAccHold->ui32VPeak2Acc / m_psVMeasAccHold->ui8NSam
 717                             		.loc 1 993 0
 718 0043 ED AC 01                		mov.L	4[r10], r12
 719 0046 FC 27 7C                		divu	r7, r12
 720                             	.LVL63:
 721 0049 2E 05                   		bra	.L67
 722                             	.LVL64:
 723                             	.L87:
 997:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16Vpeak2Avg_Norm = 0;
 724                             		.loc 1 997 0
 725 004b DF 7C                   		mov.W	r7, r12
 726 004d 03                      		.balign 2,3,5
 727                             	.L67:
 728                             	.LVL65:
 729                             	.LBB12:
 730                             	.LBB13:
1438:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeakAcc  = 0;
 731                             		.loc 1 1438 0
 732 004e FB 72 00 00 00 00       		mov.L	#_m_sVMeasAcc, r7
 733                             	.LBE13:
 734                             	.LBE12:
1004:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16VinTab_Norm =                                           /* average Vpeak */
 735                             		.loc 1 1004 0
 736 0054 05 00 00 00             		bsr	_VoltAvgMeasuresUpdate.constprop.0
 737                             	.LVL66:
 738                             	.LBB15:
 739                             	.LBB14:
1438:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeakAcc  = 0;
 740                             		.loc 1 1438 0
 741 0058 3E 70 00                		mov.L	#0, [r7]
1441:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui32VPeak2Acc  = 0;
 742                             		.loc 1 1441 0
 743 005b 3E 71 00                		mov.L	#0, 4[r7]
1442:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   m_psVMeasAccCurr->ui8NSamples   = 0;
 744                             		.loc 1 1442 0
 745 005e 3C 78 00                		mov.B	#0, 8[r7]
 746                             	.LBE14:
 747                             	.LBE15:
1025:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8RLoadIndex; ui8Index++)
 748                             		.loc 1 1025 0
 749 0061 FB 72 00 00 00 00       		mov.L	#_m_sLoadIndex, r7
 750 0067 58 72                   		movu.B	[r7], r2
 965:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32PowerInstantRT_Norm = 0;
 751                             		.loc 1 965 0
 752 0069 66 0A                   		mov.L	#0, r10
1004:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui16VinTab_Norm =                                           /* average Vpeak */
 753                             		.loc 1 1004 0
 754 006b DF 1D                   		mov.W	r1, r13
 755                             	.LVL67:
1025:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8RLoadIndex; ui8Index++)
 756                             		.loc 1 1025 0
 757 006d 68 62                   		shlr	#6, r2
 758 006f CF AB                   		mov.B	r10, r11
1047:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = (uint16_t)(((uint32_t)ui16Vpeak2Avg_Norm * m_asRLoadParam[ui8In
 759                             		.loc 1 1047 0
 760 0071 5F CC                   		movu.W	r12, r12
1048:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                >> (16 - m_asRLoadParam[ui8Index].i8Gexp));
 761                             		.loc 1 1048 0
 762 0073 75 43 10                		mov.L	#16, r3
 763 0076 2E 24                   		bra	.L68
 764                             	.LVL68:
 765                             	.L70:
1031:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (m_asRLoadParam[ui8Index].pui8Status == NULL)
 766                             		.loc 1 1031 0
 767 0078 EF 7E                   		mov.L	r7, r14
 768 007a 63 CE                   		mul	#12, r14
 769 007c 70 EE 00 00 00 00       		add	#_m_asRLoadParam, r14
 770 0082 ED E4 01                		mov.L	4[r14], r4
 771 0085 61 04                   		cmp	#0, r4
 772 0087 3A 98 01                		beq	.L69
1039:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if ((*m_asRLoadParam[ui8Index].pui8Status & m_asRLoadParam[ui8Index].ui8Mask) != 0)
 773                             		.loc 1 1039 0
 774 008a CC 44                   		mov.B	[r4], r4
 775 008c CC EE                   		mov.B	[r14], r14
 776 008e 53 4E                   		and	r4, r14
 777 0090 5B EE                   		movu.B	r14, r14
 778 0092 61 0E                   		cmp	#0, r14
 779 0094 3B 8B 01                		bne	.L69
 780                             	.LVL69:
 781 0097 03                      		.balign 2,3,1
 782                             	.L84:
1025:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8RLoadIndex; ui8Index++)
 783                             		.loc 1 1025 0
 784 0098 62 1B                   		add	#1, r11
 785                             	.LVL70:
 786                             		.balign 2,3,1
 787                             	.L68:
1025:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8RLoadIndex; ui8Index++)
 788                             		.loc 1 1025 0 is_stmt 0 discriminator 1
 789 009a 5B B7                   		movu.B	r11, r7
 790 009c 47 27                   		cmp	r2, r7
 791 009e 29 DA                   		blt	.L70
1063:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8MLoadIndex; ui8Index++)
 792                             		.loc 1 1063 0 is_stmt 1
 793 00a0 FB 72 00 00 00 00       		mov.L	#_m_sLoadIndex, r7
 794 00a6 58 74                   		movu.B	[r7], r4
 795 00a8 66 07                   		mov.L	#0, r7
 796 00aa 68 44                   		shlr	#4, r4
 797 00ac 64 34                   		and	#3, r4
 798 00ae DF 7B                   		mov.W	r7, r11
 799                             	.LVL71:
 800 00b0 CF 7C                   		mov.B	r7, r12
 801                             	.LVL72:
 802 00b2 2E 30                   		bra	.L71
 803                             	.LVL73:
 804                             	.L73:
1069:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (m_asMLoadParam[ui8Index].pui8Status == NULL)
 805                             		.loc 1 1069 0
 806 00b4 FD C4 E3                		shll	#4, r14, r3
 807 00b7 70 33 00 00 00 00       		add	#_m_asMLoadParam, r3
 808 00bd A8 3A                   		mov.L	4[r3], r2
 809 00bf 61 02                   		cmp	#0, r2
 810 00c1 3A 80 01                		beq	.L72
1077:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if ((*m_asMLoadParam[ui8Index].pui8Status & m_asMLoadParam[ui8Index].ui8Mask) != 0)
 811                             		.loc 1 1077 0
 812 00c4 CC 22                   		mov.B	[r2], r2
 813 00c6 CC 33                   		mov.B	[r3], r3
 814 00c8 53 23                   		and	r2, r3
 815 00ca 5B 33                   		movu.B	r3, r3
 816 00cc 61 03                   		cmp	#0, r3
 817 00ce 3B 73 01                		bne	.L72
 818                             	.LVL74:
 819 00d1 03                      		.balign 2,3,1
 820                             	.L85:
1094:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           ui32EnergyMot += *m_asMLoadParam[ui8Index].pui32EVal;
 821                             		.loc 1 1094 0
 822 00d2 6C 4E                   		shll	#4, r14
 823 00d4 70 EE 00 00 00 00       		add	#_m_asMLoadParam, r14
 824 00da ED EE 03                		mov.L	12[r14], r14
1063:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8MLoadIndex; ui8Index++)
 825                             		.loc 1 1063 0
 826 00dd 62 1C                   		add	#1, r12
 827                             	.LVL75:
1094:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           ui32EnergyMot += *m_asMLoadParam[ui8Index].pui32EVal;
 828                             		.loc 1 1094 0
 829 00df 06 88 E7                		add	[r14].L, r7
 830                             	.LVL76:
 831                             		.balign 2,3,1
 832                             	.L71:
1063:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8MLoadIndex; ui8Index++)
 833                             		.loc 1 1063 0 discriminator 1
 834 00e2 5B CE                   		movu.B	r12, r14
 835 00e4 47 4E                   		cmp	r4, r14
 836 00e6 29 CE                   		blt	.L73
 837 00e8 66 0C                   		mov	#0, r12
 838                             	.LVL77:
1103:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8TLoadIndex; ui8Index++)
 839                             		.loc 1 1103 0 discriminator 1
 840 00ea FB 92 00 00 00 00       		mov.L	#_m_sLoadIndex, r9
 841 00f0 2E 28                   		bra	.L74
 842                             	.LVL78:
 843                             	.L77:
1109:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           if (m_asTLoadParam[ui8Index].pui8Status == NULL)
 844                             		.loc 1 1109 0
 845 00f2 EF E4                   		mov.L	r14, r4
 846 00f4 75 14 14                		mul	#20, r4
 847 00f7 70 44 00 00 00 00       		add	#_m_asTLoadParam, r4
 848 00fd A8 4B                   		mov.L	4[r4], r3
 849 00ff 61 03                   		cmp	#0, r3
 850 0101 3A 51 01                		beq	.L75
1117:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           else if ((*m_asTLoadParam[ui8Index].pui8Status & m_asTLoadParam[ui8Index].ui8Mask) != 0)
 851                             		.loc 1 1117 0
 852 0104 CC 33                   		mov.B	[r3], r3
 853 0106 CC 44                   		mov.B	[r4], r4
 854 0108 53 34                   		and	r3, r4
 855 010a 5B 44                   		movu.B	r4, r4
 856 010c 61 04                   		cmp	#0, r4
 857 010e 3B 44 01                		bne	.L75
 858 0111 2E 05                   		bra	.L76
 859                             	.LVL79:
 860                             	.L86:
1138:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****               ui32PowerInstantRT_Norm += (uint32_t)ui16PowerInstant_Norm;
 861                             		.loc 1 1138 0
 862 0113 06 C8 0A                		add	[r0].UW, r10
 863                             	.LVL80:
 864                             		.balign 2,3,1
 865                             	.L76:
1103:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8TLoadIndex; ui8Index++)
 866                             		.loc 1 1103 0
 867 0116 62 1C                   		add	#1, r12
 868                             	.LVL81:
 869                             		.balign 2,3,5
 870                             	.L74:
1103:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         for (ui8Index = 0; ui8Index < m_ui8TLoadIndex; ui8Index++)
 871                             		.loc 1 1103 0 is_stmt 0 discriminator 1
 872 0118 CC 94                   		mov.B	[r9], r4
 873 011a 5B CE                   		movu.B	r12, r14
 874 011c 64 F4                   		and	#15, r4
 875 011e 47 4E                   		cmp	r4, r14
 876 0120 29 D2                   		blt	.L77
1145:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui16PowerPeriod =   (uint16_t)((ui32PowerInstantRT_Norm * g_ui16ALGO_PMAX) >> 16)   /* ph
 877                             		.loc 1 1145 0 is_stmt 1
 878 0122 FB C2 00 00 00 00       		mov.L	#_m_sAlgoParams, r12
 879                             	.LVL82:
 880 0128 EC C4                   		mov.L	[r12], r4
 881 012a 5C 4C                   		movu.W	[r4], r12
1154:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32DeltaEnergyRTAcc = (((ui32PowerInstantRT_Norm * g_ui16ALGO_KENERGY_MANT) / 10) >> (16 -
 882                             		.loc 1 1154 0
 883 012c 5D 4E 02                		movu.W	4[r4], r14
 884                             	.LVL83:
1145:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui16PowerPeriod =   (uint16_t)((ui32PowerInstantRT_Norm * g_ui16ALGO_PMAX) >> 16)   /* ph
 885                             		.loc 1 1145 0
 886 012f 4F AC                   		mul	r10, r12
1154:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32DeltaEnergyRTAcc = (((ui32PowerInstantRT_Norm * g_ui16ALGO_KENERGY_MANT) / 10) >> (16 -
 887                             		.loc 1 1154 0
 888 0131 4F AE                   		mul	r10, r14
 889 0133 75 4A 10                		mov.L	#16, r10
 890                             	.LVL84:
 891 0136 06 01 4A 06             		sub	6[r4].B, r10
 892 013a FD 74 9E 0A             		divu	#10, r14
1145:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui16PowerPeriod =   (uint16_t)((ui32PowerInstantRT_Norm * g_ui16ALGO_PMAX) >> 16)   /* ph
 893                             		.loc 1 1145 0
 894 013e 69 0C                   		shlr	#16, r12
1154:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32DeltaEnergyRTAcc = (((ui32PowerInstantRT_Norm * g_ui16ALGO_KENERGY_MANT) / 10) >> (16 -
 895                             		.loc 1 1154 0
 896 0140 FD 60 AE                		shlr	r10, r14
1158:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyRTAcc += ui32DeltaEnergyRTAcc;
 897                             		.loc 1 1158 0
 898 0143 FB A2 00 00 00 00       		mov.L	#_m_ui32EnergyRTAcc, r10
 899 0149 06 88 AE                		add	[r10].L, r14
1145:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui16PowerPeriod =   (uint16_t)((ui32PowerInstantRT_Norm * g_ui16ALGO_PMAX) >> 16)   /* ph
 900                             		.loc 1 1145 0
 901 014c 4B CB                   		add	r12, r11
 902                             	.LVL85:
 903 014e FB C2 00 00 00 00       		mov.L	#_m_ui16PowerPeriod, r12
 904 0154 D3 CB                   		mov.W	r11, [r12]
1158:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyRTAcc += ui32DeltaEnergyRTAcc;
 905                             		.loc 1 1158 0
 906 0156 E3 AE                   		mov.L	r14, [r10]
1162:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                      + (((m_ui32EnergyRTAcc & 0x0000FFFF) * g_ui16ALGO_EMAX) >> 16);  /* 32 bit */
 907                             		.loc 1 1162 0
 908 0158 EF EB                   		mov.L	r14, r11
1161:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   /* 32 bit */
 909                             		.loc 1 1161 0
 910 015a 5D 4A 01                		movu.W	2[r4], r10
1162:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                      + (((m_ui32EnergyRTAcc & 0x0000FFFF) * g_ui16ALGO_EMAX) >> 16);  /* 32 bit */
 911                             		.loc 1 1162 0
 912 015d 77 2B FF FF 00          		and	#0xffff, r11
1161:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   /* 32 bit */
 913                             		.loc 1 1161 0
 914 0162 69 0E                   		shlr	#16, r14
1162:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                      + (((m_ui32EnergyRTAcc & 0x0000FFFF) * g_ui16ALGO_EMAX) >> 16);  /* 32 bit */
 915                             		.loc 1 1162 0
 916 0164 4F AB                   		mul	r10, r11
 917 0166 69 0B                   		shlr	#16, r11
1161:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   /* 32 bit */
 918                             		.loc 1 1161 0
 919 0168 4F EA                   		mul	r14, r10
1166:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (ui32Energy < (m_ui32EnergyMainK_1 - m_ui32EnergyMainOffset)) /* Reset Overflow Energy M
 920                             		.loc 1 1166 0
 921 016a FB C2 00 00 00 00       		mov.L	#_m_ui32EnergyMainK_1, r12
1161:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy =   (((m_ui32EnergyRTAcc & 0xFFFF0000) >> 16) * g_ui16ALGO_EMAX)   /* 32 bit */
 922                             		.loc 1 1161 0
 923 0170 FF 2E AB                		add	r10, r11, r14
 924                             	.LVL86:
1166:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (ui32Energy < (m_ui32EnergyMainK_1 - m_ui32EnergyMainOffset)) /* Reset Overflow Energy M
 925                             		.loc 1 1166 0
 926 0173 EC CB                   		mov.L	[r12], r11
 927 0175 FB A2 00 00 00 00       		mov.L	#_m_ui32EnergyMainOffset, r10
 928 017b EF BD                   		mov.L	r11, r13
 929                             	.LVL87:
 930 017d 06 80 AD                		sub	[r10].L, r13
 931 0180 47 DE                   		cmp	r13, r14
 932 0182 22 04                   		bgeu	.L78
1168:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyMainOffset = m_ui32EnergyMainK_1;
 933                             		.loc 1 1168 0
 934 0184 E3 AB                   		mov.L	r11, [r10]
 935                             		.balign 2,3,4
 936                             	.L78:
1171:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32Energy += m_ui32EnergyMainOffset;
 937                             		.loc 1 1171 0
 938 0186 06 88 AE                		add	[r10].L, r14
 939                             	.LVL88:
1172:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyMainK_1 = ui32Energy;
 940                             		.loc 1 1172 0
 941 0189 E3 CE                   		mov.L	r14, [r12]
1199:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if ( ui32EnergyMot == 0 )
 942                             		.loc 1 1199 0
 943 018b 61 07                   		cmp	#0, r7
 944 018d FB A2 00 00 00 00       		mov.L	#_m_ui32EnergyMotOld, r10
 945 0193 21 06                   		bne	.L79
1201:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           ui32EnergyMot = m_ui32EnergyMotOld;
 946                             		.loc 1 1201 0
 947 0195 EC A7                   		mov.L	[r10], r7
 948                             	.LVL89:
 949 0197 2E 05                   		bra	.L80
 950                             	.L79:
1205:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyMotOld = ui32EnergyMot;
 951                             		.loc 1 1205 0
 952 0199 E3 A7                   		mov.L	r7, [r10]
 953 019b 03                      		.balign 2,3,5
 954                             	.L80:
1210:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if (ui32EnergyMot < (m_ui32EnergyDspK_1 - m_ui32EnergyDspOffset)) /* Reset Overflow Energy 
 955                             		.loc 1 1210 0
 956 019c FB C2 00 00 00 00       		mov.L	#_m_ui32EnergyDspK_1, r12
 957 01a2 EC CB                   		mov.L	[r12], r11
 958 01a4 FB A2 00 00 00 00       		mov.L	#_m_ui32EnergyDspOffset, r10
 959 01aa EF BD                   		mov.L	r11, r13
 960 01ac 06 80 AD                		sub	[r10].L, r13
 961 01af 47 D7                   		cmp	r13, r7
 962 01b1 22 05                   		bgeu	.L81
1212:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_ui32EnergyDspOffset = m_ui32EnergyDspK_1;
 963                             		.loc 1 1212 0
 964 01b3 E3 AB                   		mov.L	r11, [r10]
 965 01b5 03                      		.balign 2,3,4
 966                             	.L81:
1215:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         ui32EnergyMot += m_ui32EnergyDspOffset;
 967                             		.loc 1 1215 0
 968 01b6 06 88 A7                		add	[r10].L, r7
 969                             	.LVL90:
1216:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_ui32EnergyDspK_1 = ui32EnergyMot;
 970                             		.loc 1 1216 0
 971 01b9 E3 C7                   		mov.L	r7, [r12]
 972                             	.LBB16:
 973                             	.LBB17:
1512:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1513:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1514:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1515:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1516:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** Perform update of the energy meter counter from start of life
1517:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1518:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      void
1519:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     void
1520:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1521:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1522:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1523:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1524:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return   void
1525:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1526:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1527:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1528:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1529:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1530:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1531:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     30-05-2011
1532:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1533:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1534:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1535:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1536:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1537:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1538:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1539:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1540:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1541:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1542:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void EnergyMeterUpdate (uint32_t ui32EnergyPeriod)
1543:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1544:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint32_t ui32Energy = ((b_ui32EnergyCounterWh * 3600) + b_ui16EnergyCounterWhAcc);
 974                             		.loc 1 1544 0
 975 01bb FB A2 00 00 00 00       		mov.L	#_b_ui16EnergyCounterWhAcc, r10
 976 01c1 FB C2 00 00 00 00       		mov.L	#_b_ui32EnergyCounterWh, r12
 977 01c7 5C AB                   		movu.W	[r10], r11
 978 01c9 EC CA                   		mov.L	[r12], r10
 979                             	.LBE17:
 980                             	.LBE16:
1229:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         EnergyMeterUpdate(ui32Energy + ui32EnergyMot);
 981                             		.loc 1 1229 0
 982 01cb 4B E7                   		add	r14, r7
 983                             	.LVL91:
 984                             	.LBB19:
 985                             	.LBB18:
 986                             		.loc 1 1544 0
 987 01cd 76 1A 10 0E             		mul	#0xe10, r10
 988 01d1 4B BA                   		add	r11, r10
 989                             	.LVL92:
1545:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1546:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* update the energy meter counter */
1547:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui32EnergyPeriod < (ui32Energy - m_ui32EnergyOffset))
 990                             		.loc 1 1547 0
 991 01d3 EF AD                   		mov.L	r10, r13
 992 01d5 FB B2 00 00 00 00       		mov.L	#_m_ui32EnergyOffset, r11
 993 01db 06 80 BD                		sub	[r11].L, r13
 994 01de 47 D7                   		cmp	r13, r7
 995 01e0 22 04                   		bgeu	.L82
1548:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1549:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     m_ui32EnergyOffset = ui32Energy;
 996                             		.loc 1 1549 0
 997 01e2 E3 BA                   		mov.L	r10, [r11]
 998                             		.balign 2,3,4
 999                             	.L82:
1550:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1551:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1552:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui32Energy  = ui32EnergyPeriod + m_ui32EnergyOffset;
 1000                             		.loc 1 1552 0
 1001 01e4 06 88 B7                		add	[r11].L, r7
 1002                             	.LVL93:
1553:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1554:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   b_ui32EnergyCounterWh     = ui32Energy / 3600;
 1003                             		.loc 1 1554 0
 1004 01e7 EF 7A                   		mov.L	r7, r10
 1005 01e9 FD 78 9A 10 0E          		divu	#0xe10, r10
 1006 01ee E3 CA                   		mov.L	r10, [r12]
1555:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   b_ui16EnergyCounterWhAcc  = (uint16_t)(ui32Energy % 3600);
 1007                             		.loc 1 1555 0
 1008 01f0 76 1A 10 0E             		mul	#0xe10, r10
 1009 01f4 43 A7                   		sub	r10, r7
 1010                             	.LVL94:
 1011 01f6 FB B2 00 00 00 00       		mov.L	#_b_ui16EnergyCounterWhAcc, r11
 1012                             	.LVL95:
 1013 01fc D3 B7                   		mov.W	r7, [r11]
 1014                             	.LBE18:
 1015                             	.LBE19:
1240:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (m_bOneShot == TRUE)
 1016                             		.loc 1 1240 0
 1017 01fe FB 72 00 00 00 00       		mov.L	#_m_sFlags, r7
 1018 0204 CC 7A                   		mov.B	[r7], r10
 1019 0206 EF AB                   		mov.L	r10, r11
 1020 0208 75 2B 40                		and	#64, r11
 1021 020b 5B BB                   		movu.B	r11, r11
 1022 020d 61 0B                   		cmp	#0, r11
 1023 020f 20 07                   		beq	.L83
1242:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_bAccuEnabled = FALSE;
 1024                             		.loc 1 1242 0
 1025 0211 7A 7A                   		bclr	#7, r10
 1026 0213 C3 7A                   		mov.B	r10, [r7]
 1027 0215 03                      		.balign 2,3,5
 1028                             	.L83:
1245:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_ui8EnergyUpdateCnt = 0;
 1029                             		.loc 1 1245 0
 1030 0216 CC 7A                   		mov.B	[r7], r10
 1031 0218 75 2A C0                		and	#-64, r10
 1032 021b C3 7A                   		mov.B	r10, [r7]
 1033 021d 2E 55                   		bra	.L96
 1034                             	.LVL96:
 1035                             	.L69:
1047:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = (uint16_t)(((uint32_t)ui16Vpeak2Avg_Norm * m_asRLoadParam[ui8In
 1036                             		.loc 1 1047 0
 1037 021f 63 C7                   		mul	#12, r7
 1038 0221 70 7E 00 00 00 00       		add	#_m_asRLoadParam, r7, r14
 1039 0227 5D E7 04                		movu.W	8[r14], r7
1048:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                >> (16 - m_asRLoadParam[ui8Index].i8Gexp));
 1040                             		.loc 1 1048 0
 1041 022a EF 34                   		mov.L	r3, r4
1047:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = (uint16_t)(((uint32_t)ui16Vpeak2Avg_Norm * m_asRLoadParam[ui8In
 1042                             		.loc 1 1047 0
 1043 022c 4F C7                   		mul	r12, r7
1048:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                >> (16 - m_asRLoadParam[ui8Index].i8Gexp));
 1044                             		.loc 1 1048 0
 1045 022e 06 01 E4 0A             		sub	10[r14].B, r4
 1046 0232 FD 60 47                		shlr	r4, r7
1047:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = (uint16_t)(((uint32_t)ui16Vpeak2Avg_Norm * m_asRLoadParam[ui8In
 1047                             		.loc 1 1047 0
 1048 0235 D3 07                   		mov.W	r7, [r0]
1053:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui32PowerInstantRT_Norm += ui16PowerInstant_Norm;
 1049                             		.loc 1 1053 0
 1050 0237 77 27 FF FF 00          		and	#0xffff, r7
 1051 023c 4B 7A                   		add	r7, r10
 1052                             	.LVL97:
 1053 023e 38 5A FE                		bra	.L84
 1054                             	.LVL98:
 1055                             	.L72:
1088:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstantMot += *m_asMLoadParam[ui8Index].pui16PVal;
 1056                             		.loc 1 1088 0
 1057 0241 FD C4 E3                		shll	#4, r14, r3
 1058 0244 70 33 00 00 00 00       		add	#_m_asMLoadParam, r3
 1059 024a A8 B3                   		mov.L	8[r3], r3
 1060 024c 06 48 3B                		add	[r3].W, r11
 1061                             	.LVL99:
 1062 024f 38 83 FE                		bra	.L85
 1063                             	.LVL100:
 1064                             	.L75:
1126:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             if (EMS_E_OK == TablePower(&m_asTLoadParam[ui8Index].sTable, (
 1065                             		.loc 1 1126 0
 1066 0252 EF E1                   		mov.L	r14, r1
 1067 0254 75 11 14                		mul	#20, r1
 1068 0257 70 11 00 00 00 00       		add	#_m_asTLoadParam+8, r1
 1069 025d 66 02                   		mov	#0, r2
 1070 025f DF D3                   		mov.W	r13, r3
 1071 0261 EF 04                   		mov.L	r0, r4
1125:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             ui16PowerInstant_Norm = 0;
 1072                             		.loc 1 1125 0
 1073 0263 3D 00 00                		mov.W	#0, [r0]
1126:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****             if (EMS_E_OK == TablePower(&m_asTLoadParam[ui8Index].sTable, (
 1074                             		.loc 1 1126 0
 1075 0266 05 00 00 00             		bsr	_TablePower
 1076                             	.LVL101:
 1077 026a 61 01                   		cmp	#0, r1
 1078 026c 3A A7 FE                		beq	.L86
 1079 026f 38 A7 FE                		bra	.L76
 1080                             	.LVL102:
 1081                             	.L96:
1250:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 1082                             		.loc 1 1250 0
 1083 0272 66 01                   		mov.L	#0, r1
 1084 0274 3F 7D 08                		rtsd	#32, r7-r13
 1085                             	.LFE19:
 1087 0277 03                      		.section	.text.PowerMeter_StartEnergyCount,"ax",@progbits
 1088                             		.global	_PowerMeter_StartEnergyCount
 1090                             	_PowerMeter_StartEnergyCount:
 1091                             	.LFB20:
1257:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 1092                             		.loc 1 1257 0
 1093                             	.LVL103:
1282:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 1094                             		.loc 1 1282 0
 1095 0000 66 11                   		mov.L	#1, r1
 1096                             	.LVL104:
 1097 0002 02                      		rts
 1098                             	.LFE20:
 1100                             		.section	.text.PowerMeter_GetEnergyCount,"ax",@progbits
 1101                             		.global	_PowerMeter_GetEnergyCount
 1103                             	_PowerMeter_GetEnergyCount:
 1104                             	.LFB21:
1290:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 1105                             		.loc 1 1290 0
 1106                             	.LVL105:
1319:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 1107                             		.loc 1 1319 0
 1108 0000 66 11                   		mov.L	#1, r1
 1109                             	.LVL106:
 1110 0002 02                      		rts
 1111                             	.LFE21:
 1113                             		.section	.text.PowerMeter_StopEnergyCount,"ax",@progbits
 1114                             		.global	_PowerMeter_StopEnergyCount
 1116                             	_PowerMeter_StopEnergyCount:
 1117                             	.LFB22:
1327:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 1118                             		.loc 1 1327 0
 1119                             	.LVL107:
1342:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 1120                             		.loc 1 1342 0
 1121 0000 66 11                   		mov.L	#1, r1
 1122                             	.LVL108:
 1123 0002 02                      		rts
 1124                             	.LFE22:
 1126                             		.section	.text.EM_LoadRegister,"ax",@progbits
 1127                             		.global	_EM_LoadRegister
 1129                             	_EM_LoadRegister:
 1130                             	.LFB27:
1556:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1557:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1558:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1559:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1560:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1561:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** Perform update of the energy partial counters
1562:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1563:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      void
1564:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     void
1565:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1566:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1567:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1568:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1569:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return   void
1570:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1571:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1572:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1573:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1574:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1575:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1576:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     30-05-2011
1577:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1578:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1579:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1580:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1581:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1582:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1583:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1584:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1585:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1586:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1587:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** static void EnergyCountersUpdate (void)
1588:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1589:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if EMS_ENERGY_COUNTERS_MAX
1590:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t ui8Index;
1591:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1592:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   for (ui8Index = 0; ui8Index < EMS_ENERGY_COUNTERS_MAX; ui8Index++)
1593:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1594:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* if counter enabled*/
1595:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     if ((m_asCounters[ui8Index].ui8Flags & EM_COUNT_STAT_MASK) !=0)
1596:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     {
1597:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* accumulate energy and time */
1598:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asCounters[ui8Index].ui32RawAccum     += m_ui16PowerPeriod;
1599:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asCounters[ui8Index].ui32Raw10secAcc  += m_ui16PowerPeriod;
1600:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       m_asCounters[ui8Index].ui16TimeElapsed++;
1601:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1602:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (((m_asCounters[ui8Index].ui16TimeElapsed) % 10) == 0)
1603:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1604:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /*
1605:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           save the max in 10 secs as raw
1606:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         */
1607:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if(m_asCounters[ui8Index].ui32Raw10secAcc > m_asCounters[ui8Index].ui32RawMaxEnergy10sec)
1608:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1609:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_asCounters[ui8Index].ui32RawMaxEnergy10sec = m_asCounters[ui8Index].ui32Raw10secAcc;
1610:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1611:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asCounters[ui8Index].ui32Raw10secAcc = 0;
1612:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1613:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1614:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* if time period not yet elapsed but current time > time period ... */
1615:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (  (m_asCounters[ui8Index].ui16TimeElapsed >= m_asCounters[ui8Index].ui16TimePeriod)
1616:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           &&((m_asCounters[ui8Index].ui8Flags & EM_T_ELAPSED_MASK) == 0))
1617:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1618:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* detect transition */
1619:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asCounters[ui8Index].ui8Flags |= EM_T_ELAPSED_MASK;
1620:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1621:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* calculate energy consumed so far in Wh...*/
1622:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         m_asCounters[ui8Index].ui16EnergyCons = (uint16_t) (m_asCounters[ui8Index].ui32RawAccum / 3
1623:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /*... if it is grater then energy threshold */
1624:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         if(m_asCounters[ui8Index].ui16EnergyCons > m_asCounters[ui8Index].ui16EnergyTreshold)
1625:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         {
1626:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           /* set the overrun flag*/
1627:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****           m_asCounters[ui8Index].ui8Flags |= EM_E_OVERRUN_MASK;
1628:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         }
1629:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1630:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     }
1631:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1632:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1633:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1634:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1635:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* #ifdef POWER_METER_SW */
1636:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if (CONFIG_RES_CALIBRATION_ENABLE == 1)
1637:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1638:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   This function get a pointer to Resistor calibration factor
1639:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1640:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      uint8_t         ui8LoadTablePositionRes   ["Load Table Position" field for Resist
1641:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      Loader_Struct*  psResCalibDataStruct      [pointer to struct containing the Indes
1642:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      Loader_Struct*  psOutputsMap              [pointer to struct containing the Outpu
1643:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     none
1644:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1645:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1646:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1647:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1648:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return           uint8_t* - pointer to Resistor calibration factor
1649:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1650:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1651:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1652:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1653:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1654:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1655:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     08-09-2011
1656:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1657:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1658:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1659:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1660:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1661:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1662:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1663:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC uint8_t* EM_LoadResCalib (uint8_t ui8LoadTablePositionRes, const Loader_Struct* psResCalibDa
1664:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                  const Loader_Struct* psOutputsMap, uint8_t numLoad, const sEMS_Res
1665:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
1666:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1667:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	uint8_t i;
1668:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t ui16LoadIdOffset = (ui8LoadTablePositionRes * IO_MANAGER_LOAD_TABLE_ITEM_SIZE * 2) + LOA
1669:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1670:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1671:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if CHECK_TABLE
1672:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (psResCalibDataStruct == NULL)
1673:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || (psOutputsMap == NULL))
1674:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1675:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return NULL;
1676:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1677:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (psResCalibDataStruct->Data == NULL)
1678:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || (psResCalibDataStruct->DataLenght < INDESIT_PLANT_CALI_WLEN))
1679:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1680:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return NULL;
1681:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1682:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (   (psOutputsMap->Data == NULL)
1683:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       || (psOutputsMap->DataLenght == 0))
1684:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1685:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return NULL;
1686:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1687:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1688:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui16LoadIdOffset >= (2 * psOutputsMap->DataLenght))
1689:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1690:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return NULL;
1691:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1692:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1693:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1694:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1695:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   for(i = 0; i<numLoad; i++ )
1696:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1697:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  if(pResCalTab[i].resLoadID == psOutputsMap->Data[ui16LoadIdOffset])
1698:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  {
1699:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 		  return &(psResCalibDataStruct->Data[pResCalTab[i].resCalOffset]);
1700:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	  }
1701:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1702:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1703:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1704:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return NULL;
1705:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1706:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
1707:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif /*(CONFIG_RES_CALIBRATION_ENABLE == 1) */
1708:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1709:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /**
1710:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   This function register a load
1711:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1712:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      Loader_Struct*  psEMDataStruct            [pointer to struct containing the curre
1713:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      Loader_Struct*  psResCalibDataStruct      [pointer to struct containing the Indes
1714:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in]      Loader_Struct*  psOutputsMap              [pointer to struct containing the Outpu
1715:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [out]     none
1716:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \param  [in,out]  none
1717:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1718:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \attention \b
1719:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1720:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \return   eEMS_Err - error code
1721:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1722:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \retval   [none]
1723:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1724:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \warning  [none]
1725:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1726:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \author   Intecs
1727:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \date     08-09-2011
1728:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \version  1.0.0
1729:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1730:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \bug    [none]
1731:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1732:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** \note   \par \b Nota 1:
1733:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       documentation by ${Intecs}
1734:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** */
1735:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** STATIC eEMS_Err EM_LoadRegister (const Loader_Struct* psEMDataStruct, const Loader_Struct* psResCal
1736:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                  const Loader_Struct* psOutputsMap) 
1737:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 1131                             		.loc 1 1737 0
1738:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t ui8EnergyLoadType;    /* Valore del campo "Energy Load Type" nella tabella energetica cor
1739:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t ui8LoadTablePosition; /* Valore del campo "Load Table Position" nella tabella energetica 
1740:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t ui8TableWLen;         /* Dimensione (word) della tabella energetica corrente */
1741:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t ui8Result;
1742:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   sLoadRegister_t sLoadRegister;
1743:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1744:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   static uint8_t ui8IdxInfoBuffer = 0; /*Indice identificativo del carico esterno (Motore) */
1745:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1746:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if CHECK_TABLE
1747:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (psEMDataStruct == NULL)
 1132                             		.loc 1 1747 0
 1133 0000 61 01                   		cmp	#0, r1
 1134 0002 3A 93 00                		beq	.L116
1748:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1749:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	/*lint -e64*/
1750:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return S_FALSE_PLAT;
1751:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint +e64*/
1752:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1753:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1754:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1755:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Recupera la dimensione della tabella energetica corrente */
1756:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui8TableWLen = psEMDataStruct->DataLenght;
 1135                             		.loc 1 1756 0
 1136 0005 89 13                   		mov.B	4[r1], r3
1757:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1758:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if CHECK_TABLE
1759:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Verifica la dimensione minima della tabella */
1760:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui8TableWLen < EM_DATA_HEADER_COMMON_WLEN)
 1137                             		.loc 1 1760 0
 1138 0007 5B 3E                   		movu.B	r3, r14
 1139 0009 61 1E                   		cmp	#1, r14
 1140 000b 24 05 38 88 00          		bleu	.L116
1761:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1762:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* Dimensione non corretta della tabella corrente */
1763:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint -e64*/
1764:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return S_FALSE_PLAT;
1765:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint +e64*/
1766:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1767:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1768:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1769:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*
1770:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    * Usa la tabella per registrare i carichi
1771:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    */
1772:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1773:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Recupera il campo "Load Table Position" nella tabella energetica corrente */
1774:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui8LoadTablePosition = psEMDataStruct->Data[EM_DATA_LOAD_TYPE_POSITION];
 1141                             		.loc 1 1774 0
 1142 0010 EC 1E                   		mov.L	[r1], r14
1737:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 1143                             		.loc 1 1737 0
 1144 0012 71 00 E8                		add	#-24, r0
 1145                             	.LCFI6:
1775:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui8LoadTablePosition != LOAD_STS_ALWAYS_ON)
 1146                             		.loc 1 1775 0
 1147 0015 59 E4 01                		movu.B	1[r14], r4
 1148 0018 75 54 FF                		cmp	#0xff, r4
 1149 001b 20 0C                   		beq	.L107
1776:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1777:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     sLoadRegister.pui8Status                  = &LoadsStatus[ui8LoadTablePosition];
 1150                             		.loc 1 1777 0
 1151 001d 70 44 00 00 00 00       		add	#_LoadsStatus, r4
 1152 0023 A0 0C                   		mov.L	r4, 4[r0]
 1153 0025 2E 05                   		bra	.L108
 1154                             	.L107:
1778:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1779:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   else
1780:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1781:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	/*lint -epp*/
1782:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     sLoadRegister.pui8Status                  = NULL;
 1155                             		.loc 1 1782 0
 1156 0027 3E 01 00                		mov.L	#0, 4[r0]
 1157                             		.balign 2,3,3
 1158                             	.L108:
1783:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint +epp*/
1784:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1785:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1786:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Recupera il campo "Energy Load Type" nella tabella energetica corrente */
1787:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui8EnergyLoadType = psEMDataStruct->Data[EM_DATA_ENERGY_LOAD_TYPE];
1788:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*lint -e64*/
1789:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*Questo messaggio puÃ² essere disabilitato in quanto in questo caso non Ã¨ violata la regola MIS
1790:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    * La regola 29 (5.4 in MISRA-C:2004)recita:
1791:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    * "Where the type definition is made in a header file and that header file is included in multip
1792:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    * source files, this rule is not violated."
1793:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****    */
1794:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   sLoadRegister.eType = ui8EnergyLoadType;
 1159                             		.loc 1 1794 0
 1160 002a 58 E4                   		movu.B	[r14], r4
 1161 002c A0 84                   		mov.L	r4, 8[r0]
1795:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*lint +e64*/
1796:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1797:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Registra il carico */
1798:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   switch (ui8EnergyLoadType)
 1162                             		.loc 1 1798 0
 1163 002e 61 24                   		cmp	#2, r4
 1164 0030 20 22                   		beq	.L110
 1165 0032 61 34                   		cmp	#3, r4
 1166 0034 20 45                   		beq	.L111
 1167 0036 61 14                   		cmp	#1, r4
 1168 0038 21 60                   		bne	.L118
1799:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1800:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     case RESISTOR:
1801:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #if CHECK_TABLE
1802:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Verifica la dimensione minima di una tabella Resistive */
1803:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (ui8TableWLen >= EM_DATA_RESISTIVE_WLEN)
 1169                             		.loc 1 1803 0
 1170 003a 5B 33                   		movu.B	r3, r3
 1171 003c 61 33                   		cmp	#3, r3
 1172 003e 25 48                   		bleu	.L113
1804:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #endif
1805:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1806:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Registra un carico Resistive */
1807:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #if (CONFIG_RES_CALIBRATION_ENABLE == 1)
1808:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.res.pui8Calib    = EM_LoadResCalib(ui8LoadTablePosition, psResCalibDat
1809:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #else
1810:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.res.pui8Calib    = NULL;
1811:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****        #endif
1812:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.ui8Mask                 = 0x0F;                                              
1813:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.res.pui16GMant   = (uint16_t*)&(psEMDataStruct->Data[EM_DATA_RESISTIVE
 1173                             		.loc 1 1813 0
 1174 0040 71 E4 04                		add	#4, r14, r4
1814:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.res.pi8Gexp      = (int8_t*)&(psEMDataStruct->Data[EM_DATA_RESISTIVE_E
 1175                             		.loc 1 1814 0
 1176 0043 62 6E                   		add	#6, r14
1810:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.res.pui8Calib    = NULL;
 1177                             		.loc 1 1810 0
 1178 0045 3E 05 00                		mov.L	#0, 20[r0]
1812:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.ui8Mask                 = 0x0F;                                              
 1179                             		.loc 1 1812 0
 1180 0048 3C 00 0F                		mov.B	#15, [r0]
1813:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.res.pui16GMant   = (uint16_t*)&(psEMDataStruct->Data[EM_DATA_RESISTIVE
 1181                             		.loc 1 1813 0
 1182 004b A0 8C                   		mov.L	r4, 12[r0]
 1183                             		.loc 1 1814 0
 1184 004d E7 0E 04                		mov.L	r14, 16[r0]
 1185 0050 2E 36                   		bra	.L113
 1186                             	.L110:
1815:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1816:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
1817:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_LIB_EXTERNAL_BOARD_SUPPORT)
1818:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     case MOTOR:
1819:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Registra i carichi Motor associati a EMSInfoBuffer[ui8IdxInfoBuffer]  */
1820:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1821:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       sLoadRegister.ui8Mask                   = 0x0F;                                              
1822:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       sLoadRegister.params.mot.pui16PVal      = &EMSInfoBuffer[ui8IdxInfoBuffer].ui16PVal;
 1187                             		.loc 1 1822 0
 1188 0052 FB E2 00 00 00 00       		mov.L	#_ui8IdxInfoBuffer.9710, r14
 1189 0058 58 E4                   		movu.B	[r14], r4
1821:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       sLoadRegister.ui8Mask                   = 0x0F;                                              
 1190                             		.loc 1 1821 0
 1191 005a 3C 00 0F                		mov.B	#15, [r0]
 1192                             		.loc 1 1822 0
 1193 005d FD C3 43                		shll	#3, r4, r3
 1194 0060 70 32 00 00 00 00       		add	#_EMSInfoBuffer, r3, r2
1823:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       sLoadRegister.params.mot.pui32EVal      = &EMSInfoBuffer[ui8IdxInfoBuffer].ui32EVal;
 1195                             		.loc 1 1823 0
 1196 0066 70 33 00 00 00 00       		add	#_EMSInfoBuffer+4, r3
1822:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       sLoadRegister.params.mot.pui16PVal      = &EMSInfoBuffer[ui8IdxInfoBuffer].ui16PVal;
 1197                             		.loc 1 1822 0
 1198 006c A0 8A                   		mov.L	r2, 12[r0]
 1199                             		.loc 1 1823 0
 1200 006e A1 03                   		mov.L	r3, 16[r0]
1824:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (ui8IdxInfoBuffer < CONFIG_EMS_MLOAD_ITEMS_MAX )
 1201                             		.loc 1 1824 0
 1202 0070 61 04                   		cmp	#0, r4
 1203 0072 21 14                   		bne	.L113
1825:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1826:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     	  ui8IdxInfoBuffer++;
 1204                             		.loc 1 1826 0
 1205 0074 F8 E4 01                		mov.B	#1, [r14]
 1206 0077 2E 0F                   		bra	.L113
 1207                             	.L111:
1827:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1828:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       else
1829:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1830:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     	  /*Do nothing*/
1831:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1832:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1833:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
1834:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif /*CONFIG_LIB_EXTERNAL_BOARD_SUPPORT*/
1835:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     case TABLEP:
1836:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #if CHECK_TABLE
1837:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* Verifica la dimensione minima di una tabella TABLE */
1838:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       if (ui8TableWLen >= EM_DATA_HEADER_COMMON_WLEN)
1839:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****      #endif
1840:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       {
1841:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         /* Registra un carico Table */
1842:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.ui8Mask                 = 0x0F;                                              
1843:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.tab.pui8Table    = &(psEMDataStruct->Data[2 * EM_DATA_HEADER_COMMON_WL
 1208                             		.loc 1 1843 0
 1209 0079 62 4E                   		add	#4, r14
1844:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.tab.ui8TableLen  = (ui8TableWLen - EM_DATA_HEADER_COMMON_WLEN);
 1210                             		.loc 1 1844 0
 1211 007b 60 23                   		sub	#2, r3
1842:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.ui8Mask                 = 0x0F;                                              
 1212                             		.loc 1 1842 0
 1213 007d 3C 00 0F                		mov.B	#15, [r0]
1843:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****         sLoadRegister.params.tab.pui8Table    = &(psEMDataStruct->Data[2 * EM_DATA_HEADER_COMMON_WL
 1214                             		.loc 1 1843 0
 1215 0080 E7 0E 03                		mov.L	r14, 12[r0]
 1216                             		.loc 1 1844 0
 1217 0083 84 03                   		mov.B	r3, 16[r0]
 1218 0085 03                      		.balign 2,3,1
 1219                             	.L113:
1845:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       }
1846:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
1847:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1848:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     default:
1849:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint -e64*/
1850:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       return S_FALSE_PLAT;
1851:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint +e64*/
1852:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /*    break;*/
1853:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1854:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   ui8Result = PowerMeter_LoadRegister(&sLoadRegister);
 1220                             		.loc 1 1854 0
 1221 0086 EF 01                   		mov.L	r0, r1
 1222 0088 05 00 00 00             		bsr	_PowerMeter_LoadRegister
1855:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1856:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #if CHECK_TABLE
1857:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (ui8Result != EMS_E_OK)
 1223                             		.loc 1 1857 0
 1224 008c 5B 11                   		movu.B	r1, r1
1750:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return S_FALSE_PLAT;
 1225                             		.loc 1 1750 0
 1226 008e 61 01                   		cmp	#0, r1
 1227 0090 FC DB 11                		scne.L	r1
 1228 0093 2E 07                   		bra	.L106
 1229                             	.L116:
 1230                             	.LCFI7:
 1231 0095 66 11                   		mov.L	#1, r1
 1232 0097 02                      		rts
 1233                             	.L118:
 1234                             	.LCFI8:
1850:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       return S_FALSE_PLAT;
 1235                             		.loc 1 1850 0
 1236 0098 66 11                   		mov.L	#1, r1
 1237                             		.balign 2,3,1
 1238                             	.L106:
1858:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1859:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* PowerMeter_LoadRegister: errore */
1860:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 	/*lint -e64*/
1861:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return S_FALSE_PLAT;
1862:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /*lint -e64*/
1863:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1864:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****  #endif
1865:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1866:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   return EMS_E_OK;
1867:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 1239                             		.loc 1 1867 0
 1240 009a 67 06                   		rtsd	#24
 1241                             	.LFE27:
 1243                             		.section	.text.EM_LoadConfigRead,"ax",@progbits
 1244                             		.global	_EM_LoadConfigRead
 1246                             	_EM_LoadConfigRead:
 1247                             	.LFB28:
1868:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1869:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** void EM_LoadConfigRead(void)
1870:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** {
 1248                             		.loc 1 1870 0
 1249 0000 6E 7A                   		pushm	r7-r10
 1250                             	.LCFI9:
 1251 0002 71 00 E8                		add	#-24, r0
 1252                             	.LCFI10:
1871:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   Loader_Struct sResCalibDataStruct = {0, 0};     /* Struct containing the Indesit Plant Cali-Box d
 1253                             		.loc 1 1871 0
 1254 0005 3E 04 00                		mov.L	#0, 16[r0]
 1255 0008 3C 84 00                		mov.B	#0, 20[r0]
1872:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   Loader_Struct sOutputsMap = {0, 0};             /* Struct containing the Outputs Map */
 1256                             		.loc 1 1872 0
 1257 000b 3E 02 00                		mov.L	#0, 8[r0]
 1258 000e 3C 0C 00                		mov.B	#0, 12[r0]
1873:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   Loader_Struct sEnergyDataStruct;                /* Struct containing the Energy Meter data */
1874:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint8_t       ui8IdxDisplacement;               /* Displacement (that is an index) to access the 
1875:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                    *    0 -> Energy Load 0
1876:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                    *    1 -> Energy Load 1
1877:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                    *    ï¿½
1878:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                                                    */
1879:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_USE_TABLE_PARAMD
1880:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   uint16_t TableParamD = 50; /* PLOS */
1881:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
1882:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** /* uint16_t SValveAddPower = 50; */
1883:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1884:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1885:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1886:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1887:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Inizializza il modulo Power Meter */
1888:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   PowerMeter_InitSw();
 1259                             		.loc 1 1888 0
 1260 0011 05 00 00 00             		bsr	_PowerMeter_InitSw
 1261                             	.LVL109:
1889:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1890:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Recupera gli estremi degli Algorithm Parameters */
1891:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (S_OK_PLAT != BasicLoader(SF_PTR_ENERGY_METER, ALGO_PARAMS_DISPLACEMENT, &sEnergyDataStruct))
 1262                             		.loc 1 1891 0
 1263 0015 75 41 37                		mov	#55, r1
 1264 0018 66 02                   		mov	#0, r2
 1265 001a EF 03                   		mov.L	r0, r3
 1266 001c 05 00 00 00             		bsr	_BasicLoader
 1267                             	.LVL110:
 1268 0020 5B 11                   		movu.B	r1, r1
 1269 0022 61 01                   		cmp	#0, r1
 1270 0024 21 3E                   		bne	.L121
1892:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1893:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     return;
1894:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1895:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1896:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Inizializza i parametri di configurazione del modulo Power Meter */
1897:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   PowerMeter_InitConfig(&sEnergyDataStruct
 1271                             		.loc 1 1897 0
 1272 0026 EF 01                   		mov.L	r0, r1
 1273 0028 05 00 00 00             		bsr	_PowerMeter_InitConfig
 1274                             	.LVL111:
1898:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if EMS_USE_TABLE_PARAMD
1899:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                         , &TableParamD                       
1900:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
1901:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****                        );
1902:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1903:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1904:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #if defined(CONFIG_LIB_ADC_CALIBRATION) /* NEW_CALIBRATION_LOADER */
1905:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1906:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   if (S_OK_PLAT != LIB_CAL_GetCalibData(ID_CAL_PNTR_FACTORY, &sResCalibDataStruct))
1907:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1908:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1909:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1910:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** #endif
1911:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1912:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Recupera gli estremi dell'Outputs Map */
1913:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     if (S_OK_PLAT != BasicLoader(SF_PTR_IO_CONFIG, DSPL_IO_OUTPUT_MAP_PM, &sOutputsMap))
 1275                             		.loc 1 1913 0
 1276 002c 71 0A 08                		add	#8, r0, r10
 1277 002f 75 41 20                		mov	#32, r1
 1278 0032 66 32                   		mov	#3, r2
 1279 0034 EF A3                   		mov.L	r10, r3
 1280 0036 05 00 00 00             		bsr	_BasicLoader
 1281                             	.LVL112:
1914:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1915:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* return; */
1916:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
1917:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1918:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   /* Ciclo di accesso a tutte le tabelle energetiche per la registrazione dei carichi */
1919:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   for (ui8IdxDisplacement = (ALGO_PARAMS_DISPLACEMENT + 1); ; ++ui8IdxDisplacement)
 1282                             		.loc 1 1919 0
 1283 003a 66 17                   		mov	#1, r7
 1284                             	.LVL113:
 1285                             		.balign 2,3,2
 1286                             	.L124:
1920:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   {
1921:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* Recupera gli estremi della tabella energetica al displacement 'ui8IdxDisplacement' */
1922:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     if (S_OK_PLAT != BasicLoader(SF_PTR_ENERGY_METER, ui8IdxDisplacement, &sEnergyDataStruct))
 1287                             		.loc 1 1922 0
 1288 003c 75 41 37                		mov	#55, r1
 1289 003f CF 72                   		mov.B	r7, r2
 1290 0041 EF 03                   		mov.L	r0, r3
 1291 0043 05 00 00 00             		bsr	_BasicLoader
 1292                             	.LVL114:
 1293 0047 5B 11                   		movu.B	r1, r1
 1294 0049 61 01                   		cmp	#0, r1
 1295 004b 21 17                   		bne	.L121
1923:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     {
1924:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* BasicLoader: non ci sono piï¿½ carichi oppure errore */
1925:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
1926:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     }
1927:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1928:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1929:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1930:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     /* Registra il carico associato alla tabella energetica */
1931:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     if (S_OK_PLAT != EM_LoadRegister(&sEnergyDataStruct, &sResCalibDataStruct, &sOutputsMap))
 1296                             		.loc 1 1931 0
 1297 004d 75 42 10                		mov.L	#16, r2
 1298 0050 4B 02                   		add	r0, r2
 1299 0052 EF 01                   		mov.L	r0, r1
 1300 0054 EF A3                   		mov.L	r10, r3
 1301 0056 05 00 00 00             		bsr	_EM_LoadRegister
 1302                             	.LVL115:
 1303 005a 61 01                   		cmp	#0, r1
 1304 005c 21 06                   		bne	.L121
1919:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   for (ui8IdxDisplacement = (ALGO_PARAMS_DISPLACEMENT + 1); ; ++ui8IdxDisplacement)
 1305                             		.loc 1 1919 0
 1306 005e 62 17                   		add	#1, r7
 1307                             	.LVL116:
1932:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     {  
1933:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       /* EM_LoadRegister: errore */
1934:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****       break;
1935:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****     }
1936:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1937:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1938:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c ****   }
 1308                             		.loc 1 1938 0
 1309 0060 2E DC                   		bra	.L124
 1310                             	.LVL117:
 1311                             	.L121:
1939:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** 
1940:C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw\PM_EnergyMeterSw.c **** }
 1312                             		.loc 1 1940 0
 1313 0062 3F 7A 0A                		rtsd	#40, r7-r10
 1314                             	.LFE28:
 1316                             		.global	_m_ui32EnergyDspOffset
 1317 0065 03                      		.section	.bss.m_ui32EnergyDspOffset,"aw",@nobits
 1318                             		.balign 4
 1321                             	_m_ui32EnergyDspOffset:
 1322 0000 00 00 00 00             		.zero	4
 1323                             		.global	_m_ui32EnergyDspK_1
 1324                             		.section	.bss.m_ui32EnergyDspK_1,"aw",@nobits
 1325                             		.balign 4
 1328                             	_m_ui32EnergyDspK_1:
 1329 0000 00 00 00 00             		.zero	4
 1330                             		.global	_m_ui32EnergyMainOffset
 1331                             		.section	.bss.m_ui32EnergyMainOffset,"aw",@nobits
 1332                             		.balign 4
 1335                             	_m_ui32EnergyMainOffset:
 1336 0000 00 00 00 00             		.zero	4
 1337                             		.global	_m_ui32EnergyMainK_1
 1338                             		.section	.bss.m_ui32EnergyMainK_1,"aw",@nobits
 1339                             		.balign 4
 1342                             	_m_ui32EnergyMainK_1:
 1343 0000 00 00 00 00             		.zero	4
 1344                             		.global	_m_ui32EnergyOffset
 1345                             		.section	.bss.m_ui32EnergyOffset,"aw",@nobits
 1346                             		.balign 4
 1349                             	_m_ui32EnergyOffset:
 1350 0000 00 00 00 00             		.zero	4
 1351                             		.global	_m_ui32EnergyRTAcc
 1352                             		.section	.bss.m_ui32EnergyRTAcc,"aw",@nobits
 1353                             		.balign 4
 1356                             	_m_ui32EnergyRTAcc:
 1357 0000 00 00 00 00             		.zero	4
 1358                             		.global	_m_ui16PowerPeriod
 1359                             		.section	.bss.m_ui16PowerPeriod,"aw",@nobits
 1360                             		.balign 2
 1363                             	_m_ui16PowerPeriod:
 1364 0000 00 00                   		.zero	2
 1365                             		.comm	_m_sVMeasAcc,12,4
 1366                             		.global	_m_ui16VrmsAvg
 1367                             		.section	.bss.m_ui16VrmsAvg,"aw",@nobits
 1368                             		.balign 2
 1371                             	_m_ui16VrmsAvg:
 1372 0000 00 00                   		.zero	2
 1373                             		.global	_m_sFlags
 1374                             		.section	.data.m_sFlags,"aw",@progbits
 1377                             	_m_sFlags:
 1378 0000 80                      		.byte	0x80
 1379                             		.global	_m_sLoadIndex
 1380                             		.section	.bss.m_sLoadIndex,"aw",@nobits
 1383                             	_m_sLoadIndex:
 1384 0000 00                      		.zero	1
 1385                             		.comm	_m_asTLoadParam,40,4
 1386                             		.comm	_m_asMLoadParam,16,4
 1387                             		.comm	_m_asRLoadParam,12,4
 1388                             		.global	_m_sAlgoParams
 1389                             		.section	.bss.m_sAlgoParams,"aw",@nobits
 1390                             		.balign 4
 1393                             	_m_sAlgoParams:
 1394 0000 00 00 00 00 00 00 00 00 		.zero	8
 1395                             		.comm	_pDSPInfoBuffer,4,4
 1396                             		.comm	_EMSInfoBuffer,8,4
 1397                             		.comm	_b_ui16EnergyCounterWhAcc,2,2
 1398                             		.comm	_b_ui32EnergyCounterWh,4,4
 1399                             		.section	.bss.m_ui32EnergyMotOld,"aw",@nobits
 1400                             		.balign 4
 1403                             	_m_ui32EnergyMotOld:
 1404 0000 00 00 00 00             		.zero	4
 1405                             		.section	.bss.ui8IdxInfoBuffer.9710,"aw",@nobits
 1408                             	_ui8IdxInfoBuffer.9710:
 1409 0000 00                      		.zero	1
 1726                             	.Letext0:
 1727                             		.file 2 "C:\\Workspace\\FW_Platform2_5\\trunk\\HAL\\HAL_General/StandardTypes.h"
 1728                             		.file 3 "C:\\Workspace\\FW_Platform2_5\\trunk\\ProductModules\\PM_EnergyMeterSw/PM_EnergyMeterSwEx
 1729                             		.file 4 "C:\\Workspace\\FW_Platform2_5\\trunk\\ProductModules\\PM_Library/LIB_Utilities.h"
 1730                             		.file 5 "C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw/PM_EnergyMeterSw.h"
 1731                             		.file 6 "C:/Workspace/FW_Platform2_5/trunk/ProductModules/PM_EnergyMeterSw/PM_EnergyMeterSwTable.h
 1732                             		.file 7 "C:\\Workspace\\FW_Platform2_5\\trunk\\PlatformLibrary\\LIB_IOManager/OutputManagerExp.h"
