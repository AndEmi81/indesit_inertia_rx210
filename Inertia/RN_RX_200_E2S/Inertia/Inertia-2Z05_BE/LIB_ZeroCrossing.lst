   1                             		.file	"LIB_ZeroCrossing.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.section	.text.LIB_ZC_InitSync,"ax",@progbits
   5                             		.global	_LIB_ZC_InitSync
   7                             	_LIB_ZC_InitSync:
   8                             	.LFB0:
   9                             		.file 1 "C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing/LIB_ZeroCrossing.c"
   1:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /*
   2:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Copyright (c) 2004-2005, Indesit Company, I.D.D..
   3:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Tutti i diritti sono riservati. All rights reserved.
   4:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
   5:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
   6:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
   7:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \par		LIB_ZeroCrossing.c
   8:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n			Implementation of all functions necessary to achieve the aim.
   9:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  10:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \file		LIB_ZeroCrossing.c
  11:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \ingroup	LIB_ZeroCrossing
  12:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Dec 20, 2010
  13:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	01.00.00
  14:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author		stefano.ughi
  15:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  16:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  17:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \par\b	History:
  18:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  19:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n 		01.00.00
  20:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n		Dec 20, 2010
  21:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n		stefano.ughi
  22:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n		changes
  23:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  24:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n 		01.00.00
  25:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n		Dec 20, 2010
  26:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n		stefano.ughi
  27:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n		changes
  28:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n 			Creation
  29:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  30:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n
  31:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
  32:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  33:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ******** */
  34:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Includes */
  35:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ******** */
  36:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  37:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define __ZERO_CROSSING
  38:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  39:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "Config.h"
  40:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "LIB_ZeroCrossing.h"
  41:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "OCIRQ_drv.h"
  42:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "OCTPM_drv.h"
  43:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "LIB_GridVoltage.h"
  44:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(CONFIG_PL_CLASS_B_CHECK)
  45:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "LIB_ClassBCheck.h"
  46:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* defined(CONFIG_PL_CLASS_B_CHECK) */
  47:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (ENABLE_ZC_LOADS_MODULE	== 1)
  48:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "ZcLoads.h"
  49:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
  50:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "LIB_ClassBVar.h"
  51:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "LIB_Trace.h"
  52:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(CONFIG_DISPATCHER_TASK_ENABLE)
  53:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #include "syncSvc.h"
  54:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
  55:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ****************** */
  56:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Defines and Macros */
  57:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ****************** */
  58:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /*#define DEBUG_ZC_VOLTAGE 1*/
  59:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  60:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #ifndef ZCV_HW_TMR_ID
  61:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "ZCV_HW_TMR_ID missing definition.."
  62:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
  63:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  64:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
  65:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Number of edges to discard, in order to obtain a consisting measure of
  66:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** grid half period, this value can't be less than 2 because of
  67:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****                                        1) Old timer measure initialization
  68:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****                                        2) possible G.I.E. enabled after LIB_ZC_InitSync() call
  69:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
  70:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define NUM_EDGES_TO_DISCARD    2u
  71:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  72:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
  73:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Max. number of times grid frequency found too low in order to set warning
  74:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** N.B. this parameter is linked to NUM_CALL_CIZCG and FLT_GOOD_ZC_FALSE
  75:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
  76:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define N_TIMES_FREQ_TOO_LOW    10
  77:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
  78:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Max. number of times grid frequency found too high in order to set warning
  79:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** N.B. this parameter is linked to NUM_CALL_CIZCG and FLT_GOOD_ZC_FALSE
  80:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
  81:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define N_TIMES_FREQ_TOO_HIGH   10
  82:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  83:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
  84:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** LIB_ZC_CheckIfZC_Is_Good(): Filter before check if Zero Crossing Signal is in range
  85:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
  86:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define NUM_CALL_CIZCG	    4
  87:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
  88:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** LIB_ZC_CheckIfZC_Is_Good(): Filter to declare Zero Crossing Signal out of range
  89:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
  90:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define FLT_GOOD_ZC_FALSE   3
  91:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /** LIB_ZC_CheckIfZC_Is_Good(): Upper limit for V line [V] */
  92:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define V_TH_HIGH	280
  93:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /** LIB_ZC_CheckIfZC_Is_Good(): Lower limit for V line [V] */
  94:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define V_TH_LOW	 93
  95:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
  96:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* *************************** */
  97:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Typedef, Structs and Unions */
  98:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* *************************** */
  99:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 100:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* grid semiperiod range descriptor */
 101:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** typedef struct
 102:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 103:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint16_t nominal;		/* nominal period */
 104:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint16_t mean;			/* mean given by min and max period */
 105:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint16_t dev;			/* deviation */
 106:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }ZCSemiPeriodRangeType;
 107:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 108:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ********* */
 109:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Variables */
 110:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ********* */
 111:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 112:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Global */
 113:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /** This struct is used to decide if Zero Crossing Signal is right */
 114:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** checkIfZC_Is_Good_t IsZC_Good= {0,0,0,0,0};
 115:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** LIB_ZC_Control LIB_ZC_Control_Var;
 116:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(CONFIG_DISPATCHER_TASK_ENABLE)
 117:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** NotifyDataEvent ZcEvent= {EV_NONE};
 118:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
 119:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Static */
 120:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(ZCV_ON_ICU)
 121:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** const IO_ICU_CfgType IcuZC_cfg =
 122:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 123:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	ZCV_CH_ID,
 124:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	TMR_CH_INV
 125:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** };
 126:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* defined(ZCV_ON_ICU) */
 127:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 128:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined (ZERO_CROSSING_CIRCUIT_INVERTING)
 129:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (ZERO_CROSSING_CIRCUIT_INVERTING == TRUE)
 130:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define IRQ_MEASURE_VPEAK_EDGE  IRQ_ON_NEGATIVE_EDGE
 131:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define POS_HALF_WAVE           ICU_EDGE_MODE_RISING
 132:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define HalfWavePosUsec         LIB_ZC_Control_Var.HalfWaveLengthNegUsec
 133:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define HalfWaveNegUsec         LIB_ZC_Control_Var.HalfWaveLengthPosUsec
 134:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #else
 135:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define IRQ_MEASURE_VPEAK_EDGE  IRQ_ON_POSITIVE_EDGE
 136:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define NEG_HALF_WAVE           ICU_EDGE_MODE_FALLING
 137:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define HalfWavePosUsec         LIB_ZC_Control_Var.HalfWaveLengthPosUsec
 138:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#define HalfWaveNegUsec         LIB_ZC_Control_Var.HalfWaveLengthNegUsec
 139:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif  /* #if (ZERO_CROSSING_CIRCUIT_INVERTING == TRUE) */
 140:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #else
 141:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "\n ZERO_CROSSING_CIRCUIT_INVERTING property not defined in IRQ_cfg.h"
 142:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif  /* #if defined (ZERO_CROSSING_CIRCUIT_INVERTING) */
 143:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 144:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** typedef struct {
 145:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint8_t ZcTout;
 146:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint8_t Old_goodZC;
 147:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint8_t Vline_cnt;
 148:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint8_t Zc_cnt;
 149:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t	OnGood;
 150:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t	OnNotGood;
 151:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** } LIB_ZC_Good_Control;
 152:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 153:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static LIB_ZC_Good_Control LIB_ZC_Good_Control_Var;
 154:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 155:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /** This vector is used to check, fixed nominal grid frequency, if grid frequency is in range */
 156:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 157:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 158:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static const ZCSemiPeriodRangeType ZcHalfPeriodRangeUsec[2] =
 159:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 160:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 161:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	NOM_HALF_PERIOD_60HZ,
 162:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	(uint16_t)MEAN_HALF_PERIOD_60HZ,
 163:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	(uint16_t)DEV_HALF_PERIOD_60HZ
 164:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	},
 165:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 166:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	NOM_HALF_PERIOD_50HZ,
 167:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	(uint16_t)MEAN_HALF_PERIOD_50HZ,
 168:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	(uint16_t)DEV_HALF_PERIOD_50HZ
 169:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 170:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** };
 171:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 172:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 173:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 174:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ******************* */
 175:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Functions Prototype */
 176:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* ******************* */
 177:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 178:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Exported function */
 179:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 180:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Local Function */
 181:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined (ZCV_ON_ICU)
 182:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** IO_ErrorType callbackICU_Event (IO_NotificationType notifVal, IO_ChannelType chid, IO_ErrorType val
 183:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* defined ZCV_ON_ICU*/
 184:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** IO_ErrorType callbackIRQ_Event (IO_NotificationType notifVal, IO_ChannelType chid, IO_ErrorType val
 185:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static bool_t LIB_ZC_CheckNominalFrequency(void);
 186:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static void LIB_ZC_ResetGridFreqWarnings(void);
 187:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static bool_t LIB_ZC_IsHalfPeriodInRange(uint32_t halfPeriodLengthUsec, uint8_t i);
 188:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 189:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t TimingValue2nd(int seconds);
 190:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_PeriodoReteMedioManager(void);
 191:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void OnZc_EdgeValidated(void);
 192:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static void LIB_ZC_Maskable(bool_t edge, bool_t go_on);
 193:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 194:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /*static bool_t zcCalculate(bool_t validate, LIB_ZcEdgeType edge, IO_HwTimerType currentHalfPeriodM
 195:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* *************** */
 196:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Function Bodies */
 197:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* *************** */
 198:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 199:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Exported function */
 200:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 201:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 202:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****  * This function enables interrupt on the M.C.U. pin dedicated to Zero Crossing Voltage,
 203:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****  * this function must be called regardless of reset's type.
 204:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 205:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_InitSync(void)
 206:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
  10                             		.loc 1 206 0
 207:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_START();
 208:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 209:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	memset(&LIB_ZC_Control_Var, 0, sizeof(LIB_ZC_Control_Var));
  11                             		.loc 1 209 0
  12 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
  13 0006 EF E1                   		mov.L	r14, r1
  14 0008 75 43 20                		mov.L	#32, r3
  15 000b 66 02                   		mov	#0, r2
  16 000d 7F 88                   		sstr.b
 210:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_UNDEFINED;
  17                             		.loc 1 210 0
  18 000f F9 E4 16 FF             		mov.B	#-1, 22[r14]
 211:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_ResetGridFreqWarnings();
 212:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	memset(&LIB_ZC_Good_Control_Var, 0, sizeof(LIB_ZC_Good_Control_Var));
  19                             		.loc 1 212 0
  20 0013 FB 12 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r1
  21 0019 66 C3                   		mov.L	#12, r3
  22 001b 7F 88                   		sstr.b
 213:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 214:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(IsZC_Good);
 215:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(LIB_ZC_Control_Var);
 216:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(LIB_ZC_Good_Control_Var);
 217:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_END();
 218:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 219:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(ZCV_ON_ICU)
 220:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	PLT_ASSERT( OCTMR_GetChannelIDFromPinID   == ZCV_CH_ID );
 221:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	PLT_ASSERT( OCTPM_GetTimerIDFromChannelID_1(ZCV_CH_ID) ==ZCV_HW_TMR_ID);
 222:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 223:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/* Input Capture Init. */
 224:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     (void)OCICU_DeInitSync(ZCV_CH_ID);
 225:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     (void)OCICU_InitSync(&IcuZC_cfg);
 226:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     (void)OCICU_SetModeSync(ZCV_CH_ID, TMR_CH_IC_POS_EDGE);
 227:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     (void)OCICU_EnableISR(ZCV_CH_ID, TMR_CH_ISR_ENABLE, callbackICU_Event);
 228:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #else
 229:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	OCIRQ_InitSync(callbackIRQ_Event);
  23                             		.loc 1 229 0
  24 001d FB 12 00 00 00 00       		mov.L	#_callbackIRQ_Event, r1
  25 0023 05 00 00 00             		bsr	_OCIRQ_InitSync
  26                             	.LVL0:
 230:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	OCIRQ_SetEdgeSync(1); /*RISING*/
  27                             		.loc 1 230 0
  28 0027 66 11                   		mov.L	#1, r1
  29 0029 05 00 00 00             		bsr	_OCIRQ_SetEdgeSync
  30                             	.LVL1:
 231:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	OCIRQ_IntrptEnableSync(TRUE);
  31                             		.loc 1 231 0
  32 002d 66 11                   		mov.L	#1, r1
  33 002f 04 00 00 00             		bra	_OCIRQ_IntrptEnableSync
  34                             	.LVL2:
  35                             	.LFE0:
  37                             		.section	.text.LIB_ZC_SyncCompleted,"ax",@progbits
  38                             		.global	_LIB_ZC_SyncCompleted
  40                             	_LIB_ZC_SyncCompleted:
  41                             	.LFB1:
 232:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if defined(ZCV_ON_ICU) */
 233:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 234:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 235:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 236:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** This function returns TRUE if Syncronization Phase is completed.
 237:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 238:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	bool_t
 239:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 240:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		TRUE -> Syncronization Phase completed.
 241:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		FALSE -> Syncronization Phase not completed.
 242:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 243:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 244:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
 245:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Dec. 20, 2010
 246:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 247:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 248:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 249:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** bool_t LIB_ZC_SyncCompleted(void)
 250:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
  42                             		.loc 1 250 0
 251:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (bool_t)( LIB_ZC_Control_Var.NumZC >= FLT_NUM_ZC );
  43                             		.loc 1 251 0
  44 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
  45 0006 59 E1 05                		movu.B	5[r14], r1
 252:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
  46                             		.loc 1 252 0
  47 0009 61 91                   		cmp	#9, r1
  48 000b FC DB 14                		scgtu.L	r1
  49 000e 02                      		rts
  50                             	.LFE1:
  52                             		.section	.text.LIB_ZC_ResetSyncPhase,"ax",@progbits
  53                             		.global	_LIB_ZC_ResetSyncPhase
  55                             	_LIB_ZC_ResetSyncPhase:
  56                             	.LFB2:
 253:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 254:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 255:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n This function resets filters for zero crossing voltage syncronization phase.
 256:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 257:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	stefano.ughi
 258:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Dec 22, 2010
 259:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 260:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 261:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 262:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 263:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 264:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 265:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_ResetSyncPhase(void)
 266:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
  57                             		.loc 1 266 0
 267:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_START();
 268:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(IsZC_Good);
 269:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(LIB_ZC_Control_Var);
 270:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 271:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.NumZC       = 0;
  58                             		.loc 1 271 0
  59 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
  60 0006 F9 E4 05 00             		mov.B	#0, 5[r14]
 272:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.GridFreqFlt = 0;
  61                             		.loc 1 272 0
  62 000a F9 E4 06 00             		mov.B	#0, 6[r14]
 273:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.goodZC               = FALSE;
  63                             		.loc 1 273 0
  64 000e FB E2 00 00 00 00       		mov.L	#_IsZC_Good, r14
  65 0014 F9 E4 03 00             		mov.B	#0, 3[r14]
  66 0018 02                      		rts
  67                             	.LFE2:
  69                             		.section	.text.LIB_ZC_GetNominalFrequency,"ax",@progbits
  70                             		.global	_LIB_ZC_GetNominalFrequency
  72                             	_LIB_ZC_GetNominalFrequency:
  73                             	.LFB4:
 274:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 275:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(IsZC_Good);
 276:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(LIB_ZC_Control_Var);
 277:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_END();
 278:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 279:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static void LIB_ZC_ResetSyncPhaseInt(void)
 280:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.NumZC       = 0;
 282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.GridFreqFlt = 0;
 283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.goodZC               = FALSE;
 284:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 285:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 286:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** This function returns the nominal grid frequency..
 287:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 288:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint8_t
 289:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 290:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		NOM_FREQ_IS_50_HZ
 291:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		NOM_FREQ_IS_60_HZ
 292:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		NOM_FREQ_IS_UNDEFINED
 293:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 294:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 295:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
 296:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Dec 22,2010
 297:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 298:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 299:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 300:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 301:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint8_t LIB_ZC_GetNominalFrequency(void)
 302:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
  74                             		.loc 1 302 0
 303:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (LIB_ZC_Control_Var.NominalGridFrequency);
 304:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
  75                             		.loc 1 304 0
  76 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
  77 0006 59 E1 16                		movu.B	22[r14], r1
  78 0009 02                      		rts
  79                             	.LFE4:
  81                             		.section	.text.LIB_ZC_GetNominalHalfWave,"ax",@progbits
  82                             		.global	_LIB_ZC_GetNominalHalfWave
  84                             	_LIB_ZC_GetNominalHalfWave:
  85                             	.LFB5:
 305:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 306:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 307:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** This function returns the nominal halfwave in us.
 308:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 309:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 310:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint16_t
 311:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 312:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		us if valid
 313:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval     0 if invalid (NOM_FREQ_IS_UNDEFINED)
 314:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 315:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 316:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Roberto Fioravanti
 317:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Apr 14,2011
 318:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 319:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 320:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 321:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 322:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint16_t LIB_ZC_GetNominalHalfWave(void)
 323:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
  86                             		.loc 1 323 0
  87                             	.LVL3:
 324:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint16_t retVal=0;
 325:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 326:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if(LIB_ZC_Control_Var.NominalGridFrequency != NOM_FREQ_IS_UNDEFINED)
  88                             		.loc 1 326 0
  89 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
  90 0006 59 EE 16                		movu.B	22[r14], r14
  91 0009 75 5E FF                		cmp	#0xff, r14
  92 000c 20 0E                   		beq	.L7
 327:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     {
 328:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	retVal = ZcHalfPeriodRangeUsec[LIB_ZC_Control_Var.NominalGridFrequency].nominal;
  93                             		.loc 1 328 0
  94 000e 63 6E                   		mul	#6, r14
  95 0010 70 EE 00 00 00 00       		add	#_ZcHalfPeriodRangeUsec, r14
  96 0016 DC E1                   		mov.W	[r14], r1
  97                             	.LVL4:
  98 0018 2E 04                   		bra	.L6
  99                             	.LVL5:
 100                             	.L7:
 324:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint16_t retVal=0;
 101                             		.loc 1 324 0
 102 001a 66 01                   		mov	#0, r1
 103                             	.LVL6:
 104                             		.balign 2,3,1
 105                             	.L6:
 329:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     }
 330:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     return retVal;
 331:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 106                             		.loc 1 331 0
 107 001c 5F 11                   		movu.W	r1, r1
 108 001e 02                      		rts
 109                             	.LFE5:
 111 001f 03                      		.section	.text.LIB_ZC_PeriodicAlarm,"ax",@progbits
 112                             		.global	_LIB_ZC_PeriodicAlarm
 114                             	_LIB_ZC_PeriodicAlarm:
 115                             	.LFB6:
 332:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 333:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 334:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns TRUE if a periodic alarm with task activation is requested otherwise FALSE..
 335:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 336:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 337:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	bool_t
 338:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 339:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		TRUE
 340:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		FALSE   task activation
 341:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 342:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
 343:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 11,2011
 344:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 345:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 346:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 347:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** bool_t LIB_ZC_PeriodicAlarm(void)
 348:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 116                             		.loc 1 348 0
 117                             	.LVL7:
 349:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t retValue=FALSE;
 350:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 351:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 352:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (ENABLE_ZC_LOADS_MODULE == 1)
 353:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	retValue=TRUE;
 354:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif  /* ENABLE_ZC_LOADS_MODULE */
 355:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 356:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #ifdef __PROFILER_H
 357:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	retValue=TRUE;
 358:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif  /* __PROFILER_H */
 359:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 360:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return retValue;
 361:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 118                             		.loc 1 361 0
 119 0000 66 01                   		mov.L	#0, r1
 120 0002 02                      		rts
 121                             	.LFE6:
 123                             		.section	.text.LIB_ZC_SetLineVoltageParams,"ax",@progbits
 124                             		.global	_LIB_ZC_SetLineVoltageParams
 126                             	_LIB_ZC_SetLineVoltageParams:
 127                             	.LFB7:
 362:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 363:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Function called inside Task MeasureLive.
 364:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 365:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]	isPresentVLine allowable values TRUE or FALSE
 366:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]    vLine A/D value of V peak
 367:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 368:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
 369:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 12,2011
 370:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.1
 371:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 372:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 373:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 374:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			\par \b Note 2:
 375:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			Ex setLineVoltage
 376:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 377:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 378:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 379:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_SetLineVoltageParams( bool_t isPresentVLine, ADC_ValueType vLine )
 380:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 128                             		.loc 1 380 0
 129                             	.LVL8:
 381:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_START();
 382:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(IsZC_Good);
 383:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 384:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.vLineIsPresent = isPresentVLine;
 130                             		.loc 1 384 0
 131 0000 FB E2 00 00 00 00       		mov.L	#_IsZC_Good, r14
 132 0006 C7 E1 02                		mov.B	r1, 2[r14]
 385:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.lineVoltage = vLine;
 133                             		.loc 1 385 0
 134 0009 D3 E2                   		mov.W	r2, [r14]
 135 000b 02                      		rts
 136                             	.LFE7:
 138                             		.section	.text.LIB_ZC_IsOnGood,"ax",@progbits
 139                             		.global	_LIB_ZC_IsOnGood
 141                             	_LIB_ZC_IsOnGood:
 142                             	.LFB8:
 386:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 387:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(IsZC_Good);
 388:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_END();
 389:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 390:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** bool_t LIB_ZC_IsOnGood(void)
 391:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 143                             		.loc 1 391 0
 392:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return LIB_ZC_Good_Control_Var.OnGood;
 393:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 144                             		.loc 1 393 0
 145 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r14
 146 0006 ED E1 01                		mov.L	4[r14], r1
 147 0009 02                      		rts
 148                             	.LFE8:
 150                             		.section	.text.LIB_ZC_IsOnNotGood,"ax",@progbits
 151                             		.global	_LIB_ZC_IsOnNotGood
 153                             	_LIB_ZC_IsOnNotGood:
 154                             	.LFB9:
 394:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 395:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** bool_t LIB_ZC_IsOnNotGood(void)
 396:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 155                             		.loc 1 396 0
 397:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return LIB_ZC_Good_Control_Var.OnNotGood;
 398:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 156                             		.loc 1 398 0
 157 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r14
 158 0006 ED E1 02                		mov.L	8[r14], r1
 159 0009 02                      		rts
 160                             	.LFE9:
 162                             		.section	.text.LIB_ZC_CheckIfZC_Is_Good,"ax",@progbits
 163                             		.global	_LIB_ZC_CheckIfZC_Is_Good
 165                             	_LIB_ZC_CheckIfZC_Is_Good:
 166                             	.LFB10:
 399:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 400:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 401:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n Checks the congruence between Zero Crossing and V line (if available).
 402:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n Called inside 10 msec Task.
 403:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 404:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in,out] freqValid is set to TRUE by zero crossing ISR
 405:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****                  if grid frequency found in range for FLT_NUM_ZC times.
 406:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 407:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param	[in,out] lineVoltage V peak [A/D]
 408:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 409:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param	[in]     vLineIsPresent if TRUE V line measure available
 410:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param	[out]    goodZC if TRUE the zero crossing signal is right
 411:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 412:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 413:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
 414:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 13,2011
 415:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.1
 416:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 417:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 418:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Nota 1:
 419:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			Ex checkIfZC_Is_Good
 420:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 421:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_CheckIfZC_Is_Good( void )
 422:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 167                             		.loc 1 422 0
 168 0000 6E 7A                   		pushm	r7-r10
 169                             	.LCFI0:
 423:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	int16_t vacRMS;
 424:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	EnterCriticalSection();
 170                             		.loc 1 424 0
 171 0002 05 00 00 00             		bsr	_OS_DisableInterrupt
 172 0006 FB 72 00 00 00 00       		mov.L	#_OS_Global, r7
 173 000c CD 7E 01                		mov.B	1[r7], r14
 174 000f 62 1E                   		add	#1, r14
 175 0011 C7 7E 01                		mov.B	r14, 1[r7]
 425:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_START();
 426:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(IsZC_Good);
 427:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(LIB_ZC_Good_Control_Var);
 428:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 429:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Good_Control_Var.ZcTout ++;
 176                             		.loc 1 429 0
 177 0014 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r14
 178 001a CC E7                   		mov.B	[r14], r7
 179 001c 62 17                   		add	#1, r7
 430:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if ( LIB_ZC_Good_Control_Var.ZcTout >= NUM_CALL_CIZCG )
 180                             		.loc 1 430 0
 181 001e 5B 74                   		movu.B	r7, r4
 182 0020 61 34                   		cmp	#3, r4
 183 0022 24 07                   		bgtu	.L13
 429:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Good_Control_Var.ZcTout ++;
 184                             		.loc 1 429 0
 185 0024 C3 E7                   		mov.B	r7, [r14]
 186 0026 38 CE 00                		bra	.L14
 187                             	.L13:
 431:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 432:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.ZcTout = 0;
 433:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 434:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		if ( TRUE == IsZC_Good.freqValid )
 188                             		.loc 1 434 0
 189 0029 FB 42 00 00 00 00       		mov.L	#_IsZC_Good, r4
 190 002f B1 47                   		movu.B	4[r4], r7
 432:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.ZcTout = 0;
 191                             		.loc 1 432 0
 192 0031 F8 E4 00                		mov.B	#0, [r14]
 193                             		.loc 1 434 0
 194 0034 61 17                   		cmp	#1, r7
 195 0036 21 0D                   		bne	.L15
 435:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 436:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			IsZC_Good.freqValid = FALSE;
 196                             		.loc 1 436 0
 197 0038 3C 44 00                		mov.B	#0, 4[r4]
 437:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			IsZC_Good.goodZC    = TRUE;
 198                             		.loc 1 437 0
 199 003b 80 CF                   		mov.B	r7, 3[r4]
 438:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Good_Control_Var.Zc_cnt = 0;
 200                             		.loc 1 438 0
 201 003d F9 E4 03 00             		mov.B	#0, 3[r14]
 202 0041 2E 17                   		bra	.L16
 203                             	.L15:
 439:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 440:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		else
 441:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 442:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Good_Control_Var.Zc_cnt++;
 204                             		.loc 1 442 0
 205 0043 CD E7 03                		mov.B	3[r14], r7
 206 0046 62 17                   		add	#1, r7
 207 0048 C7 E7 03                		mov.B	r7, 3[r14]
 443:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			if ( LIB_ZC_Good_Control_Var.Zc_cnt > FLT_GOOD_ZC_FALSE )
 208                             		.loc 1 443 0
 209 004b 5B 77                   		movu.B	r7, r7
 210 004d 61 37                   		cmp	#3, r7
 211 004f 25 09                   		bleu	.L16
 444:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			{
 445:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				IsZC_Good.goodZC = FALSE;
 212                             		.loc 1 445 0
 213 0051 3C 43 00                		mov.B	#0, 3[r4]
 446:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				LIB_ZC_Good_Control_Var.Zc_cnt = FLT_GOOD_ZC_FALSE;
 214                             		.loc 1 446 0
 215 0054 F9 E4 03 03             		mov.B	#3, 3[r14]
 216                             		.balign 2,3,5
 217                             	.L16:
 447:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			}
 448:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 449:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 450:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		if ( TRUE == IsZC_Good.vLineIsPresent )
 218                             		.loc 1 450 0
 219 0058 FB 72 00 00 00 00       		mov.L	#_IsZC_Good, r7
 220 005e 59 7E 02                		movu.B	2[r7], r14
 221 0061 61 1E                   		cmp	#1, r14
 222 0063 21 3D                   		bne	.L17
 451:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 452:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			vacRMS = LIB_GV_getRMS_Vac( IsZC_Good.lineVoltage );
 223                             		.loc 1 452 0
 224 0065 DC 71                   		mov.W	[r7], r1
 225 0067 05 00 00 00             		bsr	_LIB_GV_getRMS_Vac
 453:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			if( ( vacRMS > V_TH_HIGH ) || ( vacRMS < V_TH_LOW ) )
 226                             		.loc 1 453 0
 227 006b 71 11 A3                		add	#0xffffffa3, r1
 228 006e 5F 11                   		movu.W	r1, r1
 229 0070 75 51 BB                		cmp	#0xbb, r1
 230 0073 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r14
 231 0079 25 19                   		bleu	.L18
 454:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			{
 455:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				LIB_ZC_Good_Control_Var.Vline_cnt++;
 232                             		.loc 1 455 0
 233 007b CD E4 02                		mov.B	2[r14], r4
 234 007e 62 14                   		add	#1, r4
 235 0080 C7 E4 02                		mov.B	r4, 2[r14]
 456:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				if ( LIB_ZC_Good_Control_Var.Vline_cnt > FLT_GOOD_ZC_FALSE )
 236                             		.loc 1 456 0
 237 0083 5B 44                   		movu.B	r4, r4
 238 0085 61 34                   		cmp	#3, r4
 239 0087 25 0F                   		bleu	.L19
 457:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				{
 458:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					IsZC_Good.goodZC = FALSE;
 240                             		.loc 1 458 0
 241 0089 3C 73 00                		mov.B	#0, 3[r7]
 459:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Good_Control_Var.Vline_cnt = FLT_GOOD_ZC_FALSE;
 242                             		.loc 1 459 0
 243 008c F9 E4 02 03             		mov.B	#3, 2[r14]
 244 0090 2E 06                   		bra	.L19
 245                             	.L18:
 460:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				}
 461:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			}
 462:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			else
 463:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			{
 464:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				LIB_ZC_Good_Control_Var.Vline_cnt = 0;
 246                             		.loc 1 464 0
 247 0092 F9 E4 02 00             		mov.B	#0, 2[r14]
 248                             		.balign 2,3,5
 249                             	.L19:
 465:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			}
 466:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			IsZC_Good.lineVoltage = 0;
 250                             		.loc 1 466 0
 251 0096 FB 72 00 00 00 00       		mov.L	#_IsZC_Good, r7
 252 009c 3D 70 00                		mov.W	#0, [r7]
 253 009f 03                      		.balign 2,3,5
 254                             	.L17:
 467:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 468:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.OnGood=0;
 469:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.OnNotGood=0;
 470:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 471:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		if ( ( FALSE == IsZC_Good.goodZC ) && ( TRUE == LIB_ZC_Good_Control_Var.Old_goodZC ) )
 255                             		.loc 1 471 0
 256 00a0 FB 32 00 00 00 00       		mov.L	#_IsZC_Good, r3
 257 00a6 88 BC                   		mov.B	3[r3], r4
 468:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.OnGood=0;
 258                             		.loc 1 468 0
 259 00a8 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r14
 260                             		.loc 1 471 0
 261 00ae 5B 47                   		movu.B	r4, r7
 468:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.OnGood=0;
 262                             		.loc 1 468 0
 263 00b0 F9 E6 01 00             		mov.L	#0, 4[r14]
 469:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.OnNotGood=0;
 264                             		.loc 1 469 0
 265 00b4 F9 E6 02 00             		mov.L	#0, 8[r14]
 266                             		.loc 1 471 0
 267 00b8 61 07                   		cmp	#0, r7
 268 00ba 21 1A                   		bne	.L20
 269                             		.loc 1 471 0 is_stmt 0 discriminator 1
 270 00bc 59 E7 01                		movu.B	1[r14], r7
 271 00bf 61 17                   		cmp	#1, r7
 272 00c1 21 21                   		bne	.L21
 273                             	.LBB16:
 274                             	.LBB17:
 281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.NumZC       = 0;
 275                             		.loc 1 281 0 is_stmt 1
 276 00c3 FB 22 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r2
 277 00c9 81 2C                   		mov.B	r4, 5[r2]
 282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.GridFreqFlt = 0;
 278                             		.loc 1 282 0
 279 00cb 81 A4                   		mov.B	r4, 6[r2]
 283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.goodZC               = FALSE;
 280                             		.loc 1 283 0
 281 00cd 80 BC                   		mov.B	r4, 3[r3]
 282                             	.LBE17:
 283                             	.LBE16:
 472:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 473:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			/* I lost the Zero Crossing Signal --> restart Zero Crossing Sync Phase */
 474:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			SAFETY_DATA_CHECK(LIB_ZC_Control_Var);
 475:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_ResetSyncPhaseInt();
 476:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			SAFETY_DATA_UPDATE(LIB_ZC_Control_Var);
 477:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Good_Control_Var.OnNotGood=1;
 284                             		.loc 1 477 0
 285 00cf E7 E7 02                		mov.L	r7, 8[r14]
 286 00d2 2E 10                   		bra	.L21
 287                             	.L20:
 478:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 479:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		else if ( ( TRUE == IsZC_Good.goodZC ) && ( FALSE == LIB_ZC_Good_Control_Var.Old_goodZC ) )
 288                             		.loc 1 479 0
 289 00d4 61 17                   		cmp	#1, r7
 290 00d6 21 0C                   		bne	.L21
 291                             		.loc 1 479 0 is_stmt 0 discriminator 1
 292 00d8 59 E4 01                		movu.B	1[r14], r4
 293 00db 61 04                   		cmp	#0, r4
 294 00dd 21 05                   		bne	.L21
 480:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 481:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			/* Now I have a good Zero Crossing signal but before...*/
 482:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Good_Control_Var.OnGood=1;
 295                             		.loc 1 482 0 is_stmt 1
 296 00df E7 E7 01                		mov.L	r7, 4[r14]
 297                             		.balign 2,3,5
 298                             	.L21:
 483:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 484:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		else
 485:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 486:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			/* do nothing */
 487:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 488:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Good_Control_Var.Old_goodZC = IsZC_Good.goodZC;
 299                             		.loc 1 488 0
 300 00e2 FB E2 00 00 00 00       		mov.L	#_IsZC_Good, r14
 301 00e8 CD EE 03                		mov.B	3[r14], r14
 302 00eb FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Good_Control_Var, r7
 303 00f1 C7 7E 01                		mov.B	r14, 1[r7]
 304                             		.balign 2,3,5
 305                             	.L14:
 489:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 490:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 491:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if( LIB_ZC_Control_Var.NumZC < 2 ||  LIB_ZC_Control_Var.NumZC >= FLT_NUM_ZC ){
 306                             		.loc 1 491 0
 307 00f4 FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 308 00fa CD 7E 05                		mov.B	5[r7], r14
 309 00fd FB 72 00 00 00 00       		mov.L	#_IsZC_Good, r7
 310 0103 60 2E                   		sub	#2, r14
 311 0105 5B EE                   		movu.B	r14, r14
 312 0107 61 7E                   		cmp	#7, r14
 313 0109 25 13                   		bleu	.L22
 492:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		if( IsZC_Good.stability < 0xFF)
 314                             		.loc 1 492 0
 315 010b CD 7E 05                		mov.B	5[r7], r14
 316 010e 5B E4                   		movu.B	r14, r4
 317 0110 75 54 FF                		cmp	#0xff, r4
 318 0113 20 0D                   		beq	.L23
 493:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			IsZC_Good.stability++;
 319                             		.loc 1 493 0
 320 0115 62 1E                   		add	#1, r14
 321 0117 C7 7E 05                		mov.B	r14, 5[r7]
 322 011a 2E 06                   		bra	.L23
 323                             	.L22:
 494:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}else{
 495:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		IsZC_Good.stability = 0;
 324                             		.loc 1 495 0
 325 011c 3C 75 00                		mov.B	#0, 5[r7]
 326 011f 03                      		.balign 2,3,5
 327                             	.L23:
 496:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 497:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 498:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(IsZC_Good);
 499:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(LIB_ZC_Good_Control_Var);
 500:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_END();
 501:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	ExitCriticalSection();
 328                             		.loc 1 501 0
 329 0120 FB E2 00 00 00 00       		mov.L	#_OS_Global, r14
 330 0126 CD E7 01                		mov.B	1[r14], r7
 331 0129 60 17                   		sub	#1, r7
 332 012b C7 E7 01                		mov.B	r7, 1[r14]
 333 012e 5B 77                   		movu.B	r7, r7
 334 0130 61 07                   		cmp	#0, r7
 335 0132 21 08                   		bne	.L12
 502:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 336                             		.loc 1 502 0 discriminator 1
 337 0134 6F 7A                   		popm	r7-r10
 501:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	ExitCriticalSection();
 338                             		.loc 1 501 0 discriminator 1
 339 0136 04 00 00 00             		bra	_OS_EnableInterrupt
 340                             	.L12:
 341                             		.loc 1 502 0
 342 013a 3F 7A 04                		rtsd	#16, r7-r10
 343                             	.LFE10:
 345 013d 03                      		.section	.text.goodZCSignal,"ax",@progbits
 346                             		.global	_goodZCSignal
 348                             	_goodZCSignal:
 349                             	.LFB11:
 503:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 504:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns the value of IsZC_Good.goodZC var.
 505:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 506:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	bool_t
 507:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 508:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		TRUE Zero Crossing Signal is O.K.
 509:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		FALSE Zero Crossing Signal is K.O.
 510:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 511:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 512:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	stefano.ughi
 513:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 13, 2011
 514:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 515:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 516:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 517:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 518:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 519:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 520:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** bool_t goodZCSignal( void )
 521:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 350                             		.loc 1 521 0
 522:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return IsZC_Good.goodZC;
 523:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 351                             		.loc 1 523 0
 352 0000 FB E2 00 00 00 00       		mov.L	#_IsZC_Good, r14
 353 0006 59 E1 03                		movu.B	3[r14], r1
 354 0009 02                      		rts
 355                             	.LFE11:
 357                             		.section	.text.getZCStability,"ax",@progbits
 358                             		.global	_getZCStability
 360                             	_getZCStability:
 361                             	.LFB12:
 524:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 525:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns the stability measure of the  zero crossing signal
 526:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 527:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint8_t getZCStability(void)
 528:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 362                             		.loc 1 528 0
 529:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return IsZC_Good.stability;
 530:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 363                             		.loc 1 530 0
 364 0000 FB E2 00 00 00 00       		mov.L	#_IsZC_Good, r14
 365 0006 59 E1 05                		movu.B	5[r14], r1
 366 0009 02                      		rts
 367                             	.LFE12:
 369                             		.section	.text.SetgoodZCSignalTo,"ax",@progbits
 370                             		.global	_SetgoodZCSignalTo
 372                             	_SetgoodZCSignalTo:
 373                             	.LFB13:
 531:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 532:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 533:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Sets the value of IsZC_Good.goodZC var.
 534:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 535:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param	[in] value the value assumed by variable
 536:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 537:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 538:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	stefano.ughi
 539:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Feb 14, 2011
 540:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 541:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 542:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 543:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 544:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 545:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 546:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void SetgoodZCSignalTo(bool_t value)
 547:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 374                             		.loc 1 547 0
 375                             	.LVL9:
 548:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_START();
 549:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(IsZC_Good);
 550:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 551:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.goodZC = value;
 376                             		.loc 1 551 0
 377 0000 FB E2 00 00 00 00       		mov.L	#_IsZC_Good, r14
 378 0006 C7 E1 03                		mov.B	r1, 3[r14]
 379 0009 02                      		rts
 380                             	.LFE13:
 382                             		.section	.text.IsZCSyncOngoing,"ax",@progbits
 383                             		.global	_IsZCSyncOngoing
 385                             	_IsZCSyncOngoing:
 386                             	.LFB14:
 552:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 553:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(IsZC_Good);
 554:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_END();
 555:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 556:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 557:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 558:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 559:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns TRUE if LIB_ZC_Control_Var.NumZC is greater than 0, otherwise FALSE.
 560:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 561:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	bool_t
 562:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 563:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		TRUE Zero Crossing Signal is O.K.
 564:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		FALSE Zero Crossing Signal is K.O.
 565:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 566:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 567:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	stefano.ughi
 568:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 13, 2011
 569:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 570:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 571:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 572:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 573:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 574:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 575:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** bool_t IsZCSyncOngoing( void )
 576:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 387                             		.loc 1 576 0
 388                             	.LVL10:
 577:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t retVal=FALSE;
 578:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if (LIB_ZC_Control_Var.NumZC > 0)
 389                             		.loc 1 578 0
 390 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 391 0006 59 E1 05                		movu.B	5[r14], r1
 579:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 580:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = TRUE;
 581:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 582:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return retVal;
 583:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 392                             		.loc 1 583 0
 393 0009 61 01                   		cmp	#0, r1
 394 000b FC DB 11                		scne.L	r1
 395 000e 02                      		rts
 396                             	.LFE14:
 398                             		.section	.text.LIB_ZC_GetGridFrequencyWarning,"ax",@progbits
 399                             		.global	_LIB_ZC_GetGridFrequencyWarning
 401                             	_LIB_ZC_GetGridFrequencyWarning:
 402                             	.LFB15:
 584:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 585:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns if found Grid Frequency out of range.
 586:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 587:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint8_t
 588:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 589:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		GRID_FRQ_TOO_LOW
 590:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		GRID_FRQ_TOO_HIGH
 591:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		GRID_FRQ_IN_RANGE
 592:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 593:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 594:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	stefano.ughi
 595:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 14, 2011
 596:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 597:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 598:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 599:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 600:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 601:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 602:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint8_t LIB_ZC_GetGridFrequencyWarning( void )
 603:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 403                             		.loc 1 603 0
 404                             	.LVL11:
 604:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint8_t retVal = GRID_FRQ_IN_RANGE;
 605:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if ( TRUE == LIB_ZC_Control_Var.FreqTooLowWarning )
 405                             		.loc 1 605 0
 406 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 407 0006 ED E1 03                		mov.L	12[r14], r1
 408 0009 61 11                   		cmp	#1, r1
 409 000b 20 0D                   		beq	.L34
 606:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 607:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = GRID_FRQ_TOO_LOW;
 608:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 609:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else if ( TRUE == LIB_ZC_Control_Var.FreqTooHighWarning )
 410                             		.loc 1 609 0
 411 000d ED E1 04                		mov.L	16[r14], r1
 604:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint8_t retVal = GRID_FRQ_IN_RANGE;
 412                             		.loc 1 604 0
 413 0010 61 11                   		cmp	#1, r1
 414 0012 FC DB 10                		sceq.L	r1
 415 0015 6C 11                   		shll	#1, r1
 416 0017 03                      		.balign 2,3,1
 417                             	.L34:
 418                             	.LVL12:
 610:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 611:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = GRID_FRQ_TOO_HIGH;
 612:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 613:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 614:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return retVal;
 615:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 419                             		.loc 1 615 0
 420 0018 5B 11                   		movu.B	r1, r1
 421 001a 02                      		rts
 422                             	.LFE15:
 424 001b 03                      		.section	.text.LIB_ZC_GetReference_us,"ax",@progbits
 425                             		.global	_LIB_ZC_GetReference_us
 427                             	_LIB_ZC_GetReference_us:
 428                             	.LFB17:
 616:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Local Function */
 618:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 619:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 620:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Compares if halfPeriodLengthUsec in  the i-th range
 621:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]	halfPeriodLengthUsec semiperiod in us
 622:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]	i range identifier described by a ZCSemiPeriodRangeType
 623:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 624:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	bool_t
 625:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval     TRUE, in range
 626:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             FALSE, not in range
 627:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 628:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static bool_t LIB_ZC_IsHalfPeriodInRange(uint32_t _SemiPeriodLengthUsec, uint8_t i)
 629:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 630:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     bool_t  _InRange=FALSE;
 631:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 632:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if( i >= (sizeof(ZcHalfPeriodRangeUsec)/sizeof(ZcHalfPeriodRangeUsec[0])))
 633:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     {
 634:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	_InRange=FALSE;
 635:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     }else{
 636:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	if(labs((int32_t)_SemiPeriodLengthUsec-(int32_t)ZcHalfPeriodRangeUsec[i].mean) < ZcHalfPeriodR
 637:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	{
 638:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     		_InRange = TRUE;
 639:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	}
 640:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     }
 641:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     return _InRange;
 642:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 643:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 644:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 645:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns the reference in us.
 646:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 647:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint32_t
 648:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval     us
 649:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 650:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t LIB_ZC_GetReference_us(void)
 651:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 429                             		.loc 1 651 0
 430 0000 7E A7                   		push.l	r7
 431                             	.LCFI1:
 652:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     return (LIB_ZC_Control_Var.OldHalfPeriodMeasure * OCHWCNTR_GetTickResolution(ZCV_HW_TMR_ID))/10
 432                             		.loc 1 652 0
 433 0002 66 01                   		mov	#0, r1
 434 0004 FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 435 000a BA F7                   		movu.W	20[r7], r7
 436 000c 05 00 00 00             		bsr	_OCHWCNTR_GetTickResolution
 437                             	.LVL13:
 438 0010 5F 11                   		movu.W	r1, r1
 439 0012 4F 71                   		mul	r7, r1
 653:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 440                             		.loc 1 653 0
 441 0014 FD 78 81 E8 03          		div	#0x3e8, r1
 442 0019 3F 77 01                		rtsd	#4, r7-r7
 443                             	.LFE17:
 445                             		.section	.text.LIB_ZC_GetPartialWidth,"ax",@progbits
 446                             		.global	_LIB_ZC_GetPartialWidth
 448                             	_LIB_ZC_GetPartialWidth:
 449                             	.LFB21:
 654:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(CONFIG_PM_MOTORGATE)
 655:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static IO_HwTimerType OldExtCntrHalfPeriodMeasure;
 656:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t LIB_ZC_GetExtCntrReference_us(void)
 657:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 658:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     return (OldExtCntrHalfPeriodMeasure * OCHWCNTR_GetTickResolution(MOTOR_HW_TMR_ID))/1000;
 659:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 660:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if defined(CONFIG_PM_MOTORGATE)	*/
 661:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 662:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 663:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****  * Update LIB_ZC_Control_Var form timer data,edge and validation
 664:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****  * \return TRUE if
 665:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****  */
 666:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static bool_t zcCalculate(bool_t validate, LIB_ZcEdgeType edge, IO_HwTimerType currentHalfPeriodMea
 667:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 668:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t go_on=FALSE;
 669:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_START();
 670:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(IsZC_Good);
 671:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_CHECK(LIB_ZC_Control_Var);
 672:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 673:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if (validate)
 674:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 675:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#if defined (DEBUG_ZC_VOLTAGE)
 676:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		uint32_t halfPeriodLengthUsec;              /* half period measure in uSec */
 677:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#else
 678:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		uint16_t halfPeriodLengthUsec;              /* half period measure in uSec */
 679:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#endif
 680:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		IO_HwTimerType halfPeriodLength;            /* half period measure in ticks (type verified) */
 681:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 682:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_EdgeValidated();
 683:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 684:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		if ( LIB_ZC_Control_Var.CntrEdgesToDisc < NUM_EDGES_TO_DISCARD )
 685:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 686:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			/* Startup phase */
 687:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.OldHalfPeriodMeasure = currentHalfPeriodMeasure;
 688:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.CntrEdgesToDisc ++;
 689:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			go_on = FALSE;
 690:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 691:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		else
 692:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		{
 693:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			halfPeriodLength = (uint16_t)(OCHWCNTR_GetDelta(ZCV_HW_TMR_ID, LIB_ZC_Control_Var.OldHalfPeriodM
 694:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 695:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#if defined (DEBUG_ZC_VOLTAGE)
 696:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			halfPeriodLengthUsec = (((IO_TimingValueType)halfPeriodLength*OCHWCNTR_GetTickResolution(ZCV_HW_
 697:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			if ( halfPeriodLengthUsec >= 0xFFFF )
 698:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			{
 699:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				PLT_ERROR_WARNING(PLT_ERROR_LIB_ZC_1);
 700:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			}
 701:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#else
 702:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			halfPeriodLengthUsec = (uint16_t)(((IO_TimingValueType)halfPeriodLength*OCHWCNTR_GetTickResoluti
 703:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#endif   /* #if defined (DEBUG_ZC_VOLTAGE) */
 704:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 705:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			if ( !LIB_ZC_SyncCompleted() )
 706:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			{
 707:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				/* Sync phase */
 708:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 709:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				if ( LIB_ZC_IsHalfPeriodInRange (halfPeriodLengthUsec, 0) ) /* 60Hz*/
 710:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				{
 711:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.GridFreqFlt++;
 712:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.NumZC++;
 713:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				}
 714:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				else if ( LIB_ZC_IsHalfPeriodInRange (halfPeriodLengthUsec, 1) ) /*50Hz*/
 715:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				{
 716:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.GridFreqFlt--;
 717:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.NumZC++;
 718:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				}
 719:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				else
 720:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				{
 721:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_ResetSyncPhaseInt();
 722:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				}
 723:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 724:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				LIB_GV_InitNominalGridVoltageMeasure();
 725:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				go_on = FALSE;
 726:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			}
 727:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			else
 728:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			{
 729:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				/* Sync phase completed */
 730:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				if ( !LIB_ZC_CheckNominalFrequency() )
 731:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				{
 732:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					/* There are some troubles with grid frequency */
 733:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_ResetSyncPhaseInt();
 734:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					go_on = FALSE;
 735:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				}
 736:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				else
 737:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				{
 738:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					if ( LIB_ZC_IsHalfPeriodInRange (halfPeriodLengthUsec, LIB_ZC_Control_Var.NominalGridFrequency
 739:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					{
 740:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						/* Grid Frequency in range */
 741:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						LIB_ZC_ResetGridFreqWarnings();
 742:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if ( ZC_EDGE_RISING == edge )
 743:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						{
 744:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							LIB_ZC_Control_Var.HalfWaveLengthNegUsec = halfPeriodLengthUsec;
 745:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						}
 746:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						else
 747:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						{
 748:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							LIB_ZC_Control_Var.HalfWaveLengthPosUsec = halfPeriodLengthUsec;
 749:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						}
 750:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 751:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						/* Flag for LIB_ZC_CheckIfZC_Is_Good() */
 752:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						IsZC_Good.freqValid = TRUE;
 753:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 754:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if((HalfWavePosUsec) && (HalfWaveNegUsec))
 755:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						{
 756:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							go_on = TRUE;
 757:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						}
 758:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					}
 759:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					else
 760:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					{
 761:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						/* Grid Frequency out of range */
 762:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if ( halfPeriodLengthUsec > (ZcHalfPeriodRangeUsec[LIB_ZC_Control_Var.NominalGridFrequency].m
 763:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						{
 764:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							/* half period length too long */
 765:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							if ( LIB_ZC_Control_Var.CntrFreqTooLow < N_TIMES_FREQ_TOO_LOW )
 766:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							{
 767:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.CntrFreqTooLow++;
 768:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							}
 769:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							else
 770:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							{
 771:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.FreqTooLowWarning = TRUE;
 772:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							}
 773:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						}
 774:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						else
 775:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						{
 776:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							/* half period length too short */
 777:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							if ( LIB_ZC_Control_Var.CntrFreqTooHigh < N_TIMES_FREQ_TOO_HIGH )
 778:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							{
 779:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.CntrFreqTooHigh++;
 780:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							}
 781:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							else
 782:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							{
 783:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.FreqTooHighWarning = TRUE;
 784:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							}
 785:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						}
 786:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 787:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						/* Reset both half wave lenght values */
 788:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						LIB_ZC_Control_Var.HalfWaveLengthNegUsec = 0;
 789:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						LIB_ZC_Control_Var.HalfWaveLengthPosUsec = 0;
 790:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 791:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						go_on = FALSE;
 792:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					}
 793:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				}
 794:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			}
 795:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.OldHalfPeriodMeasure = currentHalfPeriodMeasure;
 796:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		}
 797:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 798:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else
 799:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 800:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		/* glitch probably due more to Mr. Brufani.
 801:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		1) don't change z.c. sync edge
 802:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		2) don't update LIB_ZC_Control_Var.OldHalfPeriodMeasure
 803:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		*/
 804:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		go_on = FALSE;
 805:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 806:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 807:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(LIB_ZC_Control_Var);
 808:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_DATA_UPDATE(IsZC_Good);
 809:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	SAFETY_REGION_END();
 810:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return go_on;
 811:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 812:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 813:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 814:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 815:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n Zero Crossing Voltage Event.
 816:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n This callback is called by IRQ ISR.
 817:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n for a detailed description please read pdf document inside LIB_Zero_Crossing folder
 818:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 819:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]	notifVal Zero Crossing sync edge, available values are:\n
 820:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****                 IRQ_ON_NEGATIVE_EDGE\n
 821:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****                 IRQ_ON_POSITIVE_EDGE
 822:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 823:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]        chid    not used
 824:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]        validate   if TRUE valid edge otherwise glitch
 825:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 826:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 827:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	IO_ErrorType
 828:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 829:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		IO_E_OK
 830:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 831:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 832:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	stefano.ughi
 833:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Dec 20, 2010
 834:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 835:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 836:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 837:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by stefano.ughi
 838:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			\par \b Note 2:
 839:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			removed code under define V_LINE_MEASURE because belonging to backup for V line
 840:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 841:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 842:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 843:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /*lint -esym(715,chid) chid not used */
 844:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if !defined (ZCV_ON_ICU)
 845:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** IO_ErrorType callbackIRQ_Event (IO_NotificationType edge, IO_ChannelType chid, IO_ErrorType validat
 846:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 847:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IO_HwTimerType currentHalfPeriodMeasure;    /* Current timer's value in ticks (type verified) */
 848:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t go_on;
 849:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	(void)chid;
 850:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 851:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	TRACE_ZC_IRQ_START();
 852:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 853:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	currentHalfPeriodMeasure        = OCHWCNTR_GetTicksSync(ZCV_HW_TMR_ID);
 854:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 855:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if (validate)
 856:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 857:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OCIRQ_ChangeEdgeSync((bool_t)edge);
 858:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(CONFIG_PM_MOTORGATE)
 859:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#if ZCV_HW_TMR_ID != MOTOR_HW_TMR_ID
 860:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OldExtCntrHalfPeriodMeasure = OCHWCNTR_GetTicksSync(MOTOR_HW_TMR_ID); /*MS counter per ocu del mo
 861:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#else
 862:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OldExtCntrHalfPeriodMeasure = currentHalfPeriodMeasure;
 863:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#endif
 864:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if defined(CONFIG_PM_MOTORGATE) */
 865:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OCHWCNTR_Trigger(HW_CNTR_TRIG_ZC);
 866:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 867:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     go_on = zcCalculate(validate, (LIB_ZcEdgeType)edge, currentHalfPeriodMeasure);
 868:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 869:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 870:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 871:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if !defined(IRQ_IS_UNMASKABLE_INT)
 872:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Maskable(edge, go_on);
 873:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #else
 874:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/* LIB_ZC_Maskable() will be called by maskable interrupt */
 875:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.go_on= go_on;
 876:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.edge=edge;
 877:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* defined(IRQ_IS_UNMASKABLE_INT) */
 878:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 879:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	TRACE_ZC_IRQ_END();
 880:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (IO_ErrorType)IO_E_OK;
 881:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 882:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if !defined ZCV_ON_ICU */
 883:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 884:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 885:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 886:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n Zero Crossing Voltage Event.
 887:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n This callback is called by an Input capture ISR.
 888:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n for a detailed description please read pdf document inside LIB_Zero_Crossing folder
 889:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 890:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]		notifVal Zero Crossing sync edge
 891:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]        chid    channel id (not used)
 892:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]        validate   not used yet (always IO_E_OK)
 893:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 894:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 895:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	IO_ErrorType
 896:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 897:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		IO_E_OK
 898:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 899:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 900:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Roberto Fioravanti
 901:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Mar 31, 2011
 902:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
 903:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 904:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \note		\par \b Note 1:
 905:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			documentation by Roberto Fioravanti
 906:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			\par \b Note 2:
 907:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			removed code under define V_LINE_MEASURE because belonging to backup for V line
 908:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 909:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \todo:  in case Grid Frequency in range between positive and negative edge must be discerned
 910:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \todo: validate must assume the following meaning : if FALSE valid edge, otherwise glitch
 911:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
 912:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /*lint -esym(715,notifVal)*/
 913:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(ZCV_ON_ICU)
 914:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** IO_ErrorType callbackICU_Event (IO_NotificationType edge, IO_ChannelType chid, IO_ErrorType err)
 915:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 916:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IO_HwTimerType currentHalfPeriodMeasure;    /* Current timer's value in ticks (type verified) */
 917:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t go_on;
 918:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t validate;
 919:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	ICU_EdgeModeType mode;
 920:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/* MS TRACE_TO_PIN(1,24); */
 921:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 922:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	currentHalfPeriodMeasure        = OCICU_GetTickSync(chid);
 923:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 924:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****    (void)OCICU_GetModeSync(chid, &mode);
 925:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if(mode == POS_HALF_WAVE){
 926:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		edge = ZC_EDGE_FALLING;
 927:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}else{
 928:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		edge = ZC_EDGE_RISING;
 929:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 930:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 931:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if(err == 0){
 932:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		validate = TRUE;
 933:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		(void)OCICU_ToggleModeSync(chid);/* TODO MS non necessario se genera su entrambi i fronti*/
 934:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(CONFIG_PM_MOTORGATE)
 935:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#if ZCV_HW_TMR_ID != MOTOR_HW_TMR_ID
 936:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OldExtCntrHalfPeriodMeasure = OCHWCNTR_GetTicksSync(MOTOR_HW_TMR_ID); /*MS counter per ocu del mo
 937:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#else
 938:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OldExtCntrHalfPeriodMeasure = currentHalfPeriodMeasure;
 939:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	#endif
 940:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if defined(CONFIG_PM_MOTORGATE) */
 941:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}else{
 942:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		validate = FALSE;
 943:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 944:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 945:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	go_on = zcCalculate(validate, edge, currentHalfPeriodMeasure);
 946:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 947:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if !defined(IRQ_IS_UNMASKABLE_INT)
 948:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Maskable(edge, go_on);
 949:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #else
 950:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/* LIB_ZC_Maskable() will be called by maskable interrupt */
 951:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.go_on= go_on;
 952:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.edge=edge;
 953:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* defined(IRQ_IS_UNMASKABLE_INT) */
 954:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 955:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/* TRACE_TO_PIN(0,24); */
 956:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (IO_ErrorType)IO_E_OK;
 957:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 958:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if defined ZCV_ON_ICU */
 959:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 960:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static void LIB_ZC_Maskable(bool_t edge, bool_t go_on)
 961:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 962:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint16_t HalfWaveLengthUsec;
 963:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if( ZC_EDGE_RISING == edge )
 964:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 965:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		HalfWaveLengthUsec = HalfWavePosUsec;
 966:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 967:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else
 968:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 969:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		HalfWaveLengthUsec = HalfWaveNegUsec;
 970:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 971:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 972:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if ( TRUE == go_on )
 973:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 974:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_OK((LIB_ZcEdgeType)edge, HalfWaveLengthUsec);
 975:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 976:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else
 977:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
 978:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		/* Here perform actions if Zero Crossing is not valid */
 979:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_KO((LIB_ZcEdgeType)edge, HalfWaveLengthUsec);
 980:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
 981:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 982:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 983:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if defined(IRQ_IS_UNMASKABLE_INT)
 984:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_MaskableHandler(void)
 985:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 986:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Maskable(LIB_ZC_Control_Var.edge, LIB_ZC_Control_Var.go_on);
 987:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 988:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* defined(IRQ_IS_UNMASKABLE_INT)*/
 989:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
 990:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns the minimum pulse width, in uSec, useful for driving loads of type "ZcLoads".
 991:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 992:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in] LIB_ZC_Control_Var.HalfWaveLengthPosUsec uSec
 993:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in] LIB_ZC_Control_Var.HalfWaveLengthNegUsec uSec
 994:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 995:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint16_t
 996:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 997:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		minimum pulse width in uSec
 998:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
 999:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1000:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
1001:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 11,2011
1002:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
1003:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1004:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1005:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1006:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint16_t LIB_ZC_GetPartialWidth(void)
1007:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 450                             		.loc 1 1007 0
1008:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint16_t minHalfPeriod;
1009:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1010:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if( LIB_ZC_Control_Var.HalfWaveLengthPosUsec < LIB_ZC_Control_Var.HalfWaveLengthNegUsec )
 451                             		.loc 1 1010 0
 452 0000 FB 42 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r4
 453 0006 DC 41                   		mov.W	[r4], r1
 454 0008 DD 4E 01                		mov.W	2[r4], r14
1011:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1012:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		minHalfPeriod = LIB_ZC_Control_Var.HalfWaveLengthPosUsec;
1013:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1014:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else
1015:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1016:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		minHalfPeriod = LIB_ZC_Control_Var.HalfWaveLengthNegUsec;
1017:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1018:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (uint16_t)((minHalfPeriod/N_LEVEL) - OFFSET_PARTIAL_WIDTH);
 455                             		.loc 1 1018 0
 456 000b 5F 13                   		movu.W	r1, r3
 457 000d 5F E4                   		movu.W	r14, r4
 458 000f 47 43                   		cmp	r4, r3
 459 0011 25 05                   		bleu	.L40
 460 0013 DF E1                   		mov.W	r14, r1
 461 0015 03                      		.balign 2,3,1
 462                             	.L40:
 463 0016 5F 11                   		movu.W	r1, r1
1019:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 464                             		.loc 1 1019 0
 465 0018 FD 74 91 06             		divu	#6, r1
 466 001c 02                      		rts
 467                             	.LFE21:
 469 001d 03                      		.section	.text.LIB_ZC_GetHalfWaveLengthPos,"ax",@progbits
 470                             		.global	_LIB_ZC_GetHalfWaveLengthPos
 472                             	_LIB_ZC_GetHalfWaveLengthPos:
 473                             	.LFB22:
1020:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1021:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
1022:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns the lenght of positive half wave, in uSec, necessary for driving partialized loads.
1023:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1024:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [out] LIB_ZC_Control_Var.HalfWaveLengthPosUsec
1025:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1026:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint16_t
1027:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1028:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		lenght of positive half wave
1029:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1030:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1031:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author     Leonardo Sparti
1032:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date       Oct 25,2011
1033:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version    1.0.0
1034:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1035:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1036:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint16_t LIB_ZC_GetHalfWaveLengthPos(void)
1037:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 474                             		.loc 1 1037 0
1038:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return LIB_ZC_Control_Var.HalfWaveLengthPosUsec;
1039:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 475                             		.loc 1 1039 0
 476 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 477 0006 5D E1 01                		movu.W	2[r14], r1
 478 0009 02                      		rts
 479                             	.LFE22:
 481                             		.section	.text.LIB_ZC_GetHalfWaveLengthNeg,"ax",@progbits
 482                             		.global	_LIB_ZC_GetHalfWaveLengthNeg
 484                             	_LIB_ZC_GetHalfWaveLengthNeg:
 485                             	.LFB23:
1040:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1041:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
1042:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Returns the lenght of negative half wave, in uSec, necessary for driving partialized loads.
1043:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1044:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [out] LIB_ZC_Control_Var.HalfWaveLengthNegUsec
1045:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1046:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint16_t
1047:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1048:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		lenght of negative half wave
1049:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1050:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1051:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author     Leonardo Sparti
1052:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date       Oct 25,2011
1053:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version    1.0.0
1054:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1055:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1056:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint16_t LIB_ZC_GetHalfWaveLengthNeg(void)
1057:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 486                             		.loc 1 1057 0
1058:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return LIB_ZC_Control_Var.HalfWaveLengthNegUsec;
1059:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 487                             		.loc 1 1059 0
 488 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 489 0006 5C E1                   		movu.W	[r14], r1
 490 0008 02                      		rts
 491                             	.LFE23:
 493                             		.section	.text.LIB_ZC_GetSemiPeriod,"ax",@progbits
 494                             		.global	_LIB_ZC_GetSemiPeriod
 496                             	_LIB_ZC_GetSemiPeriod:
 497                             	.LFB24:
1060:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1061:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /** Returns the mimimum length of the semi-period un us.
1062:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1063:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	uint16_t
1064:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1065:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		lenght of negative half wave
1066:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1067:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author     Roberto Fioravanti
1068:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date       Feb 22,2012
1069:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version    1.0.0
1070:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1071:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1072:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint16_t LIB_ZC_GetSemiPeriod(void)
1073:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 498                             		.loc 1 1073 0
1074:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint16_t minHalfPeriod;
1075:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1076:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if( LIB_ZC_Control_Var.HalfWaveLengthPosUsec < LIB_ZC_Control_Var.HalfWaveLengthNegUsec )
 499                             		.loc 1 1076 0
 500 0000 FB 42 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r4
 501 0006 DC 41                   		mov.W	[r4], r1
 502 0008 DD 4E 01                		mov.W	2[r4], r14
1077:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1078:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		minHalfPeriod = LIB_ZC_Control_Var.HalfWaveLengthPosUsec;
1079:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1080:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else
1081:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1082:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		minHalfPeriod = LIB_ZC_Control_Var.HalfWaveLengthNegUsec;
1083:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1084:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (uint16_t)(minHalfPeriod);
 503                             		.loc 1 1084 0
 504 000b 5F 13                   		movu.W	r1, r3
 505 000d 5F E4                   		movu.W	r14, r4
 506 000f 47 43                   		cmp	r4, r3
 507 0011 25 05                   		bleu	.L44
 508 0013 DF E1                   		mov.W	r14, r1
 509 0015 03                      		.balign 2,3,1
 510                             	.L44:
1085:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 511                             		.loc 1 1085 0
 512 0016 5F 11                   		movu.W	r1, r1
 513 0018 02                      		rts
 514                             	.LFE24:
 516 0019 03                      		.section	.text.LIB_ZC_InitPeriodicEvents,"ax",@progbits
 517                             		.global	_LIB_ZC_InitPeriodicEvents
 519                             	_LIB_ZC_InitPeriodicEvents:
 520                             	.LFB25:
1086:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1087:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1088:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1089:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
1090:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n This function initializes modules linked to periodic alarm.
1091:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1092:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \param  [in]  notifVal Zero Crossing sync edge
1093:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1094:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
1095:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 12, 2011
1096:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
1097:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1098:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1099:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_InitPeriodicEvents(IO_NotificationType notifVal)
1100:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 521                             		.loc 1 1100 0
 522                             	.LVL14:
 523 0000 02                      		rts
 524                             	.LFE25:
 526                             		.section	.text.TimingValue2nd,"ax",@progbits
 527                             		.global	_TimingValue2nd
 529                             	_TimingValue2nd:
 530                             	.LFB28:
1101:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     (void) notifVal;
1102:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1103:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (ENABLE_ZC_LOADS_MODULE == 1)
1104:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if ( LIB_ZcLoadsAreLoadsRegistered() == TRUE)
1105:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1106:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZcLoads_Manager( LIB_ZCLOAD_NEW_EDGE );
1107:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1108:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* #if (ENABLE_ZC_LOADS_MODULE == 1) */
1109:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #ifdef __PROFILER_H
1110:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	PM_ProfilesManager(notifVal);
1111:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif /* __PROFILER_H	*/
1112:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
1113:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1114:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
1115:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n This function checks if nominal grid frequency was correctly acquired and set LIB_ZC_Control_Var
1116:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n according to.
1117:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1118:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \return 	bool_t
1119:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1120:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		TRUE    O.K.
1121:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \retval		FALSE   Problem
1122:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1123:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
1124:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Dec 23, 2010
1125:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
1126:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1127:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1128:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1129:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static bool_t LIB_ZC_CheckNominalFrequency(void)
1130:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
1131:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	bool_t retVal = FALSE;
1132:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if ( LIB_ZC_Control_Var.GridFreqFlt > (FLT_NUM_ZC-DELTA_FRQ) )
1133:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1134:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_60_HZ;
1135:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = TRUE;
1136:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1137:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else if ( LIB_ZC_Control_Var.GridFreqFlt < (-(FLT_NUM_ZC-DELTA_FRQ)) )
1138:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1139:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_50_HZ;
1140:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = TRUE;
1141:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1142:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else
1143:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	{
1144:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_UNDEFINED;
1145:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = FALSE;
1146:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1147:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return retVal;
1148:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
1149:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
1150:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \n This function resets grid frequency warnings and counters
1151:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1152:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Stefano Ughi
1153:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \date		Jan 10, 2012
1154:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \version	1.0.0
1155:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1156:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1157:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1158:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** static void LIB_ZC_ResetGridFreqWarnings(void)
1159:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
1160:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.CntrFreqTooLow = 0;
1161:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.CntrFreqTooHigh = 0;
1162:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.FreqTooLowWarning = FALSE;
1163:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.FreqTooHighWarning = FALSE;
1164:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1165:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
1166:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1167:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1168:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (NUM_EDGES_TO_DISCARD >= 255)
1169:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "\n NUM_EDGES_TO_DISCARD must be less of 255"
1170:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
1171:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1172:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if ((FLT_NUM_ZC > 126) || (FLT_NUM_ZC&0x01) )
1173:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "\n FLT_NUM_ZC must be less of 127 and even"
1174:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
1175:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1176:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (DELTA_FRQ > FLT_NUM_ZC)
1177:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "\n DELTA_FRQ must be less or equal to FLT_NUM_ZC"
1178:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
1179:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1180:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (N_TIMES_FREQ_TOO_LOW > 255)
1181:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "\n N_TIMES_FREQ_TOO_LOW must be less or equal to 255"
1182:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
1183:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1184:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #if (N_TIMES_FREQ_TOO_HIGH > 255)
1185:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #error "\n N_TIMES_FREQ_TOO_HIGH must be less or equal to 255"
1186:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #endif
1187:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1188:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Macro per periodo di RETE */
1189:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define PERIODO_RETE_NUM_SAMPLES          201
1190:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** #define PERIODO_RETE_OUT_OF_RANGE_PERC    25	/* è la percentuale x 10 */
1191:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /* Variabili per calcolo della media del periodo di Rete */
1192:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint8_t  avgcnt=PERIODO_RETE_NUM_SAMPLES;
1193:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t accPeriodoRete;
1194:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t lasticval;
1195:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t discardedperiod=0;
1196:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t periodoReteMedio=0;
1197:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1198:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t TimingValue2nd(int seconds)
1199:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 531                             		.loc 1 1199 0
 532                             	.LVL15:
1200:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return  BUS_FREQUENCY_Hz * seconds;
1201:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 533                             		.loc 1 1201 0
 534 0000 74 11 00 2D 31 01       		mul	#0x1312d00, r1
 535                             	.LVL16:
 536 0006 02                      		rts
 537                             	.LFE28:
 539                             		.section	.text.LIB_ZC_GetPeriodoReteNominale,"ax",@progbits
 540                             		.global	_LIB_ZC_GetPeriodoReteNominale
 542                             	_LIB_ZC_GetPeriodoReteNominale:
 543                             	.LFB29:
1202:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1203:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t LIB_ZC_GetPeriodoReteNominale(void)
1204:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 544                             		.loc 1 1204 0
 545                             	.LVL17:
1205:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint32_t retVal=0;
1206:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if( LIB_ZC_GetNominalFrequency() == NOM_FREQ_IS_50_HZ ){
 546                             		.loc 1 1206 0
 547 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 548 0006 59 EE 16                		movu.B	22[r14], r14
 549 0009 61 1E                   		cmp	#1, r14
 550 000b 20 09                   		beq	.L49
1207:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = (BUS_FREQUENCY_Hz )/50;
1208:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}else if( LIB_ZC_GetNominalFrequency() == NOM_FREQ_IS_60_HZ ){
 551                             		.loc 1 1208 0
 552 000d 61 0E                   		cmp	#0, r14
 553 000f 20 0B                   		beq	.L50
1205:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	uint32_t retVal=0;
 554                             		.loc 1 1205 0
 555 0011 66 01                   		mov.L	#0, r1
 556 0013 02                      		rts
 557                             	.L49:
1207:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = (BUS_FREQUENCY_Hz )/50;
 558                             		.loc 1 1207 0
 559 0014 FB 1E 80 1A 06          		mov.L	#0x61a80, r1
 560 0019 02                      		rts
 561                             	.L50:
1209:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		retVal = (BUS_FREQUENCY_Hz )/60;
 562                             		.loc 1 1209 0
 563 001a FB 1E 15 16 05          		mov.L	#0x51615, r1
 564                             	.LVL18:
1210:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	}
1211:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return retVal;
1212:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 565                             		.loc 1 1212 0
 566 001f 02                      		rts
 567                             	.LFE29:
 569                             		.section	.text.LIB_ZC_GetPeriodoMedio,"ax",@progbits
 570                             		.global	_LIB_ZC_GetPeriodoMedio
 572                             	_LIB_ZC_GetPeriodoMedio:
 573                             	.LFB30:
1213:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1214:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** uint32_t LIB_ZC_GetPeriodoMedio(void)
1215:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 574                             		.loc 1 1215 0
1216:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return periodoReteMedio;
1217:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 575                             		.loc 1 1217 0
 576 0000 FB E2 00 00 00 00       		mov.L	#_periodoReteMedio, r14
 577 0006 EC E1                   		mov.L	[r14], r1
 578 0008 02                      		rts
 579                             	.LFE30:
 581                             		.section	.text.LIB_ZC_PeriodoReteMedioManager,"ax",@progbits
 582                             		.global	_LIB_ZC_PeriodoReteMedioManager
 584                             	_LIB_ZC_PeriodoReteMedioManager:
 585                             	.LFB31:
1218:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /**
1219:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Procedura determinazione media del periodo di rete.
1220:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** \author 	Roberto Fioravanti
1221:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1222:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1223:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void LIB_ZC_PeriodoReteMedioManager(void)
1224:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 586                             		.loc 1 1224 0
 587                             	.LVL19:
 588 0000 6E 7A                   		pushm	r7-r10
 589                             	.LCFI2:
1225:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint8_t  discard  = 0;
1226:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint32_t period   = 0;
1227:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint32_t refperiod;
1228:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     uint32_t th;
1229:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1230:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if(avgcnt == PERIODO_RETE_NUM_SAMPLES)
 590                             		.loc 1 1230 0
 591 0002 FB 72 00 00 00 00       		mov.L	#_avgcnt, r7
 592 0008 58 77                   		movu.B	[r7], r7
 593 000a 75 57 C9                		cmp	#0xc9, r7
 594 000d 21 33                   		bne	.L54
1231:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     {
1232:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         lasticval=LIB_ZC_GetReference_us();
 595                             		.loc 1 1232 0
 596 000f 05 00 00 00             		bsr	_LIB_ZC_GetReference_us
 597                             	.LVL20:
 598 0013 FB 72 00 00 00 00       		mov.L	#_lasticval, r7
 599 0019 E3 71                   		mov.L	r1, [r7]
1233:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         accPeriodoRete=0;
 600                             		.loc 1 1233 0
 601 001b FB 72 00 00 00 00       		mov.L	#_accPeriodoRete, r7
 602 0021 3E 70 00                		mov.L	#0, [r7]
1234:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         discardedperiod=0;
 603                             		.loc 1 1234 0
 604 0024 FB 72 00 00 00 00       		mov.L	#_discardedperiod, r7
 605 002a 3E 70 00                		mov.L	#0, [r7]
1235:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1236:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         if(!periodoReteMedio)
 606                             		.loc 1 1236 0
 607 002d FB 72 00 00 00 00       		mov.L	#_periodoReteMedio, r7
 608 0033 EC 7E                   		mov.L	[r7], r14
 609 0035 61 0E                   		cmp	#0, r14
 610 0037 21 09                   		bne	.L54
1237:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         {
1238:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             periodoReteMedio = LIB_ZC_GetPeriodoReteNominale();
 611                             		.loc 1 1238 0
 612 0039 05 00 00 00             		bsr	_LIB_ZC_GetPeriodoReteNominale
 613                             	.LVL21:
 614 003d E3 71                   		mov.L	r1, [r7]
 615 003f 03                      		.balign 2,3,3
 616                             	.L54:
1239:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         }
1240:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     }
1241:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1242:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     period = LIB_ZC_GetReference_us() - lasticval;
 617                             		.loc 1 1242 0
 618 0040 05 00 00 00             		bsr	_LIB_ZC_GetReference_us
 619                             	.LVL22:
 620 0044 FB 72 00 00 00 00       		mov.L	#_lasticval, r7
 621 004a 06 80 71                		sub	[r7].L, r1
 622                             	.LVL23:
1243:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1244:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if(period)
 623                             		.loc 1 1244 0
 624 004d 20 37                   		beq	.L56
 625                             	.LBB18:
 626                             	.LBB19:
 303:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (LIB_ZC_Control_Var.NominalGridFrequency);
 627                             		.loc 1 303 0
 628 004f FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 629                             	.LBE19:
 630                             	.LBE18:
1245:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     {
1246:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         if(LIB_ZC_GetNominalFrequency() == NOM_FREQ_IS_50_HZ ){
 631                             		.loc 1 1246 0
 632 0055 B5 F7                   		movu.B	22[r7], r7
 633 0057 61 17                   		cmp	#1, r7
 634 0059 21 08                   		bne	.L62
1247:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****           refperiod = 20000;
 635                             		.loc 1 1247 0
 636 005b FB EA 20 4E             		mov.L	#0x4e20, r14
 637 005f 2E 07                   		bra	.L57
 638                             	.L62:
1248:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         }else{
1249:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****           refperiod = 16666;
 639                             		.loc 1 1249 0
 640 0061 FB EA 1A 41             		mov.L	#0x411a, r14
 641 0065 03                      		.balign 2,3,2
 642                             	.L57:
 643                             	.LVL24:
1250:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         }
1251:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1252:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         th = (refperiod*PERIODO_RETE_OUT_OF_RANGE_PERC)/1000;
1253:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1254:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         if(abs(period - refperiod)>th)
 644                             		.loc 1 1254 0
 645 0066 FF 07 E1                		sub	r14, r1, r7
1252:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         th = (refperiod*PERIODO_RETE_OUT_OF_RANGE_PERC)/1000;
 646                             		.loc 1 1252 0
 647 0069 75 1E 19                		mul	#25, r14
 648                             	.LVL25:
 649                             		.loc 1 1254 0
 650 006c 7E 27                   		abs	r7
1252:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         th = (refperiod*PERIODO_RETE_OUT_OF_RANGE_PERC)/1000;
 651                             		.loc 1 1252 0
 652 006e FD 78 9E E8 03          		divu	#0x3e8, r14
 653                             	.LVL26:
 654                             		.loc 1 1254 0
 655 0073 47 E7                   		cmp	r14, r7
 656 0075 25 58                   		bleu	.L58
1255:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         {
1256:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             /* discard sample */
1257:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             discardedperiod++;
 657                             		.loc 1 1257 0
 658 0077 FB 72 00 00 00 00       		mov.L	#_discardedperiod, r7
 659 007d EC 7E                   		mov.L	[r7], r14
 660                             	.LVL27:
 661 007f 62 1E                   		add	#1, r14
 662 0081 E3 7E                   		mov.L	r14, [r7]
 663                             	.LVL28:
 664 0083 03                      		.balign 2,3,3
 665                             	.L56:
1258:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             discard=1;
1259:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         }
1260:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1261:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         if(!discard)
1262:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         {
1263:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             /* the sample has not been discarded */
1264:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             accPeriodoRete+=(period);
1265:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         }
1266:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     }
1267:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1268:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     lasticval=LIB_ZC_GetReference_us();
 666                             		.loc 1 1268 0
 667 0084 05 00 00 00             		bsr	_LIB_ZC_GetReference_us
 668                             	.LVL29:
 669 0088 FB 72 00 00 00 00       		mov.L	#_lasticval, r7
1269:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1270:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     avgcnt--;
 670                             		.loc 1 1270 0
 671 008e FB E2 00 00 00 00       		mov.L	#_avgcnt, r14
1268:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     lasticval=LIB_ZC_GetReference_us();
 672                             		.loc 1 1268 0
 673 0094 E3 71                   		mov.L	r1, [r7]
 674                             		.loc 1 1270 0
 675 0096 CC E7                   		mov.B	[r14], r7
 676 0098 60 17                   		sub	#1, r7
 677 009a C3 E7                   		mov.B	r7, [r14]
1271:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1272:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if(!avgcnt)
 678                             		.loc 1 1272 0
 679 009c 5B 77                   		movu.B	r7, r7
 680 009e 61 07                   		cmp	#0, r7
 681 00a0 21 3A                   		bne	.L52
 682                             	.LBB20:
1273:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     {
1274:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         uint32_t periodoReteRef = LIB_ZC_GetPeriodoReteNominale();
1275:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1276:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         avgcnt=PERIODO_RETE_NUM_SAMPLES;
1277:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1278:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         if(discardedperiod != (PERIODO_RETE_NUM_SAMPLES-1)) /* avoid to divide by zero => all sampl
 683                             		.loc 1 1278 0
 684 00a2 FB 72 00 00 00 00       		mov.L	#_discardedperiod, r7
 685 00a8 EC 77                   		mov.L	[r7], r7
1276:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         avgcnt=PERIODO_RETE_NUM_SAMPLES;
 686                             		.loc 1 1276 0
 687 00aa F8 E4 C9                		mov.B	#-55, [r14]
 688                             		.loc 1 1278 0
 689 00ad 75 57 C8                		cmp	#0xc8, r7
 690 00b0 20 2A                   		beq	.L52
1279:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         {
1280:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             periodoReteMedio = accPeriodoRete/((PERIODO_RETE_NUM_SAMPLES-1)-discardedperiod);
 691                             		.loc 1 1280 0
 692 00b2 75 4E C8                		mov.L	#0xc8, r14
 693 00b5 FF 07 7E                		sub	r7, r14, r7
 694 00b8 FB E2 00 00 00 00       		mov.L	#_accPeriodoRete, r14
 695 00be EC EE                   		mov.L	[r14], r14
 696 00c0 FC 27 7E                		divu	r7, r14
 697 00c3 FB 72 00 00 00 00       		mov.L	#_periodoReteMedio, r7
 698 00c9 E3 7E                   		mov.L	r14, [r7]
 699 00cb 2E 0F                   		bra	.L52
 700                             	.LVL30:
 701                             	.L58:
 702                             	.LBE20:
1264:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****             accPeriodoRete+=(period);
 703                             		.loc 1 1264 0
 704 00cd FB 72 00 00 00 00       		mov.L	#_accPeriodoRete, r7
 705 00d3 06 88 71                		add	[r7].L, r1
 706                             	.LVL31:
 707 00d6 E3 71                   		mov.L	r1, [r7]
 708 00d8 2E AC                   		bra	.L56
 709                             	.LVL32:
 710                             	.L52:
1281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****         }
1282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     }
1283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 711                             		.loc 1 1283 0
 712 00da 3F 7A 04                		rtsd	#16, r7-r10
 713                             	.LFE31:
 715 00dd 03                      		.section	.text.OnZc_EdgeValidated,"ax",@progbits
 716                             		.global	_OnZc_EdgeValidated
 718                             	_OnZc_EdgeValidated:
 719                             	.LFB32:
1284:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1285:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1286:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** /** Zerocrossing callback
1287:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** Called at each validated edge
1288:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** */
1289:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** void OnZc_EdgeValidated(void)
1290:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 720                             		.loc 1 1290 0
 721 0000 7E A7                   		push.l	r7
 722                             	.LCFI3:
1291:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/*update tick for alarm*/
1292:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.ZcRefTick = OS_GetTickRef();
 723                             		.loc 1 1292 0
 724 0002 05 00 00 00             		bsr	_OS_GetTickRef
 725 0006 FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 726 000c 93 71                   		mov.W	r1, 24[r7]
1293:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	/*update tick for alarm*/
1294:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	OS_DI();
 727                             		.loc 1 1294 0
 728 000e 05 00 00 00             		bsr	_OS_DisableInterrupt
1295:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.SysTime = OS_GetTime_Cycles();
 729                             		.loc 1 1295 0
 730 0012 05 00 00 00             		bsr	_OS_GetTime_Cycles
 731 0016 A1 F9                   		mov.L	r1, 28[r7]
1296:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	OS_RESTORE_I();
 732                             		.loc 1 1296 0
 733 0018 FB 72 00 00 00 00       		mov.L	#_OS_Global, r7
 734 001e B0 7F                   		movu.B	1[r7], r7
 735 0020 61 07                   		cmp	#0, r7
 736 0022 21 08                   		bne	.L70
1297:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 737                             		.loc 1 1297 0 discriminator 1
 738 0024 7E B7                   		pop	r7
1296:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	OS_RESTORE_I();
 739                             		.loc 1 1296 0 discriminator 1
 740 0026 04 00 00 00             		bra	_OS_EnableInterrupt
 741                             	.L70:
 742                             		.loc 1 1297 0
 743 002a 3F 77 01                		rtsd	#4, r7-r7
 744                             	.LFE32:
 746                             		.section	.text.callbackIRQ_Event,"ax",@progbits
 747                             		.global	_callbackIRQ_Event
 749                             	_callbackIRQ_Event:
 750                             	.LFB19:
 846:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 751                             		.loc 1 846 0
 752                             	.LVL33:
 753 0000 6E 7C                   		pushm	r7-r12
 754                             	.LCFI4:
 846:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 755                             		.loc 1 846 0
 756 0002 CF 37                   		mov.B	r3, r7
 757 0004 CF 1A                   		mov.B	r1, r10
 853:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	currentHalfPeriodMeasure        = OCHWCNTR_GetTicksSync(ZCV_HW_TMR_ID);
 758                             		.loc 1 853 0
 759 0006 66 01                   		mov	#0, r1
 760                             	.LVL34:
 761 0008 05 00 00 00             		bsr	_OCHWCNTR_GetTicksSync
 762                             	.LVL35:
 855:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if (validate)
 763                             		.loc 1 855 0
 764 000c 5B 7C                   		movu.B	r7, r12
 765 000e 61 0C                   		cmp	#0, r12
 853:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	currentHalfPeriodMeasure        = OCHWCNTR_GetTicksSync(ZCV_HW_TMR_ID);
 766                             		.loc 1 853 0
 767 0010 DF 1B                   		mov.W	r1, r11
 768                             	.LVL36:
 855:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if (validate)
 769                             		.loc 1 855 0
 770 0012 20 0E                   		beq	.L74
 857:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OCIRQ_ChangeEdgeSync((bool_t)edge);
 771                             		.loc 1 857 0
 772 0014 5B A1                   		movu.B	r10, r1
 773                             	.LVL37:
 774 0016 05 00 00 00             		bsr	_OCIRQ_ChangeEdgeSync
 775                             	.LVL38:
 865:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OCHWCNTR_Trigger(HW_CNTR_TRIG_ZC);
 776                             		.loc 1 865 0
 777 001a 66 01                   		mov.L	#0, r1
 778 001c 05 00 00 00             		bsr	_OCHWCNTR_Trigger
 779                             	.LVL39:
 780                             		.balign 2,3,1
 781                             	.L74:
 782                             	.LBB48:
 783                             	.LBB49:
 673:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if (validate)
 784                             		.loc 1 673 0
 785 0020 5B 77                   		movu.B	r7, r7
 786                             	.LVL40:
 787 0022 61 07                   		cmp	#0, r7
 788                             	.LBE49:
 789                             	.LBE48:
 867:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     go_on = zcCalculate(validate, (LIB_ZcEdgeType)edge, currentHalfPeriodMeasure);
 790                             		.loc 1 867 0
 791 0024 5B AA                   		movu.B	r10, r10
 792                             	.LVL41:
 793                             	.LBB78:
 794                             	.LBB76:
 673:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if (validate)
 795                             		.loc 1 673 0
 796 0026 3A 3C 01                		beq	.L75
 797                             	.LBB50:
 682:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_EdgeValidated();
 798                             		.loc 1 682 0
 799 0029 05 00 00 00             		bsr	_OnZc_EdgeValidated
 800                             	.LVL42:
 684:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		if ( LIB_ZC_Control_Var.CntrEdgesToDisc < NUM_EDGES_TO_DISCARD )
 801                             		.loc 1 684 0
 802 002d FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 803                             	.LVL43:
 804 0033 CD 7E 04                		mov.B	4[r7], r14
 805 0036 5B EC                   		movu.B	r14, r12
 806                             	.LVL44:
 807 0038 61 1C                   		cmp	#1, r12
 808 003a 24 0F                   		bgtu	.L76
 688:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.CntrEdgesToDisc ++;
 809                             		.loc 1 688 0
 810 003c 62 1E                   		add	#1, r14
 687:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.OldHalfPeriodMeasure = currentHalfPeriodMeasure;
 811                             		.loc 1 687 0
 812 003e D7 7B 0A                		mov.W	r11, 20[r7]
 688:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.CntrEdgesToDisc ++;
 813                             		.loc 1 688 0
 814 0041 C7 7E 04                		mov.B	r14, 4[r7]
 689:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			go_on = FALSE;
 815                             		.loc 1 689 0
 816 0044 66 07                   		mov.L	#0, r7
 817 0046 38 1C 01                		bra	.L75
 818                             	.L76:
 693:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			halfPeriodLength = (uint16_t)(OCHWCNTR_GetDelta(ZCV_HW_TMR_ID, LIB_ZC_Control_Var.OldHalfPeriodM
 819                             		.loc 1 693 0
 820 0049 9A F2                   		mov.W	20[r7], r2
 821 004b DF B3                   		mov.W	r11, r3
 822 004d 66 01                   		mov	#0, r1
 823 004f 05 00 00 00             		bsr	_OCHWCNTR_GetDelta
 824                             	.LVL45:
 825 0053 DF 1C                   		mov.W	r1, r12
 826                             	.LVL46:
 702:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			halfPeriodLengthUsec = (uint16_t)(((IO_TimingValueType)halfPeriodLength*OCHWCNTR_GetTickResoluti
 827                             		.loc 1 702 0
 828 0055 66 01                   		mov	#0, r1
 829                             	.LVL47:
 830 0057 05 00 00 00             		bsr	_OCHWCNTR_GetTickResolution
 831                             	.LVL48:
 832 005b 5F CC                   		movu.W	r12, r12
 833 005d 5F 11                   		movu.W	r1, r1
 834                             	.LBB51:
 835                             	.LBB52:
 251:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return (bool_t)( LIB_ZC_Control_Var.NumZC >= FLT_NUM_ZC );
 836                             		.loc 1 251 0
 837 005f 89 7C                   		mov.B	5[r7], r4
 838                             	.LBE52:
 839                             	.LBE51:
 702:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			halfPeriodLengthUsec = (uint16_t)(((IO_TimingValueType)halfPeriodLength*OCHWCNTR_GetTickResoluti
 840                             		.loc 1 702 0
 841 0061 FF 3E C1                		mul	r12, r1, r14
 842 0064 FD 78 9E E8 03          		divu	#0x3e8, r14
 843                             	.LVL49:
 705:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			if ( !LIB_ZC_SyncCompleted() )
 844                             		.loc 1 705 0
 845 0069 5B 4C                   		movu.B	r4, r12
 846                             	.LVL50:
 847 006b 61 9C                   		cmp	#9, r12
 848 006d 24 20                   		bgtu	.L77
 849                             	.LVL51:
 709:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				if ( LIB_ZC_IsHalfPeriodInRange (halfPeriodLengthUsec, 0) ) /* 60Hz*/
 850                             		.loc 1 709 0
 851 006f 77 2E FF FF 00          		and	#0xffff, r14
 852                             	.LVL52:
 853                             	.LBB53:
 854                             	.LBB54:
 855                             	.LBB55:
 856                             	.LBB56:
 636:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	if(labs((int32_t)_SemiPeriodLengthUsec-(int32_t)ZcHalfPeriodRangeUsec[i].mean) < ZcHalfPeriodR
 857                             		.loc 1 636 0
 858 0074 72 EC E8 DE             		add	#0xffffdee8, r14, r12
 859 0078 7E 2C                   		abs	r12
 860 007a 76 0C AB 02             		cmp	#0x2ab, r12
 861 007e 2A 05 38 06 01          		ble	.L78
 862 0083 38 0A 01                		bra	.L103
 863                             	.LVL53:
 864                             	.L95:
 865                             	.LBE56:
 866                             	.LBE55:
 867                             	.LBE54:
 868                             	.LBE53:
 724:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				LIB_GV_InitNominalGridVoltageMeasure();
 869                             		.loc 1 724 0
 870 0086 05 00 00 00             		bsr	_LIB_GV_InitNominalGridVoltageMeasure
 871                             	.LVL54:
 872 008a 38 CC 00                		bra	.L108
 873                             	.LVL55:
 874                             	.L77:
 875                             	.LBB57:
 876                             	.LBB58:
1132:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if ( LIB_ZC_Control_Var.GridFreqFlt > (FLT_NUM_ZC-DELTA_FRQ) )
 877                             		.loc 1 1132 0
 878 008d 89 F4                   		mov.B	6[r7], r4
 879 008f 61 84                   		cmp	#8, r4
 880 0091 2B 08                   		ble	.L81
1134:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_60_HZ;
 881                             		.loc 1 1134 0
 882 0093 3C F6 00                		mov.B	#0, 22[r7]
 883                             	.LVL56:
 884 0096 38 24 01                		bra	.L82
 885                             	.LVL57:
 886                             	.L81:
1137:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	else if ( LIB_ZC_Control_Var.GridFreqFlt < (-(FLT_NUM_ZC-DELTA_FRQ)) )
 887                             		.loc 1 1137 0
 888 0099 75 04 F8                		cmp	#-8, r4
 889 009c 28 08                   		bge	.L83
1139:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_50_HZ;
 890                             		.loc 1 1139 0
 891 009e 3C F6 01                		mov.B	#1, 22[r7]
 892                             	.LVL58:
 893 00a1 38 19 01                		bra	.L82
 894                             	.LVL59:
 895                             	.L83:
1144:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		LIB_ZC_Control_Var.NominalGridFrequency = NOM_FREQ_IS_UNDEFINED;
 896                             		.loc 1 1144 0
 897 00a4 F9 74 16 FF             		mov.B	#-1, 22[r7]
 898                             	.LBE58:
 899                             	.LBE57:
 900                             	.LBB59:
 901                             	.LBB60:
 281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.NumZC       = 0;
 902                             		.loc 1 281 0
 903 00a8 3C 75 00                		mov.B	#0, 5[r7]
 282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.GridFreqFlt = 0;
 904                             		.loc 1 282 0
 905 00ab 3C 76 00                		mov.B	#0, 6[r7]
 283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.goodZC               = FALSE;
 906                             		.loc 1 283 0
 907 00ae FB 72 00 00 00 00       		mov.L	#_IsZC_Good, r7
 908 00b4 3C 73 00                		mov.B	#0, 3[r7]
 909 00b7 38 9F 00                		bra	.L108
 910                             	.LVL60:
 911                             	.L105:
 912                             	.LBE60:
 913                             	.LBE59:
 914                             	.LBB61:
 915                             	.LBB62:
 916                             	.LBB63:
 917                             	.LBB64:
 636:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	if(labs((int32_t)_SemiPeriodLengthUsec-(int32_t)ZcHalfPeriodRangeUsec[i].mean) < ZcHalfPeriodR
 918                             		.loc 1 636 0
 919 00ba 63 62                   		mul	#6, r2
 920                             	.LVL61:
 921 00bc 70 22 00 00 00 00       		add	#_ZcHalfPeriodRangeUsec, r2
 922 00c2 EF 41                   		mov.L	r4, r1
 923 00c4 06 C1 21 01             		sub	2[r2].UW, r1
 924 00c8 7E 21                   		abs	r1
 925                             	.LBE64:
 926                             	.LBE63:
 927                             	.LBE62:
 928                             	.LBE61:
 738:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					if ( LIB_ZC_IsHalfPeriodInRange (halfPeriodLengthUsec, LIB_ZC_Control_Var.NominalGridFrequency
 929                             		.loc 1 738 0
 930 00ca 06 C5 21 02             		cmp	4[r2].UW, r1
 931 00ce 28 39                   		bge	.L84
 932                             	.LBB66:
 933                             	.LBB67:
1160:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.CntrFreqTooLow = 0;
 934                             		.loc 1 1160 0
 935 00d0 3C 77 00                		mov.B	#0, 7[r7]
1161:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.CntrFreqTooHigh = 0;
 936                             		.loc 1 1161 0
 937 00d3 3C 78 00                		mov.B	#0, 8[r7]
1162:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.FreqTooLowWarning = FALSE;
 938                             		.loc 1 1162 0
 939 00d6 3E 73 00                		mov.L	#0, 12[r7]
1163:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.FreqTooHighWarning = FALSE;
 940                             		.loc 1 1163 0
 941 00d9 3E 74 00                		mov.L	#0, 16[r7]
 942                             	.LBE67:
 943                             	.LBE66:
 742:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if ( ZC_EDGE_RISING == edge )
 944                             		.loc 1 742 0
 945 00dc 61 1A                   		cmp	#1, r10
 946 00de 21 06                   		bne	.L85
 744:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							LIB_ZC_Control_Var.HalfWaveLengthNegUsec = halfPeriodLengthUsec;
 947                             		.loc 1 744 0
 948 00e0 D3 7E                   		mov.W	r14, [r7]
 949 00e2 2E 06                   		bra	.L86
 950                             	.L85:
 748:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							LIB_ZC_Control_Var.HalfWaveLengthPosUsec = halfPeriodLengthUsec;
 951                             		.loc 1 748 0
 952 00e4 D7 7E 01                		mov.W	r14, 2[r7]
 953 00e7 03                      		.balign 2,3,5
 954                             	.L86:
 752:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						IsZC_Good.freqValid = TRUE;
 955                             		.loc 1 752 0
 956 00e8 FB 72 00 00 00 00       		mov.L	#_IsZC_Good, r7
 754:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if((HalfWavePosUsec) && (HalfWaveNegUsec))
 957                             		.loc 1 754 0
 958 00ee FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 959                             	.LVL62:
 752:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						IsZC_Good.freqValid = TRUE;
 960                             		.loc 1 752 0
 961 00f4 3C 74 01                		mov.B	#1, 4[r7]
 754:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if((HalfWavePosUsec) && (HalfWaveNegUsec))
 962                             		.loc 1 754 0
 963 00f7 5C E7                   		movu.W	[r14], r7
 964 00f9 61 07                   		cmp	#0, r7
 965 00fb 20 5D                   		beq	.L80
 966 00fd 5D E7 01                		movu.W	2[r14], r7
 725:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 				go_on = FALSE;
 967                             		.loc 1 725 0
 968 0100 61 07                   		cmp	#0, r7
 969 0102 FC DB 71                		scne.L	r7
 970 0105 2E 53                   		bra	.L80
 971                             	.LVL63:
 972                             	.L84:
 762:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						if ( halfPeriodLengthUsec > (ZcHalfPeriodRangeUsec[LIB_ZC_Control_Var.NominalGridFrequency].m
 973                             		.loc 1 762 0
 974 0107 5B 37                   		movu.B	r3, r7
 975 0109 63 67                   		mul	#6, r7
 976 010b 70 77 00 00 00 00       		add	#_ZcHalfPeriodRangeUsec, r7
 977 0111 5D 7C 01                		movu.W	2[r7], r12
 978 0114 06 C9 7C 02             		add	4[r7].UW, r12
 979 0118 47 C4                   		cmp	r12, r4
 980 011a FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 981 0120 2B 17                   		ble	.L87
 765:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							if ( LIB_ZC_Control_Var.CntrFreqTooLow < N_TIMES_FREQ_TOO_LOW )
 982                             		.loc 1 765 0
 983 0122 CD 7E 07                		mov.B	7[r7], r14
 984                             	.LVL64:
 985 0125 5B EC                   		movu.B	r14, r12
 986 0127 61 9C                   		cmp	#9, r12
 987 0129 24 09                   		bgtu	.L88
 767:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.CntrFreqTooLow++;
 988                             		.loc 1 767 0
 989 012b 62 1E                   		add	#1, r14
 990 012d C7 7E 07                		mov.B	r14, 7[r7]
 991 0130 2E 1A                   		bra	.L89
 992                             	.L88:
 771:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.FreqTooLowWarning = TRUE;
 993                             		.loc 1 771 0
 994 0132 3E 73 01                		mov.L	#1, 12[r7]
 995 0135 2E 15                   		bra	.L89
 996                             	.LVL65:
 997                             	.L87:
 777:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 							if ( LIB_ZC_Control_Var.CntrFreqTooHigh < N_TIMES_FREQ_TOO_HIGH )
 998                             		.loc 1 777 0
 999 0137 CD 7E 08                		mov.B	8[r7], r14
 1000                             	.LVL66:
 1001 013a 5B EC                   		movu.B	r14, r12
 1002 013c 61 9C                   		cmp	#9, r12
 1003 013e 24 09                   		bgtu	.L90
 779:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.CntrFreqTooHigh++;
 1004                             		.loc 1 779 0
 1005 0140 62 1E                   		add	#1, r14
 1006 0142 C7 7E 08                		mov.B	r14, 8[r7]
 1007 0145 2E 05                   		bra	.L89
 1008                             	.L90:
 783:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 								LIB_ZC_Control_Var.FreqTooHighWarning = TRUE;
 1009                             		.loc 1 783 0
 1010 0147 3E 74 01                		mov.L	#1, 16[r7]
 1011                             		.balign 2,3,5
 1012                             	.L89:
 788:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						LIB_ZC_Control_Var.HalfWaveLengthNegUsec = 0;
 1013                             		.loc 1 788 0
 1014 014a FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 1015 0150 3D 70 00                		mov.W	#0, [r7]
 789:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						LIB_ZC_Control_Var.HalfWaveLengthPosUsec = 0;
 1016                             		.loc 1 789 0
 1017 0153 3D 71 00                		mov.W	#0, 2[r7]
 1018                             	.LVL67:
 1019                             		.balign 2,3,1
 1020                             	.L108:
 791:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 						go_on = FALSE;
 1021                             		.loc 1 791 0
 1022 0156 66 07                   		mov.L	#0, r7
 1023                             		.balign 2,3,5
 1024                             	.L80:
 1025                             	.LVL68:
 795:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 			LIB_ZC_Control_Var.OldHalfPeriodMeasure = currentHalfPeriodMeasure;
 1026                             		.loc 1 795 0
 1027 0158 FB C2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r12
 1028 015e D7 CB 0A                		mov.W	r11, 20[r12]
 1029                             	.LVL69:
 1030 0161 03                      		.balign 2,3,1
 1031                             	.L75:
 1032                             	.LBE50:
 1033                             	.LBE76:
 1034                             	.LBE78:
 1035                             	.LBB79:
 1036                             	.LBB80:
 963:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	if( ZC_EDGE_RISING == edge )
 1037                             		.loc 1 963 0
 1038 0162 61 1A                   		cmp	#1, r10
 1039 0164 FB B2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r11
 1040                             	.LVL70:
 1041 016a 21 06                   		bne	.L91
 965:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		HalfWaveLengthUsec = HalfWavePosUsec;
 1042                             		.loc 1 965 0
 1043 016c DC B2                   		mov.W	[r11], r2
 1044                             	.LVL71:
 1045 016e 2E 06                   		bra	.L92
 1046                             	.LVL72:
 1047                             	.L91:
 969:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		HalfWaveLengthUsec = HalfWaveNegUsec;
 1048                             		.loc 1 969 0
 1049 0170 DD B2 01                		mov.W	2[r11], r2
 1050                             	.LVL73:
 1051 0173 03                      		.balign 2,3,1
 1052                             	.L92:
 972:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if ( TRUE == go_on )
 1053                             		.loc 1 972 0
 1054 0174 61 17                   		cmp	#1, r7
 974:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_OK((LIB_ZcEdgeType)edge, HalfWaveLengthUsec);
 1055                             		.loc 1 974 0
 1056 0176 EF A1                   		mov.L	r10, r1
 972:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if ( TRUE == go_on )
 1057                             		.loc 1 972 0
 1058 0178 21 08                   		bne	.L93
 1059                             	.LVL74:
 974:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_OK((LIB_ZcEdgeType)edge, HalfWaveLengthUsec);
 1060                             		.loc 1 974 0
 1061 017a 05 00 00 00             		bsr	_OnZc_OK
 1062                             	.LVL75:
 1063 017e 2E 57                   		bra	.L104
 1064                             	.LVL76:
 1065                             	.L93:
 979:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 		OnZc_KO((LIB_ZcEdgeType)edge, HalfWaveLengthUsec);
 1066                             		.loc 1 979 0
 1067 0180 05 00 00 00             		bsr	_OnZc_KO
 1068                             	.LVL77:
 1069 0184 2E 51                   		bra	.L104
 1070                             	.LVL78:
 1071                             	.L78:
 1072                             	.LBE80:
 1073                             	.LBE79:
 1074                             	.LBB81:
 1075                             	.LBB77:
 1076                             	.LBB75:
 711:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.GridFreqFlt++;
 1077                             		.loc 1 711 0
 1078 0186 CD 7C 06                		mov.B	6[r7], r12
 1079 0189 62 1C                   		add	#1, r12
 1080 018b 2E 13                   		bra	.L107
 1081                             	.LVL79:
 1082                             	.L103:
 1083                             	.LBB68:
 1084                             	.LBB69:
 1085                             	.LBB70:
 1086                             	.LBB71:
 636:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     	if(labs((int32_t)_SemiPeriodLengthUsec-(int32_t)ZcHalfPeriodRangeUsec[i].mean) < ZcHalfPeriodR
 1087                             		.loc 1 636 0
 1088 018d 72 EE 49 D8             		add	#0xffffd849, r14
 1089                             	.LVL80:
 1090 0191 7E 2E                   		abs	r14
 1091                             	.LVL81:
 1092 0193 76 0E 34 03             		cmp	#0x334, r14
 1093 0197 2A 11                   		bgt	.L96
 1094                             	.LVL82:
 1095                             	.LBE71:
 1096                             	.LBE70:
 1097                             	.LBE69:
 1098                             	.LBE68:
 716:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.GridFreqFlt--;
 1099                             		.loc 1 716 0
 1100 0199 CD 7C 06                		mov.B	6[r7], r12
 1101 019c 60 1C                   		sub	#1, r12
 1102                             	.LVL83:
 1103                             		.balign 2,3,1
 1104                             	.L107:
 717:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.NumZC++;
 1105                             		.loc 1 717 0
 1106 019e 62 14                   		add	#1, r4
 716:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.GridFreqFlt--;
 1107                             		.loc 1 716 0
 1108 01a0 C7 7C 06                		mov.B	r12, 6[r7]
 717:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					LIB_ZC_Control_Var.NumZC++;
 1109                             		.loc 1 717 0
 1110 01a3 81 7C                   		mov.B	r4, 5[r7]
 1111 01a5 38 E1 FE                		bra	.L95
 1112                             	.LVL84:
 1113                             	.L96:
 1114                             	.LBB72:
 1115                             	.LBB73:
 281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.NumZC       = 0;
 1116                             		.loc 1 281 0
 1117 01a8 3C 75 00                		mov.B	#0, 5[r7]
 282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	LIB_ZC_Control_Var.GridFreqFlt = 0;
 1118                             		.loc 1 282 0
 1119 01ab 3C 76 00                		mov.B	#0, 6[r7]
 283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	IsZC_Good.goodZC               = FALSE;
 1120                             		.loc 1 283 0
 1121 01ae FB 72 00 00 00 00       		mov.L	#_IsZC_Good, r7
 1122 01b4 3C 73 00                		mov.B	#0, 3[r7]
 1123 01b7 38 CF FE                		bra	.L95
 1124                             	.LVL85:
 1125                             	.L82:
 1126                             	.LBE73:
 1127                             	.LBE72:
 738:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 					if ( LIB_ZC_IsHalfPeriodInRange (halfPeriodLengthUsec, LIB_ZC_Control_Var.NominalGridFrequency
 1128                             		.loc 1 738 0
 1129 01ba FB 72 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r7
 1130 01c0 8D F3                   		mov.B	22[r7], r3
 1131 01c2 EF E4                   		mov.L	r14, r4
 1132 01c4 77 24 FF FF 00          		and	#0xffff, r4
 1133                             	.LVL86:
 1134                             	.LBB74:
 1135                             	.LBB65:
 632:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c ****     if( i >= (sizeof(ZcHalfPeriodRangeUsec)/sizeof(ZcHalfPeriodRangeUsec[0])))
 1136                             		.loc 1 632 0
 1137 01c9 5B 32                   		movu.B	r3, r2
 1138 01cb 61 12                   		cmp	#1, r2
 1139 01cd 25 05 38 38 FF          		bgtu	.L84
 1140 01d2 38 E8 FE                		bra	.L105
 1141                             	.LVL87:
 1142                             	.L104:
 1143                             	.LBE65:
 1144                             	.LBE74:
 1145                             	.LBE75:
 1146                             	.LBE77:
 1147                             	.LBE81:
 881:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 1148                             		.loc 1 881 0
 1149 01d5 66 01                   		mov.L	#0, r1
 1150 01d7 3F 7C 06                		rtsd	#24, r7-r12
 1151                             	.LFE19:
 1153                             		.section	.text.Get_ZCSysTime,"ax",@progbits
 1154                             		.global	_Get_ZCSysTime
 1156                             	_Get_ZCSysTime:
 1157                             	.LFB33:
1298:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 
1299:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** OS_U32 Get_ZCSysTime(void)
1300:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** {
 1158                             		.loc 1 1300 0
1301:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** 	return LIB_ZC_Control_Var.SysTime;
1302:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing\LIB_ZeroCrossing.c **** }
 1159                             		.loc 1 1302 0
 1160 0000 FB E2 00 00 00 00       		mov.L	#_LIB_ZC_Control_Var, r14
 1161 0006 ED E1 07                		mov.L	28[r14], r1
 1162 0009 02                      		rts
 1163                             	.LFE33:
 1165                             		.global	_periodoReteMedio
 1166                             		.section	.bss.periodoReteMedio,"aw",@nobits
 1167                             		.balign 4
 1170                             	_periodoReteMedio:
 1171 0000 00 00 00 00             		.zero	4
 1172                             		.global	_discardedperiod
 1173                             		.section	.bss.discardedperiod,"aw",@nobits
 1174                             		.balign 4
 1177                             	_discardedperiod:
 1178 0000 00 00 00 00             		.zero	4
 1179                             		.comm	_lasticval,4,4
 1180                             		.comm	_accPeriodoRete,4,4
 1181                             		.global	_avgcnt
 1182                             		.section	.data.avgcnt,"aw",@progbits
 1185                             	_avgcnt:
 1186 0000 C9                      		.byte	-55
 1187                             		.comm	_LIB_ZC_Control_Var,32,4
 1188                             		.global	_IsZC_Good
 1189                             		.section	.bss.IsZC_Good,"aw",@nobits
 1190                             		.balign 2
 1193                             	_IsZC_Good:
 1194 0000 00 00 00 00 00 00       		.zero	6
 1195                             		.section	.bss.LIB_ZC_Good_Control_Var,"aw",@nobits
 1196                             		.balign 4
 1199                             	_LIB_ZC_Good_Control_Var:
 1200 0000 00 00 00 00 00 00 00 00 		.zero	12
 1200      00 00 00 00 
 1201                             		.section	.rodata.ZcHalfPeriodRangeUsec,"a",@progbits
 1202                             		.balign 2
 1205                             	_ZcHalfPeriodRangeUsec:
 1206 0000 20 8D                   		.short	0x208d
 1207 0002 21 18                   		.short	0x2118
 1208 0004 02 AC                   		.short	0x2ac
 1209 0006 27 10                   		.short	0x2710
 1210 0008 27 B7                   		.short	0x27b7
 1211 000a 03 35                   		.short	0x335
 1506                             	.Letext0:
 1507                             		.file 2 "C:\\Workspace\\FW_Platform2_5\\trunk\\HAL\\HAL_General/StandardTypes.h"
 1508                             		.file 3 "C:\\Workspace\\FW_Platform2_5\\trunk\\OS\\EmbOS\\RX200_GNU\\V388\\Inc/RTOS.h"
 1509                             		.file 4 "C:\\Workspace\\FW_Platform2_5\\trunk\\HAL\\RN_RX200/RN_RX200_cfg.h"
 1510                             		.file 5 "C:\\Workspace\\FW_Platform2_5\\trunk\\Drivers/IO_driver.h"
 1511                             		.file 6 "C:\\Workspace\\FW_Platform2_5\\trunk\\Drivers\\OCADC/OCADC_drv.h"
 1512                             		.file 7 "C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing/Lib_ZeroCrossingExp.h"
 1513                             		.file 8 "C:\\Workspace\\FW_Platform2_5\\trunk\\Drivers\\OCTPM/OCTPM_drv.h"
 1514                             		.file 9 "C:\\Workspace\\FW_Platform2_5\\trunk\\Drivers\\OCIRQ/OCIRQ_drv.h"
 1515                             		.file 10 "C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_ZeroCrossing/LIB_ZeroCrossing.h"
 1516                             		.file 11 "C:\\Workspace\\FW_Platform2_5\\trunk\\PlatformLibrary\\LIB_GridVoltage/LIB_GridVoltage.h
