   1                             		.file	"Analog.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.section	.text.LIB_ADC_InitSync,"ax",@progbits
   5                             		.global	_LIB_ADC_InitSync
   7                             	_LIB_ADC_InitSync:
   8                             	.LFB0:
   9                             		.file 1 "C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog/Analog.c"
   1:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /*
   2:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Copyright (c) 2004-2005, Indesit Company, I.D.D..
   3:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Tutti i diritti sono riservati. All rights reserved.
   4:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
   5:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
   6:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
   7:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
   8:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \Par		Analog.c
   9:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n			Implementation of all functions necessary to achieve the aim.
  10:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  11:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \file		Analog.c
  12:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \ingroup	LIB_Analog
  13:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		Jun 16, 2010
  14:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	01.00.00
  15:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author		stefano.ughi
  16:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  17:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  18:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \Par\b	History:
  19:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  20:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		01.00.00
  21:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		Jun 16, 2010
  22:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		stefano.ughi
  23:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		changes
  24:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		- Creation
  25:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  26:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		01.00.01
  27:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		Feb 3, 2011
  28:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		stefano.ughi
  29:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		changes
  30:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		- Removed RTN_BACKUP define
  31:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  32:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		01.00.02
  33:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		Mar 9, 2011
  34:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		stefano.ughi
  35:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		changes
  36:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		- Added ADC_ValueType LIB_ADC_GetRefInput(void)
  37:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n      - Added bool_t LIB_ADC_IsRefInputReady(void)
  38:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n      - Added SFC_VlineMeasureOnNegativeLevel(Ch_Vline) under AD_CONVERTER_CHECK
  39:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n
  40:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		01.00.03
  41:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		Apr 1, 2011
  42:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		stefano.ughi
  43:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n		changes
  44:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 		- #include "Trash.h" and #include "TrashExp.h" under defines
  45:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n      - #include "LIB_GridVoltage.h" under defines
  46:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
  47:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #define MODULE_BODY_LIB_ANALOG
  48:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ******** */
  49:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Includes */
  50:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ******** */
  51:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include <stdlib.h>
  52:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include <string.h>
  53:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "Config.h"
  54:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "Analog.h"
  55:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "callback.h"
  56:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "LIB_UTilities.h"
  57:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "LIB_Error.h"
  58:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "LIB_ClassBVar.h"
  59:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  60:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(PLATFORM2_SUPPORT) && defined(WILD_CARD)
  61:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "LIB_GridVoltage.h"
  62:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
  63:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  64:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(CONFIG_LIB_CLASS_B_ADC)
  65:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "LIB_ClassBCheck.h"
  66:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
  67:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  68:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #include "LIB_Trace.h"
  69:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  70:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  71:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ****************** */
  72:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Defines and Macros */
  73:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ****************** */
  74:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  75:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  76:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  77:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* *************************** */
  78:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Typedef, Structs and Unions */
  79:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* *************************** */
  80:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
  81:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* A/D channel config. Setting file params */
  82:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** typedef union analogLLIparams_tag
  83:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
  84:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint16_t wrd;
  85:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	struct
  86:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
  87:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(__BIT_ORDER_MSB_FIRST__)
  88:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* High Byte */
  89:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t automatic:  1;  /* Automatic Readings */
  90:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t unused_0:   4;
  91:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t nRead:      3;  /* Real number of samples is 2^nRead */
  92:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* Low Byte */
  93:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t vLine:      1;  /* the channel is tagged as V line */
  94:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t vRef:       1;  /* the channel is tagged as V ref */
  95:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t comp:       1;  /* if '1' measure must be compesated with V ref measure */
  96:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t chDisch:    1;  /* if '1' read V line channel before reading the channel */										
  97:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t fal:        4;  /* Filter validation of reading (real number is 2^fal) */
  98:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #else
  99:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* High Byte */
 100:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t nRead:      3;  /* Real number of samples is 2^nRead */
 101:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t unused_0:   4;
 102:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t automatic:  1;  /* Automatic Readings */
 103:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* Low Byte */
 104:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t fal:        4;  /* Filter validation of reading (real number is 2^fal) */
 105:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t chDisch:    1;  /* if '1' read V line channel before reading the channel */
 106:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t comp:       1;  /* if '1' measure must be compesated with V ref measure */
 107:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t vRef:       1;  /* the channel is tagged as V ref */
 108:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		uint8_t vLine:      1;  /* the channel is tagged as V line */
 109:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 110:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif								
 111:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	} bit;
 112:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 113:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** } analogLLIparams_t;
 114:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 115:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** typedef struct analog_tag
 116:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 117:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analogLLIparams_t analogConfigData;     /* Low Level Input Params */
 118:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t channel;                        /* A/D channel */
 119:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t analogInputRamPos;              /* Position where result is stored */
 120:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t analogInputIndex;				/* Number of Samples collected */
 121:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t analogInputCnt;                 /* Counter used for max. variation between two samples */
 122:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ad_sum_t analogInputSum;   			    /* A/D samples's sum */
 123:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType analogInputOldValue;      /* A/D old sample */
 124:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 125:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** } analog_t;
 126:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 127:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* V Line measure */
 128:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** typedef struct V_Line_tag
 129:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 130:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* V Line new measure A/D value */
 131:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType newVPeak;
 132:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* V Line current measure A/D value */
 133:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType vPeak;
 134:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* samples */
 135:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t samples;
 136:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 137:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** } V_Line_t;
 138:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 139:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 140:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ********* */
 141:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Variables */
 142:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ********* */
 143:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 144:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Global */
 145:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** Main Voltage A/D Channel */
 146:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t Ch_Vline;
 147:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** RTN/Compensation A/D Channel */
 148:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t Ch_Comp;
 149:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** RTN A/D value */
 150:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** ADC_ValueType RefInput;
 151:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** If TRUE RTN measure is ready */
 152:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t RefReady;
 153:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 154:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* bitmap if '0' update AnalogInput[] */
 155:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** analogInput_t AnalogInputDisable;
 156:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* bitmap, this variable can only be set never clear except on Cold Reset */
 157:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** analogInput_t AnalogInputReady;
 158:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* bitmap, this variable can only be set from Platform when A/D readings is ready and
 159:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** can only be cleared by Application  */
 160:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** analogInput_t ApplianceAnalogInputReady;
 161:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 162:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ==TRUE)
 163:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* bitmap */
 164:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static analogInput_t AD_ChInputReady;
 165:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 166:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 167:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** Array with the acquired analog values */
 168:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** ADC_ValueType AnalogInput[ADC_NUM_CHANNELLS_USED];
 169:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 170:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Static */
 171:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static analog_t AnalogInputParam[ADC_NUM_CHANNELLS_USED];
 172:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static uint8_t ChannelRegistered;
 173:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 174:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined (ATD_INTERRUPT_ENABLED)
 175:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static uint8_t AD_Index;
 176:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #elif defined (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS)
 177:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS == 0)
 178:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static uint8_t AD_Index;
 179:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 180:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #else
 181:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* do nothing */
 182:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 183:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 184:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** If TRUE RTN value is in acceptable (good) */
 185:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static bool_t GoodRef = FALSE;
 186:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /** If TRUE RTN value is in range */
 187:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static bool_t RtnOutRange = FALSE;
 188:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 189:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 190:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(AD_CONVERTER_CHECK)
 191:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static ADC_ValueType VlineOnNegativeLevel;
 192:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 193:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 194:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ******************* */
 195:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Functions Prototype */
 196:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* ******************* */
 197:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 198:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Exported function */
 199:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 200:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Local Function */
 201:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static void LIB_ADC_AvgFilter ( uint8_t index, ADC_ValueType conversion );
 202:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static void LIB_ADC_DeltaCtrl( uint8_t index, ADC_ValueType newADvalue );
 203:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 204:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined (ATD_INTERRUPT_ENABLED)
 205:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static IO_ErrorType EndConvCallback (IO_NotificationType notifVal, IO_ChannelType chid, IO_ErrorTyp
 206:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 207:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 208:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* *************** */
 209:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Function Bodies */
 210:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* *************** */
 211:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 212:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Exported function */
 213:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 214:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n Initialization of variables relating to analog inputs.
 215:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n This function is called inside OnColdReset() if SystemMode == SYSTEM_NORMAL_MODE
 216:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 217:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[] (global) used as W
 218:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_Index (global) used as W
 219:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputDisable (global) used as W
 220:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputReady (global) used as W
 221:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b RefReady (global) used as W
 222:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Vline (global) used as W
 223:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Comp (global) used as W
 224:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_ChInputReady (global) used as W
 225:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b ApplianceAnalogInputReady (global) used as W
 226:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 227:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	stefano.ughi
 228:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		Jun 28, 2010
 229:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 230:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 231:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Note 1:
 232:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by stefano.ughi
 233:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			\par \b Note 2:
 234:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			tested
 235:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 236:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_InitSync (void)
 237:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
  10                             		.loc 1 237 0
 238:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
 239:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined (ATD_INTERRUPT_ENABLED)
 240:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 241:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_Index = 0;
 242:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 243:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #elif defined (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS)
 244:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 245:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS == 0)
 246:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 247:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_Index = 0;
 248:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 249:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 250:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 251:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #else
 252:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* do nothing */
 253:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 254:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 255:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AnalogInputDisable = 0;	    /* Sample on Analog Inputs Enabled */
  11                             		.loc 1 255 0
  12 0000 FB E2 00 00 00 00       		mov.L	#_AnalogInputDisable, r14
  13 0006 F8 E4 00                		mov.B	#0, [r14]
 256:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AnalogInputReady = 0;	    /* A/D Reading not ready */
  14                             		.loc 1 256 0
  15 0009 FB E2 00 00 00 00       		mov.L	#_AnalogInputReady, r14
  16 000f F8 E4 00                		mov.B	#0, [r14]
 257:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ApplianceAnalogInputReady = 0;
  17                             		.loc 1 257 0
  18 0012 FB E2 00 00 00 00       		mov.L	#_ApplianceAnalogInputReady, r14
  19 0018 F8 E4 00                		mov.B	#0, [r14]
 258:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ==TRUE)
 259:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_ChInputReady = 0;
  20                             		.loc 1 259 0
  21 001b FB E2 00 00 00 00       		mov.L	#_AD_ChInputReady, r14
  22 0021 F8 E4 00                		mov.B	#0, [r14]
 260:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 261:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 262:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* V ref. not ready */
 263:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	RefReady = FALSE;
  23                             		.loc 1 263 0
  24 0024 FB E2 00 00 00 00       		mov.L	#_RefReady, r14
  25 002a F8 E6 00                		mov.L	#0, [r14]
 264:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* Channel for Vline Measure not defined */
 265:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	Ch_Vline = CH_VLINE_IS_NOT_DEFINED;
  26                             		.loc 1 265 0
  27 002d FB E2 00 00 00 00       		mov.L	#_Ch_Vline, r14
  28 0033 F8 E4 FF                		mov.B	#-1, [r14]
 266:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* Channel for Compensation Measure not defined */
 267:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	Ch_Comp = CH_FOR_COMPENSATION_IS_NOT_DEFINED;
  29                             		.loc 1 267 0
  30 0036 FB E2 00 00 00 00       		mov.L	#_Ch_Comp, r14
  31 003c F8 E4 FF                		mov.B	#-1, [r14]
 268:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
 269:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_START();
 270:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
 271:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	RefInput = 0;	
  32                             		.loc 1 271 0
  33 003f FB E2 00 00 00 00       		mov.L	#_RefInput, r14
  34 0045 F8 E5 00                		mov.W	#0, [r14]
 272:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_UPDATE( RefInput );
 273:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_UPDATE( AnalogInputDisable );
 274:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	memset(AnalogInputParam, 0, sizeof(AnalogInputParam));
  35                             		.loc 1 274 0
  36 0048 FB 12 00 00 00 00       		mov.L	#_AnalogInputParam, r1
  37 004e 75 43 50                		mov.L	#0x50, r3
  38 0051 66 02                   		mov	#0, r2
  39 0053 7F 88                   		sstr.b
  40                             	.LVL0:
 275:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
 276:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 277:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_ELEM_UPDATE( AnalogInputParam, i );
 278:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_ELEM_UPDATE( AnalogInput, i );
 279:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 280:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #ifdef CONFIG_LIB_CLASS_B_ADC
 282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_CheckInit();
  41                             		.loc 1 282 0
  42 0055 04 00 00 00             		bra	_ADC_CheckInit
  43                             	.LVL1:
  44                             	.LFE0:
  46                             		.section	.text.LIB_ADC_RegisterADchannel,"ax",@progbits
  47                             		.global	_LIB_ADC_RegisterADchannel
  49                             	_LIB_ADC_RegisterADchannel:
  50                             	.LFB1:
 283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* CONFIG_LIB_CLASS_B_ADC */
 284:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 285:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_END();
 286:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 287:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 288:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 289:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n Setup of a single A/D channel.
 290:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n This function is called inside LIB_IOM_InputInitialization()  regardless cold or warm reset.
 291:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 292:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] channel A/D Converter channel
 293:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] posResult  position vs AnalogInput[] vector where A/D conv. is stored
 294:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] *pADlowLevelParams pointer to the Setting File Structure that describes the channel.
 295:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 296:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Vline (global) W A/D channel where Vpeak is measured.
 297:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Comp (global) W A/D channel where V ref is measured..
 298:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[channel] (global) W A/D channel config. structure.
 299:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 300:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	stefano.ughi
 301:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		Jun 28, 2010
 302:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 303:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 304:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Note 1:
 305:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by stefano.ughi
 306:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			\par \b Note 2:
 307:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			tested
 308:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 309:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 310:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 311:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_RegisterADchannel( uint8_t channel, uint8_t posResult, const uint8_t *pADlowLevelParam
 312:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
  51                             		.loc 1 312 0
  52                             	.LVL2:
  53 0000 7E A7                   		push.l	r7
  54                             	.LCFI0:
 313:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam;
 314:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 315:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	PLT_ASSERT( ChannelRegistered < ADC_NUM_CHANNELLS_USED )
 316:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 317:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 318:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam = &AnalogInputParam[ChannelRegistered];
  55                             		.loc 1 318 0
  56 0002 FB E2 00 00 00 00       		mov.L	#_ChannelRegistered, r14
  57 0008 CC E5                   		mov.B	[r14], r5
 312:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
  58                             		.loc 1 312 0
  59 000a CF 14                   		mov.B	r1, r4
  60                             		.loc 1 318 0
  61 000c 5B 5E                   		movu.B	r5, r14
  62 000e 63 AE                   		mul	#10, r14
  63 0010 70 EE 00 00 00 00       		add	#_AnalogInputParam, r14
  64                             	.LVL3:
 312:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
  65                             		.loc 1 312 0
  66 0016 CF 2F                   		mov.B	r2, r15
  67 0018 EF 37                   		mov.L	r3, r7
 319:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 320:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_REGION_START();
 321:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_ELEM_CHECK(AnalogInputParam, ChannelRegistered);
 322:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 323:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		(void)memset(pAnalogInputParam,0,sizeof(AnalogInputParam[0]));
  68                             		.loc 1 323 0
  69 001a EF E1                   		mov.L	r14, r1
  70                             	.LVL4:
  71 001c 66 A3                   		mov.L	#10, r3
  72                             	.LVL5:
  73 001e 66 02                   		mov	#0, r2
  74                             	.LVL6:
  75 0020 7F 88                   		sstr.b
 324:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 325:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam->channel = channel;
  76                             		.loc 1 325 0
  77 0022 C7 E4 02                		mov.B	r4, 2[r14]
 326:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/*lint -e826 pointer-to-pointer conversion area too small */
 327:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/*TODO: plausibility on pADlowLevelParams , verificare se � un parametro di sicurezza nel setti
 328:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam->analogConfigData = *(analogLLIparams_t*)pADlowLevelParams;
  78                             		.loc 1 328 0
  79 0025 DC 73                   		mov.W	[r7], r3
 329:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/*lint +e826 */
 330:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam->analogInputRamPos = posResult;
  80                             		.loc 1 330 0
  81 0027 C7 EF 03                		mov.B	r15, 3[r14]
 331:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_ELEM_UPDATE(AnalogInputParam, ChannelRegistered);
 332:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_REGION_END();
 333:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		
 334:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/*MS TODO: verificare se Ch_Vline � da considerare di sicurezza */
 335:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if (pAnalogInputParam->analogConfigData.bit.vLine)
  82                             		.loc 1 335 0
  83 002a EF 37                   		mov.L	r3, r7
  84                             	.LVL7:
  85 002c 76 27 80 00             		and	#0x80, r7
  86 0030 5F 77                   		movu.W	r7, r7
 328:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam->analogConfigData = *(analogLLIparams_t*)pADlowLevelParams;
  87                             		.loc 1 328 0
  88 0032 D3 E3                   		mov.W	r3, [r14]
  89                             		.loc 1 335 0
  90 0034 61 07                   		cmp	#0, r7
  91 0036 20 0A                   		beq	.L3
 336:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 337:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			Ch_Vline = pAnalogInputParam->channel;
  92                             		.loc 1 337 0
  93 0038 FB 72 00 00 00 00       		mov.L	#_Ch_Vline, r7
  94 003e 2E 12                   		bra	.L9
  95                             	.L3:
 338:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 339:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		else if (pAnalogInputParam->analogConfigData.bit.vRef)
  96                             		.loc 1 339 0
  97 0040 75 23 40                		and	#64, r3
  98 0043 5F 33                   		movu.W	r3, r3
  99 0045 61 03                   		cmp	#0, r3
 100 0047 20 0B                   		beq	.L4
 340:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 341:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			Ch_Comp = pAnalogInputParam->channel;
 101                             		.loc 1 341 0
 102 0049 FB 72 00 00 00 00       		mov.L	#_Ch_Comp, r7
 103 004f 03                      		.balign 2,3,1
 104                             	.L9:
 105 0050 C3 74                   		mov.B	r4, [r7]
 106                             		.balign 2,3,1
 107                             	.L4:
 342:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 343:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		else
 344:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 345:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* do nothing */
 346:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 347:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 348:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		ChannelRegistered++;
 108                             		.loc 1 348 0
 109 0052 62 15                   		add	#1, r5
 110 0054 FB 72 00 00 00 00       		mov.L	#_ChannelRegistered, r7
 111 005a C3 75                   		mov.B	r5, [r7]
 349:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 350:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 112                             		.loc 1 350 0
 113 005c 3F 77 01                		rtsd	#4, r7-r7
 114                             	.LFE1:
 116 005f 03                      		.section	.text.LIB_ADC_UnregisterAllADch,"ax",@progbits
 117                             		.global	_LIB_ADC_UnregisterAllADch
 119                             	_LIB_ADC_UnregisterAllADch:
 120                             	.LFB2:
 351:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 352:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n Unregister A/D channel structure.
 353:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n This function is called inside LIB_IOM_InputInitialization()  regardless cold or warm reset.
 354:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 355:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b ChannelRegistered (global) used as W
 356:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 357:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	stefano.ughi
 358:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		Jun 28, 2010
 359:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 360:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 361:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Note 1:
 362:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by stefano.ughi
 363:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 364:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 365:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_UnregisterAllADch(void)
 366:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 121                             		.loc 1 366 0
 367:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ChannelRegistered = 0;      /* No channel registered */
 122                             		.loc 1 367 0
 123 0000 FB E2 00 00 00 00       		mov.L	#_ChannelRegistered, r14
 124 0006 F8 E4 00                		mov.B	#0, [r14]
 125 0009 02                      		rts
 126                             	.LFE2:
 128                             		.section	.text.LIB_ADC_AreAnalogInputsReady,"ax",@progbits
 129                             		.global	_LIB_ADC_AreAnalogInputsReady
 131                             	_LIB_ADC_AreAnalogInputsReady:
 132                             	.LFB5:
 368:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 369:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 370:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 371:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 372:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n A/D channels manager, called inside Task Main_AnalogInputTask.
 373:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n if ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS = 1
 374:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n all channels defined inside setting file, except for the Vline channel,
 375:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n are sampled in the negative half-wave voltage
 376:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n if ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS = 0
 377:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n all channels defined inside setting file, except for the Vline channel,
 378:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n are sampled in the negative half-wave voltage one for each half-wave
 379:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n if defined ATD_INTERRUPT_ENABLED
 380:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n all channels defined inside setting file
 381:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n are sampled in interrupt (Not Tested)
 382:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 383:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[i].analogConfigData.AnalogInputEnable (global) used as input
 384:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Vline Ch_Vline = 0xFF -> Vline non presente (global) used as input
 385:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[i].analogConfigData.AnalogInputMustBeDischBeforeRead (global) used a
 386:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Comp (global) used as input
 387:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_Index (global) used as input
 388:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 389:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b   RefReady (global) used as output
 390:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b   RefInput (global) used as output
 391:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 392:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 393:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	x
 394:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		gg/mm/aaaa
 395:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	x.y.z
 396:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 397:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 398:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
 399:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			Se per un certo canale AnalogInputParam[i].analogConfigData.AnalogInputMustBeDischBeforeRead
 400:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			vale '1' viene eseguita prima una lettura dummy della Vline per scaricare il canale
 401:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			si e' infatti notato che se il canale ? flottante tende a "caricarsi"
 402:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			\par \b Nota 2:
 403:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			Se ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS vale 0 si potrebbe implementare un metodo diverso\n
 404:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			di gestione delle letture per mantenere costante il periodo di campionamento, del tipo\n
 405:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			se il canale e' abilitato eseguo lettura altrimenti aspetto la successiva chiamata del Manager.
 406:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 407:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_Manager(void)
 408:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 409:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
 410:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #ifndef ATD_INTERRUPT_ENABLED
 411:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType res;
 412:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 413:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 414:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined (ATD_INTERRUPT_ENABLED)
 415:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 416:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	i=0;
 417:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/*  Read all enabled channel, using end convertion interrupt, except V line Channel if present.*/
 418:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	while ( ( ( AnalogInputParam[AD_Index].analogConfigData.bit.automatic == 0 ) || ( AnalogInputParam
 419:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	        ( i < ADC_NUM_CHANNELLS_USED ) &&
 420:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	        ( AD_Index < ADC_NUM_CHANNELLS_USED ) )
 421:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 422:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		i++;
 423:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		AD_Index++;
 424:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AD_Index >= ADC_NUM_CHANNELLS_USED )
 425:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 426:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AD_Index=0;
 427:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 428:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 429:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 430:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 431:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( i >= ADC_NUM_CHANNELLS_USED )
 432:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 433:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* No automatic channels found !!*/
 434:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return;
 435:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 436:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 437:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* if Ch_Vline is defined and the channel must be discharged before read it, we discharge it on Ch
 438:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	with a dummy read */
 439:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( ( Ch_Vline != CH_VLINE_IS_NOT_DEFINED ) &&
 440:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	        ( AnalogInputParam[AD_Index].analogConfigData.bit.chDisch ) )
 441:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 442:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		(void)OCADC_SampleSync (Ch_Vline,AD_DUMMY_POS);
 443:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 444:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 445:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ((IO_ErrorType)IO_E_BUSY != OCADC_StartSampleSync (AnalogInputParam[AD_Index].channel,AnalogInp
 446:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 447:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		AD_Index++;
 448:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if (AD_Index >= ADC_NUM_CHANNELLS_USED)
 449:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 450:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AD_Index=0;
 451:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 452:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 453:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 454:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #elif defined (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS)
 455:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 456:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* No interrupts to manage A/D conversions */
 457:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS == 1)
 458:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 459:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/*  Read all enabled channel "one shot reading" except V line Channel if present.*/
 460:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 461:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
 462:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 463:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_REGION_START();
 464:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_ELEM_CHECK( AnalogInputParam, i );
 465:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* AnalogInput position is not directly related to AnalogInputParam; anyway this check is useful
 466:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		 * to check all AnalogInput channels
 467:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		 */
 468:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_ELEM_CHECK( AnalogInput, i);
 469:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_REGION_END();
 470:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* N.B.: if Ch_Vline not defined Ch_Vline = 0xFF and ADC_NUM_CHANNELLS_USED is <= 32 */
 471:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( ( AnalogInputParam[i].analogConfigData.bit.automatic ) &&
 472:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        ( AnalogInputParam[i].channel != Ch_Vline ) )
 473:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 474:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* Ch_Vline is defined and the channel must be discharged before read it, we discharge it on Ch_
 475:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			   with a dummy read */
 476:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( Ch_Vline != CH_VLINE_IS_NOT_DEFINED ) &&
 477:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			        ( AnalogInputParam[i].analogConfigData.bit.chDisch ) )
 478:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
 479:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				(void)OCADC_SampleSync (Ch_Vline, AD_DUMMY_POS);
 480:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
 481:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 482:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* consecutive readings performed 2^AD_LOCAL_SAMPLES_POWER_OF_TWO */
 483:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			res = LIB_ADC_Conv_F( i, AD_LOCAL_SAMPLES_POWER_OF_TWO, AD_LOCAL_SAMPLES_DISCARDED);
 484:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 485:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( AnalogInputParam[i].channel == Ch_Comp )
 486:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
 487:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				/* V ref Ready */
 488:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RefReady = TRUE;
 489:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				
 490:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				SAFETY_REGION_START();
 491:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				SAFETY_DATA_CHECK( RefInput );
 492:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				/* I'm reading compensation channel */
 493:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RefInput = res;
 494:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				SAFETY_DATA_UPDATE( RefInput );
 495:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				SAFETY_REGION_END();
 496:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
 497:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 498:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			CBF_AnalogInputIntManager_Polling();
 499:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 500:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 501:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
 502:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #else
 503:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 504:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	i=0;
 505:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/*  Read all enabled channel "one reading per call" except V line Channel if present.*/
 506:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* N.B.: con questo metodo il periodo di campionamento di un canale non e' costante ma dipende da 
 507:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	   canali di tipo automatic sono presenti */
 508:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 509:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	while ( ( ( AnalogInputParam[AD_Index].analogConfigData.bit.automatic == 0 ) || ( AnalogInputParam
 510:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	        ( i < ADC_NUM_CHANNELLS_USED ) &&
 511:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	        ( AD_Index < ADC_NUM_CHANNELLS_USED ) )
 512:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 513:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		i++;
 514:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		AD_Index++;
 515:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AD_Index >= ADC_NUM_CHANNELLS_USED )
 516:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 517:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AD_Index=0;
 518:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 519:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 520:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 521:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 522:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( i >= ADC_NUM_CHANNELLS_USED )
 523:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 524:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* No automatic channels found !!*/
 525:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return;
 526:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 527:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 528:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* if Ch_Vline is defined and the channel must be discharged before read it, we discharge it on Ch
 529:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	   with a dummy read */
 530:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( ( Ch_Vline != CH_VLINE_IS_NOT_DEFINED ) &&
 531:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	        ( AnalogInputParam[AD_Index].analogConfigData.bit.chDisch ) )
 532:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 533:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		(void)OCADC_SampleSync (Ch_Vline,AD_DUMMY_POS);
 534:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 535:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 536:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* consecutive readings performed 2^AD_LOCAL_SAMPLES_POWER_OF_TWO */
 537:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	res = LIB_ADC_Conv_F  ( AD_Index, AD_LOCAL_SAMPLES_POWER_OF_TWO, AD_LOCAL_SAMPLES_DISCARDED );
 538:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 539:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* I'm reading compensation channel */
 540:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AnalogInputParam[AD_Index].channel == Ch_Comp )
 541:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 542:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		RefReady = TRUE;  	/* V ref Ready */
 543:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_REGION_START();
 544:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_CHECK( RefInput );
 545:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		
 546:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		RefInput = res;/**< I'm reading compensation channel */
 547:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		
 548:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_DATA_UPDATE( RefInput );
 549:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		SAFETY_REGION_END();
 550:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 551:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 552:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	CBF_AnalogInputIntManager_Polling();
 553:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 554:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_Index++;
 555:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (AD_Index >= ADC_NUM_CHANNELLS_USED)
 556:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 557:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		AD_Index=0;
 558:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 559:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 560:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /*#if (ANALOG_INPUT_MANAGE_POLLING_CONTINUOUS == 1)*/
 561:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 562:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #else
 563:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #error "How have I to manage A/D readings?"     
 564:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif  /* ATD_INTERRUPT_ENABLED */
 565:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 566:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(AD_CONVERTER_CHECK)
 567:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SFC_VlineMeasureOnNegativeLevel(Ch_Vline);
 568:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 569:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 570:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #ifdef CONFIG_LIB_CLASS_B_ADC
 571:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_Check();
 572:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* CONFIG_LIB_CLASS_B_ADC */
 573:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 574:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 575:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 576:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 577:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n This function performs, fixed index inside AnalogInputParam[] vector,
 578:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n 2^ad_sample_num_pot2 samples on the channel linked to AnalogInputParam[index] and returns the av
 579:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \n The average is also passed to the functions LIB_ADC_AvgFilter or LIB_ADC_DeltaCtrl.
 580:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 581:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] index index of AnalogInputParam[].
 582:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] ad_sample_num_pot2 2^ad_sample_num_pot2 = numbers of reading to do.
 583:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] samples_to_discard readings to discharge.
 584:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 585:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[channel] (global) R.
 586:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 587:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	ADC_ValueType
 588:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 589:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		average average of readings
 590:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 591:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano ughi
 592:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		29/06/2010
 593:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.2
 594:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 595:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 596:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note	    \par \b Nota 1:
 597:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c ****             added parameter samples_to_discard, Number of readings to be discharged\n
 598:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c ****             due to floating channels problem.
 599:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 600:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 601:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 602:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** ADC_ValueType LIB_ADC_Conv_F  ( uint8_t _index, uint8_t ad_sample_num_pot2, uint8_t samples_to_disc
 603:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 604:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam;
 605:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType adValue;
 606:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	lowFilterADCsum_t lf_sum;
 607:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (VLINEMEASURE_COMP_FACTOR != 0)
 608:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType tmp_adValue;
 609:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
 610:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
 611:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t localSamples;
 612:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 613:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 614:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	localSamples = (uint8_t)(1u<<ad_sample_num_pot2);
 615:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	lf_sum = 0;
 616:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i = 0; i < localSamples; i++ )
 618:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 619:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		(void)OCADC_SampleSync(pAnalogInputParam->channel,pAnalogInputParam->analogInputRamPos);
 620:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		adValue = OCADC_GetSync(pAnalogInputParam->analogInputRamPos);
 621:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 622:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( i >= samples_to_discard )
 623:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 624:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			lf_sum += (lowFilterADCsum_t)adValue;
 625:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 626:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 627:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 628:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (localSamples>samples_to_discard)
 629:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 630:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		adValue = (ADC_ValueType)(lf_sum/(uint8_t)(localSamples-samples_to_discard));
 631:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 632:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	else
 633:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 634:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* Serious RunTime Error */
 635:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		adValue = ONE_AD_SAMPLE_MAX_VALUE;
 636:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		PLT_ERROR_WARNING(PLT_ERROR_ANALOG_1);
 637:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 638:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 639:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (VLINEMEASURE_COMP_FACTOR != 0)
 640:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* V line compensation */
 641:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( pAnalogInputParam->channel == Ch_Vline )
 642:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 643:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		tmp_adValue = (ADC_ValueType) (adValue+VLINEMEASURE_COMP_FACTOR);
 644:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( tmp_adValue > ONE_AD_SAMPLE_MAX_VALUE )
 645:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 646:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			adValue = ONE_AD_SAMPLE_MAX_VALUE;
 647:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 648:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		else
 649:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 650:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			adValue=tmp_adValue;
 651:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 652:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 653:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* #if (VLINEMEASURE_COMP_FACTOR != 0) */
 654:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_START();
 655:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_ELEM_CHECK( AnalogInputParam,      _index );
 656:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 657:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( pAnalogInputParam->analogConfigData.bit.fal == 0 )
 658:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 659:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* Don't care that between current value and previous there is a difference of more than
 660:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		   a fixed value.*/
 661:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_AvgFilter(_index,adValue);
 662:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 663:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	else
 664:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 665:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* Between current value and previous must be a difference less than a fixed value.*/
 666:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_DeltaCtrl(_index,adValue);
 667:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 668:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_ELEM_UPDATE( AnalogInputParam,      _index );
 669:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_END();
 670:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 671:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return adValue;
 672:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 673:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 674:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 675:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function returns TRUE if all A/D channels labeled as automatic were acquired, otherwise FALSE.
 676:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 677:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[i] (global) R.
 678:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Vline (global) R.
 679:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputReady (global) R.
 680:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[i].AnalogInputRamPos (global) R.
 681:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 682:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
 683:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 684:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE
 685:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval     FALSE
 686:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 687:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 688:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		28/06/2010
 689:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 690:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 691:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 692:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_AreAnalogInputsReady(void)
 693:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 133                             		.loc 1 693 0
 134                             	.LVL8:
 135 0000 7E A7                   		push.l	r7
 136                             	.LCFI1:
 694:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
 695:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	bool_t retVal=TRUE;
 696:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 697:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; (i<ADC_NUM_CHANNELLS_USED) && (retVal == TRUE); i++)
 698:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 699:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AnalogInputParam[i].analogConfigData.bit.automatic
 700:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        && (AnalogInputParam[i].channel != Ch_Vline)
 137                             		.loc 1 700 0
 138 0002 FB 12 00 00 00 00       		mov.L	#_Ch_Vline, r1
 701:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		   )
 702:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
 703:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( (AnalogInputReady & (analogInput_t)(1u << AnalogInputParam[i].analogInputRamPos)) == 0)
 139                             		.loc 1 703 0
 140 0008 FB E2 00 00 00 00       		mov.L	#_AnalogInputReady, r14
 700:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        && (AnalogInputParam[i].channel != Ch_Vline)
 141                             		.loc 1 700 0
 142 000e 58 15                   		movu.B	[r1], r5
 143                             		.loc 1 703 0
 144 0010 CC E3                   		mov.B	[r14], r3
 145 0012 66 04                   		mov.L	#0, r4
 146 0014 FB E2 00 00 00 00       		mov.L	#_AnalogInputParam, r14
 699:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AnalogInputParam[i].analogConfigData.bit.automatic
 147                             		.loc 1 699 0
 148 001a 66 12                   		mov.L	#1, r2
 149                             	.LVL9:
 150                             		.balign 2,3,1
 151                             	.L14:
 152 001c EF 41                   		mov.L	r4, r1
 153 001e 63 A1                   		mul	#10, r1
 154 0020 70 11 00 00 00 00       		add	#_AnalogInputParam, r1
 155 0026 DC 11                   		mov.W	[r1], r1
 156 0028 61 01                   		cmp	#0, r1
 157 002a 28 1E                   		bge	.L16
 700:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        && (AnalogInputParam[i].channel != Ch_Vline)
 158                             		.loc 1 700 0
 159 002c 59 E1 02                		movu.B	2[r14], r1
 160 002f 47 51                   		cmp	r5, r1
 161 0031 20 17                   		beq	.L16
 162                             		.loc 1 703 0
 163 0033 59 E1 03                		movu.B	3[r14], r1
 164 0036 EF 27                   		mov.L	r2, r7
 165 0038 FD 62 17                		shll	r1, r7
 166 003b EF 71                   		mov.L	r7, r1
 167 003d 53 31                   		and	r3, r1
 168 003f 5B 11                   		movu.B	r1, r1
 169 0041 61 01                   		cmp	#0, r1
 170 0043 FC DB 11                		scne.L	r1
 171 0046 2E 04                   		bra	.L12
 172                             	.L16:
 700:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        && (AnalogInputParam[i].channel != Ch_Vline)
 173                             		.loc 1 700 0
 174 0048 66 11                   		mov.L	#1, r1
 175                             		.balign 2,3,1
 176                             	.L12:
 177                             	.LVL10:
 697:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; (i<ADC_NUM_CHANNELLS_USED) && (retVal == TRUE); i++)
 178                             		.loc 1 697 0
 179 004a 61 74                   		cmp	#7, r4
 180 004c 20 0C                   		beq	.L13
 181 004e 62 14                   		add	#1, r4
 182 0050 62 AE                   		add	#10, r14
 697:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; (i<ADC_NUM_CHANNELLS_USED) && (retVal == TRUE); i++)
 183                             		.loc 1 697 0 is_stmt 0 discriminator 2
 184 0052 61 11                   		cmp	#1, r1
 185 0054 20 C8                   		beq	.L14
 697:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; (i<ADC_NUM_CHANNELLS_USED) && (retVal == TRUE); i++)
 186                             		.loc 1 697 0
 187 0056 66 01                   		mov.L	#0, r1
 188                             	.LVL11:
 189                             		.balign 2,3,2
 190                             	.L13:
 704:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
 705:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				retVal = FALSE;
 706:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
 707:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
 708:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 709:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
 710:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return retVal;
 711:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 191                             		.loc 1 711 0 is_stmt 1
 192 0058 3F 77 01                		rtsd	#4, r7-r7
 193                             	.LFE5:
 195 005b 03                      		.section	.text.LIB_ADC_IsAnalogReady,"ax",@progbits
 196                             		.global	_LIB_ADC_IsAnalogReady
 198                             	_LIB_ADC_IsAnalogReady:
 199                             	.LFB6:
 712:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 713:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function returns TRUE if A/D convertion of the channel linked to position "pos" is ready\n
 714:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** otherwise FALSE.
 715:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 716:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] pos A/D channel position vs AnalogInput[] vector.
 717:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputReady bitmap (global) R.
 718:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[pos].AnalogInputRamPos (global) R.
 719:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 720:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
 721:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 722:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE    conversion ready
 723:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE   conversion not ready
 724:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 725:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 726:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		01/07/2010
 727:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 728:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 729:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 730:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 731:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_IsAnalogReady(uint8_t pos)
 732:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 200                             		.loc 1 732 0
 201                             	.LVL12:
 733:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return (bool_t) (((((AnalogInputReady & (1u << AnalogInputParam[pos].analogInputRamPos)) == 0))?(F
 202                             		.loc 1 733 0
 203 0000 5B 11                   		movu.B	r1, r1
 204 0002 63 A1                   		mul	#10, r1
 205                             	.LVL13:
 206 0004 70 11 00 00 00 00       		add	#_AnalogInputParam, r1
 207 000a FB E2 00 00 00 00       		mov.L	#_AnalogInputReady, r14
 208 0010 B0 9C                   		movu.B	3[r1], r4
 209 0012 58 EE                   		movu.B	[r14], r14
 210 0014 FD 60 4E                		shlr	r4, r14
 734:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 211                             		.loc 1 734 0
 212 0017 EF E1                   		mov.L	r14, r1
 213 0019 64 11                   		and	#1, r1
 214 001b 02                      		rts
 215                             	.LFE6:
 217                             		.section	.text.LIB_ADC_IsApplAnalogReady,"ax",@progbits
 218                             		.global	_LIB_ADC_IsApplAnalogReady
 220                             	_LIB_ADC_IsApplAnalogReady:
 221                             	.LFB7:
 735:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 736:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function returns TRUE if A/D convertion of the channel linked to position "pos" is ready\n
 737:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** otherwise FALSE.
 738:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 739:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] pos A/D channel position vs AnalogInput[] vector.
 740:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b ApplianceAnalogInputReady bitmap (global) R.
 741:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[pos].AnalogInputRamPos (global) R.
 742:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 743:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
 744:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 745:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE    conversion ready
 746:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE   conversion not ready
 747:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 748:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \warning    The function is reserved to the Appliance.
 749:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 750:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 751:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		06/07/2010
 752:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 753:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 754:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 755:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 756:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_IsApplAnalogReady(uint8_t pos)
 757:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 222                             		.loc 1 757 0
 223                             	.LVL14:
 758:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return (bool_t) (((((ApplianceAnalogInputReady & (1u << pos)) == 0))?(FALSE):(TRUE)));
 224                             		.loc 1 758 0
 225 0000 FB E2 00 00 00 00       		mov.L	#_ApplianceAnalogInputReady, r14
 226 0006 58 EE                   		movu.B	[r14], r14
 227 0008 5B 11                   		movu.B	r1, r1
 228 000a FD 60 1E                		shlr	r1, r14
 759:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 229                             		.loc 1 759 0
 230 000d EF E1                   		mov.L	r14, r1
 231                             	.LVL15:
 232 000f 64 11                   		and	#1, r1
 233 0011 02                      		rts
 234                             	.LFE7:
 236                             		.section	.text.LIB_ADC_ResetApplAnalogReady,"ax",@progbits
 237                             		.global	_LIB_ADC_ResetApplAnalogReady
 239                             	_LIB_ADC_ResetApplAnalogReady:
 240                             	.LFB8:
 760:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 761:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function given pos, position of Analog inside AnalogInput[], reset the correspondent bit\n
 762:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** inside  ApplianceAnalogInputReady var.
 763:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 764:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] pos A/D channel position vs AnalogInput[] vector.
 765:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b ApplianceAnalogInputReady bitmap (global) W.
 766:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 767:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
 768:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 769:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE    conversion ready
 770:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE   conversion not ready
 771:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 772:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \warning    The function is reserved to the Appliance.
 773:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 774:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 775:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		06/07/2010
 776:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 777:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 778:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 779:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 780:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_ResetApplAnalogReady(uint8_t pos)
 781:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 241                             		.loc 1 781 0
 242                             	.LVL16:
 782:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	PLT_ASSERT(pos < ADC_NUM_CHANNELLS_USED)
 783:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 784:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ApplianceAnalogInputReady&=(~(1u << pos));
 243                             		.loc 1 784 0
 244 0000 5B 11                   		movu.B	r1, r1
 245 0002 FB E6 FE                		mov.L	#-2, r14
 246 0005 FB 42 00 00 00 00       		mov.L	#_ApplianceAnalogInputReady, r4
 247 000b FD 66 1E                		rotl	r1, r14
 248 000e 06 10 4E                		and	[r4].B, r14
 249 0011 C3 4E                   		mov.B	r14, [r4]
 250 0013 02                      		rts
 251                             	.LFE8:
 253                             		.section	.text.LIB_ADC_SetAnalogValue,"ax",@progbits
 254                             		.global	_LIB_ADC_SetAnalogValue
 256                             	_LIB_ADC_SetAnalogValue:
 257                             	.LFB9:
 785:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 786:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 787:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 788:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function fills the global A/D result (AnalogInput[]) in position pos with value.
 789:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 790:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] pos offset vs AnalogInput[] where to store the value.
 791:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] value value to store.
 792:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInput[]	 (global) W.
 793:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 794:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 795:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		28/06/2010
 796:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 797:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 798:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 799:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_SetAnalogValue( uint8_t pos, ADC_ValueType value )
 800:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 258                             		.loc 1 800 0
 259                             	.LVL17:
 801:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	PLT_ASSERT(pos < ADC_NUM_CHANNELLS_USED)
 802:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 803:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_START();
 804:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AnalogInput[pos] = value;
 260                             		.loc 1 804 0
 261 0000 5B 11                   		movu.B	r1, r1
 262 0002 FB E2 00 00 00 00       		mov.L	#_AnalogInput, r14
 263 0008 FE 11 E2                		mov.W	r2, [r1,r14]
 264 000b 02                      		rts
 265                             	.LFE9:
 267                             		.section	.text.LIB_ADC_GetAnalogValue,"ax",@progbits
 268                             		.global	_LIB_ADC_GetAnalogValue
 270                             	_LIB_ADC_GetAnalogValue:
 271                             	.LFB10:
 805:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_ELEM_UPDATE( AnalogInput, pos );
 806:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_END();
 807:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 808:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 809:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 810:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function returns the A/D result in position pos of AnalogInput[].
 811:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 812:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] pos offset vs AnalogInput[].
 813:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInput[]	 (global) R.
 814:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	ADC_ValueType
 815:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 816:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		A/D coversion result
 817:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 818:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 819:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		29/06/2010
 820:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 821:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 822:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 823:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** ADC_ValueType LIB_ADC_GetAnalogValue(uint8_t pos)
 824:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 272                             		.loc 1 824 0
 273                             	.LVL18:
 825:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	PLT_ASSERT(pos < ADC_NUM_CHANNELLS_USED)
 826:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return AnalogInput[pos];
 827:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 274                             		.loc 1 827 0
 275 0000 FB E2 00 00 00 00       		mov.L	#_AnalogInput, r14
 826:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return AnalogInput[pos];
 276                             		.loc 1 826 0
 277 0006 5B 11                   		movu.B	r1, r1
 278                             		.loc 1 827 0
 279 0008 FE D1 E1                		movu.W	[r1,r14], r1
 280                             	.LVL19:
 281 000b 02                      		rts
 282                             	.LFE10:
 284                             		.section	.text.LIB_ADC_ADposVsIndex,"ax",@progbits
 285                             		.global	_LIB_ADC_ADposVsIndex
 287                             	_LIB_ADC_ADposVsIndex:
 288                             	.LFB15:
 828:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 829:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 830:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function disables measure on A/D channel, init all variables related to the measure\n
 831:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** on that channel and restart readings.
 832:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 833:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in]	channel A/D channel
 834:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 835:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[] (global) R/W
 836:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_ChInputReady used as W
 837:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 838:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 839:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		11/02/2008
 840:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 841:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 842:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 843:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		01/07/2010
 844:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.1
 845:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 846:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \warning    se il canale ? di tipo no automatic dopo questa chiamata diventer? automatic in\n
 847:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c ****             ogni caso.
 848:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
 849:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
 850:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			\par \b Nota 2:
 851:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			Ver 1.0.1 added call to LIB_ADC_ADChVsAnalogInputParamIndex
 852:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 853:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 854:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ==TRUE)
 855:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_InitMeasureForCh ( uint8_t channel )
 856:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 857:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam;
 858:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t _index;
 859:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 860:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_ADChVsAnalogInputParamIndex(channel);
 861:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (AD_INDEX_NOT_FOUND == _index)
 862:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 863:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return;
 864:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 865:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 866:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 0;
 867:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	LIB_ADC_ResetAnalogMeasure(_index);
 868:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_ChInputReady &= (analogInput_t)(~(1u<<pAnalogInputParam->analogInputRamPos));
 869:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 1;
 870:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 871:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 872:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* #if (MANAGE_AD_CHANNEL_READ==TRUE) */
 873:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 874:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** The function returns TRUE if reading on A/D channel "channel" is ready otherwise FALSE.
 875:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 876:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in]	channel A/D channel
 877:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 878:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_ChInputReady (global) used as R
 879:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[index].analogInputRamPos (global) used as R
 880:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 881:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 882:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 883:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		11/02/2008
 884:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 885:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 886:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 887:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		01/07/2010
 888:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.1
 889:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 890:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \warning    index not tested
 891:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 892:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
 893:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
 894:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			\par \b Nota 2:
 895:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			Ver 1.0.1 added call to LIB_ADC_ADChVsAnalogInputParamIndex
 896:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 897:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 898:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ==TRUE)
 899:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 900:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_IsNoAutoMeasureReady( uint8_t channel )
 901:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 902:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t _index;
 903:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 904:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_ADChVsAnalogInputParamIndex(channel);
 905:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 906:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AD_ChInputReady & (1u<<AnalogInputParam[_index].analogInputRamPos) )
 907:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 908:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return TRUE;
 909:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 910:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	else
 911:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 912:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return FALSE;
 913:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 914:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 915:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 916:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif  /* #if (MANAGE_AD_CHANNEL_READ==TRUE) */
 917:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 918:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 919:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function disables measure on A/D channel linked to pos, init all variables related to the meas
 920:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** on that channel and restart readings.
 921:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 922:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in]    pos position where the A/D measure is stored
 923:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 924:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[] (global) R/W
 925:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_ChInputReady used as W
 926:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 927:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 928:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \warning    se il canale ? di tipo no automatic dopo questa chiamata diventer? automatic in\n
 929:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c ****             ogni caso.
 930:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 931:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 932:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		05/07/2010
 933:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 934:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 935:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
 936:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
 937:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 938:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 939:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ==TRUE)
 940:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_InitMeasureForChInPos ( uint8_t pos )
 941:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 942:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam;
 943:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t _index;
 944:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 945:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_AnalogInputParamIndexVsPos(pos);
 946:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (AD_INDEX_NOT_FOUND == _index)
 947:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 948:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return;
 949:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 950:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 951:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 0;
 952:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	LIB_ADC_ResetAnalogMeasure(_index);
 953:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_ChInputReady &= (analogInput_t)(~(1u<<pAnalogInputParam->analogInputRamPos));
 954:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 1;
 955:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 956:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 957:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* #if (MANAGE_AD_CHANNEL_READ==TRUE) */
 958:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
 959:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function returns if measure on A/D channel linked to pos is ready.
 960:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 961:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in]    pos position where the A/D measure is stored
 962:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 963:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[] (global) R/W
 964:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AD_ChInputReady used as W
 965:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 966:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 967:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
 968:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 969:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE measure ready
 970:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE measure not ready
 971:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 972:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
 973:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		05/07/2010
 974:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
 975:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 976:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
 977:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
 978:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 979:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
 980:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ==TRUE)
 981:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_IsNoAutoMeasureForChInPosReady ( uint8_t pos )
 982:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 983:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t _index;
 984:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 985:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_AnalogInputParamIndexVsPos(pos);
 986:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AD_ChInputReady & (1u<<AnalogInputParam[_index].analogInputRamPos) )
 987:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 988:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return TRUE;
 989:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 990:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	else
 991:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
 992:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return FALSE;
 993:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
 994:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 995:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 996:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* #if (MANAGE_AD_CHANNEL_READ==TRUE) */
 997:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
 998:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Search functions */
 999:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1000:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1001:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function, given index of AnalogInputParam[], \n
1002:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** returns the position where is stored the A/D measure.
1003:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1004:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] index index of AnalogInputParam[]
1005:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1006:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	uint8_t
1007:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1008:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		position inside AnalogInput[] if success
1009:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval     AD_POS_NOT_FOUND
1010:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1011:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1012:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		05/07/2010
1013:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1014:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1015:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1016:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_ADposVsIndex(uint8_t _index)
1017:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 289                             		.loc 1 1017 0
 290                             	.LVL20:
1018:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (_index < ADC_NUM_CHANNELLS_USED)
 291                             		.loc 1 1018 0
 292 0000 5B 11                   		movu.B	r1, r1
 293 0002 61 71                   		cmp	#7, r1
 294 0004 24 0E                   		bgtu	.L32
1019:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1020:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return(AnalogInputParam[_index].analogInputRamPos);
 295                             		.loc 1 1020 0
 296 0006 63 A1                   		mul	#10, r1
 297                             	.LVL21:
 298 0008 70 11 00 00 00 00       		add	#_AnalogInputParam, r1
 299 000e 88 99                   		mov.B	3[r1], r1
 300 0010 2E 06                   		bra	.L31
 301                             	.L32:
1021:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1022:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	else
1023:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1024:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return(AD_POS_NOT_FOUND);
 302                             		.loc 1 1024 0
 303 0012 FB 16 FF                		mov	#-1, r1
 304 0015 03                      		.balign 2,3,1
 305                             	.L31:
1025:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1026:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 306                             		.loc 1 1026 0
 307 0016 5B 11                   		movu.B	r1, r1
 308 0018 02                      		rts
 309                             	.LFE15:
 311 0019 03                      		.section	.text.LIB_ADC_AnalogChRamPos,"ax",@progbits
 312                             		.global	_LIB_ADC_AnalogChRamPos
 314                             	_LIB_ADC_AnalogChRamPos:
 315                             	.LFB16:
1027:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1028:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function, given an A/D channel, returns result position inside AnalogInputParam[].
1029:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1030:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] channel A/D channel
1031:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1032:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	uint8_t
1033:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1034:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		position inside AnalogInputParam[] if success
1035:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval     AD_POS_NOT_FOUND
1036:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1037:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1038:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		28/06/2010
1039:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1040:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1041:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1042:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_AnalogChRamPos(uint8_t channel)
1043:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 316                             		.loc 1 1043 0
 317                             	.LVL22:
 318                             		.loc 1 1043 0
 319 0000 66 0E                   		mov.L	#0, r14
1044:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
1045:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
1046:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1047:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AnalogInputParam[i].channel == channel )
 320                             		.loc 1 1047 0
 321 0002 5B 11                   		movu.B	r1, r1
 322                             	.LVL23:
 323                             		.balign 2,3,1
 324                             	.L36:
1042:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_AnalogChRamPos(uint8_t channel)
 325                             		.loc 1 1042 0
 326 0004 EF E4                   		mov.L	r14, r4
 327 0006 63 A4                   		mul	#10, r4
 328 0008 70 44 00 00 00 00       		add	#_AnalogInputParam, r4
 329                             		.loc 1 1047 0
 330 000e B0 C3                   		movu.B	2[r4], r3
 331 0010 47 13                   		cmp	r1, r3
 332 0012 21 06                   		bne	.L34
1048:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1049:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			return(AnalogInputParam[i].analogInputRamPos);
 333                             		.loc 1 1049 0
 334 0014 88 C9                   		mov.B	3[r4], r1
 335                             	.LVL24:
 336 0016 2E 0C                   		bra	.L35
 337                             	.L34:
 338 0018 62 1E                   		add	#1, r14
1045:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
 339                             		.loc 1 1045 0
 340 001a 61 8E                   		cmp	#8, r14
 341 001c 21 E8                   		bne	.L36
1050:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1051:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1052:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return AD_POS_NOT_FOUND;
 342                             		.loc 1 1052 0
 343 001e FB 16 FF                		mov	#-1, r1
 344 0021 03                      		.balign 2,3,1
 345                             	.L35:
1053:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 346                             		.loc 1 1053 0
 347 0022 5B 11                   		movu.B	r1, r1
 348 0024 02                      		rts
 349                             	.LFE16:
 351 0025 03                      		.section	.text.LIB_ADC_ADChVsAnalogInputParamIndex,"ax",@progbits
 352                             		.global	_LIB_ADC_ADChVsAnalogInputParamIndex
 354                             	_LIB_ADC_ADChVsAnalogInputParamIndex:
 355                             	.LFB17:
1054:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1055:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function, given an A/D channel, returns the index of AnalogInputParam[] related to that channe
1056:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1057:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] channel A/D channel
1058:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1059:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	uint8_t
1060:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1061:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		index inside AnalogInputParam[] if success
1062:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval     AD_INDEX_NOT_FOUND
1063:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1064:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1065:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		01/07/2010
1066:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1067:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1068:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1069:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_ADChVsAnalogInputParamIndex(uint8_t channel)
1070:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 356                             		.loc 1 1070 0
 357                             	.LVL25:
 358                             		.loc 1 1070 0
 359 0000 66 0E                   		mov.L	#0, r14
1071:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
1072:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
1073:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1074:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AnalogInputParam[i].channel == channel )
 360                             		.loc 1 1074 0
 361 0002 5B 11                   		movu.B	r1, r1
 362                             	.LVL26:
 363                             		.balign 2,3,1
 364                             	.L40:
1069:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_ADChVsAnalogInputParamIndex(uint8_t channel)
 365                             		.loc 1 1069 0
 366 0004 EF E3                   		mov.L	r14, r3
 367 0006 63 A3                   		mul	#10, r3
 368 0008 70 33 00 00 00 00       		add	#_AnalogInputParam, r3
 369                             		.loc 1 1074 0
 370 000e B0 B3                   		movu.B	2[r3], r3
 371 0010 CF E4                   		mov.B	r14, r4
 372 0012 47 13                   		cmp	r1, r3
 373 0014 20 0C                   		beq	.L39
 374 0016 62 1E                   		add	#1, r14
1072:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
 375                             		.loc 1 1072 0
 376 0018 61 8E                   		cmp	#8, r14
 377 001a 21 EA                   		bne	.L40
1075:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1076:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			return(i);
1077:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1078:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1079:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1080:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return AD_INDEX_NOT_FOUND;
 378                             		.loc 1 1080 0
 379 001c FB 46 FF                		mov	#-1, r4
 380 001f 03                      		.balign 2,3,1
 381                             	.L39:
1081:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1082:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 382                             		.loc 1 1082 0
 383 0020 5B 41                   		movu.B	r4, r1
 384                             	.LVL27:
 385 0022 02                      		rts
 386                             	.LFE17:
 388 0023 03                      		.section	.text.LIB_ADC_IsNoAutoMeasureReady,"ax",@progbits
 389                             		.global	_LIB_ADC_IsNoAutoMeasureReady
 391                             	_LIB_ADC_IsNoAutoMeasureReady:
 392                             	.LFB12:
 901:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 393                             		.loc 1 901 0
 394                             	.LVL28:
 904:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_ADChVsAnalogInputParamIndex(channel);
 395                             		.loc 1 904 0
 396 0000 05 00 00 00             		bsr	_LIB_ADC_ADChVsAnalogInputParamIndex
 397                             	.LVL29:
 906:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AD_ChInputReady & (1u<<AnalogInputParam[_index].analogInputRamPos) )
 398                             		.loc 1 906 0
 399 0004 5B 11                   		movu.B	r1, r1
 400 0006 63 A1                   		mul	#10, r1
 401                             	.LVL30:
 402 0008 70 11 00 00 00 00       		add	#_AnalogInputParam, r1
 403 000e FB E2 00 00 00 00       		mov.L	#_AD_ChInputReady, r14
 404 0014 B0 9C                   		movu.B	3[r1], r4
 405 0016 58 EE                   		movu.B	[r14], r14
 406 0018 FD 60 4E                		shlr	r4, r14
 914:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 407                             		.loc 1 914 0
 408 001b EF E1                   		mov.L	r14, r1
 409 001d 64 11                   		and	#1, r1
 410 001f 02                      		rts
 411                             	.LFE12:
 413                             		.section	.text.LIB_ADC_AnalogInputParamIndexVsPos,"ax",@progbits
 414                             		.global	_LIB_ADC_AnalogInputParamIndexVsPos
 416                             	_LIB_ADC_AnalogInputParamIndexVsPos:
 417                             	.LFB18:
1083:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1084:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function, given pos,position vs AnalogInput[] where the A/D result is stored,\n
1085:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** returns the index of AnalogInputParam[] related to.
1086:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1087:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] pos ram position where is stored A/D result
1088:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1089:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	uint8_t
1090:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1091:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		index inside AnalogInputParam[] if success
1092:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval     AD_INDEX_NOT_FOUND
1093:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1094:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1095:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		05/07/2010
1096:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1097:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1098:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1099:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_AnalogInputParamIndexVsPos(uint8_t pos)
1100:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 418                             		.loc 1 1100 0
 419                             	.LVL31:
 420                             		.loc 1 1100 0
 421 0000 66 0E                   		mov.L	#0, r14
1101:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t i;
1102:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
1103:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1104:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( AnalogInputParam[i].analogInputRamPos == pos )
 422                             		.loc 1 1104 0
 423 0002 5B 11                   		movu.B	r1, r1
 424                             	.LVL32:
 425                             		.balign 2,3,1
 426                             	.L45:
1099:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** uint8_t LIB_ADC_AnalogInputParamIndexVsPos(uint8_t pos)
 427                             		.loc 1 1099 0
 428 0004 EF E3                   		mov.L	r14, r3
 429 0006 63 A3                   		mul	#10, r3
 430 0008 70 33 00 00 00 00       		add	#_AnalogInputParam, r3
 431                             		.loc 1 1104 0
 432 000e B0 BB                   		movu.B	3[r3], r3
 433 0010 CF E4                   		mov.B	r14, r4
 434 0012 47 13                   		cmp	r1, r3
 435 0014 20 0C                   		beq	.L44
 436 0016 62 1E                   		add	#1, r14
1102:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
 437                             		.loc 1 1102 0
 438 0018 61 8E                   		cmp	#8, r14
 439 001a 21 EA                   		bne	.L45
1105:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1106:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			return(i);
1107:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1108:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1109:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return AD_INDEX_NOT_FOUND;
 440                             		.loc 1 1109 0
 441 001c FB 46 FF                		mov	#-1, r4
 442 001f 03                      		.balign 2,3,1
 443                             	.L44:
1110:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 444                             		.loc 1 1110 0
 445 0020 5B 41                   		movu.B	r4, r1
 446                             	.LVL33:
 447 0022 02                      		rts
 448                             	.LFE18:
 450 0023 03                      		.section	.text.LIB_ADC_IsNoAutoMeasureForChInPosReady,"ax",@progbits
 451                             		.global	_LIB_ADC_IsNoAutoMeasureForChInPosReady
 453                             	_LIB_ADC_IsNoAutoMeasureForChInPosReady:
 454                             	.LFB14:
 982:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 455                             		.loc 1 982 0
 456                             	.LVL34:
 985:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_AnalogInputParamIndexVsPos(pos);
 457                             		.loc 1 985 0
 458 0000 05 00 00 00             		bsr	_LIB_ADC_AnalogInputParamIndexVsPos
 459                             	.LVL35:
 986:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AD_ChInputReady & (1u<<AnalogInputParam[_index].analogInputRamPos) )
 460                             		.loc 1 986 0
 461 0004 5B 11                   		movu.B	r1, r1
 462 0006 63 A1                   		mul	#10, r1
 463                             	.LVL36:
 464 0008 70 11 00 00 00 00       		add	#_AnalogInputParam, r1
 465 000e FB E2 00 00 00 00       		mov.L	#_AD_ChInputReady, r14
 466 0014 B0 9C                   		movu.B	3[r1], r4
 467 0016 58 EE                   		movu.B	[r14], r14
 468 0018 FD 60 4E                		shlr	r4, r14
 995:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 469                             		.loc 1 995 0
 470 001b EF E1                   		mov.L	r14, r1
 471 001d 64 11                   		and	#1, r1
 472 001f 02                      		rts
 473                             	.LFE14:
 475                             		.section	.text.LIB_ADC_ResetAnalogMeasure,"ax",@progbits
 476                             		.global	_LIB_ADC_ResetAnalogMeasure
 478                             	_LIB_ADC_ResetAnalogMeasure:
 479                             	.LFB19:
1111:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1112:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Fixed index, displacement vs AnalogInputParam[],this functions reset the A/D measure.
1113:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1114:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] index index of AnalogInputParam[].
1115:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1116:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[index] (global) W
1117:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1118:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1119:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1120:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		02/07/2010
1121:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1122:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1123:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1124:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
1125:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1126:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1127:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** void LIB_ADC_ResetAnalogMeasure(uint8_t _index)
1128:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 480                             		.loc 1 1128 0
 481                             	.LVL37:
1129:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam;
1130:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
1131:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_START();
1132:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
1133:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 482                             		.loc 1 1133 0
 483 0000 5B 11                   		movu.B	r1, r1
 484 0002 63 A1                   		mul	#10, r1
 485                             	.LVL38:
 486 0004 70 11 00 00 00 00       		add	#_AnalogInputParam, r1
 487                             	.LVL39:
1134:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputIndex = 0;
 488                             		.loc 1 1134 0
 489 000a 3C 14 00                		mov.B	#0, 4[r1]
1135:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputSum = 0;
 490                             		.loc 1 1135 0
 491 000d 3D 13 00                		mov.W	#0, 6[r1]
1136:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputOldValue = 0;
 492                             		.loc 1 1136 0
 493 0010 3D 14 00                		mov.W	#0, 8[r1]
1137:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputCnt = 0;
 494                             		.loc 1 1137 0
 495 0013 3C 15 00                		mov.B	#0, 5[r1]
 496 0016 02                      		rts
 497                             	.LFE19:
 499                             		.section	.text.LIB_ADC_InitMeasureForChInPos,"ax",@progbits
 500                             		.global	_LIB_ADC_InitMeasureForChInPos
 502                             	_LIB_ADC_InitMeasureForChInPos:
 503                             	.LFB13:
 941:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 504                             		.loc 1 941 0
 505                             	.LVL40:
 506 0000 7E A7                   		push.l	r7
 507                             	.LCFI2:
 945:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_AnalogInputParamIndexVsPos(pos);
 508                             		.loc 1 945 0
 509 0002 05 00 00 00             		bsr	_LIB_ADC_AnalogInputParamIndexVsPos
 510                             	.LVL41:
 946:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (AD_INDEX_NOT_FOUND == _index)
 511                             		.loc 1 946 0
 512 0006 75 51 FF                		cmp	#0xff, r1
 513 0009 EF 17                   		mov.L	r1, r7
 514 000b 20 2D                   		beq	.L49
 950:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 515                             		.loc 1 950 0
 516 000d 63 A7                   		mul	#10, r7
 517 000f 70 77 00 00 00 00       		add	#_AnalogInputParam, r7
 518                             	.LVL42:
 951:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 0;
 519                             		.loc 1 951 0
 520 0015 DC 7E                   		mov.W	[r7], r14
 521 0017 7A FE                   		bclr	#15, r14
 522 0019 D3 7E                   		mov.W	r14, [r7]
 952:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	LIB_ADC_ResetAnalogMeasure(_index);
 523                             		.loc 1 952 0
 524 001b 05 00 00 00             		bsr	_LIB_ADC_ResetAnalogMeasure
 525                             	.LVL43:
 953:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_ChInputReady &= (analogInput_t)(~(1u<<pAnalogInputParam->analogInputRamPos));
 526                             		.loc 1 953 0
 527 001f B0 FB                   		movu.B	3[r7], r3
 528 0021 FB E6 FE                		mov.L	#-2, r14
 529 0024 FB 42 00 00 00 00       		mov.L	#_AD_ChInputReady, r4
 530 002a FD 66 3E                		rotl	r3, r14
 531 002d 06 10 4E                		and	[r4].B, r14
 532 0030 C3 4E                   		mov.B	r14, [r4]
 954:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 1;
 533                             		.loc 1 954 0
 534 0032 DC 7E                   		mov.W	[r7], r14
 535 0034 78 FE                   		bset	#15, r14
 536 0036 D3 7E                   		mov.W	r14, [r7]
 537                             	.LVL44:
 538                             		.balign 2,3,2
 539                             	.L49:
 956:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 540                             		.loc 1 956 0
 541 0038 3F 77 01                		rtsd	#4, r7-r7
 542                             	.LFE13:
 544 003b 03                      		.section	.text.LIB_ADC_InitMeasureForCh,"ax",@progbits
 545                             		.global	_LIB_ADC_InitMeasureForCh
 547                             	_LIB_ADC_InitMeasureForCh:
 548                             	.LFB11:
 856:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 549                             		.loc 1 856 0
 550                             	.LVL45:
 551 0000 7E A7                   		push.l	r7
 552                             	.LCFI3:
 860:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_ADChVsAnalogInputParamIndex(channel);
 553                             		.loc 1 860 0
 554 0002 05 00 00 00             		bsr	_LIB_ADC_ADChVsAnalogInputParamIndex
 555                             	.LVL46:
 861:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (AD_INDEX_NOT_FOUND == _index)
 556                             		.loc 1 861 0
 557 0006 75 51 FF                		cmp	#0xff, r1
 558 0009 EF 17                   		mov.L	r1, r7
 559 000b 20 2D                   		beq	.L55
 865:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 560                             		.loc 1 865 0
 561 000d 63 A7                   		mul	#10, r7
 562 000f 70 77 00 00 00 00       		add	#_AnalogInputParam, r7
 563                             	.LVL47:
 866:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 0;
 564                             		.loc 1 866 0
 565 0015 DC 7E                   		mov.W	[r7], r14
 566 0017 7A FE                   		bclr	#15, r14
 567 0019 D3 7E                   		mov.W	r14, [r7]
 867:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	LIB_ADC_ResetAnalogMeasure(_index);
 568                             		.loc 1 867 0
 569 001b 05 00 00 00             		bsr	_LIB_ADC_ResetAnalogMeasure
 570                             	.LVL48:
 868:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AD_ChInputReady &= (analogInput_t)(~(1u<<pAnalogInputParam->analogInputRamPos));
 571                             		.loc 1 868 0
 572 001f B0 FB                   		movu.B	3[r7], r3
 573 0021 FB E6 FE                		mov.L	#-2, r14
 574 0024 FB 42 00 00 00 00       		mov.L	#_AD_ChInputReady, r4
 575 002a FD 66 3E                		rotl	r3, r14
 576 002d 06 10 4E                		and	[r4].B, r14
 577 0030 C3 4E                   		mov.B	r14, [r4]
 869:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogConfigData.bit.automatic = 1;
 578                             		.loc 1 869 0
 579 0032 DC 7E                   		mov.W	[r7], r14
 580 0034 78 FE                   		bset	#15, r14
 581 0036 D3 7E                   		mov.W	r14, [r7]
 582                             	.LVL49:
 583                             		.balign 2,3,2
 584                             	.L55:
 871:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 585                             		.loc 1 871 0
 586 0038 3F 77 01                		rtsd	#4, r7-r7
 587                             	.LFE11:
 589 003b 03                      		.section	.text.LIB_ADC_AvgFilter,"ax",@progbits
 591                             	_LIB_ADC_AvgFilter:
 592                             	.LFB26:
1138:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
1139:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_ELEM_UPDATE( AnalogInputParam, _index );
1140:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_REGION_END();
1141:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1142:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1143:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1144:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function check if Vref is in range.
1145:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1146:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Comp (global) R
1147:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b RefReady (global) R
1148:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b RefInput A/D channel readings on Vref channel (global) R.
1149:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b GoodRef (global) W
1150:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1151:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
1152:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1153:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE Vref channel not present or GoodRef not significant.
1154:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval     TRUE GoodRef significant.
1155:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1156:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1157:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		07/07/2010
1158:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1159:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1160:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1161:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1162:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
1163:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1164:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1165:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_CheckRef(void)
1166:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1167:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	static ADC_ValueType PreviousVref;
1168:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	static bool_t FirstSample = FALSE;
1169:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1170:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType avg;
1171:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	bool_t retValue = FALSE;
1172:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1173:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( ( Ch_Comp != CH_FOR_COMPENSATION_IS_NOT_DEFINED ) && (TRUE == RefReady) )
1174:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1175:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( FirstSample == TRUE )
1176:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1177:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/*lint -esym(727,PreviousVref) previousVref is init before
1178:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			  enter here !! cfr. FirstSample */
1179:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (ADC_RESOLUTION==16)
1180:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			avg = (ADC_ValueType)(((uint32_t)PreviousVref + RefInput)/2);
1181:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #else
1182:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			avg = (ADC_ValueType)((PreviousVref + RefInput)/2);
1183:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1184:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/*lint +esym(727,PreviousVref) */
1185:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1186:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( avg < REF_MIN_ADC_UNITS ) || ( avg > REF_MAX_ADC_UNITS ) )
1187:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1188:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				GoodRef = FALSE;
1189:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1190:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			else
1191:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1192:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				GoodRef = TRUE;
1193:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1194:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1195:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( avg < BOTTOM_BOUND_RTN_ADC_UNITS ) || ( avg > UPPER_BOUND_RTN_ADC_UNITS ) )
1196:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1197:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RtnOutRange = TRUE;
1198:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1199:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			else
1200:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1201:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RtnOutRange = FALSE;
1202:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1203:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1204:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			retValue = TRUE;
1205:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1206:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1207:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		PreviousVref = RefInput;
1208:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		FirstSample = TRUE;
1209:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1210:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1211:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return retValue;
1212:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1213:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1214:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1215:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This functions returns TRUE if Vref in range otherwise FALSE.
1216:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1217:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b GoodRef (global) R.
1218:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1219:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
1220:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1221:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE/FALSE
1222:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1223:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1224:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1225:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		07/07/2010
1226:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1227:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1228:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1229:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1230:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
1231:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1232:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1233:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_Is_Ref_Good(void)
1234:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1235:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return GoodRef;
1236:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1237:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1238:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1239:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1240:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Returns TRUE if Vref measure, taking into account tolerances of hardware components, is out of rang
1241:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1242:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
1243:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1244:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE/FALSE
1245:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1246:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1247:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Roberto Fioravanti
1248:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		08/11/2012
1249:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1250:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1251:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1252:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1253:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Roberto Fioravanti
1254:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1255:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1256:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_Is_RTN_Out_Range(void)
1257:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1258:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c ****     return RtnOutRange;
1259:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1260:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1261:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1262:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** This function performs V peak measure.
1263:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1264:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [out]    pVlinePeak
1265:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1266:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
1267:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1268:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE  V Line Channel not defined
1269:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE V peak ready
1270:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1271:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1272:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1273:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		07/07/2010
1274:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1275:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1276:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1277:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1278:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
1279:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1280:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1281:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (N_SAMPLE_V_LINE<0)
1282:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #error "N_SAMPLE_V_LINE must be >= 0"
1283:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1284:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (N_SAMPLE_V_LINE>255)
1285:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #error "N_SAMPLE_V_LINE must be <= 255"
1286:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1287:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_VLineMeasure  (ADC_ValueType *pVlinePeak)
1288:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1289:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(CONFIG_LIB_ADC_CALIBRATION)
1290:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	struct Loader CalibrationDataPtr_ElectSupp;
1291:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1292:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	V_Line_t vLine;
1293:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t pos;
1294:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t _index;
1295:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1296:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	(void)memset(&vLine,0,sizeof(vLine));
1297:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1298:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (CH_VLINE_IS_NOT_DEFINED==Ch_Vline)
1299:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1300:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return TRUE;
1301:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1302:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1303:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(CONFIG_LIB_TRACE_SUPPORT)
1304:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	TRACE_LINE_PEAK_START();
1305:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1306:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1307:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_ADChVsAnalogInputParamIndex(Ch_Vline);
1308:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1309:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	do
1310:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1311:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		vLine.newVPeak = LIB_ADC_Conv_F (_index, (uint8_t)0, (uint8_t)0);
1312:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1313:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( vLine.newVPeak > vLine.vPeak )
1314:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1315:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			vLine.vPeak = vLine.newVPeak;
1316:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1317:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		vLine.samples ++;
1318:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1319:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	while ( vLine.samples < N_SAMPLE_V_LINE );
1320:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1321:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/*
1322:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	   Vline adjustment is performed inside LIB_ADC_Conv_F (index, 0, 0) and in any case
1323:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	   saturated to ONE_AD_SAMPLE_MAX_VALUE
1324:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	   check VLINEMEASURE_COMP_FACTOR
1325:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	*/
1326:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1327:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1328:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(CONFIG_LIB_ADC_VLINE_CALIBRATION)
1329:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (LIB_CAL_GetCalibData(ID_CAL_PNTR_ELECT_SUPP, &CalibrationDataPtr_ElectSupp) == BSLDR_OK)
1330:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1331:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* Data available for calibration */
1332:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		vLine.vPeak = (ADC_ValueType)(((uint32_t)vLine.vPeak * CalibrationDataPtr_ElectSupp.Data[CONFIG_L
1333:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1334:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif /* defined(CONFIG_LIB_ADC_VLINE_CALIBRATION) */
1335:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1336:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* Updates AnalogInput[] where we store VLine */
1337:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pos = LIB_ADC_AnalogChRamPos(Ch_Vline);
1338:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1339:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AD_POS_NOT_FOUND != pos ){
1340:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_SetAnalogValue( pos, vLine.vPeak );
1341:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1342:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1343:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (CHECK_VLINE_CROSSING == 1)
1344:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* Only for statistics */
1345:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ManageVLineRefCrossing(vLine.vPeak);
1346:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1347:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1348:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	*pVlinePeak= vLine.vPeak;
1349:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1350:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if defined(CONFIG_LIB_TRACE_SUPPORT)
1351:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	TRACE_LINE_PEAK_END();
1352:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1353:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1354:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return FALSE;
1355:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1356:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1357:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1358:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Returns RefInput (A/D).
1359:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1360:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	ADC_ValueType
1361:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1362:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		RTN A/D value
1363:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1364:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	stefano.ughi
1365:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		Mar 9, 2011
1366:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1367:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1368:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Note 1:
1369:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by stefano.ughi
1370:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1371:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1372:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** ADC_ValueType LIB_ADC_GetRefInput(void)
1373:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1374:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return(RefInput);
1375:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1376:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1377:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Returns if RefInput is ready.
1378:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1379:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \return 	bool_t
1380:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1381:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		TRUE RefReady is ready
1382:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \retval		FALSE RefReady is not ready
1383:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1384:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	stefano.ughi
1385:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		Mar 9, 2011
1386:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1387:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1388:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Note 1:
1389:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by stefano.ughi
1390:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1391:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1392:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** bool_t LIB_ADC_IsRefInputReady(void)
1393:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1394:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return (RefReady);
1395:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1396:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1397:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1398:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /* Local Function */
1399:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1400:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1401:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Fixed index, displacement vs AnalogInputParam[],this functions performs the average over n samples\
1402:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** and insert the value in the global variable AnalogInput[].
1403:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1404:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] index index of AnalogInputParam[].
1405:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] conversion A/D measure.
1406:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1407:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[index] (global) R/W
1408:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b Ch_Comp A/D compensation channel  R
1409:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputDisable (global) R
1410:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInput[adChPos] (global) A/D output W
1411:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputReady (global) W
1412:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1413:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1414:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1415:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		02/07/2010
1416:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1417:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1418:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1419:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
1420:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			\par \b Nota 2:
1421:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			added  pAnalogInputParam->analogConfigData.bit.automatic = 0;\n
1422:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			under condition  #if (MANAGE_AD_CHANNEL_READ == TRUE)
1423:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1424:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1425:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1426:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static void LIB_ADC_AvgFilter ( uint8_t _index, ADC_ValueType conversion )
1427:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 593                             		.loc 1 1427 0
1428:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint32_t adCompesatedValue;
1429:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam = &AnalogInputParam[_index];
 594                             		.loc 1 1429 0
 595 0000 5B 1E                   		movu.B	r1, r14
 596 0002 63 AE                   		mul	#10, r14
1427:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 597                             		.loc 1 1427 0
 598 0004 6E 7D                   		pushm	r7-r13
 599                             	.LCFI4:
 600                             		.loc 1 1429 0
 601 0006 70 EE 00 00 00 00       		add	#_AnalogInputParam, r14
1430:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType adAverage;
1431:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t nSamplesToCollect;
1432:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t adChCompPos;
1433:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t adChPos = pAnalogInputParam->analogInputRamPos;
1434:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
1435:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* updates the average */
1436:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputSum += (ad_sum_t)conversion;
1437:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	/* updates the readings's  counter */
1438:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputIndex++;
1439:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
1440:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	SAFETY_DATA_CHECK(AnalogInputDisable);
1441:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	
1442:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	nSamplesToCollect = (uint8_t)(1u<<pAnalogInputParam->analogConfigData.bit.nRead);
 602                             		.loc 1 1442 0
 603 000c 58 EB                   		movu.B	[r14], r11
1438:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputIndex++;
 604                             		.loc 1 1438 0
 605 000e CD E3 04                		mov.B	4[r14], r3
 606                             		.loc 1 1442 0
 607 0011 64 7B                   		and	#7, r11
 608 0013 66 14                   		mov.L	#1, r4
1438:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputIndex++;
 609                             		.loc 1 1438 0
 610 0015 62 13                   		add	#1, r3
 611                             		.loc 1 1442 0
 612 0017 FD 62 B4                		shll	r11, r4
1436:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputSum += (ad_sum_t)conversion;
 613                             		.loc 1 1436 0
 614 001a 06 49 E2 03             		add	6[r14].W, r2
1438:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputIndex++;
 615                             		.loc 1 1438 0
 616 001e C7 E3 04                		mov.B	r3, 4[r14]
1443:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1444:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (pAnalogInputParam->analogInputIndex >= nSamplesToCollect)
 617                             		.loc 1 1444 0
 618 0021 5B 4B                   		movu.B	r4, r11
 619 0023 5B 33                   		movu.B	r3, r3
1436:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam->analogInputSum += (ad_sum_t)conversion;
 620                             		.loc 1 1436 0
 621 0025 D7 E2 03                		mov.W	r2, 6[r14]
 622                             		.loc 1 1444 0
 623 0028 47 B3                   		cmp	r11, r3
1427:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 624                             		.loc 1 1427 0
 625 002a CF 1C                   		mov.B	r1, r12
1433:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	uint8_t adChPos = pAnalogInputParam->analogInputRamPos;
 626                             		.loc 1 1433 0
 627 002c CD E7 03                		mov.B	3[r14], r7
 628                             		.loc 1 1444 0
 629 002f 22 05 38 AD 00          		bltu	.L61
1445:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1446:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* if channel is enabled */
1447:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ((AnalogInputDisable & (1u<<adChPos)) == 0)
 630                             		.loc 1 1447 0
 631 0034 FB B2 00 00 00 00       		mov.L	#_AnalogInputDisable, r11
 632 003a 58 BB                   		movu.B	[r11], r11
 633 003c 5B 77                   		movu.B	r7, r7
 634 003e FD 60 7B                		shlr	r7, r11
 635 0041 FD 74 CB 01             		tst	#1, r11
 636 0045 3B 91 00                		bne	.L63
1448:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1449:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1450:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			adAverage = (ADC_ValueType) (pAnalogInputParam->analogInputSum/nSamplesToCollect);
1451:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1452:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* Set value as is - good if no compensation needed or it cannot be applied */
1453:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AnalogInput[adChPos] = adAverage;
1454:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1455:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if (pAnalogInputParam->analogConfigData.bit.comp)
1456:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1457:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				/* channel must be compesated with RTN reference */
1458:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				/* Get position where Ch_Comp is stored */
1459:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				adChCompPos = LIB_ADC_AnalogChRamPos(Ch_Comp);
1460:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				if ( AD_POS_NOT_FOUND != adChCompPos )
1461:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				{
1462:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					ADC_ValueType tmpAdCompVal = AnalogInput[adChCompPos];
1463:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1464:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					/* Check if Ch_Comp A/D measure is ready and has valid value */
1465:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					if ( ( LIB_ADC_IsAnalogReady(adChCompPos) ) &&
1466:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 							( tmpAdCompVal > COMP_MIN_ADC_UNITS) &&
1467:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 							( tmpAdCompVal < COMP_MAX_ADC_UNITS) )
1468:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					{
1469:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						adCompesatedValue = (((uint32_t)adAverage*AD_COMP_VAL)/tmpAdCompVal);
1470:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1471:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						/* Get rid an overflow value */
1472:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						if (adCompesatedValue > ONE_AD_SAMPLE_MAX_VALUE)
1473:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						{
1474:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 							adCompesatedValue = ONE_AD_SAMPLE_MAX_VALUE;
1475:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						}
1476:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1477:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						/* Override new Analog average value with compensated one */
1478:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						AnalogInput[adChPos] = (ADC_ValueType)adCompesatedValue;
1479:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					}
1480:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				}
1481:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				else
1482:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				{
1483:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					/* Compensation's channel not found ! Serious error */
1484:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					PLT_ERROR_WARNING(PLT_ERROR_ANALOG_2);
1485:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				}
1486:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1487:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1488:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			SAFETY_DATA_ELEM_UPDATE(AnalogInput, adChPos);
1489:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1490:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AnalogInputReady |= (analogInput_t)(1u<<adChPos);
1491:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* Flag for Appliance */
1492:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			ApplianceAnalogInputReady |= (analogInput_t)(1u<<adChPos);
1493:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			
1494:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #if (MANAGE_AD_CHANNEL_READ == TRUE)
1495:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AD_ChInputReady |= (analogInput_t)(1u<<adChPos);
1496:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** #endif
1497:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1498:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		
1499:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_ResetAnalogMeasure(_index);
1500:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1501:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
1502:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1503:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1504:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** /**
1505:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** Fixed index, displacement vs AnalogInputParam[],this functions performs a control between\n
1506:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** current ADC reading and old ADC reading, if the distance between the measures is is less than or eq
1507:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** to a certain setting parameter the new measure is validated.
1508:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1509:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] index index of AnalogInputParam[].
1510:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \param  [in] newADvalue A/D measure.
1511:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1512:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \attention \b AnalogInputParam[index] (global) R/W
1513:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1514:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \author 	Stefano Ughi
1515:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \date		05/07/2010
1516:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \version	1.0.0
1517:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1518:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** \note		\par \b Nota 1:
1519:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			documentation by Stefano Ughi
1520:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1521:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** */
1522:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1523:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** static void LIB_ADC_DeltaCtrl( uint8_t _index, ADC_ValueType newADvalue)
1524:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
1525:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	analog_t *pAnalogInputParam;
1526:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType delta;
1527:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_ValueType maxVar;
1528:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1529:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
1530:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1531:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	delta = (ADC_ValueType)labs((int32_t)newADvalue-(int32_t)pAnalogInputParam->analogInputOldValue);
1532:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	maxVar = (ADC_ValueType)(1u<<pAnalogInputParam->analogConfigData.bit.fal);
1533:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 
1534:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (pAnalogInputParam->analogInputCnt < ANALOG_SYNC_THR )
1535:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1536:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		/* synchronization phase */
1537:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if (0 == pAnalogInputParam->analogInputCnt)
1538:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1539:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputOldValue = newADvalue;
1540:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputCnt++;
1541:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1542:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		else
1543:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1544:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if (delta <= maxVar)
1545:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1546:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				pAnalogInputParam->analogInputOldValue = newADvalue;
1547:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				pAnalogInputParam->analogInputCnt++;
1548:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1549:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			else
1550:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			{
1551:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				/* restart synch. */
1552:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				pAnalogInputParam->analogInputCnt = 0;
1553:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			}
1554:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1555:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1556:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	else
1557:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	{
1558:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if (delta <= maxVar)
1559:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1560:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* Valid data */
1561:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			LIB_ADC_AvgFilter (_index, newADvalue);
1562:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1563:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		else
1564:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		{
1565:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			/* Restart acquisition */
1566:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputSum = 0;
1567:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputIndex = 0;
1568:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		}
1569:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam->analogInputOldValue = newADvalue;
1570:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	}
1571:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 637                             		.loc 1 1571 0
 638 0048 76 24 FF 00             		and	#0xff, r4
1450:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			adAverage = (ADC_ValueType) (pAnalogInputParam->analogInputSum/nSamplesToCollect);
 639                             		.loc 1 1450 0
 640 004c 5F 2A                   		movu.W	r2, r10
 641 004e FC 23 4A                		div	r4, r10
1453:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AnalogInput[adChPos] = adAverage;
 642                             		.loc 1 1453 0
 643 0051 FB B2 00 00 00 00       		mov.L	#_AnalogInput, r11
1450:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			adAverage = (ADC_ValueType) (pAnalogInputParam->analogInputSum/nSamplesToCollect);
 644                             		.loc 1 1450 0
 645 0057 FE 17 BA                		mov.W	r10, [r7,r11]
1455:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if (pAnalogInputParam->analogConfigData.bit.comp)
 646                             		.loc 1 1455 0
 647 005a DC ED                   		mov.W	[r14], r13
 648 005c 75 2D 20                		and	#32, r13
 649 005f 5F DD                   		movu.W	r13, r13
 650 0061 61 0D                   		cmp	#0, r13
 651 0063 20 4B                   		beq	.L64
1459:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				adChCompPos = LIB_ADC_AnalogChRamPos(Ch_Comp);
 652                             		.loc 1 1459 0
 653 0065 FB D2 00 00 00 00       		mov.L	#_Ch_Comp, r13
 654 006b CC D1                   		mov.B	[r13], r1
 655 006d 05 00 00 00             		bsr	_LIB_ADC_AnalogChRamPos
1460:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				if ( AD_POS_NOT_FOUND != adChCompPos )
 656                             		.loc 1 1460 0
 657 0071 75 51 FF                		cmp	#0xff, r1
 658 0074 20 33                   		beq	.L65
 659                             	.LBB4:
1462:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					ADC_ValueType tmpAdCompVal = AnalogInput[adChCompPos];
 660                             		.loc 1 1462 0
 661 0076 FE 51 BD                		mov.W	[r1,r11], r13
1465:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					if ( ( LIB_ADC_IsAnalogReady(adChCompPos) ) &&
 662                             		.loc 1 1465 0
 663 0079 05 00 00 00             		bsr	_LIB_ADC_IsAnalogReady
 664 007d 61 01                   		cmp	#0, r1
 665 007f 20 2F                   		beq	.L64
1465:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					if ( ( LIB_ADC_IsAnalogReady(adChCompPos) ) &&
 666                             		.loc 1 1465 0 is_stmt 0 discriminator 1
 667 0081 5F D4                   		movu.W	r13, r4
 668 0083 76 04 7C 01             		cmp	#0x17c, r4
 669 0087 25 27                   		bleu	.L64
1466:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 							( tmpAdCompVal > COMP_MIN_ADC_UNITS) &&
 670                             		.loc 1 1466 0 is_stmt 1
 671 0089 76 04 BA 02             		cmp	#0x2ba, r4
 672 008d 24 21                   		bgtu	.L64
1469:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						adCompesatedValue = (((uint32_t)adAverage*AD_COMP_VAL)/tmpAdCompVal);
 673                             		.loc 1 1469 0
 674 008f EF AE                   		mov.L	r10, r14
 675 0091 76 1E 13 02             		mul	#0x213, r14
1478:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 						AnalogInput[adChPos] = (ADC_ValueType)adCompesatedValue;
 676                             		.loc 1 1478 0
 677 0095 FC 27 4E                		divu	r4, r14
 678 0098 76 0E FF 03             		cmp	#0x3ff, r14
 679 009c 25 06                   		bleu	.L66
 680 009e FB EA FF 03             		mov.L	#0x3ff, r14
 681                             		.balign 2,3,5
 682                             	.L66:
 683 00a2 FE 17 BE                		mov.W	r14, [r7,r11]
 684 00a5 2E 09                   		bra	.L64
 685                             	.L65:
 686                             	.LBE4:
1484:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 					PLT_ERROR_WARNING(PLT_ERROR_ANALOG_2);
 687                             		.loc 1 1484 0
 688 00a7 66 21                   		mov.L	#2, r1
 689 00a9 05 00 00 00             		bsr	_LIB_Error_Warning_Handler
 690 00ad 03                      		.balign 2,3,1
 691                             	.L64:
1490:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AnalogInputReady |= (analogInput_t)(1u<<adChPos);
 692                             		.loc 1 1490 0
 693 00ae 66 1E                   		mov.L	#1, r14
 694 00b0 FD 62 7E                		shll	r7, r14
 695 00b3 FB 72 00 00 00 00       		mov.L	#_AnalogInputReady, r7
 696 00b9 CC 7A                   		mov.B	[r7], r10
 697 00bb 57 EA                   		or	r14, r10
 698 00bd C3 7A                   		mov.B	r10, [r7]
1492:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			ApplianceAnalogInputReady |= (analogInput_t)(1u<<adChPos);
 699                             		.loc 1 1492 0
 700 00bf FB 72 00 00 00 00       		mov.L	#_ApplianceAnalogInputReady, r7
 701 00c5 CC 7A                   		mov.B	[r7], r10
 702 00c7 57 EA                   		or	r14, r10
 703 00c9 C3 7A                   		mov.B	r10, [r7]
1495:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			AD_ChInputReady |= (analogInput_t)(1u<<adChPos);
 704                             		.loc 1 1495 0
 705 00cb FB 72 00 00 00 00       		mov.L	#_AD_ChInputReady, r7
 706 00d1 06 14 7E                		or	[r7].B, r14
 707 00d4 C3 7E                   		mov.B	r14, [r7]
 708                             		.balign 2,3,1
 709                             	.L63:
1499:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_ResetAnalogMeasure(_index);
 710                             		.loc 1 1499 0
 711 00d6 CF C1                   		mov.B	r12, r1
1501:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 712                             		.loc 1 1501 0
 713 00d8 6F 7D                   		popm	r7-r13
1499:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_ResetAnalogMeasure(_index);
 714                             		.loc 1 1499 0
 715 00da 04 00 00 00             		bra	_LIB_ADC_ResetAnalogMeasure
 716                             	.L61:
1501:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 717                             		.loc 1 1501 0
 718 00de 3F 7D 07                		rtsd	#28, r7-r13
 719                             	.LFE26:
 721 00e1 03                      		.section	.text.LIB_ADC_Conv_F,"ax",@progbits
 722                             		.global	_LIB_ADC_Conv_F
 724                             	_LIB_ADC_Conv_F:
 725                             	.LFB4:
 603:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 726                             		.loc 1 603 0
 727                             	.LVL50:
 728 0000 6E 6D                   		pushm	r6-r13
 729                             	.LCFI5:
 614:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	localSamples = (uint8_t)(1u<<ad_sample_num_pot2);
 730                             		.loc 1 614 0
 731 0002 5B 22                   		movu.B	r2, r2
 613:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 732                             		.loc 1 613 0
 733 0004 5B 17                   		movu.B	r1, r7
 614:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	localSamples = (uint8_t)(1u<<ad_sample_num_pot2);
 734                             		.loc 1 614 0
 735 0006 66 1B                   		mov.L	#1, r11
 613:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 736                             		.loc 1 613 0
 737 0008 63 A7                   		mul	#10, r7
 614:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	localSamples = (uint8_t)(1u<<ad_sample_num_pot2);
 738                             		.loc 1 614 0
 739 000a FD 62 2B                		shll	r2, r11
 603:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 740                             		.loc 1 603 0
 741 000d 60 40                   		sub	#4, r0
 742                             	.LCFI6:
 603:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 743                             		.loc 1 603 0
 744 000f CF 1C                   		mov.B	r1, r12
 745 0011 CF 3D                   		mov.B	r3, r13
 613:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pAnalogInputParam = &AnalogInputParam[_index];
 746                             		.loc 1 613 0
 747 0013 70 77 00 00 00 00       		add	#_AnalogInputParam, r7
 748                             	.LVL51:
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i = 0; i < localSamples; i++ )
 749                             		.loc 1 617 0
 750 0019 66 09                   		mov	#0, r9
 615:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	lf_sum = 0;
 751                             		.loc 1 615 0
 752 001b 66 0A                   		mov	#0, r10
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i = 0; i < localSamples; i++ )
 753                             		.loc 1 617 0
 754 001d 5B B8                   		movu.B	r11, r8
 622:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( i >= samples_to_discard )
 755                             		.loc 1 622 0
 756 001f 5B 3E                   		movu.B	r3, r14
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i = 0; i < localSamples; i++ )
 757                             		.loc 1 617 0
 758 0021 2E 1D                   		bra	.L75
 759                             	.LVL52:
 760                             	.L77:
 619:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		(void)OCADC_SampleSync(pAnalogInputParam->channel,pAnalogInputParam->analogInputRamPos);
 761                             		.loc 1 619 0
 762 0023 88 FA                   		mov.B	3[r7], r2
 763 0025 88 F1                   		mov.B	2[r7], r1
 764 0027 E3 0E                   		mov.L	r14, [r0]
 765 0029 05 00 00 00             		bsr	_OCADC_SampleSync
 766                             	.LVL53:
 620:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		adValue = OCADC_GetSync(pAnalogInputParam->analogInputRamPos);
 767                             		.loc 1 620 0
 768 002d 88 F9                   		mov.B	3[r7], r1
 769 002f 05 00 00 00             		bsr	_OCADC_GetSync
 770                             	.LVL54:
 622:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( i >= samples_to_discard )
 771                             		.loc 1 622 0
 772 0033 EC 0E                   		mov.L	[r0], r14
 773 0035 47 E6                   		cmp	r14, r6
 774 0037 23 05                   		bltu	.L76
 624:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			lf_sum += (lowFilterADCsum_t)adValue;
 775                             		.loc 1 624 0
 776 0039 4B 1A                   		add	r1, r10
 777                             	.LVL55:
 778 003b 03                      		.balign 2,3,1
 779                             	.L76:
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i = 0; i < localSamples; i++ )
 780                             		.loc 1 617 0
 781 003c 62 19                   		add	#1, r9
 782                             	.LVL56:
 783                             		.balign 2,3,1
 784                             	.L75:
 617:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i = 0; i < localSamples; i++ )
 785                             		.loc 1 617 0 is_stmt 0 discriminator 1
 786 003e 5B 96                   		movu.B	r9, r6
 787 0040 47 86                   		cmp	r8, r6
 788 0042 23 E1                   		bltu	.L77
 628:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (localSamples>samples_to_discard)
 789                             		.loc 1 628 0 is_stmt 1
 790 0044 5B DE                   		movu.B	r13, r14
 791 0046 47 E8                   		cmp	r14, r8
 792 0048 25 0D                   		bleu	.L78
 630:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		adValue = (ADC_ValueType)(lf_sum/(uint8_t)(localSamples-samples_to_discard));
 793                             		.loc 1 630 0
 794 004a 43 DB                   		sub	r13, r11
 795                             	.LVL57:
 796 004c 5F AA                   		movu.W	r10, r10
 797 004e 5B BB                   		movu.B	r11, r11
 798 0050 FC 23 BA                		div	r11, r10
 799                             	.LVL58:
 800 0053 2E 0D                   		bra	.L79
 801                             	.LVL59:
 802                             	.L78:
 636:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		PLT_ERROR_WARNING(PLT_ERROR_ANALOG_1);
 803                             		.loc 1 636 0
 804 0055 66 11                   		mov.L	#1, r1
 805 0057 05 00 00 00             		bsr	_LIB_Error_Warning_Handler
 806                             	.LVL60:
 635:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		adValue = ONE_AD_SAMPLE_MAX_VALUE;
 807                             		.loc 1 635 0
 808 005b FB AA FF 03             		mov	#0x3ff, r10
 809                             	.LVL61:
 810 005f 03                      		.balign 2,3,3
 811                             	.L79:
 641:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( pAnalogInputParam->channel == Ch_Vline )
 812                             		.loc 1 641 0
 813 0060 59 7D 02                		movu.B	2[r7], r13
 814                             	.LVL62:
 815 0063 FB B2 00 00 00 00       		mov.L	#_Ch_Vline, r11
 816 0069 44 BD                   		cmp	[r11].UB, r13
 817 006b 21 11                   		bne	.L80
 818 006d 62 FA                   		add	#15, r10
 819                             	.LVL63:
 820 006f 5F AB                   		movu.W	r10, r11
 821 0071 76 0B FF 03             		cmp	#0x3ff, r11
 822 0075 25 07                   		bleu	.L80
 823 0077 FB AA FF 03             		mov	#0x3ff, r10
 824 007b 03                      		.balign 2,3,5
 825                             	.L80:
 826                             	.LVL64:
 657:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( pAnalogInputParam->analogConfigData.bit.fal == 0 )
 827                             		.loc 1 657 0
 828 007c DC 7D                   		mov.W	[r7], r13
 829 007e FD 74 CD 0F             		tst	#15, r13
 830 0082 21 0C                   		bne	.L82
 661:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		LIB_ADC_AvgFilter(_index,adValue);
 831                             		.loc 1 661 0
 832 0084 CF C1                   		mov.B	r12, r1
 833 0086 DF A2                   		mov.W	r10, r2
 834 0088 05 00 00 00             		bsr	_LIB_ADC_AvgFilter
 835                             	.LVL65:
 836 008c 2E 58                   		bra	.L83
 837                             	.L82:
 838                             	.LVL66:
 839                             	.LBB7:
 840                             	.LBB8:
1532:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	maxVar = (ADC_ValueType)(1u<<pAnalogInputParam->analogConfigData.bit.fal);
 841                             		.loc 1 1532 0
 842 008e 66 1E                   		mov.L	#1, r14
 843                             	.LVL67:
 844 0090 64 FD                   		and	#15, r13
 845 0092 EF E4                   		mov.L	r14, r4
 846 0094 FD 62 D4                		shll	r13, r4
1531:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	delta = (ADC_ValueType)labs((int32_t)newADvalue-(int32_t)pAnalogInputParam->analogInputOldValue);
 847                             		.loc 1 1531 0
 848 0097 5F AB                   		movu.W	r10, r11
 849 0099 06 C1 7B 04             		sub	8[r7].UW, r11
1532:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	maxVar = (ADC_ValueType)(1u<<pAnalogInputParam->analogConfigData.bit.fal);
 850                             		.loc 1 1532 0
 851 009d EF 4D                   		mov.L	r4, r13
1534:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (pAnalogInputParam->analogInputCnt < ANALOG_SYNC_THR )
 852                             		.loc 1 1534 0
 853 009f B1 7C                   		movu.B	5[r7], r4
1531:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	delta = (ADC_ValueType)labs((int32_t)newADvalue-(int32_t)pAnalogInputParam->analogInputOldValue);
 854                             		.loc 1 1531 0
 855 00a1 7E 2B                   		abs	r11
 856                             	.LVL68:
1534:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (pAnalogInputParam->analogInputCnt < ANALOG_SYNC_THR )
 857                             		.loc 1 1534 0
 858 00a3 47 E4                   		cmp	r14, r4
 859 00a5 24 23                   		bgtu	.L84
1537:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if (0 == pAnalogInputParam->analogInputCnt)
 860                             		.loc 1 1537 0
 861 00a7 61 04                   		cmp	#0, r4
 862 00a9 21 0A                   		bne	.L85
1539:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputOldValue = newADvalue;
 863                             		.loc 1 1539 0
 864 00ab D7 7A 04                		mov.W	r10, 8[r7]
1540:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputCnt++;
 865                             		.loc 1 1540 0
 866 00ae C7 7E 05                		mov.B	r14, 5[r7]
 867 00b1 2E 33                   		bra	.L83
 868                             	.L85:
1544:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if (delta <= maxVar)
 869                             		.loc 1 1544 0
 870 00b3 5F BB                   		movu.W	r11, r11
 871 00b5 5F DD                   		movu.W	r13, r13
 872 00b7 47 DB                   		cmp	r13, r11
 873 00b9 24 0A                   		bgtu	.L86
1546:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				pAnalogInputParam->analogInputOldValue = newADvalue;
 874                             		.loc 1 1546 0
 875 00bb D7 7A 04                		mov.W	r10, 8[r7]
1547:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				pAnalogInputParam->analogInputCnt++;
 876                             		.loc 1 1547 0
 877 00be 3C 75 02                		mov.B	#2, 5[r7]
 878 00c1 2E 23                   		bra	.L83
 879                             	.L86:
1552:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				pAnalogInputParam->analogInputCnt = 0;
 880                             		.loc 1 1552 0
 881 00c3 3C 75 00                		mov.B	#0, 5[r7]
 882 00c6 2E 1E                   		bra	.L83
 883                             	.L84:
1558:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if (delta <= maxVar)
 884                             		.loc 1 1558 0
 885 00c8 5F BB                   		movu.W	r11, r11
 886 00ca 5F DD                   		movu.W	r13, r13
 887 00cc 47 DB                   		cmp	r13, r11
 888 00ce 24 0C                   		bgtu	.L87
1561:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			LIB_ADC_AvgFilter (_index, newADvalue);
 889                             		.loc 1 1561 0
 890 00d0 CF C1                   		mov.B	r12, r1
 891 00d2 DF A2                   		mov.W	r10, r2
 892 00d4 05 00 00 00             		bsr	_LIB_ADC_AvgFilter
 893                             	.LVL69:
 894 00d8 2E 08                   		bra	.L88
 895                             	.LVL70:
 896                             	.L87:
1566:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputSum = 0;
 897                             		.loc 1 1566 0
 898 00da 3D 73 00                		mov.W	#0, 6[r7]
1567:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			pAnalogInputParam->analogInputIndex = 0;
 899                             		.loc 1 1567 0
 900 00dd 3C 74 00                		mov.B	#0, 4[r7]
 901                             	.LVL71:
 902                             		.balign 2,3,5
 903                             	.L88:
1569:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		pAnalogInputParam->analogInputOldValue = newADvalue;
 904                             		.loc 1 1569 0
 905 00e0 D7 7A 04                		mov.W	r10, 8[r7]
 906                             	.LVL72:
 907 00e3 03                      		.balign 2,3,1
 908                             	.L83:
 909                             	.LBE8:
 910                             	.LBE7:
 672:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 911                             		.loc 1 672 0
 912 00e4 5F A1                   		movu.W	r10, r1
 913 00e6 3F 6D 09                		rtsd	#36, r6-r13
 914                             	.LFE4:
 916 00e9 03                      		.section	.text.LIB_ADC_Manager,"ax",@progbits
 917                             		.global	_LIB_ADC_Manager
 919                             	_LIB_ADC_Manager:
 920                             	.LFB3:
 408:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 921                             		.loc 1 408 0
 922                             	.LVL73:
 923 0000 6E 7D                   		pushm	r7-r13
 924                             	.LCFI7:
 925 0002 FB A2 00 00 00 00       		mov.L	#_AnalogInputParam, r10
 408:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 926                             		.loc 1 408 0
 927 0008 66 07                   		mov.L	#0, r7
 472:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        ( AnalogInputParam[i].channel != Ch_Vline ) )
 928                             		.loc 1 472 0
 929 000a FB B2 00 00 00 00       		mov.L	#_Ch_Vline, r11
 485:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( AnalogInputParam[i].channel == Ch_Comp )
 930                             		.loc 1 485 0
 931 0010 FB C2 00 00 00 00       		mov.L	#_Ch_Comp, r12
 488:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RefReady = TRUE;
 932                             		.loc 1 488 0
 933 0016 FB D2 00 00 00 00       		mov.L	#_RefReady, r13
 934                             	.LVL74:
 935                             		.balign 2,3,1
 936                             	.L94:
 471:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( ( AnalogInputParam[i].analogConfigData.bit.automatic ) &&
 937                             		.loc 1 471 0
 938 001c EF 7E                   		mov.L	r7, r14
 939 001e 63 AE                   		mul	#10, r14
 940 0020 70 EE 00 00 00 00       		add	#_AnalogInputParam, r14
 941 0026 5C E4                   		movu.W	[r14], r4
 942 0028 CF 79                   		mov.B	r7, r9
 943 002a FD 8F 4E                		shlr	#15, r4, r14
 944 002d 20 3F                   		beq	.L91
 472:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		        ( AnalogInputParam[i].channel != Ch_Vline ) )
 945                             		.loc 1 472 0 discriminator 1
 946 002f CC B1                   		mov.B	[r11], r1
 471:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( ( AnalogInputParam[i].analogConfigData.bit.automatic ) &&
 947                             		.loc 1 471 0 discriminator 1
 948 0031 59 A2 02                		movu.B	2[r10], r2
 949 0034 5B 13                   		movu.B	r1, r3
 950 0036 47 32                   		cmp	r3, r2
 951 0038 20 34                   		beq	.L91
 476:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( Ch_Vline != CH_VLINE_IS_NOT_DEFINED ) &&
 952                             		.loc 1 476 0
 953 003a 75 53 FF                		cmp	#0xff, r3
 954 003d 20 0F                   		beq	.L92
 476:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( Ch_Vline != CH_VLINE_IS_NOT_DEFINED ) &&
 955                             		.loc 1 476 0 is_stmt 0 discriminator 1
 956 003f FD 74 C4 10             		tst	#16, r4
 957 0043 20 09                   		beq	.L92
 479:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				(void)OCADC_SampleSync (Ch_Vline, AD_DUMMY_POS);
 958                             		.loc 1 479 0 is_stmt 1
 959 0045 FB 26 FF                		mov	#-1, r2
 960 0048 05 00 00 00             		bsr	_OCADC_SampleSync
 961                             	.LVL75:
 962                             		.balign 2,3,1
 963                             	.L92:
 483:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			res = LIB_ADC_Conv_F( i, AD_LOCAL_SAMPLES_POWER_OF_TWO, AD_LOCAL_SAMPLES_DISCARDED);
 964                             		.loc 1 483 0
 965 004c CF 91                   		mov.B	r9, r1
 966 004e 66 22                   		mov	#2, r2
 967 0050 66 03                   		mov	#0, r3
 968 0052 05 00 00 00             		bsr	_LIB_ADC_Conv_F
 969                             	.LVL76:
 485:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( AnalogInputParam[i].channel == Ch_Comp )
 970                             		.loc 1 485 0
 971 0056 59 A4 02                		movu.B	2[r10], r4
 972 0059 44 C4                   		cmp	[r12].UB, r4
 973 005b 21 0D                   		bne	.L93
 493:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RefInput = res;
 974                             		.loc 1 493 0
 975 005d FB E2 00 00 00 00       		mov.L	#_RefInput, r14
 488:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RefReady = TRUE;
 976                             		.loc 1 488 0
 977 0063 F8 D6 01                		mov.L	#1, [r13]
 493:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RefInput = res;
 978                             		.loc 1 493 0
 979 0066 D3 E1                   		mov.W	r1, [r14]
 980                             		.balign 2,3,3
 981                             	.L93:
 498:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			CBF_AnalogInputIntManager_Polling();
 982                             		.loc 1 498 0
 983 0068 05 00 00 00             		bsr	_CBF_AnalogInputIntManager_Polling
 984                             	.LVL77:
 985                             		.balign 2,3,1
 986                             	.L91:
 987 006c 62 17                   		add	#1, r7
 988 006e 62 AA                   		add	#10, r10
 461:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	for ( i=0; i<ADC_NUM_CHANNELLS_USED; i++)
 989                             		.loc 1 461 0
 990 0070 61 87                   		cmp	#8, r7
 991 0072 21 AA                   		bne	.L94
 574:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 992                             		.loc 1 574 0
 993 0074 6F 7D                   		popm	r7-r13
 571:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	ADC_Check();
 994                             		.loc 1 571 0
 995 0076 04 00 00 00             		bra	_ADC_Check
 996                             	.LVL78:
 997                             	.LFE3:
 999                             		.section	.text.LIB_ADC_CheckRef,"ax",@progbits
 1000                             		.global	_LIB_ADC_CheckRef
 1002                             	_LIB_ADC_CheckRef:
 1003                             	.LFB20:
1166:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1004                             		.loc 1 1166 0
 1005                             	.LVL79:
1173:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( ( Ch_Comp != CH_FOR_COMPENSATION_IS_NOT_DEFINED ) && (TRUE == RefReady) )
 1006                             		.loc 1 1173 0
 1007 0000 FB E2 00 00 00 00       		mov.L	#_Ch_Comp, r14
 1008 0006 58 EE                   		movu.B	[r14], r14
 1009 0008 75 5E FF                		cmp	#0xff, r14
 1010 000b 20 75                   		beq	.L113
1173:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( ( Ch_Comp != CH_FOR_COMPENSATION_IS_NOT_DEFINED ) && (TRUE == RefReady) )
 1011                             		.loc 1 1173 0 is_stmt 0 discriminator 1
 1012 000d FB E2 00 00 00 00       		mov.L	#_RefReady, r14
 1013 0013 EC EE                   		mov.L	[r14], r14
 1014 0015 61 1E                   		cmp	#1, r14
 1015 0017 21 69                   		bne	.L113
1175:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( FirstSample == TRUE )
 1016                             		.loc 1 1175 0 is_stmt 1
 1017 0019 FB E2 00 00 00 00       		mov.L	#_FirstSample.10426, r14
 1018 001f EC E1                   		mov.L	[r14], r1
 1019 0021 61 11                   		cmp	#1, r1
 1020 0023 21 41                   		bne	.L114
1182:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			avg = (ADC_ValueType)((PreviousVref + RefInput)/2);
 1021                             		.loc 1 1182 0
 1022 0025 FB E2 00 00 00 00       		mov.L	#_PreviousVref.10425, r14
 1023 002b 5C E4                   		movu.W	[r14], r4
 1024 002d FB E2 00 00 00 00       		mov.L	#_RefInput, r14
 1025 0033 5C EE                   		movu.W	[r14], r14
 1026 0035 4B 4E                   		add	r4, r14
 1027 0037 6A 1E                   		shar	#1, r14
 1028                             	.LVL80:
1186:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( avg < REF_MIN_ADC_UNITS ) || ( avg > REF_MAX_ADC_UNITS ) )
 1029                             		.loc 1 1186 0
 1030 0039 72 E3 72 FE             		add	#0xfffffe72, r14, r3
1188:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				GoodRef = FALSE;
 1031                             		.loc 1 1188 0
 1032 003d 76 03 44 02             		cmp	#0x244, r3
 1033 0041 FC DB 35                		scleu.L	r3
 1034 0044 FB 42 00 00 00 00       		mov.L	#_GoodRef, r4
 1035 004a E3 43                   		mov.L	r3, [r4]
1195:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			if ( ( avg < BOTTOM_BOUND_RTN_ADC_UNITS ) || ( avg > UPPER_BOUND_RTN_ADC_UNITS ) )
 1036                             		.loc 1 1195 0
 1037 004c 72 E4 23 FE             		add	#0xfffffe23, r14, r4
 1038 0050 75 54 6C                		cmp	#0x6c, r4
 1039 0053 FB E2 00 00 00 00       		mov.L	#_RtnOutRange, r14
 1040                             	.LVL81:
 1041 0059 25 06                   		bleu	.L111
1197:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RtnOutRange = TRUE;
 1042                             		.loc 1 1197 0
 1043 005b E3 E1                   		mov.L	r1, [r14]
 1044 005d 2E 09                   		bra	.L108
 1045                             	.L111:
1201:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 				RtnOutRange = FALSE;
 1046                             		.loc 1 1201 0
 1047 005f F8 E6 00                		mov.L	#0, [r14]
 1048 0062 2E 04                   		bra	.L108
 1049                             	.LVL82:
 1050                             	.L114:
1171:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	bool_t retValue = FALSE;
 1051                             		.loc 1 1171 0
 1052 0064 66 01                   		mov.L	#0, r1
 1053                             		.balign 2,3,5
 1054                             	.L108:
 1055                             	.LVL83:
1207:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		PreviousVref = RefInput;
 1056                             		.loc 1 1207 0
 1057 0066 FB 42 00 00 00 00       		mov.L	#_RefInput, r4
 1058 006c DC 44                   		mov.W	[r4], r4
 1059 006e FB E2 00 00 00 00       		mov.L	#_PreviousVref.10425, r14
 1060 0074 D3 E4                   		mov.W	r4, [r14]
1208:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		FirstSample = TRUE;
 1061                             		.loc 1 1208 0
 1062 0076 FB E2 00 00 00 00       		mov.L	#_FirstSample.10426, r14
 1063 007c F8 E6 01                		mov.L	#1, [r14]
 1064 007f 02                      		rts
 1065                             	.LVL84:
 1066                             	.L113:
1171:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	bool_t retValue = FALSE;
 1067                             		.loc 1 1171 0
 1068 0080 66 01                   		mov.L	#0, r1
 1069                             	.LVL85:
1213:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 1070                             		.loc 1 1213 0
 1071 0082 02                      		rts
 1072                             	.LFE20:
 1074 0083 03                      		.section	.text.LIB_ADC_Is_Ref_Good,"ax",@progbits
 1075                             		.global	_LIB_ADC_Is_Ref_Good
 1077                             	_LIB_ADC_Is_Ref_Good:
 1078                             	.LFB21:
1234:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1079                             		.loc 1 1234 0
1236:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 1080                             		.loc 1 1236 0
 1081 0000 FB E2 00 00 00 00       		mov.L	#_GoodRef, r14
 1082 0006 EC E1                   		mov.L	[r14], r1
 1083 0008 02                      		rts
 1084                             	.LFE21:
 1086                             		.section	.text.LIB_ADC_Is_RTN_Out_Range,"ax",@progbits
 1087                             		.global	_LIB_ADC_Is_RTN_Out_Range
 1089                             	_LIB_ADC_Is_RTN_Out_Range:
 1090                             	.LFB22:
1257:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1091                             		.loc 1 1257 0
1259:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 1092                             		.loc 1 1259 0
 1093 0000 FB E2 00 00 00 00       		mov.L	#_RtnOutRange, r14
 1094 0006 EC E1                   		mov.L	[r14], r1
 1095 0008 02                      		rts
 1096                             	.LFE22:
 1098                             		.section	.text.LIB_ADC_VLineMeasure,"ax",@progbits
 1099                             		.global	_LIB_ADC_VLineMeasure
 1101                             	_LIB_ADC_VLineMeasure:
 1102                             	.LFB23:
1288:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1103                             		.loc 1 1288 0
 1104                             	.LVL86:
 1105 0000 6E 7A                   		pushm	r7-r10
 1106                             	.LCFI8:
 1107 0002 60 80                   		sub	#8, r0
 1108                             	.LCFI9:
1288:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1109                             		.loc 1 1288 0
 1110 0004 EF 17                   		mov.L	r1, r7
1296:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	(void)memset(&vLine,0,sizeof(vLine));
 1111                             		.loc 1 1296 0
 1112 0006 66 63                   		mov.L	#6, r3
 1113 0008 EF 01                   		mov.L	r0, r1
 1114                             	.LVL87:
 1115 000a 66 02                   		mov	#0, r2
 1116 000c 7F 88                   		sstr.b
1298:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if (CH_VLINE_IS_NOT_DEFINED==Ch_Vline)
 1117                             		.loc 1 1298 0
 1118 000e FB A2 00 00 00 00       		mov.L	#_Ch_Vline, r10
 1119 0014 CC A1                   		mov.B	[r10], r1
 1120 0016 5B 1A                   		movu.B	r1, r10
 1121 0018 75 5A FF                		cmp	#0xff, r10
 1122 001b 20 51                   		beq	.L122
1307:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	_index = LIB_ADC_ADChVsAnalogInputParamIndex(Ch_Vline);
 1123                             		.loc 1 1307 0
 1124 001d 05 00 00 00             		bsr	_LIB_ADC_ADChVsAnalogInputParamIndex
 1125                             	.LVL88:
 1126 0021 CF 1A                   		mov.B	r1, r10
 1127                             	.LVL89:
 1128 0023 03                      		.balign 2,3,1
 1129                             	.L120:
1311:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		vLine.newVPeak = LIB_ADC_Conv_F (_index, (uint8_t)0, (uint8_t)0);
 1130                             		.loc 1 1311 0
 1131 0024 66 02                   		mov	#0, r2
 1132 0026 CF A1                   		mov.B	r10, r1
 1133 0028 CF 23                   		mov.B	r2, r3
 1134 002a 05 00 00 00             		bsr	_LIB_ADC_Conv_F
 1135                             	.LVL90:
 1136 002e D3 01                   		mov.W	r1, [r0]
1313:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		if ( vLine.newVPeak > vLine.vPeak )
 1137                             		.loc 1 1313 0
 1138 0030 06 C5 01 01             		cmp	2[r0].UW, r1
 1139 0034 25 04                   		bleu	.L119
1315:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 			vLine.vPeak = vLine.newVPeak;
 1140                             		.loc 1 1315 0
 1141 0036 90 09                   		mov.W	r1, 2[r0]
 1142                             		.balign 2,3,5
 1143                             	.L119:
1317:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		vLine.samples ++;
 1144                             		.loc 1 1317 0
 1145 0038 CD 0E 04                		mov.B	4[r0], r14
 1146 003b 62 1E                   		add	#1, r14
 1147 003d C7 0E 04                		mov.B	r14, 4[r0]
1319:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	while ( vLine.samples < N_SAMPLE_V_LINE );
 1148                             		.loc 1 1319 0
 1149 0040 5B EE                   		movu.B	r14, r14
 1150 0042 61 4E                   		cmp	#4, r14
 1151 0044 25 E0                   		bleu	.L120
1337:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	pos = LIB_ADC_AnalogChRamPos(Ch_Vline);
 1152                             		.loc 1 1337 0
 1153 0046 FB A2 00 00 00 00       		mov.L	#_Ch_Vline, r10
 1154                             	.LVL91:
 1155 004c CC A1                   		mov.B	[r10], r1
 1156 004e 05 00 00 00             		bsr	_LIB_ADC_AnalogChRamPos
 1157                             	.LVL92:
1339:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	if ( AD_POS_NOT_FOUND != pos ){
 1158                             		.loc 1 1339 0
 1159 0052 5B 11                   		movu.B	r1, r1
 1160 0054 75 51 FF                		cmp	#0xff, r1
 1161 0057 DD 0E 01                		mov.W	2[r0], r14
 1162 005a 20 0C                   		beq	.L121
 1163                             	.LVL93:
 1164                             	.LBB9:
 1165                             	.LBB10:
 804:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	AnalogInput[pos] = value;
 1166                             		.loc 1 804 0
 1167 005c FB A2 00 00 00 00       		mov.L	#_AnalogInput, r10
 1168 0062 FE 11 AE                		mov.W	r14, [r1,r10]
 1169                             	.LVL94:
 1170 0065 03                      		.balign 2,3,1
 1171                             	.L121:
 1172                             	.LBE10:
 1173                             	.LBE9:
1348:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	*pVlinePeak= vLine.vPeak;
 1174                             		.loc 1 1348 0
 1175 0066 D3 7E                   		mov.W	r14, [r7]
1354:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 	return FALSE;
 1176                             		.loc 1 1354 0
 1177 0068 66 01                   		mov.L	#0, r1
 1178                             	.LVL95:
 1179 006a 2E 04                   		bra	.L118
 1180                             	.L122:
1300:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** 		return TRUE;
 1181                             		.loc 1 1300 0
 1182 006c 66 11                   		mov.L	#1, r1
 1183                             		.balign 2,3,2
 1184                             	.L118:
1355:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 1185                             		.loc 1 1355 0
 1186 006e 3F 7A 06                		rtsd	#24, r7-r10
 1187                             	.LFE23:
 1189 0071 03                      		.section	.text.LIB_ADC_GetRefInput,"ax",@progbits
 1190                             		.global	_LIB_ADC_GetRefInput
 1192                             	_LIB_ADC_GetRefInput:
 1193                             	.LFB24:
1373:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1194                             		.loc 1 1373 0
1375:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 1195                             		.loc 1 1375 0
 1196 0000 FB E2 00 00 00 00       		mov.L	#_RefInput, r14
 1197 0006 5C E1                   		movu.W	[r14], r1
 1198 0008 02                      		rts
 1199                             	.LFE24:
 1201                             		.section	.text.LIB_ADC_IsRefInputReady,"ax",@progbits
 1202                             		.global	_LIB_ADC_IsRefInputReady
 1204                             	_LIB_ADC_IsRefInputReady:
 1205                             	.LFB25:
1393:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** {
 1206                             		.loc 1 1393 0
1395:C:/Workspace/FW_Platform2_5/trunk/PlatformLibrary/LIB_Analog\Analog.c **** }
 1207                             		.loc 1 1395 0
 1208 0000 FB E2 00 00 00 00       		mov.L	#_RefReady, r14
 1209 0006 EC E1                   		mov.L	[r14], r1
 1210 0008 02                      		rts
 1211                             	.LFE25:
 1213                             		.comm	_AnalogInput,16,2
 1214                             		.comm	_ApplianceAnalogInputReady,1,1
 1215                             		.comm	_AnalogInputReady,1,1
 1216                             		.comm	_AnalogInputDisable,1,1
 1217                             		.comm	_RefReady,4,4
 1218                             		.comm	_RefInput,2,2
 1219                             		.comm	_Ch_Comp,1,1
 1220                             		.comm	_Ch_Vline,1,1
 1221                             		.section	.bss.AD_ChInputReady,"aw",@nobits
 1224                             	_AD_ChInputReady:
 1225 0000 00                      		.zero	1
 1226                             		.section	.bss.AnalogInputParam,"aw",@nobits
 1227                             		.balign 2
 1230                             	_AnalogInputParam:
 1231 0000 00 00 00 00 00 00 00 00 		.zero	80
 1231      00 00 00 00 00 00 00 00 
 1231      00 00 00 00 00 00 00 00 
 1231      00 00 00 00 00 00 00 00 
 1231      00 00 00 00 00 00 00 00 
 1232                             		.section	.bss.ChannelRegistered,"aw",@nobits
 1235                             	_ChannelRegistered:
 1236 0000 00                      		.zero	1
 1237                             		.section	.bss.FirstSample.10426,"aw",@nobits
 1238                             		.balign 4
 1241                             	_FirstSample.10426:
 1242 0000 00 00 00 00             		.zero	4
 1243                             		.section	.bss.PreviousVref.10425,"aw",@nobits
 1244                             		.balign 2
 1247                             	_PreviousVref.10425:
 1248 0000 00 00                   		.zero	2
 1249                             		.section	.bss.GoodRef,"aw",@nobits
 1250                             		.balign 4
 1253                             	_GoodRef:
 1254 0000 00 00 00 00             		.zero	4
 1255                             		.section	.bss.RtnOutRange,"aw",@nobits
 1256                             		.balign 4
 1259                             	_RtnOutRange:
 1260 0000 00 00 00 00             		.zero	4
 1595                             	.Letext0:
 1596                             		.file 2 "C:\\Workspace\\FW_Platform2_5\\trunk\\HAL\\HAL_General/StandardTypes.h"
 1597                             		.file 3 "C:\\Workspace\\FW_Platform2_5\\trunk\\CFG_DishWasher\\CFG_Inertia/AdcConfig.h"
 1598                             		.file 4 "C:\\Workspace\\FW_Platform2_5\\trunk\\Drivers/IO_driver.h"
 1599                             		.file 5 "C:\\Workspace\\FW_Platform2_5\\trunk\\Drivers\\OCADC/OCADC_drv.h"
 1600                             		.file 6 "C:\\Workspace\\FW_Platform2_5\\trunk\\PlatformLibrary\\LIB_Error/LIB_Error.h"
 1601                             		.file 7 "C:\\Workspace\\FW_Platform2_5\\trunk\\PlatformLibrary\\LIB_SecurityCheck/LIB_ClassBCheck.
 1602                             		.file 8 "C:\\Workspace\\FW_Platform2_5\\trunk\\PlatformLibrary/callback.h"
