   1                             		.file	"RN_RX200_hal_Flash.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.section	.PRAM,"ax",@progbits
   6                             	__FlashGrabState:
   7                             	.LFB16:
   8                             		.file 1 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c"
   1:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /**
   2:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  HAL Functions of Flash Device
   3:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  Hal Functions to access at hardware Resources from Driver layer
   4:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  \file    RN_RX200_Hal_Flash.c
   5:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  */
   6:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* ******** */
   7:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Includes */
   8:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* ******** */
   9:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #include "Config.h"
  10:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #include "RN_RX200_hal.h"
  11:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #include "RN_RX200_hal_Flash.h"
  12:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  13:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  14:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
  15:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** Private global variables and functions
  16:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
  17:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  18:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Signals whether FCU firmware has been transferred to the FCU RAM
  19:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 0 : No, 1 : Yes */
  20:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t fcu_transfer_complete = 0;
  21:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  22:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Valid values are 'READ_MODE','ROM_PE_MODE' or 'FLD_PE_MODE' */
  23:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t current_mode;
  24:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  25:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Stores whether the peripheral clock notification command has
  26:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** been executed */
  27:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t fcu_pclk_command = 0;
  28:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  29:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Semaphore for making sure flash routines do not stomp on each other */
  30:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static int32_t flash_semaphore = 0;
  31:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  32:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* States for flash operations */
  33:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static enum Flash_States { FLASH_READY,
  34:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                            FLASH_ERASING,
  35:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                            FLASH_WRITING,
  36:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                            FLASH_BLANKCHECK,
  37:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                            FLASH_LOCK_BIT
  38:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                          } flash_state;
  39:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  40:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifndef IGNORE_LOCK_BITS
  41:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Determines whether lock bit protection is used when programming/erasing */
  42:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t lock_bit_protection = TRUE;
  43:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
  44:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  45:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint32_t get_block_addresses(uint8_t blockNum )
  46:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
  47:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t retVal;
  48:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  49:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( blockNum < ROM_NUM_BLOCKS)
  50:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
  51:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         retVal = (0x00FFFFFF-FLASH_ERASE_BLK_SZ +1)- (FLASH_ERASE_BLK_SZ*blockNum);
  52:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
  53:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
  54:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
  55:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         retVal = 0x00100000 + (FLASH_ERASE_BLK_SZ*(blockNum-(ROM_NUM_BLOCKS)));
  56:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
  57:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return retVal;
  58:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
  59:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  60:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Enter PE mode function prototype */
  61:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
  62:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Enter_PE_Mode( uint32_t flash_addr, uint16_t bytes ) __attribute__((section(".PRAM"
  63:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
  64:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Enter_PE_Mode( uint32_t flash_addr, uint16_t bytes );
  65:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
  66:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Exit PE mode function prototype */
  67:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
  68:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _Exit_PE_Mode(void) __attribute__((section(".PRAM")));
  69:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
  70:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _Exit_PE_Mode(void);
  71:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
  72:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* ROM write function prototype */
  73:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
  74:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _ROM_Write(uint32_t address, uint32_t data) __attribute__((section(".PRAM")));
  75:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
  76:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _ROM_Write(uint32_t address, uint32_t data);
  77:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
  78:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Data flash write function prototype */
  79:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _DataFlash_Write(uint32_t address, uint32_t data, uint8_t size);
  80:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Data flash status clear function prototype */
  81:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _DataFlash_Status_Clr(void);
  82:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Notify peripheral clock function prototype */
  83:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
  84:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Notify_Peripheral_Clock(volatile uint8_t * flash_addr) __attribute__((section(".PRA
  85:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
  86:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Notify_Peripheral_Clock(volatile uint8_t * flash_addr);
  87:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
  88:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
  89:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Used to grab flash state */
  90:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
  91:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _FlashGrabState(enum Flash_States new_state) __attribute__((section(".PRAM")));
  92:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
  93:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _FlashGrabState(enum Flash_States new_state);
  94:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
  95:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Used to release flash state */
  96:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
  97:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _FlashReleaseState(void) __attribute__((section(".PRAM")));
  98:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
  99:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _FlashReleaseState(void);
 100:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
 101:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Used to issue an erase command to the FCU */
 102:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef ENABLE_ROM_PROGRAMMING
 103:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Flash_Erase_Command(volatile uint8_t * const erase_addr) __attribute__((section(".P
 104:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
 105:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Flash_Erase_Command(volatile uint8_t * const erase_addr);
 106:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
 107:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 108:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 109:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _Flash_Init
 110:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Initializes the FCU peripheral block.
 111:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function does not have to execute from in RAM.
 112:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : none
 113:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
 114:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
 115:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 116:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t _Flash_Init(void)
 117:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 118:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare source and destination pointers */
 119:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t * src, * dst;
 120:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 121:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare iteration counter variable */
 122:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint16_t i;
 123:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 124:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Disable FCU interrupts in FCU block */
 125:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.ROMAEIE = 0;
 126:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.CMDLKIE = 0;
 127:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.DFLAEIE = 0;
 128:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.DFLRPEIE = 0;
 129:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.DFLWPEIE = 0;
 130:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 131:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Disable FCU interrupts in ICU */
 132:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 133:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Disable flash interface error (FIFERR) */
 134:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IPR(FCU, FIFERR) = 0;
 135:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IEN(FCU, FIFERR) = 0;
 136:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 137:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Disable flash ready interrupt (FRDYI) */
 138:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IPR(FCU, FRDYI) = 0;
 139:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IEN(FCU, FRDYI) = 0;
 140:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 141:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Transfer Firmware to the FCU RAM. To use FCU commands, the FCU firmware
 142:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         must be stored in the FCU RAM. */
 143:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 144:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Before writing data to the FCU RAM, clear FENTRYR to stop the FCU. */
 145:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FENTRYR.WORD != 0x0000)
 146:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 147:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Disable the FCU from accepting commands - Clear both the
 148:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            FENTRY0(ROM) and FENTRYD(Data Flash) bits to 0 */
 149:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FENTRYR.WORD = 0xAA00;
 150:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 151:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 152:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enable the FCU RAM */
 153:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FCURAME.WORD = 0xC401;
 154:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 155:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Copies the FCU firmware to the FCU RAM.
 156:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        Source: H'FEFFE000 to H'FF00000 (FCU firmware area)
 157:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        Destination: H'007F8000 to H'007FA000 (FCU RAM area) */
 158:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set source pointer */
 159:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     src = (uint32_t *)FCU_PRG_TOP;
 160:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 161:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set destination pointer */
 162:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     dst = (uint32_t *)FCU_RAM_TOP;
 163:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 164:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Iterate for loop to copy the FCU firmware */
 165:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     for( i=0; i<(FCU_RAM_SIZE/4); i++)
 166:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 167:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Copy data from the source to the destination pointer */
 168:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *dst = *src;
 169:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 170:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Increment the source and destination pointers */
 171:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         src++;
 172:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         dst++;
 173:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 174:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 175:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* FCU firmware transfer complete, set the flag to 1 */
 176:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     fcu_transfer_complete = 1;
 177:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 178:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return no errors */
 179:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
 180:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 181:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 182:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _Flash_Init
 183:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 184:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 185:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 186:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _DataFlash_Status_Clr
 187:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Clear the status of the Data Flash operation.
 188:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *	             NOTE: This function does not have to execute from in RAM.
 189:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : none
 190:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : none
 191:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 192:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _DataFlash_Status_Clr(void)
 193:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 194:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare temporaty pointer */
 195:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t *ptrb;
 196:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 197:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set pointer to Data Flash to issue a FCU command if needed */
 198:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     ptrb = (volatile uint8_t *)(DF_ADDRESS);
 199:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 200:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check to see if an error has occurred with the FCU.  If set, then
 201:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        issue a status clear command to bring the FCU out of the
 202:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        command-locked state */
 203:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)
 204:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 205:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* FASTAT must be set to 0x10 before the status clear command
 206:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            can be successfully issued  */
 207:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(FLASH.FASTAT.BYTE != 0x10)
 208:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 209:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Set the FASTAT register to 0x10 so that a status clear
 210:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                command can be issued */
 211:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             FLASH.FASTAT.BYTE = 0x10;
 212:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 213:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 214:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 215:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Issue a status clear command to the FCU */
 216:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *ptrb = 0x50;
 217:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 218:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 219:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _DataFlash_Status_Clr
 220:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 221:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 222:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 223:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 224:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _DataFlash_Write
 225:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Write either bytes to Data Flash area.
 226:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *	             NOTE: This function does not have to execute from in RAM.
 227:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : address - The address (in the Data Flash programming area)
 228:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          to write the data to
 229:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                data - The address of the data to write
 230:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                size - The size of the data to write. Must be set to
 231:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                       either DF_PROGRAM_SIZE_LARGE or DF_PROGRAM_SIZE_SMALL.
 232:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
 233:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
 234:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 235:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _DataFlash_Write(uint32_t address, uint32_t data, uint8_t size)
 236:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 237:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait counter variable */
 238:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
 239:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 240:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Define loop iteration count variable */
 241:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t n = 0;
 242:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 243:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check data size is valid */
 244:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(DF_PROGRAM_SIZE_LARGE)
 245:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((DF_PROGRAM_SIZE_LARGE == size) || (DF_PROGRAM_SIZE_SMALL == size))
 246:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
 247:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(DF_PROGRAM_SIZE_SMALL == size)
 248:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
 249:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 250:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Perform bit shift since 2 bytes are written at a time */
 251:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         size = size >> 1;
 252:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Send command to data flash area */
 254:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = 0xE8;
 255:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 256:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Specify data transfer size to data flash area */
 257:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = size;
 258:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 259:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Iterate through the number of data bytes */
 260:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(n++ < size)
 261:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 262:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Copy data from source address to destination area */
 263:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *(volatile uint16_t *)address = *(uint16_t *)data;
 264:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 265:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Increment data address by two bytes */
 266:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             data += 2;
 267:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 268:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 269:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Write the final FCU command for programming */
 270:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)(DF_ADDRESS) = 0xD0;
 271:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 272:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set the wait counter with timeout value */
 273:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt = WAIT_MAX_DF_WRITE;
 274:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 275:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if FCU has completed its last operation */
 276:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(FLASH.FSTATR0.BIT.FRDY == 0)
 277:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 278:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Decrement the wait counter */
 279:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             wait_cnt--;
 280:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 281:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Check if the wait counter has reached zero */
 282:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(wait_cnt == 0)
 283:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
 284:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Maximum time for writing a block has passed,
 285:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    operation failed, reset FCU */
 286:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 _Flash_Reset();
 287:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 288:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Return FLASH_FAILURE, operation failure */
 289:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 return FLASH_FAILURE;
 290:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
 291:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 292:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 293:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check for illegal command or programming errors */
 294:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.PRGERR == 1))
 295:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 296:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
 297:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
 298:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 299:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 300:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Data size is invalid */
 301:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
 302:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 303:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /*Return FLASH_FAILURE, operation failure */
 304:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 305:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 306:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 307:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return FLASH_SUCCESS, operation success */
 308:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
 309:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 310:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 311:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _DataFlash_Write
 312:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 313:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 314:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 315:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 316:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashDataAreaBlankCheck
 317:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Performs a blank check on a specified data flash block
 318:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE1: This function does not have to execute from in RAM.
 319:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE2: RX610 & RX62x support block and 8 byte checks
 320:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                       RX630/631/63N support block and 2 byte checks
 321:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : address - The address to check if is blank.
 322:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          If the parameter 'size'=='BLANK_CHECK_8_BYTE',
 323:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          this should be set to an 8-byte address boundary.
 324:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          If the parameter 'size'=='BLANK_CHECK_ENTIRE_BLOCK',
 325:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          this should be set to a defined Data Block Number
 326:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          ('BLOCK_DB0', 'BLOCK_DB1', etc...) or an address
 327:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          in the data flash block.  Either option will work.
 328:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          If the parameter 'size'=='BLANK_CHECK_2_BYTE',
 329:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                          this should be set to a 2 byte address boundary.
 330:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                size - This specifies if you are checking an 8-byte location,
 331:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                       2-byte location, or an entire block. You must set this
 332:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                       to either 'BLANK_CHECK_8_BYTE', 'BLANK_CHECK_2_BYTE',
 333:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                       or 'BLANK_CHECK_ENTIRE_BLOCK'.
 334:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_BLANK = (2 or 8 Byte check or non-BGO) Blank
 335:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                              (Entire Block & BGO) Blank check operation
 336:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                              started
 337:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_NOT_BLANK = Not Blank
 338:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
 339:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Another flash operation is in progress
 340:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_ADDRESS = Invalid address
 341:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_BYTES = Incorrect 'size' was submitted
 342:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 343:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashDataAreaBlankCheck(uint32_t address, uint8_t size)
 344:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 345:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare data flash pointer */
 346:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t *ptrb;
 347:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 348:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare result container variable */
 349:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_NOT_BLANK;
 350:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 351:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait counter variable */
 352:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
 353:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 354:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 355:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	FLS_EnterCriticalSection();
 356:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 357:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check to make sure address is valid. */
 358:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( ((address > (DF_NUM_BLOCKS+BLOCK_DB0)) && (address < DF_ADDRESS))
 359:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             || (address > DF_ADDRESS + DF_SIZE) )
 360:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 361:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Address is not a valid DF address or block number */
 362:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	result = FLASH_ERROR_ADDRESS;
 363:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 364:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check to make sure 'size' parameter is valid */
 365:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( (size != BLANK_CHECK_ENTIRE_BLOCK)
 366:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(BLANK_CHECK_8_BYTE)
 367:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             && (size != BLANK_CHECK_8_BYTE)
 368:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #elif defined(BLANK_CHECK_2_BYTE)
 369:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             && (size != BLANK_CHECK_2_BYTE)
 370:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
 371:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****       )
 372:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 373:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* 'size' parameter is not valid. */
 374:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	result = FLASH_ERROR_BYTES;
 375:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 376:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */
 377:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( _FlashGrabState(FLASH_BLANKCHECK) != FLASH_SUCCESS )
 378:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 379:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
 380:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	result = FLASH_BUSY;
 381:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 382:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
 383:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 384:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set current FCU mode to Data Flash PE Mode */
 385:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 386:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 387:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Enter Data Flash PE mode in the FCU */
 388:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( _Enter_PE_Mode( address, 0 ) != FLASH_SUCCESS)
 389:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 390:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Release state */
 391:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _FlashReleaseState();
 392:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 393:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
 394:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLASH_FAILURE;
 395:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 396:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         else
 397:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 398:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Set  bit FRDMD (bit 4) in FMODR to 1 */
 399:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             FLASH.FMODR.BIT.FRDMD = 1;
 400:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 401:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Check if 2 byte size has been passed */
 402:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(size == BLANK_CHECK_2_BYTE)
 403:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
 404:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Set data flash pointer to beginning of the memory block */
 405:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 ptrb = (volatile uint8_t *)(address & DF_MASK);
 406:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 407:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Check if the next 2 bytes are blank
 408:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    Bits BCADR to the address of the 2-byte location to check.
 409:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    Set bit BCSIZE in EEPBCCNT to 0. */
 410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.DFLBCCNT.WORD = (uint16_t)(address & (DF_BLOCK_SIZE_LARGE-2));
 411:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
 412:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             else
 413:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
 414:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Check entire data block */
 415:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Check to see if user sent in a data block number or the
 416:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    address.  The function description tells the user to send
 417:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    in the block number but in some early examples the address
 418:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    was used. To make this work with both versions we detect which
 419:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    is sent in below and make it work either way. */
 420:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 if( address < (DF_NUM_BLOCKS+BLOCK_DB0) )
 421:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
 422:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 	uint32_t tmp_addr = GET_BLOCK_ADDR(address);
 423:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 424:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     /* A data block number was sent in */
 425:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     ptrb = (uint8_t *)tmp_addr;
 426:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
 427:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 else
 428:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
 429:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     /* Any address in the erasure block */
 430:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     ptrb = (volatile uint8_t *)address;
 431:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
 432:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 433:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Check if the entire block is blank
 434:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    Set bit BCSIZE in EEPBCCNT to 1. */
 435:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.DFLBCCNT.BIT.BCSIZE = 1;
 436:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
 437:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 438:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Send commands to FCU */
 439:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *ptrb = 0x71;
 440:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *ptrb = 0xD0;
 441:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 442:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Set timeout wait counter value */
 443:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             wait_cnt = WAIT_MAX_BLANK_CHECK;
 444:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 445:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Wait until FCU operation finishes, or a timeout occurs */
 446:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             while(FLASH.FSTATR0.BIT.FRDY == 0)
 447:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
 448:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Increment the wait counter */
 449:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 wait_cnt--;
 450:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 451:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Check if the wait counter has reached zero */
 452:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 if(wait_cnt == 0)
 453:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
 454:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     /* Maximum timeout duration for writing to ROM has elapsed -
 455:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                        assume operation failure and reset the FCU */
 456:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     _Flash_Reset();
 457:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 458:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     /* Return FLASH_FAILURE, operation failure */
 459:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     result = FLASH_FAILURE;
 460:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
 461:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
 462:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 463:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 464:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 465:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 466:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 467:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if (result == FLASH_NOT_BLANK)
 468:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 469:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Reset the FRDMD bit back to 0 */
 470:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FMODR.BIT.FRDMD = 0x00;
 471:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 472:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the 'ILGERR' was set during the command */
 473:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(FLASH.FSTATR0.BIT.ILGLERR == 1)	/* Check 'ILGERR' bit */
 474:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 475:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
 476:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLASH_FAILURE;
 477:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 478:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         else
 479:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 480:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* (Read the 'BCST' bit (bit 0) in the 'DFLBCSTAT' register
 481:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                0=blank, 1=not blank */
 482:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = (FLASH.DFLBCSTAT.BIT.BCST ? FLASH_NOT_BLANK : FLASH_BLANK);
 483:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 484:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 485:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 486:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 487:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 488:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 489:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if (current_mode == FLD_PE_MODE)
 490:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 491:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Take the FCU out of PE mode */
 492:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _Exit_PE_Mode( );
 493:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 494:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
 495:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 496:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 497:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 498:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLS_ExitCriticalSection();
 499:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 500:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
 501:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 502:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 503:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 504:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashDataAreaBlankCheck
 505:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 506:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 507:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 508:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashDataAreaAccess
 509:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : This function is used to allow read and program permissions
 510:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                to the Data Flash areas. NOTE: This function does not have to
 511:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                execute from in RAM.
 512:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : read_en_mask - Bitmasked value. Bits 0-3 represents each Data
 513:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                               Blocks 0-3 (respectively).
 514:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                               '0'=no Read access.
 515:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                               '1'=Allows Read by CPU
 516:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                write_en_mask - Bitmasked value. Bits 0-3 represents each Data
 517:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                               Blocks 0-3 (respectively).
 518:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                               '0'=no Erase/Write access.
 519:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                               '1'=Allows Erase/Write by FCU
 520:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : none
 521:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 522:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** void R_FlashDataAreaAccess(uint16_t read_en_mask, uint16_t write_en_mask)
 523:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 524:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set Read access for the Data Flash blocks DB0-DB7 */
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 526:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 527:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set Erase/Program access for the Data Flash blocks DB0-DB7 */
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 529:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 530:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 531:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashDataAreaAccess
 532:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 533:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 534:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 535:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 536:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _ROM_Write
 537:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Write bytes to ROM Area Flash.
 538:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM.
 539:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : address - ROM address of where to write to
 540:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                data - Pointer to the data to write
 541:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
 542:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
 543:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 544:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _ROM_Write(uint32_t address, uint32_t data)
 545:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 546:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare iteration loop count variable */
 547:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t i;
 548:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait counter variable */
 549:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
 550:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Number of bytes to write */
 551:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t size = ROM_PROGRAM_SIZE;
 552:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 553:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Writes are done 16-bit at a time, scale 'size' argument */
 554:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     size = ROM_PROGRAM_SIZE >> 1;
 555:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 556:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Write the FCU Program command */
 557:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint8_t *)address = 0xE8;
 558:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint8_t *)address = size;
 559:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 560:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Write 'size' bytes into flash, 16-bits at a time */
 561:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     for(i = 0; i < size; i++)
 562:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 563:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Copy data from source address to destination ROM */
 564:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint16_t *)address = *(uint16_t *)data;
 565:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 566:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Increment destination address by 2 bytes */
 567:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         data += 2;
 568:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 569:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 570:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Write the final FCU command for programming */
 571:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint8_t *)address = 0xD0;
 572:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 573:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set timeout wait counter value */
 574:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ROM_WRITE;
 575:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 576:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Wait until FCU operation finishes, or a timeout occurs */
 577:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 578:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 579:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Decrement the wait counter */
 580:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 581:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 582:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the wait counter has reached zero */
 583:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 584:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 585:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Maximum timeout duration for writing to ROM has elapsed -
 586:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                assume operation failure and reset the FCU */
 587:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
 588:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 589:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
 590:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
 591:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 592:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 593:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 594:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check for illegal command or programming errors */
 595:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.PRGERR  == 1))
 596:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 597:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
 598:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 599:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 600:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 601:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return FLASH_SUCCESS, operation successful */
 602:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
 603:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 604:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 605:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _ROM_Write
 606:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 607:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 608:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 609:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _Enter_PE_Mode
 610:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Puts the FCU into program/erase mode.
 611:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
 612:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash programming,
 613:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                this function can reside and execute in Flash.
 614:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : flash_addr - The programming/erasure address
 615:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                bytes - The number of bytes you are writing (if you are
 616:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                        writing).
 617:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
 618:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
 619:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 620:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Enter_PE_Mode( uint32_t flash_addr, uint16_t bytes )
 621:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 622:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* If FCU firmware has already been transferred to FCU RAM,
 623:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        no need to do it again */
 624:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fcu_transfer_complete )
 625:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 626:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Initialise the FCU, and store operation resilt in result variable */
 627:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if FCU initialisation was successful */
 628:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( _Flash_Init() != FLASH_SUCCESS )
 629:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 630:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* FCU initialisiation failed - return operation failure */
 631:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
 632:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 633:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 634:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 635:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* FENTRYR must be 0x0000 before bit FENTRY0 or FENTRYD can be set to 1 */
 636:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FENTRYR.WORD = 0xAA00;
 637:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 638:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Execute null operations to allow FENTRYR register to settle */
 639:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 640:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
 641:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
 642:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 643:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if FCU mode is set to ROM PE */
 644:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( current_mode == ROM_PE_MODE)
 645:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 646:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Disable the FRDYI interrupt */
 647:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FRDYIE.BIT.FRDYIE = 0;
 648:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FENTRYR.WORD = 0xAA01;
 649:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 650:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if FCU mode is set to data flash PE */
 651:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( current_mode == FLD_PE_MODE )
 652:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 653:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Disable the FRDYI interrupt */
 654:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FRDYIE.BIT.FRDYIE = 0;
 655:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 656:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set FENTRYD bit(Bit 7) and FKEY (B8-15 = 0xAA) */
 657:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FENTRYR.WORD = 0xAA80;
 658:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 659:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /*  First clear the FCU's status before doing Data Flash programming.
 660:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         	This is to clear out any previous errors that may have occured.
 661:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         	For example, if you attempt to read the Data Flash area
 662:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         	before you make it readable using R_FlashDataAreaAccess(). */
 663:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _DataFlash_Status_Clr();
 664:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 665:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 666:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Catch-all for invalid FCU mode */
 667:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
 668:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 669:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Invalid value of 'current_mode' */
 670:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 671:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 672:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 673:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enable Write/Erase of ROM/Data Flash */
 674:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FWEPROR.BYTE = 0x01;
 675:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 676:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check for FCU error */
 677:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(		(FLASH.FSTATR0.BIT.ILGLERR == 1)
 678:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||	(FLASH.FSTATR0.BIT.ERSERR  == 1)
 679:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||	(FLASH.FSTATR0.BIT.PRGERR  == 1)
 680:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||	(FLASH.FSTATR1.BIT.FCUERR  == 1))
 681:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 682:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
 683:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 684:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 685:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 686:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check to see if peripheral clock notification command is needed */
 687:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( fcu_pclk_command == 0 )
 688:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 689:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Disable FCU interrupts, so interrupt will not trigger after
 690:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            peripheral clock notification command */
 691:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FRDYIE.BIT.FRDYIE = 0;
 692:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 693:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Inform FCU of flash clock speed, check if operation is succesful */
 694:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(_Notify_Peripheral_Clock((volatile uint8_t *)flash_addr)!=0)
 695:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 696:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
 697:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
 698:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 699:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 700:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* No need to notify FCU of clock supplied to flash again */
 701:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fcu_pclk_command = 1;
 702:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 703:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 704:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return FLASH_SUCCESS, operation successful */
 705:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
 706:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 707:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 708:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function _Enter_PE_Mode
 709:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 710:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 711:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 712:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _Exit_PE_Mode
 713:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Takes the FCU out of program/erase mode.
 714:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
 715:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash
 716:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, this function can reside and execute in Flash.
 717:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : none
 718:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : none
 719:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 720:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _Exit_PE_Mode( void )
 721:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 722:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait timer count variable */
 723:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t	wait_cnt;
 724:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 725:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare address pointer */
 726:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t *pAddr=0;
 727:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 728:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set wait timer count duration */
 729:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ERASE;
 730:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 731:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Iterate while loop whilst FCU operation is in progress */
 732:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 733:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 734:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Decrement wait timer count variable */
 735:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 736:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 737:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if wait timer count value has reached zero */
 738:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 739:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 740:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Timeout duration has elapsed, assuming operation failure and
 741:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                resetting the FCU */
 742:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
 743:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 744:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Break from the while loop prematurely */
 745:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             break;
 746:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 747:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 748:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 749:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check FSTATR0 and execute a status register clear command if needed */
 750:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(		(FLASH.FSTATR0.BIT.ILGLERR == 1)
 751:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||  (FLASH.FSTATR0.BIT.ERSERR  == 1)
 752:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||  (FLASH.FSTATR0.BIT.PRGERR  == 1))
 753:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 754:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 755:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Clear ILGLERR */
 756:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(FLASH.FSTATR0.BIT.ILGLERR == 1)
 757:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 758:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* FASTAT must be set to 0x10 before the status clear command
 759:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                can be successfully issued  */
 760:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(FLASH.FASTAT.BYTE != 0x10)
 761:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
 762:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Set the FASTAT register to 0x10 so that a status clear
 763:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     command can be issued */
 764:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.FASTAT.BYTE = 0x10;
 765:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
 766:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 767:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 768:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Issue a status register clear command to clear all error bits */
 769:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( current_mode == ROM_PE_MODE )
 770:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 771:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* If there is more than one area then we need to check and make
 772:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                sure we are sending the status register clear command
 773:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                to the correct section. */
 774:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Check to see which area we are in */
 775:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( FLASH.FENTRYR.BIT.FENTRY0 == 1 )
 776:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
 777:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Area 0 */
 778:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 pAddr = (volatile uint8_t *)(ROM_AREA_0);
 779:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Send status clear command to FCU */
 780:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 *pAddr = 0x50;
 781:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
 782:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 783:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         else
 784:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 785:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Set address pointer to data flash area */
 786:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             pAddr = (volatile uint8_t *)DF_ADDRESS;
 787:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 788:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Send status clear command to FCU */
 789:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *pAddr = 0x50;
 790:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 791:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 792:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 793:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM Read mode */
 794:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FENTRYR.WORD = 0xAA00;
 795:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 796:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Disable the FRDYI interrupt */
 797:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRDYIE.BIT.FRDYIE = 0;
 798:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 799:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Flash write/erase disabled */
 800:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FWEPROR.BYTE = 0x02;
 801:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 802:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 803:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 804:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _Exit_PE_Mode
 805:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 806:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 807:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
 808:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashErase
 809:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Erases an entire flash block.
 810:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
 811:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash programming,
 812:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                this function can reside and execute in Flash.
 813:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : block - The block number to erase (BLOCK_0, BLOCK_1, etc...)
 814:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
 815:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
 816:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Another flash operation is in progress
 817:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
 818:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashErase_1(uint8_t block)
 819:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 820:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare address pointer */
 821:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t pAddr;
 822:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare erase operation result container variable */
 823:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
 824:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 825:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 826:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */
 827:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_ERASING) != FLASH_SUCCESS )
 828:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 829:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
 830:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
 831:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 832:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 833:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Erase Command Address */
 834:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     pAddr = GET_BLOCK_ADDR( block );
 835:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 836:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Do we want to erase a Data Flash block or ROM block? */
 837:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( block >= BLOCK_DB0 )
 838:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 839:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set current FCU mode to data flash PE */
 840:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 841:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 842:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
 843:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 844:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set current FCU mode to ROM PE */
 845:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = ROM_PE_MODE;
 846:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 847:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 848:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM PE mode, check if operation successful */
 849:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode(pAddr, 0) != FLASH_SUCCESS)
 850:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 851:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
 852:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 853:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 854:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
 855:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 856:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 857:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 858:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef  IGNORE_LOCK_BITS
 859:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Cancel the ROM Protect feature
 860:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        NOTE: If you are using block locking feature to protect your data,
 861:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        then comment out 'IGNORE_LOCK_BITS' in Flash_API_RX600_UserConfig.h */
 862:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
 863:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
 864:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Only disable lock bit protection if user has specified to
 865:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        do so earlier */
 866:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( lock_bit_protection == FALSE )
 867:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 868:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Cancel the ROM Protect feature */
 869:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FPROTR.WORD = 0x5501;
 870:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 871:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
 872:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 873:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 874:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 875:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* NOTE:
 876:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        The RX630/631/63N actually has 1024 x 32 byte blocks instead of the
 877:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        16 x 2Kbyte blocks defined in r_flash_api_rx600.h. These are grouped
 878:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        into 16 blocks to make it easier for the user to delete larger sections
 879:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        of the data flash at once. The user can still delete individual blocks
 880:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        but they will need to use the new flash erase function that takes
 881:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        addresses instead of blocks. For reference, the 2KB blocks defined
 882:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        are called 'fake' blocks. */
 883:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( FLD_PE_MODE == current_mode )
 884:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 885:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* This is a DATA block erase */
 886:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 887:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Calculate how many bytes to erase */
 888:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         int32_t bytes_to_erase = FLASH_ERASE_BLK_SZ;
 889:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 890:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Erase real data flash blocks until the 'fake' block is erased .*/
 891:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(0 < bytes_to_erase)
 892:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 893:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 894:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Send FCU command to erase block */
 895:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = _Flash_Erase_Command((volatile uint8_t *)pAddr);
 896:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 897:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Advance pointer to next block */
 898:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             pAddr += DF_BLOCK_SIZE;
 899:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 900:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Subtract off bytes erased */
 901:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             bytes_to_erase -= DF_BLOCK_SIZE;
 902:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 903:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 904:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
 905:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 906:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* This is a ROM block erase */
 907:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Send FCU command to erase block */
 908:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = _Flash_Erase_Command((volatile uint8_t *)pAddr);
 909:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 910:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 911:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Leave Program/Erase Mode */
 912:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
 913:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 914:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
 915:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
 916:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 917:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return erase result */
 918:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
 919:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 920:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 921:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 922:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(OPT_FLASH_1)
 923:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 924:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*******************************************************************/
 925:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* Check entire data block */
 926:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t _Flash_BlankCheck_Command(uint32_t address )
 927:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 928:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare data flash pointer */
 929:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t *ptrb;
 930:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 931:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare result container variable */
 932:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result;
 933:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 934:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait counter variable */
 935:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
 936:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 937:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Any address in the erasure block */
 938:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     ptrb = (volatile uint8_t *)address;
 939:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 940:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set  bit FRDMD (bit 4) in FMODR to 1 */
 941:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FMODR.BIT.FRDMD = 1;
 942:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 943:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if the entire block is blank, Set bit BCSIZE in EEPBCCNT to 1. */
 944:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLBCCNT.BIT.BCSIZE = 1;
 945:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 946:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Send commands to FCU */
 947:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *ptrb = 0x71;
 948:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *ptrb = 0xD0;
 949:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 950:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set timeout wait counter value */
 951:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_BLANK_CHECK;
 952:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 953:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Wait until FCU operation finishes, or a timeout occurs */
 954:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 955:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 956:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Increment the wait counter */
 957:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 958:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 959:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the wait counter has reached zero */
 960:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 961:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
 962:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Maximum timeout duration for writing to ROM has elapsed -
 963:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                assume operation failure and reset the FCU */
 964:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
 965:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 966:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
 967:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
 968:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
 969:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 970:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 971:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Reset the FRDMD bit back to 0 */
 972:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FMODR.BIT.FRDMD = 0x00;
 973:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 974:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if the 'ILGERR' was set during the command */
 975:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)	/* Check 'ILGERR' bit */
 976:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
 977:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Take the FCU out of PE mode */
 978:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _Exit_PE_Mode( );
 979:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 980:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
 981:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 982:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 983:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
 984:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 985:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
 986:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 987:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* (Read the 'BCST' bit (bit 0) in the 'DFLBCSTAT' register  0=blank, 1=not blank */
 988:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     result = FLASH.DFLBCSTAT.BIT.BCST;
 989:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 990:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
 991:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 992:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 993:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 994:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
 995:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
 996:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * R_FlashDataErase
 997:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * erase data flash
 998:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * */
 999:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashDataErase(uint32_t pAddr, uint32_t bytes_to_erase)
1000:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1001:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare erase operation result container variable */
1002:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
1003:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1004:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state, */ /*MS questo check puo essere fatt a livello superiore */
1005:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_ERASING) != FLASH_SUCCESS )
1006:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1007:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
1008:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
1009:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1010:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = FLD_PE_MODE;
1011:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM PE mode, check if operation successful */
1012:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode(pAddr, 0) != FLASH_SUCCESS)
1013:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1014:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
1015:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
1016:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1017:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
1018:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
1019:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1020:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1021:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Cancel the ROM Protect feature */
1022:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
1023:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1024:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(0 < bytes_to_erase)
1025:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1026:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /*Blank check before erase */
1027:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = _Flash_BlankCheck_Command((volatile uint8_t *)pAddr);
1028:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( result )
1029:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1030:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Send FCU command to erase block */
1031:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = _Flash_Erase_Command((volatile uint8_t *)pAddr);
1032:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1033:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Advance pointer to next block */
1034:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         pAddr += DF_BLOCK_SIZE;
1035:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1036:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Subtract off bytes erased */
1037:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         bytes_to_erase -= DF_BLOCK_SIZE;
1038:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1039:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1040:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Leave Program/Erase Mode */
1041:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
1042:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1043:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1044:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1045:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1046:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return erase result */
1047:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1048:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1049:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1050:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1051:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1052:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1053:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashErase
1054:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1055:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1056:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1057:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1058:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashEraseRange
1059:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Erases blocks starting at an address and stopping when the
1060:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                number of bytes to erase has been reached.
1061:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function is currently only for data flash blocks
1062:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                on RX MCUs that have 32 byte erase sectors.
1063:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
1064:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash programming,
1065:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                this function can reside and execute in Flash.
1066:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : start_addr - The address of where to start erasing. Must be on
1067:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                             erase boundary.
1068:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                bytes - The numbers of bytes to erase. Must be
1069:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                        multiple of erase size.
1070:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
1071:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
1072:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_ALIGNED = Flash address was not on correct boundary
1073:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Another flash operation is in progress
1074:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_BYTES = Number of bytes did not match erase size
1075:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_ADDRESS = Invalid address, this is only for DF
1076:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1077:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashEraseRange(uint32_t start_addr, uint32_t bytes)
1078:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1079:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare erase operation result container variable */
1080:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
1081:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1082:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Take off upper byte since for programming/erase addresses for ROM are
1083:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	the same as read addresses except upper byte is masked off to 0's.
1084:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	Data Flash addresses are not affected. */
1085:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     start_addr &= 0x00FFFFFF;
1086:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1087:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Confirm this is for data flash */
1088:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( start_addr >= DF_ADDRESS && start_addr < (DF_ADDRESS + DF_SIZE) )
1089:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1090:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the number of bytes were passed is a multiple of the
1091:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            programming size for the data flash */
1092:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( bytes & (DF_BLOCK_SIZE-1) )
1093:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1094:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return number of bytes not a multiple of the programming size */
1095:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_BYTES;
1096:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1097:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check for an address on an erase boundary. */
1098:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( start_addr & (DF_BLOCK_SIZE-1) )
1099:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1100:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return address not on a programming boundary */
1101:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_ALIGNED;
1102:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1103:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1104:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1105:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1106:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* This function is only for data flash blocks. */
1107:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_ERROR_ADDRESS;
1108:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1109:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1110:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */
1111:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_ERASING) != FLASH_SUCCESS )
1112:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1113:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
1114:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
1115:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1116:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1117:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set current FCU mode to data flash PE */
1118:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = FLD_PE_MODE;
1119:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1120:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM PE mode, check if operation successful */
1121:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode(start_addr, 0) != FLASH_SUCCESS)
1122:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1123:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
1124:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
1125:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1126:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
1127:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
1128:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1129:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1130:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef  IGNORE_LOCK_BITS
1131:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Cancel the ROM Protect feature
1132:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        NOTE: If you are using block locking feature to protect your data,
1133:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        then comment out 'IGNORE_LOCK_BITS' in Flash_API_RX600_UserConfig.h */
1134:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
1135:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
1136:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Only disable lock bit protection if user has specified to
1137:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        do so earlier */
1138:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( lock_bit_protection == FALSE )
1139:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1140:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Cancel the ROM Protect feature */
1141:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FPROTR.WORD = 0x5501;
1142:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1143:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1144:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1145:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Erase real data flash blocks until the 'fake' block is erased .*/
1146:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(0 < bytes)
1147:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1148:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Send FCU command to erase block */
1149:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = _Flash_Erase_Command((volatile uint8_t *)start_addr);
1150:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1151:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Advance pointer to next block */
1152:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         start_addr += DF_BLOCK_SIZE;
1153:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1154:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Subtract off bytes erased */
1155:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         bytes -= DF_BLOCK_SIZE;
1156:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1157:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1158:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Leave Program/Erase Mode */
1159:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
1160:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1161:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1162:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1163:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1164:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return erase result */
1165:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1166:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1167:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1168:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashEraseRange
1169:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1170:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1171:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1172:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1173:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _Flash_Erase_Command
1174:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Issues the FCU command to erase a flash block
1175:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
1176:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash programming,
1177:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                this function can reside and execute in Flash.
1178:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : erase_addr = An address in the block to be erased
1179:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
1180:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
1181:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1182:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Flash_Erase_Command(volatile uint8_t * const erase_addr)
1183:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1184:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare timer wait count variable */
1185:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
1186:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare erase operation result container variable */
1187:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
1188:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1189:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Send the FCU Command */
1190:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *erase_addr = 0x20;
1191:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *erase_addr = 0xD0;
1192:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1193:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set the wait counter timeout duration */
1194:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ERASE;
1195:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1196:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Wait while FCU operation is in progress */
1197:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
1198:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1199:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Decrement the wait counter */
1200:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
1201:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1202:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the wait counter has reached zero */
1203:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
1204:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1205:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1206:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Maximum timeout duration for erasing a ROM block has
1207:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                elapsed, assuming operation failure - reset the FCU */
1208:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
1209:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1210:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
1211:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
1212:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1213:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1214:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1215:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if erase operation was successful by checking
1216:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        bit 'ERSERR' (bit5) and 'ILGLERR' (bit 6) of register 'FSTATR0' */
1217:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check FCU error */
1218:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.ERSERR  == 1))
1219:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1220:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;
1221:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1222:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1223:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return erase result */
1224:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1225:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1226:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1227:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _Flash_Erase_Command
1228:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1229:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1230:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1231:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashWrite
1232:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Writes bytes into flash.
1233:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
1234:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash programming,
1235:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                this function can reside and execute in Flash.
1236:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : flash_addr - Flash address location to write to. This address
1237:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                             must be on a program boundary (e.g. RX62N has
1238:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                             256-byte ROM writes and 8-byte DF writes).
1239:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                buffer_addr - Address location of data buffer to write
1240:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                              into flash.
1241:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                bytes - The number of bytes to write. You must always pass a
1242:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                        multiple of the programming size (e.g. RX62N has
1243:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                        256-byte ROM writes and 8-byte DF writes).
1244:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
1245:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
1246:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_ALIGNED = Flash address was not on correct boundary
1247:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_BYTES = Number of bytes did not match programming
1248:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                                    size of ROM or DF.
1249:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_ADDRESS = Invalid address
1250:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_ERROR_BOUNDARY = (ROM) Cannot write across flash areas.
1251:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Flash is busy with another operation
1252:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashWrite_1 ( uint32_t flash_addr,
1254:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                          uint32_t buffer_addr,
1255:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                          uint16_t bytes )
1256:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1257:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare result container and number of bytes to write variables */
1258:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
1259:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t num_byte_to_write;
1260:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1261:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Take off upper byte since for programming/erase addresses for ROM are
1262:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	the same as read addresses except upper byte is masked off to 0's.
1263:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	Data Flash addresses are not affected. */
1264:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     flash_addr &= 0x00FFFFFF;
1265:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1266:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* ROM area or Data Flash area - Check for DF first */
1267:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( flash_addr >= DF_ADDRESS && (flash_addr < DF_ADDRESS + DF_SIZE) )
1268:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1269:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the number of bytes were passed is a multiple of the
1270:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            programming size for the data flash */
1271:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( bytes & (DF_PROGRAM_SIZE_SMALL-1) )
1272:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1273:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return number of bytes not a multiple of the programming size */
1274:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_BYTES;
1275:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1276:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check for an address on a programming boundary. */
1277:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( flash_addr & (DF_PROGRAM_SIZE_SMALL-1) )
1278:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1279:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return address not on a programming boundary */
1280:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_ALIGNED;
1281:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1282:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1283:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check for ROM area */
1284:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( (flash_addr >= ROM_PE_ADDR) &&	(flash_addr < ROM_PE_ADDR + ROM_SIZE) )
1285:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1286:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the number of bytes were passed is a multiple of the
1287:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            programming size for ROM */
1288:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( bytes & (ROM_PROGRAM_SIZE-1) )
1289:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1290:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return number of bytes not a multiple of the programming size */
1291:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_BYTES;
1292:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1293:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1294:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check for an address on a programming boundary. */
1295:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( flash_addr & (ROM_PROGRAM_SIZE-1))
1296:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1297:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return address not on a ROM programming byte boundary */
1298:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_ALIGNED;
1299:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1300:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1301:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check for attempts to program over flash area boundaries. These
1302:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****            boundaries are defined in r_flash_api_rx600.h as 'ROM_AREA_#'. */
1303:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1304:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if((flash_addr < (ROM_AREA_0))	&& ((flash_addr + bytes) > ROM_AREA_0))
1305:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1306:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return cannot write across a flash area boundary */
1307:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_BOUNDARY;
1308:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1309:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1310:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1311:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1312:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return invalid flash address */
1313:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_ERROR_ADDRESS;
1314:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1315:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1316:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */
1317:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_WRITING) != FLASH_SUCCESS )
1318:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1319:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
1320:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
1321:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1322:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1323:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Do we want to program a DF area or ROM area? */
1324:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( flash_addr < GET_BLOCK_ADDR(ROM_NUM_BLOCKS-1) )
1325:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1326:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set current FCU mode to data flash PE */
1327:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
1328:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1329:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1330:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1331:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set FCU to ROM PE mode */
1332:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = ROM_PE_MODE;
1333:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1334:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1335:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter PE mode, check if operation is successful */
1336:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode( flash_addr, bytes ) != FLASH_SUCCESS)
1337:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1338:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
1339:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
1340:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1341:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return operation failure */
1342:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
1343:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1344:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1345:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifdef  IGNORE_LOCK_BITS
1346:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Cancel the ROM Protect feature
1347:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        NOTE: If you are using block locking feature to protect your data,
1348:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        then comment out 'IGNORE_LOCK_BITS' in Flash_API_RX600_UserConfig.h */
1349:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
1350:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
1351:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Only disable lock bit protection if user has specified to
1352:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        do so earlier */
1353:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( lock_bit_protection == FALSE )
1354:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1355:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Cancel the ROM Protect feature */
1356:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FPROTR.WORD = 0x5501;
1357:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1358:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1359:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1360:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1361:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if FCU mode is set to data flash PE */
1362:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( current_mode == FLD_PE_MODE )
1363:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1364:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Iterate while there are still bytes remaining to write */
1365:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while( bytes )
1366:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1367:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Check if address is on a data flash programming boundary, and
1368:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                there is at least 1 'page' remaining to write. */
1369:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Not all MCUs have two programming sizes for the data flash. If a
1370:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                MCU only has 1 then DF_PROGRAM_SIZE_SMALL is defined and not
1371:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                DF_PROGRAM_SIZE_LARGE. */
1372:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(DF_PROGRAM_SIZE_LARGE)
1373:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( (bytes >= DF_PROGRAM_SIZE_LARGE) &&
1374:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     ((flash_addr & (DF_PROGRAM_SIZE_LARGE-1)) == 0x00))
1375:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
1376:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Use large write size since it's more time efficient */
1377:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 num_byte_to_write = DF_PROGRAM_SIZE_LARGE;
1378:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
1379:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             else
1380:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
1381:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Cannot use large program size, use small */
1382:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 num_byte_to_write = DF_PROGRAM_SIZE_SMALL;
1383:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
1384:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
1385:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Set the next data transfer size to be DF_PROGRAM_SIZE_SMALL */
1386:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             num_byte_to_write = DF_PROGRAM_SIZE_SMALL;
1387:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1388:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1389:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Call the Programming function, store the operation status in the
1390:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                container variable, result */
1391:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = _DataFlash_Write( flash_addr, buffer_addr, num_byte_to_write);
1392:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1393:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Check the container variable result for errors */
1394:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( result != FLASH_SUCCESS )
1395:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
1396:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Data flash write error detected, break from flash write
1397:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                    while loop prematurely */
1398:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 break;
1399:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
1400:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1401:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Increment the flash address and the buffer address by the size
1402:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                of the transfer thats just completed */
1403:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             flash_addr += num_byte_to_write;
1404:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             buffer_addr += num_byte_to_write;
1405:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1406:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Decrement the number of bytes remaining by the size of the last
1407:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                flash write */
1408:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             bytes -= num_byte_to_write;
1409:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1411:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Catch-all - FCU mode must be ROM PE */
1412:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1413:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1414:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Iterate loop while there are still bytes remaining to write */
1415:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while( bytes )
1416:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1417:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Call the Programming function */
1418:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = _ROM_Write(flash_addr, buffer_addr);
1419:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1420:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Check for errors */
1421:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( result != FLASH_SUCCESS )
1422:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
1423:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 /* Stop programming */
1424:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 break;
1425:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
1426:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1427:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Increment the flash address and the buffer address by the size
1428:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                of the transfer thats just completed */
1429:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             flash_addr += ROM_PROGRAM_SIZE;
1430:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             buffer_addr += ROM_PROGRAM_SIZE;
1431:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1432:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Decrement the number of bytes remaining by the size of the last
1433:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                flash write */
1434:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             bytes -= ROM_PROGRAM_SIZE;
1435:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1436:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1437:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1438:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Leave Program/Erase Mode */
1439:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
1440:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1441:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1442:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1443:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1444:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return flash programming result */
1445:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1446:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1447:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1448:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashWrite
1449:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1450:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1451:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1452:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _Notify_Peripheral_Clock
1453:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Notifies FCU or clock supplied to flash unit
1454:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
1455:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash programming,
1456:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                this function can reside and execute in Flash.
1457:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : flash_addr - Flash address you will be erasing or writing to
1458:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
1459:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
1460:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1461:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Notify_Peripheral_Clock(volatile uint8_t * flash_addr)
1462:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1463:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait counter variable */
1464:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
1465:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1466:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Notify Peripheral Clock(PCK) */
1467:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set frequency of PCK */
1468:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.PCKAR.WORD = (FLASH_CLOCK_FREQUENCY / 1000000);
1469:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1470:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Execute Peripheral Clock Notification Commands */
1471:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *flash_addr = 0xE9;
1472:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *flash_addr = 0x03;
1473:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint16_t *)flash_addr = 0x0F0F;
1474:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint16_t *)flash_addr = 0x0F0F;
1475:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint16_t *)flash_addr = 0x0F0F;
1476:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *flash_addr = 0xD0;
1477:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1478:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set timeout wait duration */
1479:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_NOTIFY_PERIPHERAL_CLOCK;
1480:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1481:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check FRDY */
1482:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
1483:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1484:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Decrement wait counter */
1485:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
1486:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1487:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if wait counter has reached zero */
1488:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
1489:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1490:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Timeout duration elapsed, assuming operation failure - Reset
1491:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                FCU */
1492:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
1493:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1494:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure  */
1495:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_FAILURE;
1496:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1497:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1498:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1499:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check ILGLERR */
1500:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)
1501:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1502:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure*/
1503:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
1504:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1505:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1506:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return FLASH_SUCCESS, operation success */
1507:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
1508:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1509:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1510:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function _Notify_Peripheral_Clock
1511:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1512:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1513:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1514:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _Flash_Reset
1515:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Reset the FCU.
1516:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                NOTE: This function MUST execute from in RAM for 'ROM Area'
1517:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, but if you are ONLY doing Data Flash
1518:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                programming, this function can reside and execute in Flash.
1519:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : none
1520:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : none
1521:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1522:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** void _Flash_Reset(void)
1523:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1524:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare wait counter variable */
1525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t	wait_cnt;
1526:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1527:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Reset the FCU */
1528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRESETR.WORD = 0xCC01;
1529:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1530:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Give FCU time to reset */
1531:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_tRESW;
1532:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1533:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Wait until the timer reaches zero */
1534:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(wait_cnt != 0)
1535:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1536:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Decrement the timer count each iteration */
1537:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
1538:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1539:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1540:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1541:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1542:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1543:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* FCU is not reset anymore */
1544:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRESETR.WORD = 0xCC00;
1545:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1546:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM Read mode */
1547:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FENTRYR.WORD = 0xAA00;
1548:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1549:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Flash write/erase disabled */
1550:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FWEPROR.BYTE = 0x02;
1551:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1552:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1553:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _Flash_Reset
1554:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1555:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1556:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1557:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashGetStatus
1558:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Returns the current state of the flash
1559:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : none
1560:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Flash is ready to use
1561:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Flash is busy with another operation
1562:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1563:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashGetStatus(void)
1564:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1565:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1566:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return flash status */
1567:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( flash_state == FLASH_READY )
1568:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1569:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_SUCCESS;
1570:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1571:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1572:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_BUSY;
1573:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1574:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1575:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashGetStatus
1576:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1577:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1578:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1579:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _FlashGrabState
1580:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Attempt to grab the flash state to perform an operation
1581:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : Which state to attempt to transition to
1582:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = State was grabbed
1583:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Flash is busy with another operation
1584:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1585:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _FlashGrabState(enum Flash_States new_state)
1586:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
   9                             		.loc 1 1586 0
  10                             	.LVL0:
1587:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Variable used in trying to grab semaphore. Using the xchg instruction
1588:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****        makes this atomic */
1589:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     int32_t semaphore = 1;
1590:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1591:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Try to grab semaphore to change state */
1592:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*    xchg(&semaphore, &flash_semaphore);*/
1593:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1594:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1595:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  11                             		.loc 1 1595 0
  12                             	 ; 1595 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  13 0000 03                      		nop
  14                             	 ; 0 "" 2
1596:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  15                             		.loc 1 1596 0
  16                             	 ; 1596 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  17 0001 03                      		nop
  18                             	 ; 0 "" 2
1597:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  19                             		.loc 1 1597 0
  20                             	 ; 1597 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  21 0002 03                      		nop
  22                             	 ; 0 "" 2
1598:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  23                             		.loc 1 1598 0
  24                             	 ; 1598 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  25 0003 03                      		nop
  26                             	 ; 0 "" 2
1599:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  27                             		.loc 1 1599 0
  28                             	 ; 1599 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  29 0004 03                      		nop
  30                             	 ; 0 "" 2
  31                             	.LVL1:
1600:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1601:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     semaphore = flash_semaphore;
1602:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1603:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  32                             		.loc 1 1603 0
  33                             	 ; 1603 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  34 0005 03                      		nop
  35                             	 ; 0 "" 2
1604:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  36                             		.loc 1 1604 0
  37                             	 ; 1604 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  38 0006 03                      		nop
  39                             	 ; 0 "" 2
1605:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  40                             		.loc 1 1605 0
  41                             	 ; 1605 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  42 0007 03                      		nop
  43                             	 ; 0 "" 2
1606:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  44                             		.loc 1 1606 0
  45                             	 ; 1606 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  46 0008 03                      		nop
  47                             	 ; 0 "" 2
1607:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
  48                             		.loc 1 1607 0
  49                             	 ; 1607 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
  50 0009 03                      		nop
  51                             	 ; 0 "" 2
1608:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1609:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1610:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check to see if semaphore was successfully taken */
1611:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( semaphore == 0 )
  52                             		.loc 1 1611 0
  53 000a FB E2 00 00 00 00       		mov.L	#_flash_semaphore, r14
  54 0010 EC EE                   		mov.L	[r14], r14
  55                             	.LVL2:
  56 0012 61 0E                   		cmp	#0, r14
  57 0014 21 0E                   		bne	.L3
1612:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1613:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Semaphore grabbed, we can change state */
1614:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         flash_state = new_state;
  58                             		.loc 1 1614 0
  59 0016 FB 42 00 00 00 00       		mov.L	#_flash_state, r4
  60 001c E3 41                   		mov.L	r1, [r4]
1615:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1616:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return success */
1617:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_SUCCESS;
  61                             		.loc 1 1617 0
  62 001e CF E1                   		mov.B	r14, r1
  63                             	.LVL3:
  64 0020 2E 04                   		bra	.L2
  65                             	.LVL4:
  66                             	.L3:
1618:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1619:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1620:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1621:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is on-going */
1622:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
  67                             		.loc 1 1622 0
  68 0022 66 51                   		mov	#5, r1
  69                             	.LVL5:
  70                             		.balign 2,3,1
  71                             	.L2:
1623:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1624:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
  72                             		.loc 1 1624 0
  73 0024 5B 11                   		movu.B	r1, r1
  74 0026 02                      		rts
  75                             	.LFE16:
  78                             	__FlashReleaseState:
  79                             	.LFB17:
1625:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1626:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _FlashGrabState
1627:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1628:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1629:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1630:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: _FlashReleaseState
1631:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Release state so another flash operation can take place
1632:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : none
1633:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : none
1634:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1635:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static void _FlashReleaseState(void)
1636:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
  80                             		.loc 1 1636 0
1637:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set current FCU mode to READ */
1638:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = READ_MODE;
  81                             		.loc 1 1638 0
  82 0027 FB E2 00 00 00 00       		mov.L	#_current_mode, r14
  83 002d F8 E4 00                		mov.B	#0, [r14]
1639:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1640:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Done with programming */
1641:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     flash_state = FLASH_READY;
  84                             		.loc 1 1641 0
  85 0030 FB E2 00 00 00 00       		mov.L	#_flash_state, r14
  86 0036 F8 E6 00                		mov.L	#0, [r14]
1642:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1643:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release hold on semaphore */
1644:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     flash_semaphore = 0;
  87                             		.loc 1 1644 0
  88 0039 FB E2 00 00 00 00       		mov.L	#_flash_semaphore, r14
  89 003f F8 E6 00                		mov.L	#0, [r14]
  90 0042 02                      		rts
  91                             	.LFE17:
  93                             		.section	.text.get_block_addresses,"ax",@progbits
  94                             		.global	_get_block_addresses
  96                             	_get_block_addresses:
  97                             	.LFB0:
  46:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
  98                             		.loc 1 46 0
  99                             	.LVL6:
  49:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( blockNum < ROM_NUM_BLOCKS)
 100                             		.loc 1 49 0
 101 0000 CF 1E                   		mov.B	r1, r14
 102 0002 61 0E                   		cmp	#0, r14
 103 0004 5B 11                   		movu.B	r1, r1
 104 0006 29 0B                   		blt	.L6
  51:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         retVal = (0x00FFFFFF-FLASH_ERASE_BLK_SZ +1)- (FLASH_ERASE_BLK_SZ*blockNum);
 105                             		.loc 1 51 0
 106 0008 FB EA FF 3F             		mov.L	#0x3fff, r14
 107 000c FF 01 1E                		sub	r1, r14, r1
 108                             	.LVL7:
 109 000f 2E 07                   		bra	.L8
 110                             	.L6:
  55:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         retVal = 0x00100000 + (FLASH_ERASE_BLK_SZ*(blockNum-(ROM_NUM_BLOCKS)));
 111                             		.loc 1 55 0
 112 0011 72 11 80 03             		add	#0x380, r1
 113 0015 03                      		.balign 2,3,1
 114                             	.L8:
 115 0016 6C A1                   		shll	#10, r1
 116                             	.LVL8:
  58:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 117                             		.loc 1 58 0
 118 0018 02                      		rts
 119                             	.LFE0:
 121 0019 03                      		.section	.text._Flash_Init,"ax",@progbits
 122                             		.global	__Flash_Init
 124                             	__Flash_Init:
 125                             	.LFB1:
 117:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 126                             		.loc 1 117 0
 125:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.ROMAEIE = 0;
 127                             		.loc 1 125 0
 128 0000 FB EE 11 C4 7F          		mov.L	#0x7fc411, r14
 129 0005 CC E4                   		mov.B	[r14], r4
 130 0007 7A 74                   		bclr	#7, r4
 131 0009 C3 E4                   		mov.B	r4, [r14]
 126:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.CMDLKIE = 0;
 132                             		.loc 1 126 0
 133 000b CC E4                   		mov.B	[r14], r4
 134 000d 7A 44                   		bclr	#4, r4
 135 000f C3 E4                   		mov.B	r4, [r14]
 127:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.DFLAEIE = 0;
 136                             		.loc 1 127 0
 137 0011 CC E4                   		mov.B	[r14], r4
 138 0013 7A 34                   		bclr	#3, r4
 139 0015 C3 E4                   		mov.B	r4, [r14]
 128:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.DFLRPEIE = 0;
 140                             		.loc 1 128 0
 141 0017 CC E4                   		mov.B	[r14], r4
 142 0019 7A 14                   		bclr	#1, r4
 143 001b C3 E4                   		mov.B	r4, [r14]
 129:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FAEINT.BIT.DFLWPEIE = 0;
 144                             		.loc 1 129 0
 145 001d CC E4                   		mov.B	[r14], r4
 146 001f 7A 04                   		bclr	#0, r4
 147 0021 C3 E4                   		mov.B	r4, [r14]
 134:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IPR(FCU, FIFERR) = 0;
 148                             		.loc 1 134 0
 149 0023 FB EE 00 70 08          		mov.L	#0x87000, r14
 150 0028 CE E4 01 03             		mov.B	769[r14], r4
 151 002c 75 24 F0                		and	#-16, r4
 152 002f CB E4 01 03             		mov.B	r4, 769[r14]
 135:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IEN(FCU, FIFERR) = 0;
 153                             		.loc 1 135 0
 154 0033 CE E4 02 02             		mov.B	514[r14], r4
 155 0037 7A 54                   		bclr	#5, r4
 156 0039 CB E4 02 02             		mov.B	r4, 514[r14]
 138:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IPR(FCU, FRDYI) = 0;
 157                             		.loc 1 138 0
 158 003d CE E4 02 03             		mov.B	770[r14], r4
 159 0041 75 24 F0                		and	#-16, r4
 160 0044 CB E4 02 03             		mov.B	r4, 770[r14]
 139:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     IEN(FCU, FRDYI) = 0;
 161                             		.loc 1 139 0
 162 0048 CE E4 02 02             		mov.B	514[r14], r4
 163 004c 7A 74                   		bclr	#7, r4
 164 004e CB E4 02 02             		mov.B	r4, 514[r14]
 145:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FENTRYR.WORD != 0x0000)
 165                             		.loc 1 145 0
 166 0052 FB EE B2 FF 7F          		mov.L	#0x7fffb2, r14
 167 0057 5C E4                   		movu.W	[r14], r4
 168 0059 61 04                   		cmp	#0, r4
 169 005b 20 07                   		beq	.L10
 149:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FENTRYR.WORD = 0xAA00;
 170                             		.loc 1 149 0
 171 005d F8 E9 00 AA             		mov.W	#0xffffaa00, [r14]
 172 0061 03                      		.balign 2,3,4
 173                             	.L10:
 153:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FCURAME.WORD = 0xC401;
 174                             		.loc 1 153 0
 175 0062 FB EE 54 C4 7F          		mov.L	#0x7fc454, r14
 176 0067 F8 E9 01 C4             		mov.W	#0xffffc401, [r14]
 177                             	.LVL9:
 162:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     dst = (uint32_t *)FCU_RAM_TOP;
 178                             		.loc 1 162 0
 179 006b FB EE 00 80 7F          		mov.L	#0x7f8000, r14
 180                             	.LVL10:
 181                             		.balign 2,3,5
 182                             	.L11:
 116:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t _Flash_Init(void)
 183                             		.loc 1 116 0 discriminator 2
 184 0070 70 E4 00 60 80 FE       		add	#0xfe806000, r14, r4
 168:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *dst = *src;
 185                             		.loc 1 168 0 discriminator 2
 186 0076 EC 44                   		mov.L	[r4], r4
 187 0078 FD 22 E4                		mov.L	r4, [r14+]
 188                             	.LVL11:
 165:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     for( i=0; i<(FCU_RAM_SIZE/4); i++)
 189                             		.loc 1 165 0 discriminator 2
 190 007b 77 0E 00 A0 7F          		cmp	#0x7fa000, r14
 191 0080 21 F0                   		bne	.L11
 176:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     fcu_transfer_complete = 1;
 192                             		.loc 1 176 0
 193 0082 FB E2 00 00 00 00       		mov.L	#_fcu_transfer_complete, r14
 194                             	.LVL12:
 195 0088 F8 E4 01                		mov.B	#1, [r14]
 180:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 196                             		.loc 1 180 0
 197 008b 66 01                   		mov.L	#0, r1
 198 008d 02                      		rts
 199                             	.LFE1:
 201                             		.section	.text.R_FlashDataAreaAccess,"ax",@progbits
 202                             		.global	_R_FlashDataAreaAccess
 204                             	_R_FlashDataAreaAccess:
 205                             	.LFB5:
 523:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 206                             		.loc 1 523 0
 207                             	.LVL13:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 208                             		.loc 1 525 0
 209 0000 5B 11                   		movu.B	r1, r1
 210                             	.LVL14:
 211 0002 FB EE 40 C4 7F          		mov.L	#0x7fc440, r14
 212 0007 76 31 00 2D             		or	#0x2d00, r1
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 213                             		.loc 1 528 0
 214 000b 5B 22                   		movu.B	r2, r2
 215                             	.LVL15:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 216                             		.loc 1 525 0
 217 000d D3 E1                   		mov.W	r1, [r14]
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 218                             		.loc 1 528 0
 219 000f 76 32 00 1E             		or	#0x1e00, r2
 220 0013 FB EE 50 C4 7F          		mov.L	#0x7fc450, r14
 221 0018 D3 E2                   		mov.W	r2, [r14]
 222 001a 02                      		rts
 223                             	.LFE5:
 225                             		.section	.PRAM
 226                             		.global	__Flash_Reset
 228                             	__Flash_Reset:
 229                             	.LFB14:
1523:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 230                             		.loc 1 1523 0
1528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRESETR.WORD = 0xCC01;
 231                             		.loc 1 1528 0
 232 0043 FB EE B6 FF 7F          		mov.L	#0x7fffb6, r14
1523:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 233                             		.loc 1 1523 0
 234 0048 60 40                   		sub	#4, r0
 235                             	.LCFI0:
1528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRESETR.WORD = 0xCC01;
 236                             		.loc 1 1528 0
 237 004a F8 E9 01 CC             		mov.W	#0xffffcc01, [r14]
1531:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_tRESW;
 238                             		.loc 1 1531 0
 239 004e F8 0A BC 02             		mov.L	#0x2bc, [r0]
 240                             	.LVL16:
1534:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(wait_cnt != 0)
 241                             		.loc 1 1534 0
 242 0052 2E 08                   		bra	.L18
 243                             	.L19:
1537:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 244                             		.loc 1 1537 0
 245 0054 EC 0E                   		mov.L	[r0], r14
 246 0056 60 1E                   		sub	#1, r14
 247                             	.LVL17:
 248 0058 E3 0E                   		mov.L	r14, [r0]
 249                             	.LVL18:
 250                             		.balign 2,3,1
 251                             	.L18:
1534:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(wait_cnt != 0)
 252                             		.loc 1 1534 0 discriminator 1
 253 005a EC 0E                   		mov.L	[r0], r14
 254 005c 61 0E                   		cmp	#0, r14
 255 005e 21 F6                   		bne	.L19
1541:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
 256                             		.loc 1 1541 0
 257 0060 39 C7 FF                		bsr	__FlashReleaseState
 258                             	.LVL19:
1544:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRESETR.WORD = 0xCC00;
 259                             		.loc 1 1544 0
 260 0063 FB EE B6 FF 7F          		mov.L	#0x7fffb6, r14
 261 0068 F8 E9 00 CC             		mov.W	#0xffffcc00, [r14]
1547:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FENTRYR.WORD = 0xAA00;
 262                             		.loc 1 1547 0
 263 006c FB EE B2 FF 7F          		mov.L	#0x7fffb2, r14
 264 0071 F8 E9 00 AA             		mov.W	#0xffffaa00, [r14]
1550:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FWEPROR.BYTE = 0x02;
 265                             		.loc 1 1550 0
 266 0075 FB EE 96 C2 08          		mov.L	#0x8c296, r14
 267 007a F8 E4 02                		mov.B	#2, [r14]
1551:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 268                             		.loc 1 1551 0
 269 007d 67 01                   		rtsd	#4
 270                             	.LFE14:
 273                             	__Enter_PE_Mode.isra.0:
 274                             	.LFB30:
 620:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Enter_PE_Mode( uint32_t flash_addr, uint16_t bytes )
 275                             		.loc 1 620 0
 276                             	.LVL20:
 277 007f 7E A7                   		push.l	r7
 278                             	.LCFI1:
 624:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fcu_transfer_complete )
 279                             		.loc 1 624 0
 280 0081 FB E2 00 00 00 00       		mov.L	#_fcu_transfer_complete, r14
 281 0087 58 EE                   		movu.B	[r14], r14
 620:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Enter_PE_Mode( uint32_t flash_addr, uint16_t bytes )
 282                             		.loc 1 620 0
 283 0089 60 40                   		sub	#4, r0
 284                             	.LCFI2:
 624:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fcu_transfer_complete )
 285                             		.loc 1 624 0
 286 008b 61 0E                   		cmp	#0, r14
 620:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** static uint8_t _Enter_PE_Mode( uint32_t flash_addr, uint16_t bytes )
 287                             		.loc 1 620 0
 288 008d EF 17                   		mov.L	r1, r7
 624:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fcu_transfer_complete )
 289                             		.loc 1 624 0
 290 008f 20 1C                   		beq	.L22
 291                             	.LVL21:
 292 0091 03                      		.balign 2,3,4
 293                             	.L25:
 636:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FENTRYR.WORD = 0xAA00;
 294                             		.loc 1 636 0
 295 0092 FB EE B2 FF 7F          		mov.L	#0x7fffb2, r14
 296 0097 F8 E9 00 AA             		mov.W	#0xffffaa00, [r14]
 640:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
 297                             		.loc 1 640 0
 298                             	 ; 640 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
 299 009b 03                      		nop
 300                             	 ; 0 "" 2
 641:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     __asm__("nop");
 301                             		.loc 1 641 0
 302                             	 ; 641 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_hal_Flash.c" 1
 303 009c 03                      		nop
 304                             	 ; 0 "" 2
 644:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( current_mode == ROM_PE_MODE)
 305                             		.loc 1 644 0
 306 009d FB 42 00 00 00 00       		mov.L	#_current_mode, r4
 307 00a3 58 44                   		movu.B	[r4], r4
 308 00a5 61 14                   		cmp	#1, r4
 309 00a7 21 22                   		bne	.L47
 310 00a9 2E 0F                   		bra	.L23
 311                             	.LVL22:
 312                             	.L22:
 628:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( _Flash_Init() != FLASH_SUCCESS )
 313                             		.loc 1 628 0
 314 00ab 05 00 00 00             		bsr	__Flash_Init
 315                             	.LVL23:
 316 00af 5B 11                   		movu.B	r1, r1
 317 00b1 61 01                   		cmp	#0, r1
 318 00b3 20 DF                   		beq	.L25
 319 00b5 38 FA 00                		bra	.L35
 320                             	.L23:
 647:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FRDYIE.BIT.FRDYIE = 0;
 321                             		.loc 1 647 0
 322 00b8 FB 4E 12 C4 7F          		mov.L	#0x7fc412, r4
 323 00bd CC 43                   		mov.B	[r4], r3
 324 00bf 7A 03                   		bclr	#0, r3
 325 00c1 C3 43                   		mov.B	r3, [r4]
 648:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FENTRYR.WORD = 0xAA01;
 326                             		.loc 1 648 0
 327 00c3 F8 E9 01 AA             		mov.W	#0xffffaa01, [r14]
 328 00c7 2E 3D                   		bra	.L27
 329                             	.L47:
 651:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( current_mode == FLD_PE_MODE )
 330                             		.loc 1 651 0
 331 00c9 61 24                   		cmp	#2, r4
 332 00cb 3B E4 00                		bne	.L35
 654:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FRDYIE.BIT.FRDYIE = 0;
 333                             		.loc 1 654 0
 334 00ce FB 4E 12 C4 7F          		mov.L	#0x7fc412, r4
 335 00d3 CC 43                   		mov.B	[r4], r3
 336 00d5 7A 03                   		bclr	#0, r3
 337 00d7 C3 43                   		mov.B	r3, [r4]
 657:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FENTRYR.WORD = 0xAA80;
 338                             		.loc 1 657 0
 339 00d9 F8 E9 80 AA             		mov.W	#0xffffaa80, [r14]
 340                             	.LVL24:
 341                             	.LBB9:
 342                             	.LBB10:
 203:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)
 343                             		.loc 1 203 0
 344 00dd FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 345 00e2 CC EE                   		mov.B	[r14], r14
 346 00e4 75 2E 40                		and	#64, r14
 347 00e7 5B EE                   		movu.B	r14, r14
 348 00e9 61 0E                   		cmp	#0, r14
 349 00eb 20 11                   		beq	.L29
 207:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(FLASH.FASTAT.BYTE != 0x10)
 350                             		.loc 1 207 0
 351 00ed FB EE 10 C4 7F          		mov.L	#0x7fc410, r14
 352 00f2 58 E4                   		movu.B	[r14], r4
 353 00f4 75 54 10                		cmp	#16, r4
 354 00f7 20 05                   		beq	.L29
 211:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             FLASH.FASTAT.BYTE = 0x10;
 355                             		.loc 1 211 0
 356 00f9 F8 E4 10                		mov.B	#16, [r14]
 357                             		.balign 2,3,4
 358                             	.L29:
 216:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *ptrb = 0x50;
 359                             		.loc 1 216 0
 360 00fc FB EE 00 00 10          		mov.L	#0x100000, r14
 361 0101 F8 E4 50                		mov.B	#0x50, [r14]
 362                             	.LVL25:
 363                             		.balign 2,3,4
 364                             	.L27:
 365                             	.LBE10:
 366                             	.LBE9:
 674:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FWEPROR.BYTE = 0x01;
 367                             		.loc 1 674 0
 368 0104 FB EE 96 C2 08          		mov.L	#0x8c296, r14
 369 0109 F8 E4 01                		mov.B	#1, [r14]
 677:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(		(FLASH.FSTATR0.BIT.ILGLERR == 1)
 370                             		.loc 1 677 0
 371 010c FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 372 0111 CC E4                   		mov.B	[r14], r4
 373 0113 75 24 40                		and	#64, r4
 374 0116 5B 44                   		movu.B	r4, r4
 375 0118 61 04                   		cmp	#0, r4
 376 011a 3B 95 00                		bne	.L35
 678:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||	(FLASH.FSTATR0.BIT.ERSERR  == 1)
 377                             		.loc 1 678 0
 378 011d CC E4                   		mov.B	[r14], r4
 379 011f 75 24 20                		and	#32, r4
 380 0122 5B 44                   		movu.B	r4, r4
 381 0124 61 04                   		cmp	#0, r4
 382 0126 3B 89 00                		bne	.L35
 679:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||	(FLASH.FSTATR0.BIT.PRGERR  == 1)
 383                             		.loc 1 679 0
 384 0129 CC E4                   		mov.B	[r14], r4
 385 012b 75 24 10                		and	#16, r4
 386 012e 5B 44                   		movu.B	r4, r4
 387 0130 61 04                   		cmp	#0, r4
 388 0132 21 7D                   		bne	.L35
 389                             	.LVL26:
 390                             	.LBB11:
 391                             	.LBB12:
 680:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||	(FLASH.FSTATR1.BIT.FCUERR  == 1))
 392                             		.loc 1 680 0
 393 0134 FB 4E B1 FF 7F          		mov.L	#0x7fffb1, r4
 394 0139 CC 41                   		mov.B	[r4], r1
 395 013b 76 21 80 00             		and	#0x80, r1
 396 013f 5B 11                   		movu.B	r1, r1
 397 0141 61 01                   		cmp	#0, r1
 398 0143 21 6C                   		bne	.L35
 687:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( fcu_pclk_command == 0 )
 399                             		.loc 1 687 0
 400 0145 FB 42 00 00 00 00       		mov.L	#_fcu_pclk_command, r4
 401 014b 58 44                   		movu.B	[r4], r4
 402 014d 61 04                   		cmp	#0, r4
 403 014f 21 63                   		bne	.L26
 691:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FRDYIE.BIT.FRDYIE = 0;
 404                             		.loc 1 691 0
 405 0151 FB 4E 12 C4 7F          		mov.L	#0x7fc412, r4
 406 0156 CC 43                   		mov.B	[r4], r3
 407 0158 7A 03                   		bclr	#0, r3
 408 015a C3 43                   		mov.B	r3, [r4]
 409                             	.LVL27:
 410                             	.LBB13:
 411                             	.LBB14:
1468:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.PCKAR.WORD = (FLASH_CLOCK_FREQUENCY / 1000000);
 412                             		.loc 1 1468 0
 413 015c FB 4E E8 FF 7F          		mov.L	#0x7fffe8, r4
 414 0161 3D 40 14                		mov.W	#20, [r4]
1471:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *flash_addr = 0xE9;
 415                             		.loc 1 1471 0
 416 0164 F8 74 E9                		mov.B	#-23, [r7]
1472:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *flash_addr = 0x03;
 417                             		.loc 1 1472 0
 418 0167 3C 70 03                		mov.B	#3, [r7]
1473:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint16_t *)flash_addr = 0x0F0F;
 419                             		.loc 1 1473 0
 420 016a F8 79 0F 0F             		mov.W	#0xf0f, [r7]
1474:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint16_t *)flash_addr = 0x0F0F;
 421                             		.loc 1 1474 0
 422 016e F8 79 0F 0F             		mov.W	#0xf0f, [r7]
1475:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint16_t *)flash_addr = 0x0F0F;
 423                             		.loc 1 1475 0
 424 0172 F8 79 0F 0F             		mov.W	#0xf0f, [r7]
1476:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *flash_addr = 0xD0;
 425                             		.loc 1 1476 0
 426 0176 F8 74 D0                		mov.B	#-48, [r7]
1479:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_NOTIFY_PERIPHERAL_CLOCK;
 427                             		.loc 1 1479 0
 428 0179 F8 0A B8 0B             		mov.L	#0xbb8, [r0]
 429                             	.LVL28:
 430 017d 2E 14                   		bra	.L31
 431                             	.LVL29:
 432                             	.L33:
1485:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 433                             		.loc 1 1485 0
 434 017f EC 07                   		mov.L	[r0], r7
 435 0181 60 17                   		sub	#1, r7
 436                             	.LVL30:
 437 0183 E3 07                   		mov.L	r7, [r0]
 438                             	.LVL31:
1488:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 439                             		.loc 1 1488 0
 440 0185 EC 07                   		mov.L	[r0], r7
 441                             	.LVL32:
 442 0187 61 07                   		cmp	#0, r7
 443 0189 21 08                   		bne	.L31
1492:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
 444                             		.loc 1 1492 0
 445 018b 05 00 00 00             		bsr	__Flash_Reset
 446                             	.LVL33:
 447 018f 2E 20                   		bra	.L35
 448                             	.L31:
1482:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 449                             		.loc 1 1482 0
 450 0191 CC E7                   		mov.B	[r14], r7
 451 0193 76 27 80 00             		and	#0x80, r7
 452 0197 5B 77                   		movu.B	r7, r7
 453 0199 61 07                   		cmp	#0, r7
 454 019b 20 E4                   		beq	.L33
1500:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)
 455                             		.loc 1 1500 0
 456 019d FB 7E B0 FF 7F          		mov.L	#0x7fffb0, r7
 457 01a2 CC 71                   		mov.B	[r7], r1
 458 01a4 75 21 40                		and	#64, r1
 459 01a7 5B 11                   		movu.B	r1, r1
 460 01a9 61 01                   		cmp	#0, r1
 461 01ab 21 04                   		bne	.L35
 462 01ad 2E 09                   		bra	.L48
 463                             	.LVL34:
 464                             	.L35:
 465                             	.LBE14:
 466                             	.LBE13:
 683:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 467                             		.loc 1 683 0
 468 01af 66 61                   		mov	#6, r1
 469 01b1 03                      		.balign 2,3,1
 470                             	.L26:
 471 01b2 5B 11                   		movu.B	r1, r1
 472 01b4 2E 0D                   		bra	.L49
 473                             	.LVL35:
 474                             	.L48:
 701:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fcu_pclk_command = 1;
 475                             		.loc 1 701 0
 476 01b6 FB 72 00 00 00 00       		mov.L	#_fcu_pclk_command, r7
 477 01bc 3C 70 01                		mov.B	#1, [r7]
 478 01bf 2E F3                   		bra	.L26
 479                             	.LVL36:
 480                             	.L49:
 481                             	.LBE12:
 482                             	.LBE11:
 706:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 483                             		.loc 1 706 0
 484 01c1 3F 77 02                		rtsd	#8, r7-r7
 485                             	.LFE30:
 488                             	__Exit_PE_Mode:
 489                             	.LFB8:
 721:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 490                             		.loc 1 721 0
 491                             	.LVL37:
 492 01c4 60 40                   		sub	#4, r0
 493                             	.LCFI3:
 729:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ERASE;
 494                             		.loc 1 729 0
 495 01c6 F8 02 00 5A 62 02       		mov.L	#0x2625a00, [r0]
 496                             	.LVL38:
 732:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 497                             		.loc 1 732 0
 498 01cc FB 4E B0 FF 7F          		mov.L	#0x7fffb0, r4
 499 01d1 2E 14                   		bra	.L52
 500                             	.L54:
 735:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 501                             		.loc 1 735 0
 502 01d3 EC 0E                   		mov.L	[r0], r14
 503 01d5 60 1E                   		sub	#1, r14
 504                             	.LVL39:
 505 01d7 E3 0E                   		mov.L	r14, [r0]
 506                             	.LVL40:
 738:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 507                             		.loc 1 738 0
 508 01d9 EC 0E                   		mov.L	[r0], r14
 509                             	.LVL41:
 510 01db 61 0E                   		cmp	#0, r14
 511 01dd 21 08                   		bne	.L52
 742:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
 512                             		.loc 1 742 0
 513 01df 05 00 00 00             		bsr	__Flash_Reset
 514                             	.LVL42:
 745:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             break;
 515                             		.loc 1 745 0
 516 01e3 2E 0F                   		bra	.L53
 517                             	.L52:
 732:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 518                             		.loc 1 732 0 discriminator 1
 519 01e5 CC 4E                   		mov.B	[r4], r14
 520 01e7 76 2E 80 00             		and	#0x80, r14
 521 01eb 5B EE                   		movu.B	r14, r14
 522 01ed 61 0E                   		cmp	#0, r14
 523 01ef 20 E4                   		beq	.L54
 524 01f1 03                      		.balign 2,3,4
 525                             	.L53:
 750:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(		(FLASH.FSTATR0.BIT.ILGLERR == 1)
 526                             		.loc 1 750 0
 527 01f2 FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 528 01f7 CC E4                   		mov.B	[r14], r4
 529 01f9 75 24 40                		and	#64, r4
 530 01fc 5B 44                   		movu.B	r4, r4
 531 01fe 61 04                   		cmp	#0, r4
 532 0200 21 18                   		bne	.L55
 751:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||  (FLASH.FSTATR0.BIT.ERSERR  == 1)
 533                             		.loc 1 751 0
 534 0202 CC E4                   		mov.B	[r14], r4
 535 0204 75 24 20                		and	#32, r4
 536 0207 5B 44                   		movu.B	r4, r4
 537 0209 61 04                   		cmp	#0, r4
 538 020b 21 0D                   		bne	.L55
 752:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             ||  (FLASH.FSTATR0.BIT.PRGERR  == 1))
 539                             		.loc 1 752 0
 540 020d CC EE                   		mov.B	[r14], r14
 541 020f 75 2E 10                		and	#16, r14
 542 0212 5B EE                   		movu.B	r14, r14
 543 0214 61 0E                   		cmp	#0, r14
 544 0216 20 4C                   		beq	.L56
 545                             		.balign 2,3,4
 546                             	.L55:
 756:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(FLASH.FSTATR0.BIT.ILGLERR == 1)
 547                             		.loc 1 756 0
 548 0218 FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 549 021d CC EE                   		mov.B	[r14], r14
 550 021f 75 2E 40                		and	#64, r14
 551 0222 5B EE                   		movu.B	r14, r14
 552 0224 61 0E                   		cmp	#0, r14
 553 0226 20 12                   		beq	.L57
 760:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(FLASH.FASTAT.BYTE != 0x10)
 554                             		.loc 1 760 0
 555 0228 FB EE 10 C4 7F          		mov.L	#0x7fc410, r14
 556 022d 58 E4                   		movu.B	[r14], r4
 557 022f 75 54 10                		cmp	#16, r4
 558 0232 20 06                   		beq	.L57
 764:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.FASTAT.BYTE = 0x10;
 559                             		.loc 1 764 0
 560 0234 F8 E4 10                		mov.B	#16, [r14]
 561 0237 03                      		.balign 2,3,5
 562                             	.L57:
 769:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( current_mode == ROM_PE_MODE )
 563                             		.loc 1 769 0
 564 0238 FB E2 00 00 00 00       		mov.L	#_current_mode, r14
 565 023e 58 EE                   		movu.B	[r14], r14
 566 0240 61 1E                   		cmp	#1, r14
 567 0242 21 17                   		bne	.L58
 775:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( FLASH.FENTRYR.BIT.FENTRY0 == 1 )
 568                             		.loc 1 775 0
 569 0244 FB EE B2 FF 7F          		mov.L	#0x7fffb2, r14
 570 0249 DC EE                   		mov.W	[r14], r14
 571 024b FD 74 CE 01             		tst	#1, r14
 572 024f 20 13                   		beq	.L56
 573                             	.LVL43:
 780:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 *pAddr = 0x50;
 574                             		.loc 1 780 0
 575 0251 FB E2 00 00 FE 00       		mov.L	#0xfe0000, r14
 576 0257 2E 07                   		bra	.L71
 577                             	.LVL44:
 578                             	.L58:
 789:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *pAddr = 0x50;
 579                             		.loc 1 789 0
 580 0259 FB EE 00 00 10          		mov.L	#0x100000, r14
 581                             	.LVL45:
 582                             		.balign 2,3,4
 583                             	.L71:
 584 025e F8 E4 50                		mov.B	#0x50, [r14]
 585 0261 03                      		.balign 2,3,4
 586                             	.L56:
 794:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FENTRYR.WORD = 0xAA00;
 587                             		.loc 1 794 0
 588 0262 FB EE B2 FF 7F          		mov.L	#0x7fffb2, r14
 589 0267 F8 E9 00 AA             		mov.W	#0xffffaa00, [r14]
 797:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FRDYIE.BIT.FRDYIE = 0;
 590                             		.loc 1 797 0
 591 026b FB EE 12 C4 7F          		mov.L	#0x7fc412, r14
 592 0270 CC E4                   		mov.B	[r14], r4
 593 0272 7A 04                   		bclr	#0, r4
 594 0274 C3 E4                   		mov.B	r4, [r14]
 800:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FWEPROR.BYTE = 0x02;
 595                             		.loc 1 800 0
 596 0276 FB EE 96 C2 08          		mov.L	#0x8c296, r14
 597 027b F8 E4 02                		mov.B	#2, [r14]
 802:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 598                             		.loc 1 802 0
 599 027e 67 01                   		rtsd	#4
 600                             	.LFE8:
 602                             		.global	_R_FlashWrite_1
 604                             	_R_FlashWrite_1:
 605                             	.LFB12:
1256:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 606                             		.loc 1 1256 0
 607                             	.LVL46:
 608 0280 6E 7C                   		pushm	r7-r12
 609                             	.LCFI4:
1264:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     flash_addr &= 0x00FFFFFF;
 610                             		.loc 1 1264 0
 611 0282 EF 17                   		mov.L	r1, r7
 612 0284 74 27 FF FF FF 00       		and	#0xffffff, r7
 613                             	.LVL47:
1256:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 614                             		.loc 1 1256 0
 615 028a 60 80                   		sub	#8, r0
 616                             	.LCFI5:
1267:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( flash_addr >= DF_ADDRESS && (flash_addr < DF_ADDRESS + DF_SIZE) )
 617                             		.loc 1 1267 0
 618 028c 73 7C 00 00 F0          		add	#0xfff00000, r7, r12
 619 0291 76 0C FF 1F             		cmp	#0x1fff, r12
1256:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 620                             		.loc 1 1256 0
 621 0295 EF 2B                   		mov.L	r2, r11
 622 0297 DF 3A                   		mov.W	r3, r10
1267:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( flash_addr >= DF_ADDRESS && (flash_addr < DF_ADDRESS + DF_SIZE) )
 623                             		.loc 1 1267 0
 624 0299 24 0F                   		bgtu	.L73
1271:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( bytes & (DF_PROGRAM_SIZE_SMALL-1) )
 625                             		.loc 1 1271 0
 626 029b FD 74 CA 01             		tst	#1, r10
 627 029f 3B 63 01                		bne	.L101
1277:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( flash_addr & (DF_PROGRAM_SIZE_SMALL-1) )
 628                             		.loc 1 1277 0
 629 02a2 FD 74 C1 01             		tst	#1, r1
 630 02a6 2E 1D                   		bra	.L118
 631                             	.L73:
1284:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( (flash_addr >= ROM_PE_ADDR) &&	(flash_addr < ROM_PE_ADDR + ROM_SIZE) )
 632                             		.loc 1 1284 0
 633 02a8 70 7C 00 00 02 FF       		add	#0xff020000, r7, r12
 634 02ae 77 0C FF FF 01          		cmp	#0x1ffff, r12
 635 02b3 25 05 38 49 01          		bgtu	.L100
1288:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( bytes & (ROM_PROGRAM_SIZE-1) )
 636                             		.loc 1 1288 0
 637 02b8 FD 74 CA 07             		tst	#7, r10
 638 02bc 3B 46 01                		bne	.L101
1295:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( flash_addr & (ROM_PROGRAM_SIZE-1))
 639                             		.loc 1 1295 0
 640 02bf FD 74 C1 07             		tst	#7, r1
 641                             	.L118:
 642 02c3 3B 43 01                		bne	.L102
1317:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_WRITING) != FLASH_SUCCESS )
 643                             		.loc 1 1317 0
 644 02c6 66 21                   		mov.L	#2, r1
 645 02c8 39 38 FD                		bsr	__FlashGrabState
 646                             	.LVL48:
 647 02cb 5B 11                   		movu.B	r1, r1
 648 02cd 61 01                   		cmp	#0, r1
 649 02cf 3B 3B 01                		bne	.L103
 650                             	.LVL49:
1327:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 651                             		.loc 1 1327 0
 652 02d2 74 07 FF FF FD 00       		cmp	#0xfdffff, r7
 653 02d8 FC DB E4                		scgtu.L	r14
 654 02db 66 24                   		mov.L	#2, r4
 655 02dd FF 0E E4                		sub	r14, r4, r14
 656 02e0 FB C2 00 00 00 00       		mov.L	#_current_mode, r12
1336:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode( flash_addr, bytes ) != FLASH_SUCCESS)
 657                             		.loc 1 1336 0
 658 02e6 EF 71                   		mov.L	r7, r1
1327:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 659                             		.loc 1 1327 0
 660 02e8 C3 CE                   		mov.B	r14, [r12]
1336:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode( flash_addr, bytes ) != FLASH_SUCCESS)
 661                             		.loc 1 1336 0
 662 02ea 39 95 FD                		bsr	__Enter_PE_Mode.isra.0
 663                             	.LVL50:
 664 02ed 5B 11                   		movu.B	r1, r1
 665 02ef 61 01                   		cmp	#0, r1
 666 02f1 20 0A                   		beq	.L78
1339:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 667                             		.loc 1 1339 0
 668 02f3 39 34 FD                		bsr	__FlashReleaseState
 669                             	.LVL51:
1342:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 670                             		.loc 1 1342 0
 671 02f6 66 67                   		mov	#6, r7
 672                             	.LVL52:
 673 02f8 38 14 01                		bra	.L74
 674                             	.LVL53:
 675                             	.L78:
1349:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
 676                             		.loc 1 1349 0
 677 02fb FB EE B4 FF 7F          		mov.L	#0x7fffb4, r14
 678 0300 F8 E9 01 55             		mov.W	#0x5501, [r14]
1362:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( current_mode == FLD_PE_MODE )
 679                             		.loc 1 1362 0
 680 0304 58 CC                   		movu.B	[r12], r12
 681 0306 61 2C                   		cmp	#2, r12
 682 0308 3A 84 00                		beq	.L81
1253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashWrite_1 ( uint32_t flash_addr,
 683                             		.loc 1 1253 0 discriminator 1
 684 030b 4B BA                   		add	r11, r10
 685                             	.LVL54:
 686                             	.LBB21:
 687                             	.LBB22:
 577:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 688                             		.loc 1 577 0 discriminator 1
 689 030d FB CE B0 FF 7F          		mov.L	#0x7fffb0, r12
 690                             	.LBE22:
 691                             	.LBE21:
1362:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( current_mode == FLD_PE_MODE )
 692                             		.loc 1 1362 0 discriminator 1
 693 0312 EF B2                   		mov.L	r11, r2
1415:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while( bytes )
 694                             		.loc 1 1415 0 discriminator 1
 695 0314 5F AA                   		movu.W	r10, r10
1253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashWrite_1 ( uint32_t flash_addr,
 696                             		.loc 1 1253 0 discriminator 1
 697 0316 43 B7                   		sub	r11, r7
 698                             	.LVL55:
 699                             	.LBB25:
 700                             	.LBB23:
 577:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 701                             		.loc 1 577 0 discriminator 1
 702 0318 EF CE                   		mov.L	r12, r14
 703 031a 38 D4 00                		bra	.L80
 704                             	.LVL56:
 705                             	.L90:
 706                             	.LBE23:
 707                             	.LBE25:
1373:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( (bytes >= DF_PROGRAM_SIZE_LARGE) &&
 708                             		.loc 1 1373 0
 709 031d 61 7E                   		cmp	#7, r14
 710 031f 25 09                   		bleu	.L104
1373:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( (bytes >= DF_PROGRAM_SIZE_LARGE) &&
 711                             		.loc 1 1373 0 is_stmt 0 discriminator 1
 712 0321 FD 74 C7 07             		tst	#7, r7
 713 0325 20 07                   		beq	.L105
 714 0327 03                      		.balign 2,3,1
 715                             	.L104:
1373:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( (bytes >= DF_PROGRAM_SIZE_LARGE) &&
 716                             		.loc 1 1373 0
 717 0328 66 2E                   		mov	#2, r14
 718 032a 2E 04                   		bra	.L82
 719                             	.L105:
1377:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 num_byte_to_write = DF_PROGRAM_SIZE_LARGE;
 720                             		.loc 1 1377 0 is_stmt 1
 721 032c 66 8E                   		mov	#8, r14
 722                             		.balign 2,3,1
 723                             	.L82:
 724                             	.LBB26:
 725                             	.LBB27:
 251:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         size = size >> 1;
 726                             		.loc 1 251 0
 727 032e 5B E5                   		movu.B	r14, r5
 728 0330 68 15                   		shlr	#1, r5
 729                             	.LVL57:
 254:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = 0xE8;
 730                             		.loc 1 254 0
 731 0332 F8 44 E8                		mov.B	#-24, [r4]
 257:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = size;
 732                             		.loc 1 257 0
 733 0335 C3 45                   		mov.B	r5, [r4]
 734 0337 EF B1                   		mov.L	r11, r1
 735 0339 66 03                   		mov.L	#0, r3
 736 033b 2E 09                   		bra	.L83
 737                             	.LVL58:
 738                             	.L84:
 263:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *(volatile uint16_t *)address = *(uint16_t *)data;
 739                             		.loc 1 263 0
 740 033d FD 29 1F                		mov.W	[r1+], r15
 741                             	.LVL59:
 742 0340 62 13                   		add	#1, r3
 743 0342 D3 7F                   		mov.W	r15, [r7]
 744                             	.LVL60:
 745                             		.balign 2,3,1
 746                             	.L83:
 260:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(n++ < size)
 747                             		.loc 1 260 0
 748 0344 5B 3F                   		movu.B	r3, r15
 749 0346 47 F5                   		cmp	r15, r5
 750 0348 24 F5                   		bgtu	.L84
 270:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)(DF_ADDRESS) = 0xD0;
 751                             		.loc 1 270 0
 752 034a F8 44 D0                		mov.B	#-48, [r4]
 273:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt = WAIT_MAX_DF_WRITE;
 753                             		.loc 1 273 0
 754 034d 3E 01 00                		mov.L	#0, 4[r0]
 755 0350 2E 15                   		bra	.L85
 756                             	.L87:
 279:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             wait_cnt--;
 757                             		.loc 1 279 0
 758 0352 A8 0B                   		mov.L	4[r0], r3
 759 0354 60 13                   		sub	#1, r3
 760                             	.LVL61:
 761 0356 A0 0B                   		mov.L	r3, 4[r0]
 762                             	.LVL62:
 282:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(wait_cnt == 0)
 763                             		.loc 1 282 0
 764 0358 A8 0B                   		mov.L	4[r0], r3
 765                             	.LVL63:
 766 035a 61 03                   		cmp	#0, r3
 767 035c 21 09                   		bne	.L85
 768                             	.LVL64:
 769                             		.balign 2,3,3
 770                             	.L94:
 286:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 _Flash_Reset();
 771                             		.loc 1 286 0
 772 035e 05 00 00 00             		bsr	__Flash_Reset
 773                             	.LVL65:
 774 0362 38 AE 00                		bra	.L86
 775                             	.LVL66:
 776                             	.L85:
 276:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(FLASH.FSTATR0.BIT.FRDY == 0)
 777                             		.loc 1 276 0
 778 0365 CC C3                   		mov.B	[r12], r3
 779 0367 76 23 80 00             		and	#0x80, r3
 780 036b 5B 33                   		movu.B	r3, r3
 781 036d 61 03                   		cmp	#0, r3
 782 036f 20 E3                   		beq	.L87
 294:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.PRGERR == 1))
 783                             		.loc 1 294 0
 784 0371 CC 23                   		mov.B	[r2], r3
 785 0373 75 23 40                		and	#64, r3
 786 0376 5B 33                   		movu.B	r3, r3
 787 0378 61 03                   		cmp	#0, r3
 788 037a 3B 96 00                		bne	.L86
 789 037d CC 23                   		mov.B	[r2], r3
 790 037f 75 23 10                		and	#16, r3
 791 0382 5B 33                   		movu.B	r3, r3
 792 0384 61 03                   		cmp	#0, r3
 793 0386 3B 8A 00                		bne	.L86
 794 0389 38 8B 00                		bra	.L113
 795                             	.LVL67:
 796                             	.L81:
 276:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(FLASH.FSTATR0.BIT.FRDY == 0)
 797                             		.loc 1 276 0 discriminator 1
 798 038c FB CE B0 FF 7F          		mov.L	#0x7fffb0, r12
 254:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = 0xE8;
 799                             		.loc 1 254 0 discriminator 1
 800 0391 FB 4E 00 00 10          		mov.L	#0x100000, r4
 276:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(FLASH.FSTATR0.BIT.FRDY == 0)
 801                             		.loc 1 276 0 discriminator 1
 802 0396 EF C2                   		mov.L	r12, r2
 803                             	.LVL68:
 804                             		.balign 2,3,1
 805                             	.L115:
 806                             	.LBE27:
 807                             	.LBE26:
1365:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while( bytes )
 808                             		.loc 1 1365 0 discriminator 1
 809 0398 5F AE                   		movu.W	r10, r14
 810 039a 61 0E                   		cmp	#0, r14
 811 039c 21 81                   		bne	.L90
 812                             	.LVL69:
 813                             		.balign 2,3,1
 814                             	.L97:
 815                             	.LBB30:
 816                             	.LBB28:
 257:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = size;
 817                             		.loc 1 257 0
 818 039e 66 07                   		mov	#0, r7
 819 03a0 2E 56                   		bra	.L91
 820                             	.LVL70:
 821                             	.L96:
 822                             	.LBE28:
 823                             	.LBE30:
1253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashWrite_1 ( uint32_t flash_addr,
 824                             		.loc 1 1253 0
 825 03a2 FF 2B 27                		add	r2, r7, r11
 826                             	.LBB31:
 827                             	.LBB24:
 557:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint8_t *)address = 0xE8;
 828                             		.loc 1 557 0
 829 03a5 F8 B4 E8                		mov.B	#-24, [r11]
 558:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint8_t *)address = size;
 830                             		.loc 1 558 0
 831 03a8 F8 B4 04                		mov.B	#4, [r11]
 832                             	.LVL71:
1253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashWrite_1 ( uint32_t flash_addr,
 833                             		.loc 1 1253 0
 834 03ab 71 24 08                		add	#8, r2, r4
 835                             	.LVL72:
 836                             		.balign 2,3,5
 837                             	.L92:
 564:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint16_t *)address = *(uint16_t *)data;
 838                             		.loc 1 564 0
 839 03ae FD 29 23                		mov.W	[r2+], r3
 840                             	.LVL73:
 841 03b1 D3 B3                   		mov.W	r3, [r11]
 842                             	.LVL74:
 561:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     for(i = 0; i < size; i++)
 843                             		.loc 1 561 0
 844 03b3 47 42                   		cmp	r4, r2
 845 03b5 21 F9                   		bne	.L92
 571:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *(volatile uint8_t *)address = 0xD0;
 846                             		.loc 1 571 0
 847 03b7 F8 B4 D0                		mov.B	#-48, [r11]
 574:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ROM_WRITE;
 848                             		.loc 1 574 0
 849 03ba 3E 00 00                		mov.L	#0, [r0]
 850 03bd 2E 0F                   		bra	.L93
 851                             	.L95:
 580:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 852                             		.loc 1 580 0
 853 03bf EC 0B                   		mov.L	[r0], r11
 854 03c1 60 1B                   		sub	#1, r11
 855                             	.LVL75:
 856 03c3 E3 0B                   		mov.L	r11, [r0]
 857                             	.LVL76:
 583:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 858                             		.loc 1 583 0
 859 03c5 EC 0B                   		mov.L	[r0], r11
 860                             	.LVL77:
 861 03c7 61 0B                   		cmp	#0, r11
 862 03c9 20 95                   		beq	.L94
 863 03cb 03                      		.balign 2,3,5
 864                             	.L93:
 577:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 865                             		.loc 1 577 0
 866 03cc CC CB                   		mov.B	[r12], r11
 867 03ce 76 2B 80 00             		and	#0x80, r11
 868 03d2 5B BB                   		movu.B	r11, r11
 869 03d4 61 0B                   		cmp	#0, r11
 870 03d6 20 E9                   		beq	.L95
 595:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.PRGERR  == 1))
 871                             		.loc 1 595 0
 872 03d8 CC EB                   		mov.B	[r14], r11
 873 03da 75 2B 40                		and	#64, r11
 874 03dd 5B BB                   		movu.B	r11, r11
 875 03df 61 0B                   		cmp	#0, r11
 876 03e1 21 2F                   		bne	.L86
 877 03e3 CC EB                   		mov.B	[r14], r11
 878 03e5 75 2B 10                		and	#16, r11
 879 03e8 5B BB                   		movu.B	r11, r11
 880 03ea 61 0B                   		cmp	#0, r11
 881 03ec 21 24                   		bne	.L86
 882                             	.LVL78:
 883                             		.balign 2,3,1
 884                             	.L80:
 885                             	.LBE24:
 886                             	.LBE31:
1415:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while( bytes )
 887                             		.loc 1 1415 0 discriminator 1
 888 03ee 5F 2B                   		movu.W	r2, r11
 889 03f0 47 BA                   		cmp	r11, r10
 890 03f2 21 B0                   		bne	.L96
 891 03f4 2E AA                   		bra	.L97
 892                             	.LVL79:
 893                             	.L91:
1439:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
 894                             		.loc 1 1439 0
 895 03f6 39 CE FD                		bsr	__Exit_PE_Mode
 896                             	.LVL80:
1442:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
 897                             		.loc 1 1442 0
 898 03f9 39 2E FC                		bsr	__FlashReleaseState
 899                             	.LVL81:
1445:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
 900                             		.loc 1 1445 0
 901 03fc 2E 10                   		bra	.L74
 902                             	.LVL82:
 903                             	.L100:
1313:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_ERROR_ADDRESS;
 904                             		.loc 1 1313 0
 905 03fe 66 37                   		mov	#3, r7
 906                             	.LVL83:
 907 0400 2E 0C                   		bra	.L74
 908                             	.LVL84:
 909                             	.L101:
1274:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_BYTES;
 910                             		.loc 1 1274 0
 911 0402 66 27                   		mov	#2, r7
 912                             	.LVL85:
 913 0404 2E 08                   		bra	.L74
 914                             	.LVL86:
 915                             	.L102:
1280:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_ALIGNED;
 916                             		.loc 1 1280 0
 917 0406 66 17                   		mov	#1, r7
 918                             	.LVL87:
 919 0408 2E 04                   		bra	.L74
 920                             	.LVL88:
 921                             	.L103:
1320:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
 922                             		.loc 1 1320 0
 923 040a 66 57                   		mov	#5, r7
 924                             	.LVL89:
 925                             		.balign 2,3,1
 926                             	.L74:
 927 040c 5B 71                   		movu.B	r7, r1
 928 040e 2E 11                   		bra	.L114
 929                             	.LVL90:
 930                             	.L86:
 931                             	.LBB32:
 932                             	.LBB29:
 257:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         *(volatile uint8_t *)DF_ADDRESS = size;
 933                             		.loc 1 257 0
 934 0410 66 67                   		mov	#6, r7
 935 0412 2E E4                   		bra	.L91
 936                             	.LVL91:
 937                             	.L113:
 938                             	.LBE29:
 939                             	.LBE32:
1403:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             flash_addr += num_byte_to_write;
 940                             		.loc 1 1403 0
 941 0414 5B EE                   		movu.B	r14, r14
 942 0416 4B E7                   		add	r14, r7
 943                             	.LVL92:
1404:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             buffer_addr += num_byte_to_write;
 944                             		.loc 1 1404 0
 945 0418 4B EB                   		add	r14, r11
 946                             	.LVL93:
1408:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             bytes -= num_byte_to_write;
 947                             		.loc 1 1408 0
 948 041a 43 EA                   		sub	r14, r10
 949                             	.LVL94:
 950 041c 38 7C FF                		bra	.L115
 951                             	.LVL95:
 952                             	.L114:
1446:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 953                             		.loc 1 1446 0
 954 041f 3F 7C 08                		rtsd	#32, r7-r12
 955                             	.LFE12:
 958                             	__Flash_Erase_Command:
 959                             	.LFB11:
1183:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 960                             		.loc 1 1183 0
 961                             	.LVL96:
1190:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *erase_addr = 0x20;
 962                             		.loc 1 1190 0
 963 0422 3C 10 20                		mov.B	#32, [r1]
1183:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 964                             		.loc 1 1183 0
 965 0425 60 40                   		sub	#4, r0
 966                             	.LCFI6:
1191:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *erase_addr = 0xD0;
 967                             		.loc 1 1191 0
 968 0427 F8 14 D0                		mov.B	#-48, [r1]
1194:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ERASE;
 969                             		.loc 1 1194 0
 970 042a F8 02 00 5A 62 02       		mov.L	#0x2625a00, [r0]
 971                             	.LVL97:
1197:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 972                             		.loc 1 1197 0
 973 0430 FB 3E B0 FF 7F          		mov.L	#0x7fffb0, r3
 974 0435 2E 14                   		bra	.L120
 975                             	.L122:
1200:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
 976                             		.loc 1 1200 0
 977 0437 EC 0E                   		mov.L	[r0], r14
 978 0439 60 1E                   		sub	#1, r14
 979                             	.LVL98:
 980 043b E3 0E                   		mov.L	r14, [r0]
 981                             	.LVL99:
1203:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
 982                             		.loc 1 1203 0
 983 043d EC 0E                   		mov.L	[r0], r14
 984                             	.LVL100:
 985 043f 61 0E                   		cmp	#0, r14
 986 0441 21 08                   		bne	.L120
1208:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
 987                             		.loc 1 1208 0
 988 0443 05 00 00 00             		bsr	__Flash_Reset
 989                             	.LVL101:
 990 0447 2E 2B                   		bra	.L125
 991                             	.LVL102:
 992                             	.L120:
1197:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
 993                             		.loc 1 1197 0 discriminator 1
 994 0449 CC 34                   		mov.B	[r3], r4
 995 044b FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 996 0450 76 24 80 00             		and	#0x80, r4
 997 0454 5B 44                   		movu.B	r4, r4
 998 0456 61 04                   		cmp	#0, r4
 999 0458 20 DF                   		beq	.L122
 1000                             	.LBB35:
 1001                             	.LBB36:
1218:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.ERSERR  == 1))
 1002                             		.loc 1 1218 0
 1003 045a CC E4                   		mov.B	[r14], r4
 1004 045c 75 24 40                		and	#64, r4
 1005 045f 5B 44                   		movu.B	r4, r4
 1006 0461 61 04                   		cmp	#0, r4
 1007 0463 21 0F                   		bne	.L125
 1008 0465 CC E1                   		mov.B	[r14], r1
 1009                             	.LVL103:
 1010 0467 75 21 20                		and	#32, r1
 1011 046a 5B 11                   		movu.B	r1, r1
 1012 046c 61 01                   		cmp	#0, r1
 1013 046e 21 04                   		bne	.L125
 1014 0470 2E 04                   		bra	.L121
 1015                             	.L125:
1220:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;
 1016                             		.loc 1 1220 0
 1017 0472 66 61                   		mov	#6, r1
 1018                             	.LVL104:
 1019                             		.balign 2,3,2
 1020                             	.L121:
 1021                             	.LBE36:
 1022                             	.LBE35:
1225:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1023                             		.loc 1 1225 0
 1024 0474 75 21 26                		and	#38, r1
 1025 0477 67 01                   		rtsd	#4
 1026                             	.LFE11:
 1028                             		.global	_R_FlashEraseRange
 1030                             	_R_FlashEraseRange:
 1031                             	.LFB10:
1078:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1032                             		.loc 1 1078 0
 1033                             	.LVL105:
 1034 0479 6E 7B                   		pushm	r7-r11
 1035                             	.LCFI7:
1085:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     start_addr &= 0x00FFFFFF;
 1036                             		.loc 1 1085 0
 1037 047b EF 1B                   		mov.L	r1, r11
 1038 047d 74 2B FF FF FF 00       		and	#0xffffff, r11
 1039                             	.LVL106:
1088:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( start_addr >= DF_ADDRESS && start_addr < (DF_ADDRESS + DF_SIZE) )
 1040                             		.loc 1 1088 0
 1041 0483 73 B7 00 00 F0          		add	#0xfff00000, r11, r7
 1042 0488 76 07 FF 1F             		cmp	#0x1fff, r7
 1043 048c 24 5C                   		bgtu	.L133
1092:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( bytes & (DF_BLOCK_SIZE-1) )
 1044                             		.loc 1 1092 0
 1045 048e FD 74 C2 7F             		tst	#0x7f, r2
 1046 0492 EF 2A                   		mov.L	r2, r10
 1047 0494 21 58                   		bne	.L134
1098:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( start_addr & (DF_BLOCK_SIZE-1) )
 1048                             		.loc 1 1098 0
 1049 0496 FD 74 C1 7F             		tst	#0x7f, r1
 1050 049a 21 56                   		bne	.L135
1111:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_ERASING) != FLASH_SUCCESS )
 1051                             		.loc 1 1111 0
 1052 049c 66 11                   		mov.L	#1, r1
 1053 049e 39 62 FB                		bsr	__FlashGrabState
 1054                             	.LVL107:
 1055 04a1 5B 11                   		movu.B	r1, r1
 1056 04a3 61 01                   		cmp	#0, r1
 1057 04a5 21 4F                   		bne	.L136
1118:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = FLD_PE_MODE;
 1058                             		.loc 1 1118 0
 1059 04a7 FB 72 00 00 00 00       		mov.L	#_current_mode, r7
1121:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode(start_addr, 0) != FLASH_SUCCESS)
 1060                             		.loc 1 1121 0
 1061 04ad EF B1                   		mov.L	r11, r1
1118:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = FLD_PE_MODE;
 1062                             		.loc 1 1118 0
 1063 04af 3C 70 02                		mov.B	#2, [r7]
1121:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode(start_addr, 0) != FLASH_SUCCESS)
 1064                             		.loc 1 1121 0
 1065 04b2 39 CD FB                		bsr	__Enter_PE_Mode.isra.0
 1066                             	.LVL108:
 1067 04b5 5B 11                   		movu.B	r1, r1
 1068 04b7 61 01                   		cmp	#0, r1
 1069 04b9 20 09                   		beq	.L130
1124:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 1070                             		.loc 1 1124 0
 1071 04bb 39 6C FB                		bsr	__FlashReleaseState
 1072                             	.LVL109:
1127:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 1073                             		.loc 1 1127 0
 1074 04be 66 67                   		mov	#6, r7
 1075 04c0 2E 36                   		bra	.L129
 1076                             	.L130:
1134:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
 1077                             		.loc 1 1134 0
 1078 04c2 FB EE B4 FF 7F          		mov.L	#0x7fffb4, r14
 1079 04c7 F8 E9 01 55             		mov.W	#0x5501, [r14]
1080:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
 1080                             		.loc 1 1080 0
 1081 04cb CF 17                   		mov.B	r1, r7
1077:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashEraseRange(uint32_t start_addr, uint32_t bytes)
 1082                             		.loc 1 1077 0
 1083 04cd 4B AB                   		add	r10, r11
 1084                             	.LVL110:
1146:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(0 < bytes)
 1085                             		.loc 1 1146 0
 1086 04cf 2E 0D                   		bra	.L131
 1087                             	.LVL111:
 1088                             	.L132:
1149:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = _Flash_Erase_Command((volatile uint8_t *)start_addr);
 1089                             		.loc 1 1149 0
 1090 04d1 FF 01 AB                		sub	r10, r11, r1
 1091 04d4 39 4E FF                		bsr	__Flash_Erase_Command
 1092                             	.LVL112:
 1093 04d7 CF 17                   		mov.B	r1, r7
 1094                             	.LVL113:
1155:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         bytes -= DF_BLOCK_SIZE;
 1095                             		.loc 1 1155 0
 1096 04d9 71 AA 80                		add	#0xffffff80, r10
 1097                             	.LVL114:
 1098                             		.balign 2,3,1
 1099                             	.L131:
1146:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(0 < bytes)
 1100                             		.loc 1 1146 0 discriminator 1
 1101 04dc 61 0A                   		cmp	#0, r10
 1102 04de 21 F3                   		bne	.L132
1159:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
 1103                             		.loc 1 1159 0
 1104 04e0 39 E4 FC                		bsr	__Exit_PE_Mode
 1105                             	.LVL115:
1162:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
 1106                             		.loc 1 1162 0
 1107 04e3 39 44 FB                		bsr	__FlashReleaseState
 1108                             	.LVL116:
1165:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
 1109                             		.loc 1 1165 0
 1110 04e6 2E 10                   		bra	.L129
 1111                             	.LVL117:
 1112                             	.L133:
1107:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_ERROR_ADDRESS;
 1113                             		.loc 1 1107 0
 1114 04e8 66 37                   		mov	#3, r7
 1115 04ea 2E 0C                   		bra	.L129
 1116                             	.L134:
1095:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_BYTES;
 1117                             		.loc 1 1095 0
 1118 04ec 66 27                   		mov	#2, r7
 1119 04ee 2E 08                   		bra	.L129
 1120                             	.L135:
1101:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             return FLASH_ERROR_ALIGNED;
 1121                             		.loc 1 1101 0
 1122 04f0 66 17                   		mov	#1, r7
 1123 04f2 2E 04                   		bra	.L129
 1124                             	.LVL118:
 1125                             	.L136:
1114:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
 1126                             		.loc 1 1114 0
 1127 04f4 66 57                   		mov	#5, r7
 1128                             	.LVL119:
 1129                             		.balign 2,3,1
 1130                             	.L129:
1166:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1131                             		.loc 1 1166 0
 1132 04f6 5B 71                   		movu.B	r7, r1
 1133 04f8 3F 7B 05                		rtsd	#20, r7-r11
 1134                             	.LFE10:
 1136                             		.global	_R_FlashErase_1
 1138                             	_R_FlashErase_1:
 1139                             	.LFB9:
 819:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1140                             		.loc 1 819 0
 1141                             	.LVL120:
 1142 04fb 6E 7B                   		pushm	r7-r11
 1143                             	.LCFI8:
 1144 04fd 60 40                   		sub	#4, r0
 1145                             	.LCFI9:
 819:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1146                             		.loc 1 819 0
 1147 04ff CF 1A                   		mov.B	r1, r10
 827:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_ERASING) != FLASH_SUCCESS )
 1148                             		.loc 1 827 0
 1149 0501 66 11                   		mov.L	#1, r1
 1150                             	.LVL121:
 1151 0503 39 FD FA                		bsr	__FlashGrabState
 1152                             	.LVL122:
 1153 0506 5B 11                   		movu.B	r1, r1
 1154 0508 61 01                   		cmp	#0, r1
 1155 050a 21 62                   		bne	.L147
 1156                             	.LVL123:
 1157                             	.LBB40:
 1158                             	.LBB41:
 834:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     pAddr = GET_BLOCK_ADDR( block );
 1159                             		.loc 1 834 0
 1160 050c CF A1                   		mov.B	r10, r1
 1161 050e 05 00 00 00             		bsr	_get_block_addresses
 1162                             	.LVL124:
 837:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( block >= BLOCK_DB0 )
 1163                             		.loc 1 837 0
 1164 0512 CF AA                   		mov.B	r10, r10
 840:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 1165                             		.loc 1 840 0
 1166 0514 61 0A                   		cmp	#0, r10
 1167 0516 FC DB A8                		scge.L	r10
 1168                             	.LVL125:
 1169 0519 66 2E                   		mov.L	#2, r14
 1170 051b FF 0A AE                		sub	r10, r14, r10
 1171 051e FB B2 00 00 00 00       		mov.L	#_current_mode, r11
 834:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     pAddr = GET_BLOCK_ADDR( block );
 1172                             		.loc 1 834 0
 1173 0524 EF 17                   		mov.L	r1, r7
 1174                             	.LVL126:
 840:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 1175                             		.loc 1 840 0
 1176 0526 C3 BA                   		mov.B	r10, [r11]
 849:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode(pAddr, 0) != FLASH_SUCCESS)
 1177                             		.loc 1 849 0
 1178 0528 39 57 FB                		bsr	__Enter_PE_Mode.isra.0
 1179                             	.LVL127:
 1180 052b 5B 11                   		movu.B	r1, r1
 1181 052d 61 01                   		cmp	#0, r1
 1182 052f 20 09                   		beq	.L142
 852:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 1183                             		.loc 1 852 0
 1184 0531 39 F6 FA                		bsr	__FlashReleaseState
 1185                             	.LVL128:
 855:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 1186                             		.loc 1 855 0
 1187 0534 66 61                   		mov	#6, r1
 1188 0536 2E 38                   		bra	.L139
 1189                             	.L142:
 862:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.FPROTR.WORD = 0x5501;
 1190                             		.loc 1 862 0
 1191 0538 FB AE B4 FF 7F          		mov.L	#0x7fffb4, r10
 1192 053d F8 A9 01 55             		mov.W	#0x5501, [r10]
 883:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( FLD_PE_MODE == current_mode )
 1193                             		.loc 1 883 0
 1194 0541 58 BA                   		movu.B	[r11], r10
 1195 0543 61 2A                   		cmp	#2, r10
 1196 0545 21 16                   		bne	.L144
 818:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashErase_1(uint8_t block)
 1197                             		.loc 1 818 0
 1198 0547 72 7A 00 04             		add	#0x400, r7, r10
 1199 054b 03                      		.balign 2,3,1
 1200                             	.L145:
 1201                             	.LBB42:
 895:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = _Flash_Erase_Command((volatile uint8_t *)pAddr);
 1202                             		.loc 1 895 0
 1203 054c EF 71                   		mov.L	r7, r1
 1204 054e 39 D4 FE                		bsr	__Flash_Erase_Command
 1205                             	.LVL129:
 898:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             pAddr += DF_BLOCK_SIZE;
 1206                             		.loc 1 898 0
 1207 0551 72 77 80 00             		add	#0x80, r7
 1208                             	.LVL130:
 891:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         while(0 < bytes_to_erase)
 1209                             		.loc 1 891 0
 1210 0555 47 A7                   		cmp	r10, r7
 1211 0557 21 F5                   		bne	.L145
 1212 0559 2E 07                   		bra	.L146
 1213                             	.LVL131:
 1214                             	.L144:
 1215                             	.LBE42:
 908:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = _Flash_Erase_Command((volatile uint8_t *)pAddr);
 1216                             		.loc 1 908 0
 1217 055b EF 71                   		mov.L	r7, r1
 1218 055d 39 C5 FE                		bsr	__Flash_Erase_Command
 1219                             	.LVL132:
 1220                             		.balign 2,3,1
 1221                             	.L146:
 912:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
 1222                             		.loc 1 912 0
 1223 0560 E3 01                   		mov.L	r1, [r0]
 1224 0562 39 62 FC                		bsr	__Exit_PE_Mode
 1225                             	.LVL133:
 915:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
 1226                             		.loc 1 915 0
 1227 0565 39 C2 FA                		bsr	__FlashReleaseState
 1228                             	.LVL134:
 1229 0568 EC 01                   		mov.L	[r0], r1
 1230 056a 2E 04                   		bra	.L139
 1231                             	.LVL135:
 1232                             	.L147:
 1233                             	.LBE41:
 1234                             	.LBE40:
 830:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
 1235                             		.loc 1 830 0
 1236 056c 66 51                   		mov	#5, r1
 1237                             	.LVL136:
 1238                             		.balign 2,3,1
 1239                             	.L139:
 919:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1240                             		.loc 1 919 0
 1241 056e 5B 11                   		movu.B	r1, r1
 1242 0570 3F 7B 06                		rtsd	#24, r7-r11
 1243                             	.LFE9:
 1245                             		.section	.text.R_FlashDataAreaBlankCheck,"ax",@progbits
 1246                             		.global	_R_FlashDataAreaBlankCheck
 1248                             	_R_FlashDataAreaBlankCheck:
 1249                             	.LFB4:
 344:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1250                             		.loc 1 344 0
 1251                             	.LVL137:
 1252 0000 6E 7B                   		pushm	r7-r11
 1253                             	.LCFI10:
 1254 0002 60 40                   		sub	#4, r0
 1255                             	.LCFI11:
 344:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1256                             		.loc 1 344 0
 1257 0004 EF 17                   		mov.L	r1, r7
 1258 0006 CF 2A                   		mov.B	r2, r10
 355:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	FLS_EnterCriticalSection();
 1259                             		.loc 1 355 0
 1260 0008 05 00 00 00             		bsr	_OS_DisableInterrupt
 1261                             	.LVL138:
 1262 000c FB E2 00 00 00 00       		mov.L	#_OS_Global, r14
 1263 0012 CD EB 01                		mov.B	1[r14], r11
 1264 0015 62 1B                   		add	#1, r11
 1265 0017 C7 EB 01                		mov.B	r11, 1[r14]
 358:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( ((address > (DF_NUM_BLOCKS+BLOCK_DB0)) && (address < DF_ADDRESS))
 1266                             		.loc 1 358 0
 1267 001a 72 7B 7B FF             		add	#0xffffff7b, r7, r11
 1268 001e 77 0B 7A FF 0F          		cmp	#0xfff7a, r11
 1269 0023 24 05 38 0F 01          		bleu	.L165
 359:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             || (address > DF_ADDRESS + DF_SIZE) )
 1270                             		.loc 1 359 0
 1271 0028 77 07 00 20 10          		cmp	#0x102000, r7
 1272 002d 25 05 38 05 01          		bgtu	.L165
 365:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( (size != BLANK_CHECK_ENTIRE_BLOCK)
 1273                             		.loc 1 365 0
 1274 0032 5B AE                   		movu.B	r10, r14
 1275 0034 61 0E                   		cmp	#0, r14
 1276 0036 20 08                   		beq	.L152
 369:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             && (size != BLANK_CHECK_2_BYTE)
 1277                             		.loc 1 369 0
 1278 0038 61 2E                   		cmp	#2, r14
 1279 003a 3B FE 00                		bne	.L166
 1280 003d 03                      		.balign 2,3,1
 1281                             	.L152:
 377:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if( _FlashGrabState(FLASH_BLANKCHECK) != FLASH_SUCCESS )
 1282                             		.loc 1 377 0
 1283 003e 66 31                   		mov.L	#3, r1
 1284 0040 05 00 00 00             		bsr	__FlashGrabState
 1285                             	.LVL139:
 1286 0044 5B 11                   		movu.B	r1, r1
 1287 0046 61 01                   		cmp	#0, r1
 1288 0048 3B F4 00                		bne	.L167
 385:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 1289                             		.loc 1 385 0
 1290 004b FB B2 00 00 00 00       		mov.L	#_current_mode, r11
 388:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( _Enter_PE_Mode( address, 0 ) != FLASH_SUCCESS)
 1291                             		.loc 1 388 0
 1292 0051 EF 71                   		mov.L	r7, r1
 385:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         current_mode = FLD_PE_MODE;
 1293                             		.loc 1 385 0
 1294 0053 F8 B4 02                		mov.B	#2, [r11]
 388:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( _Enter_PE_Mode( address, 0 ) != FLASH_SUCCESS)
 1295                             		.loc 1 388 0
 1296 0056 05 00 00 00             		bsr	__Enter_PE_Mode.isra.0
 1297                             	.LVL140:
 1298 005a 5B 11                   		movu.B	r1, r1
 1299 005c 61 01                   		cmp	#0, r1
 1300 005e 20 09                   		beq	.L153
 391:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _FlashReleaseState();
 1301                             		.loc 1 391 0
 1302 0060 05 00 00 00             		bsr	__FlashReleaseState
 1303                             	.LVL141:
 1304 0064 38 9E 00                		bra	.L168
 1305                             	.LVL142:
 1306                             	.L153:
 399:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             FLASH.FMODR.BIT.FRDMD = 1;
 1307                             		.loc 1 399 0
 1308 0067 FB EE 02 C4 7F          		mov.L	#0x7fc402, r14
 1309 006c CC E4                   		mov.B	[r14], r4
 402:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(size == BLANK_CHECK_2_BYTE)
 1310                             		.loc 1 402 0
 1311 006e 5B AA                   		movu.B	r10, r10
 399:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             FLASH.FMODR.BIT.FRDMD = 1;
 1312                             		.loc 1 399 0
 1313 0070 78 44                   		bset	#4, r4
 1314 0072 C3 E4                   		mov.B	r4, [r14]
 402:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(size == BLANK_CHECK_2_BYTE)
 1315                             		.loc 1 402 0
 1316 0074 61 2A                   		cmp	#2, r10
 1317 0076 21 15                   		bne	.L154
 405:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 ptrb = (volatile uint8_t *)(address & DF_MASK);
 1318                             		.loc 1 405 0
 1319 0078 EF 71                   		mov.L	r7, r1
 410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.DFLBCCNT.WORD = (uint16_t)(address & (DF_BLOCK_SIZE_LARGE-2));
 1320                             		.loc 1 410 0
 1321 007a FB AE CA FF 7F          		mov.L	#0x7fffca, r10
 1322                             	.LVL143:
 1323 007f 76 27 FE 07             		and	#0x7fe, r7
 1324                             	.LVL144:
 405:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 ptrb = (volatile uint8_t *)(address & DF_MASK);
 1325                             		.loc 1 405 0
 1326 0083 76 21 00 F8             		and	#0xfffff800, r1
 1327                             	.LVL145:
 410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.DFLBCCNT.WORD = (uint16_t)(address & (DF_BLOCK_SIZE_LARGE-2));
 1328                             		.loc 1 410 0
 1329 0087 D3 A7                   		mov.W	r7, [r10]
 1330 0089 2E 1D                   		bra	.L155
 1331                             	.LVL146:
 1332                             	.L154:
 420:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 if( address < (DF_NUM_BLOCKS+BLOCK_DB0) )
 1333                             		.loc 1 420 0
 1334 008b 75 57 83                		cmp	#0x83, r7
 1335 008e 24 0A                   		bgtu	.L156
 1336                             	.LBB43:
 422:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 	uint32_t tmp_addr = GET_BLOCK_ADDR(address);
 1337                             		.loc 1 422 0
 1338 0090 CF 71                   		mov.B	r7, r1
 1339 0092 05 00 00 00             		bsr	_get_block_addresses
 1340                             	.LVL147:
 1341 0096 2E 04                   		bra	.L157
 1342                             	.LVL148:
 1343                             	.L156:
 1344                             	.LBE43:
 430:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     ptrb = (volatile uint8_t *)address;
 1345                             		.loc 1 430 0
 1346 0098 EF 71                   		mov.L	r7, r1
 1347                             	.LVL149:
 1348                             		.balign 2,3,4
 1349                             	.L157:
 435:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 FLASH.DFLBCCNT.BIT.BCSIZE = 1;
 1350                             		.loc 1 435 0
 1351 009a FB 7E CA FF 7F          		mov.L	#0x7fffca, r7
 1352                             	.LVL150:
 1353 009f DC 7A                   		mov.W	[r7], r10
 1354 00a1 78 FA                   		bset	#15, r10
 1355 00a3 D3 7A                   		mov.W	r10, [r7]
 1356 00a5 03                      		.balign 2,3,4
 1357                             	.L155:
 439:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *ptrb = 0x71;
 1358                             		.loc 1 439 0
 1359 00a6 3C 10 71                		mov.B	#0x71, [r1]
 440:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             *ptrb = 0xD0;
 1360                             		.loc 1 440 0
 1361 00a9 F8 14 D0                		mov.B	#-48, [r1]
 443:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             wait_cnt = WAIT_MAX_BLANK_CHECK;
 1362                             		.loc 1 443 0
 1363 00ac 3E 00 00                		mov.L	#0, [r0]
 1364                             	.LVL151:
 349:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_NOT_BLANK;
 1365                             		.loc 1 349 0
 1366 00af 66 17                   		mov	#1, r7
 446:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             while(FLASH.FSTATR0.BIT.FRDY == 0)
 1367                             		.loc 1 446 0
 1368 00b1 FB BE B0 FF 7F          		mov.L	#0x7fffb0, r11
 1369 00b6 2E 14                   		bra	.L174
 1370                             	.LVL152:
 1371                             	.L160:
 449:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 wait_cnt--;
 1372                             		.loc 1 449 0
 1373 00b8 EC 0A                   		mov.L	[r0], r10
 1374 00ba 60 1A                   		sub	#1, r10
 1375                             	.LVL153:
 1376 00bc E3 0A                   		mov.L	r10, [r0]
 1377                             	.LVL154:
 452:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 if(wait_cnt == 0)
 1378                             		.loc 1 452 0
 1379 00be EC 0A                   		mov.L	[r0], r10
 1380                             	.LVL155:
 1381 00c0 61 0A                   		cmp	#0, r10
 1382 00c2 21 08                   		bne	.L174
 456:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     _Flash_Reset();
 1383                             		.loc 1 456 0
 1384 00c4 05 00 00 00             		bsr	__Flash_Reset
 1385                             	.LVL156:
 459:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     result = FLASH_FAILURE;
 1386                             		.loc 1 459 0
 1387 00c8 66 67                   		mov	#6, r7
 1388                             	.LVL157:
 1389                             		.balign 2,3,5
 1390                             	.L174:
 446:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             while(FLASH.FSTATR0.BIT.FRDY == 0)
 1391                             		.loc 1 446 0 discriminator 1
 1392 00ca CC BA                   		mov.B	[r11], r10
 1393 00cc 76 2A 80 00             		and	#0x80, r10
 1394 00d0 5B AA                   		movu.B	r10, r10
 1395 00d2 61 0A                   		cmp	#0, r10
 1396 00d4 20 E4                   		beq	.L160
 467:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if (result == FLASH_NOT_BLANK)
 1397                             		.loc 1 467 0
 1398 00d6 5B 7A                   		movu.B	r7, r10
 1399 00d8 61 1A                   		cmp	#1, r10
 1400 00da 21 2A                   		bne	.L161
 470:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FLASH.FMODR.BIT.FRDMD = 0x00;
 1401                             		.loc 1 470 0
 1402 00dc FB 7E 02 C4 7F          		mov.L	#0x7fc402, r7
 1403                             	.LVL158:
 1404 00e1 CC 7A                   		mov.B	[r7], r10
 1405                             	.LVL159:
 1406 00e3 7A 4A                   		bclr	#4, r10
 1407 00e5 C3 7A                   		mov.B	r10, [r7]
 473:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(FLASH.FSTATR0.BIT.ILGLERR == 1)	/* Check 'ILGERR' bit */
 1408                             		.loc 1 473 0
 1409 00e7 FB 7E B0 FF 7F          		mov.L	#0x7fffb0, r7
 1410 00ec CC 77                   		mov.B	[r7], r7
 1411 00ee 75 27 40                		and	#64, r7
 1412 00f1 5B 77                   		movu.B	r7, r7
 1413 00f3 61 07                   		cmp	#0, r7
 1414 00f5 21 0D                   		bne	.L168
 482:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = (FLASH.DFLBCSTAT.BIT.BCST ? FLASH_NOT_BLANK : FLASH_BLANK);
 1415                             		.loc 1 482 0
 1416 00f7 FB 7E CE FF 7F          		mov.L	#0x7fffce, r7
 1417 00fc DC 77                   		mov.W	[r7], r7
 1418 00fe 64 17                   		and	#1, r7
 1419                             	.LVL160:
 1420 0100 2E 04                   		bra	.L161
 1421                             	.LVL161:
 1422                             	.L168:
 476:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLASH_FAILURE;
 1423                             		.loc 1 476 0
 1424 0102 66 67                   		mov	#6, r7
 1425                             		.balign 2,3,5
 1426                             	.L161:
 1427                             	.LVL162:
 489:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if (current_mode == FLD_PE_MODE)
 1428                             		.loc 1 489 0
 1429 0104 FB A2 00 00 00 00       		mov.L	#_current_mode, r10
 1430 010a 58 AA                   		movu.B	[r10], r10
 1431 010c 61 2A                   		cmp	#2, r10
 1432 010e 21 0A                   		bne	.L162
 492:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _Exit_PE_Mode( );
 1433                             		.loc 1 492 0
 1434 0110 05 00 00 00             		bsr	__Exit_PE_Mode
 1435                             	.LVL163:
 495:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
 1436                             		.loc 1 495 0
 1437 0114 05 00 00 00             		bsr	__FlashReleaseState
 1438                             	.LVL164:
 1439                             		.balign 2,3,5
 1440                             	.L162:
 498:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLS_ExitCriticalSection();
 1441                             		.loc 1 498 0
 1442 0118 FB E2 00 00 00 00       		mov.L	#_OS_Global, r14
 1443 011e CD EA 01                		mov.B	1[r14], r10
 1444 0121 60 1A                   		sub	#1, r10
 1445 0123 C7 EA 01                		mov.B	r10, 1[r14]
 1446 0126 5B AA                   		movu.B	r10, r10
 1447 0128 61 0A                   		cmp	#0, r10
 1448 012a 21 06                   		bne	.L163
 498:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLS_ExitCriticalSection();
 1449                             		.loc 1 498 0 is_stmt 0 discriminator 1
 1450 012c 05 00 00 00             		bsr	_OS_EnableInterrupt
 1451                             	.LVL165:
 1452                             		.balign 2,3,1
 1453                             	.L163:
 500:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
 1454                             		.loc 1 500 0 is_stmt 1
 1455 0130 5B 71                   		movu.B	r7, r1
 1456 0132 2E 0E                   		bra	.L175
 1457                             	.LVL166:
 1458                             	.L165:
 362:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	result = FLASH_ERROR_ADDRESS;
 1459                             		.loc 1 362 0
 1460 0134 66 37                   		mov	#3, r7
 1461                             	.LVL167:
 1462 0136 2E CE                   		bra	.L161
 1463                             	.LVL168:
 1464                             	.L166:
 374:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	result = FLASH_ERROR_BYTES;
 1465                             		.loc 1 374 0
 1466 0138 66 27                   		mov	#2, r7
 1467                             	.LVL169:
 1468 013a 2E CA                   		bra	.L161
 1469                             	.LVL170:
 1470                             	.L167:
 380:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	result = FLASH_BUSY;
 1471                             		.loc 1 380 0
 1472 013c 66 57                   		mov	#5, r7
 1473                             	.LVL171:
 1474 013e 2E C6                   		bra	.L161
 1475                             	.LVL172:
 1476                             	.L175:
 502:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1477                             		.loc 1 502 0
 1478 0140 3F 7B 06                		rtsd	#24, r7-r11
 1479                             	.LFE4:
 1481 0143 03                      		.section	.PRAM
 1482                             		.global	_R_FlashGetStatus
 1484                             	_R_FlashGetStatus:
 1485                             	.LFB15:
1564:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1486                             		.loc 1 1564 0
1567:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( flash_state == FLASH_READY )
 1487                             		.loc 1 1567 0
 1488 0573 FB E2 00 00 00 00       		mov.L	#_flash_state, r14
 1489 0579 EC E1                   		mov.L	[r14], r1
 1490 057b 61 01                   		cmp	#0, r1
 1491 057d 20 05                   		beq	.L178
1572:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_BUSY;
 1492                             		.loc 1 1572 0
 1493 057f 66 51                   		mov	#5, r1
 1494 0581 03                      		.balign 2,3,1
 1495                             	.L178:
1573:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1496                             		.loc 1 1573 0
 1497 0582 5B 11                   		movu.B	r1, r1
 1498 0584 02                      		rts
 1499                             	.LFE15:
 1501 0585 03                      		.section	.text.FLS_Init,"ax",@progbits
 1502                             		.global	_FLS_Init
 1504                             	_FLS_Init:
 1505                             	.LFB19:
1645:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1646:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1647:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  _FlashReleaseState
1648:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1649:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1650:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #ifndef  IGNORE_LOCK_BITS
1651:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1652:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1653:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashProgramLockBit
1654:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Programs the lock bit for a specified ROM erasure block. If
1655:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                the lock bit for a block is set and lock bit protection is
1656:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                enabled then that block cannot be programmed/erased.
1657:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : block - Which ROM erasure block to set the lock bit for
1658:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
1659:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
1660:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Another flash operation is in progress
1661:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1662:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashProgramLockBit(uint8_t block)
1663:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1664:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare address pointer */
1665:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t *pAddr;
1666:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1667:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare operation result container variable */
1668:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
1669:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1670:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare timer wait count variable */
1671:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint32_t wait_cnt;
1672:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1673:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */
1674:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_LOCK_BIT) != FLASH_SUCCESS )
1675:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1676:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
1677:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
1678:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1679:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1680:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Flash Command Address */
1681:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     pAddr = (volatile uint8_t *)(GET_BLOCK_ADDR( block ));
1682:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1683:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set FCU to ROM PE mode */
1684:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = ROM_PE_MODE;
1685:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1686:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM PE mode, check if operation successful */
1687:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode((uint32_t)pAddr, 0) != FLASH_SUCCESS)
1688:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1689:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
1690:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
1691:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1692:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
1693:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
1694:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1695:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1696:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Send the FCU Command */
1697:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *pAddr = 0x77;
1698:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *pAddr = 0xD0;
1699:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1700:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set timeout wait counter value */
1701:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wait_cnt = WAIT_MAX_ROM_WRITE;
1702:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1703:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Wait until FCU operation finishes, or a timeout occurs */
1704:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     while(FLASH.FSTATR0.BIT.FRDY == 0)
1705:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1706:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Decrement the wait counter */
1707:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         wait_cnt--;
1708:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1709:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if the wait counter has reached zero */
1710:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(wait_cnt == 0)
1711:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1712:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Maximum timeout duration for writing to ROM has elapsed -
1713:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                assume operation failure and reset the FCU */
1714:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             _Flash_Reset();
1715:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1716:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Return FLASH_FAILURE, operation failure */
1717:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLASH_FAILURE;
1718:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1719:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1720:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1721:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check for illegal command or programming errors */
1722:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((FLASH.FSTATR0.BIT.ILGLERR == 1) || (FLASH.FSTATR0.BIT.PRGERR  == 1))
1723:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1724:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
1725:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;
1726:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1727:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1728:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Leave Program/Erase Mode */
1729:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
1730:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1731:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1732:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1733:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1734:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return result of lock bit programming */
1735:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1736:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1737:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1738:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashProgramLockBit
1739:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1740:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1741:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1742:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashReadLockBit
1743:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Reads and returns the lock bit status for a ROM block
1744:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : block - Which ROM erasure block to read the lock bit of
1745:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_LOCK_BIT_SET = Lock bit was set
1746:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_LOCK_BIT_NOT_SET = Lock bit was not set
1747:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_FAILURE = Operation Failed
1748:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Another flash operation is in progress
1749:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1750:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashReadLockBit(uint8_t block)
1751:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1752:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare address pointer */
1753:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t *pAddr;
1754:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1755:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Declare operation result container variable */
1756:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
1757:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1758:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Holds outcome of lock-bit read */
1759:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t lock_bit;
1760:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1761:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */;
1762:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_LOCK_BIT) != FLASH_SUCCESS )
1763:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1764:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
1765:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
1766:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1767:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1768:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Flash Command Address */
1769:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     pAddr = (volatile uint8_t *)(GET_BLOCK_ADDR( block ));
1770:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1771:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Set FCU to ROM PE mode */
1772:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     current_mode = ROM_PE_MODE;
1773:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1774:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enter ROM PE mode, check if operation successful */
1775:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _Enter_PE_Mode((uint32_t)pAddr, 0) != FLASH_SUCCESS)
1776:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1777:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Release state */
1778:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _FlashReleaseState();
1779:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1780:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
1781:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
1782:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1783:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1784:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Switch to ROM Lock-Bit Read Mode */
1785:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     *pAddr = 0x71;
1786:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1787:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check for illegal command */
1788:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)
1789:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1790:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Return FLASH_FAILURE, operation failure */
1791:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;
1792:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1793:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1794:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1795:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Read lock bit value */
1796:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         lock_bit = *pAddr;
1797:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1798:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Set return value */
1799:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(lock_bit != 0x00)
1800:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1801:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Lock bit is not set */
1802:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLASH_LOCK_BIT_NOT_SET;
1803:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1804:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         else
1805:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1806:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /* Lock bit is set */
1807:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLASH_LOCK_BIT_SET;
1808:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1809:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1810:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1811:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Leave Program/Erase Mode */
1812:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Exit_PE_Mode();
1813:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1814:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1815:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1816:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1817:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return result of lock bit programming */
1818:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1819:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1820:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1821:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashReadLockBit
1822:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1823:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1824:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1825:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function Name: R_FlashSetLockBitProtection
1826:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description  : Enables or disables lock bit protection.
1827:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Arguments    : lock_bit - Boolean, whether to enable or disable lock bit
1828:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                           protection (true = enabled, false = disabled)
1829:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Return Value : FLASH_SUCCESS = Operation Successful
1830:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** *                FLASH_BUSY = Another flash operation is in progress
1831:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1832:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashSetLockBitProtection(uint8_t lock_bit)
1833:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1834:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Attempt to grab state */;
1835:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( _FlashGrabState(FLASH_LOCK_BIT) != FLASH_SUCCESS )
1836:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1837:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Another operation is already in progress */
1838:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_BUSY;
1839:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1840:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1841:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Enable or disable? */
1842:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     lock_bit_protection = lock_bit;
1843:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1844:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Release state */
1845:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _FlashReleaseState();
1846:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1847:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Return success */
1848:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
1849:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1850:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
1851:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** End of function  R_FlashSetLockBitProtection
1852:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
1853:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1854:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif /* IGNORE_LOCK_BITS */
1855:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1856:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1857:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* ********************************************************************************************** *
1858:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*                                  START FLS Class HAL Support                                   *
1859:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /* ********************************************************************************************** *
1860:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1861:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*extern void CopyFlashRoutinesToRAM(void);*/
1862:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t cloneSector(uint32_t dest, uint32_t source);
1863:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1864:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t cloneSector(uint32_t dest, uint32_t source)
1865:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1866:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	uint8_t result;
1867:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	uint32_t buff[FLS_WRITE_SIZE/sizeof(uint32_t)];
1868:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	int i;
1869:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	/* Erase the destination sector */
1870:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	result = R_FlashEraseRange(dest, CLONE_BLOCK_SIZE);
1871:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	if(result == FLASH_SUCCESS )
1872:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1873:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		/* Write - No write sector are left blank */
1874:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		for(i = 0; i < CLONE_BLOCK_SIZE; i+= FLS_WRITE_SIZE)
1875:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		{
1876:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 			if(BlankCheckDataFlash((source + i), FLS_WRITE_SIZE) != FLASH_BLANK)
1877:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1878:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				/* copy to ram */
1879:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				/*for(j=0; j<(FLS_WRITE_SIZE/sizeof(uint32_t)); j+= sizeof(uint32_t)) */
1880:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				buff[0] = *(uint32_t*)(source+i);
1881:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				buff[1] = *(uint32_t*)(source+i+4);
1882:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1883:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				/* write to destination */
1884:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				result = R_FlashWrite(dest + i, (uint32_t)&buff[0], FLS_WRITE_SIZE);
1885:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				if(result != FLASH_SUCCESS )
1886:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             break;
1887:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
1888:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1889:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	}
1890:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
1891:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1892:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(DATA_CLONE_RECOVERY)
1893:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t restoreUncompleteWrite(void);
1894:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1895:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t restoreUncompleteWrite(void)
1896:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1897:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t sector_restore_addr;
1898:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result=FLASH_SUCCESS;
1899:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t check_word_start_clone = 0;
1900:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1901:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(BlankCheckDataFlash(CLONE_TRANS_BLOCK_ADDRESS, FLS_WRITE_SIZE))
1902:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1903:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     	sector_restore_addr    = *(uint32_t*)CLONE_TRANS_BLOCK_ADDRESS;
1904:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		check_word_start_clone = *(uint8_t*)(CLONE_TRANS_BLOCK_ADDRESS + CLONE_START_WORD_POS);
1905:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(check_word_start_clone == CLONE_START_WORD_VALUE) /* verifica che non sia un valore casu
1906:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
1907:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         	result = cloneSector(sector_restore_addr, CLONE_BLOCK_ADDRESS);
1908:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1909:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         	if(result != FLASH_SUCCESS)
1910:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
1911:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             /*== Erase clone sector ==*/
1912:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashEraseRange((FLS_positionType) CLONE_TRANS_BLOCK_ADDRESS, CLONE_BLOCK_SI
1913:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
1914:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }/* end if check word */
1915:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }/* end if restore clone block */
1916:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	R_FlashDataAreaAccess(0xFFFF, 0x0000); /*MS ????? */
1917:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	return result;
1918:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
1919:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1920:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
1921:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Function: FLS_Init
1922:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Description: Initialization of the FLASH Module Clock. Programming and erase operation are allow
1923:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Note: Modified from define to function.
1924:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Status: Test me on Hardware!
1925:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  */
1926:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** void FLS_Init(void)
1927:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1506                             		.loc 1 1927 0
1928:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*CopyFlashRoutinesToRAM();*/
1929:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     _Flash_Init();	/* It is call by Flash Erase Function*/
 1507                             		.loc 1 1929 0
 1508 0000 05 00 00 00             		bsr	__Flash_Init
 1509                             	.LVL173:
 1510                             	.LBB46:
 1511                             	.LBB47:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 1512                             		.loc 1 525 0
 1513 0004 FB EE 40 C4 7F          		mov.L	#0x7fc440, r14
 1514 0009 F8 E9 FF 2D             		mov.W	#0x2dff, [r14]
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 1515                             		.loc 1 528 0
 1516 000d FB EE 50 C4 7F          		mov.L	#0x7fc450, r14
 1517 0012 F8 E9 FF 1E             		mov.W	#0x1eff, [r14]
 1518 0016 02                      		rts
 1519                             	.LBE47:
 1520                             	.LBE46:
 1521                             	.LFE19:
 1523                             		.section	.text.FLS_Erase,"ax",@progbits
 1524                             		.global	_FLS_Erase
 1526                             	_FLS_Erase:
 1527                             	.LFB20:
1930:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     R_FlashDataAreaAccess(0xFFFF, 0xFFFF);
1931:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(DATA_CLONE_RECOVERY)
1932:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     restoreUncompleteWrite();
1933:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1934:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }/*FlashInit*/
1935:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1936:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
1937:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Function: FLS_Ease
1938:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Description: Call "R_FlashErase(position)" API From Renesas Flash Library
1939:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Note:
1940:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Status:
1941:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  */
1942:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_Erase(FLS_positionType address)
1943:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1528                             		.loc 1 1943 0
 1529                             	.LVL174:
 1530                             	.LBB52:
 1531                             	.LBB53:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 1532                             		.loc 1 525 0
 1533 0000 FB EE 40 C4 7F          		mov.L	#0x7fc440, r14
 1534 0005 F8 E9 FF 2D             		mov.W	#0x2dff, [r14]
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 1535                             		.loc 1 528 0
 1536 0009 FB EE 50 C4 7F          		mov.L	#0x7fc450, r14
 1537                             	.LBE53:
 1538                             	.LBE52:
 1539                             		.loc 1 1943 0
 1540 000e 60 40                   		sub	#4, r0
 1541                             	.LCFI12:
 1542                             	.LBB55:
 1543                             	.LBB54:
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 1544                             		.loc 1 528 0
 1545 0010 F8 E9 FF 1E             		mov.W	#0x1eff, [r14]
 1546                             	.LBE54:
 1547                             	.LBE55:
1944:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     volatile uint8_t fls_erase_status;
1945:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t block;
1946:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1947:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Block Calcolus ROM*/
1948:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     R_FlashDataAreaAccess(0xFFFF, 0xFFFF);
1949:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((address >= FLASH_BASE_ADDRESS) && (address < FLASH_END_ADDRESS))
 1548                             		.loc 1 1949 0
 1549 0014 73 1E 00 00 02          		add	#0x20000, r1, r14
 1550 0019 77 0E FE FF 01          		cmp	#0x1fffe, r14
 1551 001e 24 08                   		bgtu	.L182
 1552                             	.LVL175:
1950:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1951:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         block = ((FLASH_END_ADDRESS - address )/FLASH_ERASE_BLK_SZ);
 1553                             		.loc 1 1951 0
 1554 0020 7E 01                   		not	r1
 1555                             	.LVL176:
1952:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_erase_status = R_FlashErase(block);	/* !< Block ID as parameter */
 1556                             		.loc 1 1952 0
 1557 0022 68 A1                   		shlr	#10, r1
 1558                             	.LVL177:
 1559 0024 2E 12                   		bra	.L186
 1560                             	.LVL178:
 1561                             	.L182:
1953:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1954:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Block Calcolus DATA*/
1955:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else if((address >= FLASH_DATA_BASE_ADDRESS) && (address <= FLASH_DATA_END_ADDRESS))
 1562                             		.loc 1 1955 0
 1563 0026 73 11 00 00 F0          		add	#0xfff00000, r1
 1564                             	.LVL179:
 1565 002b 76 01 FF 1F             		cmp	#0x1fff, r1
 1566 002f 24 0F                   		bgtu	.L184
 1567                             	.LVL180:
1956:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1957:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(OPT_FALSH_1) /*MS prova ottimizzazione */
1958:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_erase_status = R_FlashDataErase(address, FLASH_ERASE_BLK_SZ);
1959:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #else
1960:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         block = ((address - FLASH_DATA_BASE_ADDRESS)/FLASH_ERASE_BLK_SZ)+ BLOCK_DB0;
 1568                             		.loc 1 1960 0
 1569 0031 68 A1                   		shlr	#10, r1
 1570                             	.LVL181:
1961:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_erase_status = R_FlashErase(block);	/* !< Block ID as parameter */
 1571                             		.loc 1 1961 0
 1572 0033 71 11 80                		add	#0xffffff80, r1
 1573                             	.LVL182:
 1574                             		.balign 2,3,3
 1575                             	.L186:
 1576 0036 05 00 00 00             		bsr	_R_FlashErase_1
 1577                             	.LVL183:
 1578 003a C3 01                   		mov.B	r1, [r0]
 1579                             	.LVL184:
 1580 003c 2E 06                   		bra	.L183
 1581                             	.LVL185:
 1582                             	.L184:
1962:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
1963:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1964:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
1965:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1966:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_erase_status = FLASH_ERROR_ADDRESS;
 1583                             		.loc 1 1966 0
 1584 003e 3C 00 03                		mov.B	#3, [r0]
 1585                             	.LVL186:
 1586 0041 03                      		.balign 2,3,4
 1587                             	.L183:
 1588                             	.LBB56:
 1589                             	.LBB57:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 1590                             		.loc 1 525 0
 1591 0042 FB EE 40 C4 7F          		mov.L	#0x7fc440, r14
 1592 0047 F8 E9 FF 2D             		mov.W	#0x2dff, [r14]
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 1593                             		.loc 1 528 0
 1594 004b FB EE 50 C4 7F          		mov.L	#0x7fc450, r14
 1595 0050 F8 E9 00 1E             		mov.W	#0x1e00, [r14]
 1596                             	.LBE57:
 1597                             	.LBE56:
1967:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1968:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     R_FlashDataAreaAccess(0xFFFF, 0x0000);
1969:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return fls_erase_status;
1970:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }/*end FLS_Erase*/
 1598                             		.loc 1 1970 0
 1599 0054 58 01                   		movu.B	[r0], r1
 1600 0056 67 01                   		rtsd	#4
 1601                             	.LFE20:
 1603                             		.section	.text.FLS_CheckErrors,"ax",@progbits
 1604                             		.global	_FLS_CheckErrors
 1606                             	_FLS_CheckErrors:
 1607                             	.LFB22:
1971:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1972:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
1973:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Function: FLS_Programming
1974:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Description:  The Function call
1975:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Status:
1976:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  *
1977:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  */
1978:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define ADDR_MASK	  ((uint32_t)(ROM_PROGRAM_SIZE-1))
1979:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_Programming(uint8_t* pSource, uint32_t len, FLS_positionType dest)
1980:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
1981:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t fls_programming_status=0;
1982:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned char *srcPtr=(unsigned char *)pSource;
1983:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int headOffset=0;
1984:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int headLen=0;
1985:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int tailLen=0;
1986:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int i;
1987:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     char writeBuff[FLS_WRITE_SIZE];
1988:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1989:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     R_FlashDataAreaAccess(0xFFFF, 0xFFFF);
1990:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1991:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((dest >= DF_ADDRESS) && (dest < DF_ADDRSS_END))	/* Write Data in DATA FLASH */
1992:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1993:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_programming_status=FLS_ProgrammingData( pSource, len, dest);
1994:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
1995:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else /*Write Data in ROM */
1996:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
1997:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         headOffset = (dest & ADDR_MASK);
1998:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
1999:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* head ------------------------------------------*/
2000:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(headOffset > 0)
2001:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2002:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             headLen = FLS_WRITE_SIZE-headOffset;
2003:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2004:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if (headLen > len)
2005:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2006:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	headLen = len;
2007:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2008:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2009:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             for(i=0; i<FLS_WRITE_SIZE; i++)  /* init write buffer */
2010:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2011:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	if ( (i < headOffset) || (i >= headOffset+headLen) )
2012:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	{
2013:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i] = 0xFF;
2014:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	}
2015:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	else
2016:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	{
2017:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i]=*srcPtr;
2018:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     srcPtr++;
2019:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	}
2020:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2021:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2022:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             fls_programming_status=R_FlashWrite((uint32_t)dest-headOffset, (uint32_t)&writeBuff[0],
2023:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2024:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2025:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* body -----------------------------------------*/
2026:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( !fls_programming_status )
2027:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2028:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             int writePos= dest+headLen;
2029:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             int nByte=len;
2030:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             tailLen = (len + headOffset) & ADDR_MASK;
2031:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(headLen>0)
2032:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2033:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 nByte -= headLen;
2034:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2035:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             nByte -= tailLen;
2036:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(nByte>0)
2037:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2038:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 fls_programming_status=R_FlashWrite(writePos, (uint32_t)srcPtr, nByte);
2039:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 srcPtr += nByte;
2040:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2041:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2042:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2043:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* tail ------------------------------------------*/
2044:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( !fls_programming_status )
2045:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2046:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             unsigned int beginTail = dest+(len-tailLen);
2047:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( tailLen > 0 && dest < beginTail)
2048:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2049:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 for(i=0; i<ROM_PROGRAM_SIZE; i++)  /* init write buffer */
2050:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
2051:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i] = 0xFF;
2052:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
2053:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 for(i=0; i<tailLen; i++)
2054:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
2055:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i] = *srcPtr++;
2056:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
2057:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 fls_programming_status=R_FlashWrite(beginTail, (uint32_t)&writeBuff[0], ROM_PROGRAM
2058:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2059:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2060:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2061:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         R_FlashDataAreaAccess(0xFFFF, 0x0000);
2062:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }/* end else to write in ROM */
2063:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return fls_programming_status;
2064:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
2065:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2066:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
2067:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function: FLS_CheckErrors
2068:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description: Check the Flash Status Error Byte
2069:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Note:
2070:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** */
2071:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_CheckErrors(void)
2072:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1608                             		.loc 1 2072 0
 1609                             	.LVL187:
2073:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
2074:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ERSERR == 1)	/* Flash Erase Error*/
 1610                             		.loc 1 2074 0
 1611 0000 FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 1612 0005 CC E1                   		mov.B	[r14], r1
 1613 0007 75 21 20                		and	#32, r1
 1614 000a 5B 11                   		movu.B	r1, r1
 1615 000c 61 01                   		cmp	#0, r1
 1616 000e 20 04                   		beq	.L188
2075:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2076:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;		/* Return FLASH_FAILURE, operation failure*/
 1617                             		.loc 1 2076 0
 1618 0010 66 61                   		mov	#6, r1
 1619                             		.balign 2,3,5
 1620                             	.L188:
 1621                             	.LVL188:
2077:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2078:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.PRGERR == 1)	/* Flash Programming Error*/
 1622                             		.loc 1 2078 0
 1623 0012 CC EE                   		mov.B	[r14], r14
 1624 0014 75 2E 10                		and	#16, r14
 1625 0017 5B EE                   		movu.B	r14, r14
 1626 0019 61 0E                   		cmp	#0, r14
 1627 001b 20 05                   		beq	.L189
2079:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2080:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;		/* Return FLASH_FAILURE, operation failure*/
 1628                             		.loc 1 2080 0
 1629 001d 66 61                   		mov	#6, r1
 1630                             	.LVL189:
 1631 001f 03                      		.balign 2,3,4
 1632                             	.L189:
2081:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2082:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR0.BIT.ILGLERR == 1)	/* Flash Illegal Istraction Error*/
 1633                             		.loc 1 2082 0
 1634 0020 FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 1635 0025 CC EE                   		mov.B	[r14], r14
 1636 0027 75 2E 40                		and	#64, r14
 1637 002a 5B EE                   		movu.B	r14, r14
 1638 002c 61 0E                   		cmp	#0, r14
 1639 002e 20 04                   		beq	.L190
2083:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2084:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;		/* Return FLASH_FAILURE, operation failure*/
 1640                             		.loc 1 2084 0
 1641 0030 66 61                   		mov	#6, r1
 1642                             	.LVL190:
 1643                             		.balign 2,3,4
 1644                             	.L190:
2085:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2086:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(FLASH.FSTATR1.BIT.FCUERR == 1)	/* FCU processing Error*/
 1645                             		.loc 1 2086 0
 1646 0032 FB EE B1 FF 7F          		mov.L	#0x7fffb1, r14
 1647 0037 CC EE                   		mov.B	[r14], r14
 1648 0039 76 2E 80 00             		and	#0x80, r14
 1649 003d 5B EE                   		movu.B	r14, r14
 1650 003f 61 0E                   		cmp	#0, r14
 1651 0041 20 05                   		beq	.L191
2087:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2088:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;		/* Return FLASH_FAILURE, operation failure*/
 1652                             		.loc 1 2088 0
 1653 0043 66 61                   		mov	#6, r1
 1654                             	.LVL191:
 1655 0045 03                      		.balign 2,3,4
 1656                             	.L191:
2089:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2090:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( (FLASH.FSTATR0.BIT.FRDY) && (FLASH.FPESTAT.BIT.PEERRST != 0) )	/* FCU processing Error*/
 1657                             		.loc 1 2090 0
 1658 0046 FB EE B0 FF 7F          		mov.L	#0x7fffb0, r14
 1659 004b CC EE                   		mov.B	[r14], r14
 1660 004d 76 2E 80 00             		and	#0x80, r14
 1661 0051 5B EE                   		movu.B	r14, r14
 1662 0053 61 0E                   		cmp	#0, r14
 1663 0055 20 15                   		beq	.L192
 1664                             		.loc 1 2090 0 is_stmt 0 discriminator 1
 1665 0057 FB EE CC FF 7F          		mov.L	#0x7fffcc, r14
 1666 005c DC EE                   		mov.W	[r14], r14
 1667 005e 76 2E FF 00             		and	#0xff, r14
 1668 0062 20 08                   		beq	.L192
 1669                             	.LVL192:
2091:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2092:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /*The value of the PEERRST bits is valid only when the FSTATR0.FRDY bit is set to 1 while t
2093:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         FSTATR0.ERSERR bit or FSTATR0.PRGERR bit is 1. The value of the reason of the past error is
2094:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         PEERRST[7:0] bits when the ERSERR bit and PRGERR bit is 0*/
2095:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2096:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;		/* Return FLASH_FAILURE, operation failure*/
2097:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         _Flash_Reset();
 1670                             		.loc 1 2097 0 is_stmt 1
 1671 0064 05 00 00 00             		bsr	__Flash_Reset
 1672                             	.LVL193:
2096:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = FLASH_FAILURE;		/* Return FLASH_FAILURE, operation failure*/
 1673                             		.loc 1 2096 0
 1674 0068 66 61                   		mov	#6, r1
 1675                             	.LVL194:
 1676                             		.balign 2,3,2
 1677                             	.L192:
2098:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2099:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
2100:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }/* end FLS_CheckErrors(void) */
 1678                             		.loc 1 2100 0
 1679 006a 75 21 26                		and	#38, r1
 1680                             	.LVL195:
 1681 006d 02                      		rts
 1682                             	.LFE22:
 1684                             		.section	.text.FLS_InitRegsForErasing,"ax",@progbits
 1685                             		.global	_FLS_InitRegsForErasing
 1687                             	_FLS_InitRegsForErasing:
 1688                             	.LFB23:
2101:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2102:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
2103:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function: FLS_InitRegsForErasing
2104:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description: Should clear the last Flash error
2105:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Note: The Flash Status registers are read only
2106:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** */
2107:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** void FLS_InitRegsForErasing(void)
2108:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1689                             		.loc 1 2108 0
 1690 0000 02                      		rts
 1691                             	.LFE23:
 1693                             		.section	.text.BlankCheckDataFlash,"ax",@progbits
 1694                             		.global	_BlankCheckDataFlash
 1696                             	_BlankCheckDataFlash:
 1697                             	.LFB24:
2109:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }/*end FLS_InitRegsForErasing*/
2110:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2111:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2112:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define BLANK_CHECK_BYTE_SIZE 	2
2113:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define BLANK_CHECK_SIZE_CMD 	BLANK_CHECK_2_BYTE
2114:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define ADDR_MASK_BLANK_CHECK 	0x1
2115:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2116:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
2117:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define BLANK_CHECK_BYTE_SIZE 	8
2118:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define BLANK_CHECK_SIZE_CMD 	BLANK_CHECK_8_BYTE
2119:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #define ADDR_MASK_BLANK_CHECK 	0x7
2120:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** */
2121:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t BlankCheckDataFlash(FLS_positionType dest, FLS_sizeType len)
2122:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1698                             		.loc 1 2122 0
 1699                             		.loc 1 2122 0
 1700 0000 6E 7D                   		pushm	r7-r13
 1701                             	.LCFI13:
2123:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t fls_status=FLASH_SUCCESS;
2124:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t headOffset=0;
2125:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t headLen=0;
2126:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t tailLen=0;
2127:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t writePos;
2128:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t nByte;
2129:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int i;
2130:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2131:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headOffset=0;
2132:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headLen=0;
2133:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     tailLen=0;
2134:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /********************/
2135:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Ottimizzazione */
2136:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(((dest&0x7F) == 0) && (len & 0x7F)==0)
 1702                             		.loc 1 2136 0
 1703 0002 FD 74 C1 7F             		tst	#0x7f, r1
2122:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1704                             		.loc 1 2122 0
 1705 0006 EF 17                   		mov.L	r1, r7
 1706 0008 EF 2A                   		mov.L	r2, r10
 1707                             		.loc 1 2136 0
 1708 000a 21 26                   		bne	.L205
 1709                             		.loc 1 2136 0 is_stmt 0 discriminator 1
 1710 000c EF 2B                   		mov.L	r2, r11
 1711 000e 75 2B 7F                		and	#0x7f, r11
 1712 0011 20 17                   		beq	.L206
 1713 0013 2E 1D                   		bra	.L205
 1714                             	.L208:
2137:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2138:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(writePos = 0;(fls_status == FLASH_SUCCESS) && (writePos < len) ; writePos += DF_BLOCK_S
2139:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2140:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             fls_status=R_FlashDataAreaBlankCheck(dest + writePos, BLANK_CHECK_ENTIRE_BLOCK);
 1715                             		.loc 1 2140 0 is_stmt 1 discriminator 1
 1716 0015 FF 21 7B                		add	r7, r11, r1
 1717 0018 66 02                   		mov	#0, r2
 1718 001a 05 00 00 00             		bsr	_R_FlashDataAreaBlankCheck
2138:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(writePos = 0;(fls_status == FLASH_SUCCESS) && (writePos < len) ; writePos += DF_BLOCK_S
 1719                             		.loc 1 2138 0 discriminator 1
 1720 001e 72 BB 80 00             		add	#0x80, r11
 1721 0022 5B 1C                   		movu.B	r1, r12
 1722 0024 61 0C                   		cmp	#0, r12
 1723 0026 21 6E                   		bne	.L207
 1724                             		.balign 2,3,1
 1725                             	.L206:
2138:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(writePos = 0;(fls_status == FLASH_SUCCESS) && (writePos < len) ; writePos += DF_BLOCK_S
 1726                             		.loc 1 2138 0 is_stmt 0 discriminator 2
 1727 0028 47 AB                   		cmp	r10, r11
 1728 002a 23 EB                   		bltu	.L208
 1729                             		.balign 2,3,1
 1730                             	.L214:
2141:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2142:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return fls_status;
2143:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2144:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2145:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*******************/
2146:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2147:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headOffset = (int)(dest & ADDR_MASK_BLANK_CHECK);
2148:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2149:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(headOffset > 0)
2150:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         headLen = BLANK_CHECK_BYTE_SIZE-headOffset;
2151:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2152:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* head ------------------------------------------*/
2153:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((headLen >0) || (len < BLANK_CHECK_BYTE_SIZE))
2154:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2155:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_status=R_FlashDataAreaBlankCheck(dest-headOffset, BLANK_CHECK_SIZE_CMD);
2156:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2157:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* body -----------------------------------------*/
2158:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fls_status )
2159:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2160:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         writePos= dest+headLen;
2161:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         nByte=len;
2162:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         tailLen = (len + headOffset) & ADDR_MASK_BLANK_CHECK;
2163:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(headLen>0)
2164:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2165:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             nByte -= headLen;
2166:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2167:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         nByte -= tailLen;
2168:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(nByte>0)
2169:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2170:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 for(i=0; (i < nByte) && (fls_status == FLASH_BLANK); i += BLANK_CHECK_BYTE_SIZE)
2171:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
2172:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     fls_status=R_FlashDataAreaBlankCheck(writePos + i, BLANK_CHECK_SIZE_CMD);
 1731                             		.loc 1 2172 0 is_stmt 1
 1732 002c 66 01                   		mov	#0, r1
 1733 002e 2E 66                   		bra	.L207
 1734                             	.L205:
2147:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headOffset = (int)(dest & ADDR_MASK_BLANK_CHECK);
 1735                             		.loc 1 2147 0
 1736 0030 EF 7B                   		mov.L	r7, r11
 1737 0032 64 1B                   		and	#1, r11
2149:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(headOffset > 0)
 1738                             		.loc 1 2149 0
 1739 0034 20 64                   		beq	.L209
2150:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         headLen = BLANK_CHECK_BYTE_SIZE-headOffset;
 1740                             		.loc 1 2150 0
 1741 0036 66 1C                   		mov.L	#1, r12
 1742                             		.balign 2,3,2
 1743                             	.L217:
2155:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_status=R_FlashDataAreaBlankCheck(dest-headOffset, BLANK_CHECK_SIZE_CMD);
 1744                             		.loc 1 2155 0
 1745 0038 FF 01 B7                		sub	r11, r7, r1
 1746 003b 66 22                   		mov	#2, r2
 1747 003d 05 00 00 00             		bsr	_R_FlashDataAreaBlankCheck
2158:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fls_status )
 1748                             		.loc 1 2158 0
 1749 0041 5B 1D                   		movu.B	r1, r13
 1750 0043 61 0D                   		cmp	#0, r13
 1751 0045 21 4F                   		bne	.L207
 1752 0047 03                      		.balign 2,3,1
 1753                             	.L218:
2162:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         tailLen = (len + headOffset) & ADDR_MASK_BLANK_CHECK;
 1754                             		.loc 1 2162 0
 1755 0048 4B AB                   		add	r10, r11
 1756 004a 64 1B                   		and	#1, r11
2163:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(headLen>0)
 1757                             		.loc 1 2163 0
 1758 004c 61 0C                   		cmp	#0, r12
 1759 004e 20 07                   		beq	.L220
2165:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             nByte -= headLen;
 1760                             		.loc 1 2165 0
 1761 0050 71 A9 FF                		add	#-1, r10, r9
 1762 0053 2E 05                   		bra	.L211
 1763                             	.L220:
2163:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(headLen>0)
 1764                             		.loc 1 2163 0
 1765 0055 EF A9                   		mov.L	r10, r9
 1766 0057 03                      		.balign 2,3,1
 1767                             	.L211:
2167:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         nByte -= tailLen;
 1768                             		.loc 1 2167 0
 1769 0058 43 B9                   		sub	r11, r9
2168:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(nByte>0)
 1770                             		.loc 1 2168 0
 1771 005a 21 08                   		bne	.L221
 1772                             		.balign 2,3,1
 1773                             	.L216:
 1774                             	.LBB58:
2173:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2174:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2175:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2176:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* tail ------------------------------------------*/
2177:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fls_status )
2178:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2179:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         unsigned int beginTail = dest+(len-tailLen);
2180:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( (tailLen > 0) && (dest < beginTail))
 1775                             		.loc 1 2180 0
 1776 005c 61 0B                   		cmp	#0, r11
 1777 005e 21 25                   		bne	.L213
 1778 0060 2E CC                   		bra	.L214
 1779                             	.L221:
 1780                             	.LBE58:
2168:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(nByte>0)
 1781                             		.loc 1 2168 0
 1782 0062 66 0D                   		mov.L	#0, r13
2160:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         writePos= dest+headLen;
 1783                             		.loc 1 2160 0
 1784 0064 4B 7C                   		add	r7, r12
 1785                             		.balign 2,3,2
 1786                             	.L212:
2172:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     fls_status=R_FlashDataAreaBlankCheck(writePos + i, BLANK_CHECK_SIZE_CMD);
 1787                             		.loc 1 2172 0 discriminator 1
 1788 0066 FF 21 DC                		add	r13, r12, r1
 1789 0069 66 22                   		mov	#2, r2
 1790 006b 05 00 00 00             		bsr	_R_FlashDataAreaBlankCheck
2170:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 for(i=0; (i < nByte) && (fls_status == FLASH_BLANK); i += BLANK_CHECK_BYTE_SIZE)
 1791                             		.loc 1 2170 0 discriminator 1
 1792 006f 62 2D                   		add	#2, r13
 1793 0071 47 9D                   		cmp	r9, r13
 1794 0073 5B 1E                   		movu.B	r1, r14
 1795 0075 22 08                   		bgeu	.L215
2170:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 for(i=0; (i < nByte) && (fls_status == FLASH_BLANK); i += BLANK_CHECK_BYTE_SIZE)
 1796                             		.loc 1 2170 0 is_stmt 0 discriminator 2
 1797 0077 61 0E                   		cmp	#0, r14
 1798 0079 20 ED                   		beq	.L212
 1799 007b 2E 19                   		bra	.L207
 1800                             	.L215:
2177:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( !fls_status )
 1801                             		.loc 1 2177 0 is_stmt 1
 1802 007d 61 0E                   		cmp	#0, r14
 1803 007f 20 DD                   		beq	.L216
 1804 0081 2E 13                   		bra	.L207
 1805                             	.L213:
 1806                             	.LBB59:
2179:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         unsigned int beginTail = dest+(len-tailLen);
 1807                             		.loc 1 2179 0 discriminator 1
 1808 0083 4B 7A                   		add	r7, r10
 1809 0085 71 A1 FF                		add	#-1, r10, r1
 1810                             		.loc 1 2180 0 discriminator 1
 1811 0088 47 17                   		cmp	r1, r7
 1812 008a 22 A2                   		bgeu	.L214
 1813                             	.LBE59:
2181:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2182:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             fls_status=R_FlashDataAreaBlankCheck(beginTail, BLANK_CHECK_SIZE_CMD);
2183:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2184:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2185:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2186:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return fls_status;
2187:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1814                             		.loc 1 2187 0
 1815 008c 6F 7D                   		popm	r7-r13
 1816                             	.LBB60:
2182:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             fls_status=R_FlashDataAreaBlankCheck(beginTail, BLANK_CHECK_SIZE_CMD);
 1817                             		.loc 1 2182 0
 1818 008e 66 22                   		mov	#2, r2
 1819 0090 04 00 00 00             		bra	_R_FlashDataAreaBlankCheck
 1820                             	.L207:
 1821 0094 5B 11                   		movu.B	r1, r1
 1822 0096 2E 0A                   		bra	.L230
 1823                             	.L209:
 1824                             	.LBE60:
2153:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((headLen >0) || (len < BLANK_CHECK_BYTE_SIZE))
 1825                             		.loc 1 2153 0
 1826 0098 61 1A                   		cmp	#1, r10
2132:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headLen=0;
 1827                             		.loc 1 2132 0
 1828 009a EF BC                   		mov.L	r11, r12
2153:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((headLen >0) || (len < BLANK_CHECK_BYTE_SIZE))
 1829                             		.loc 1 2153 0
 1830 009c 25 9C                   		bleu	.L217
 1831 009e 2E AA                   		bra	.L218
 1832                             	.L230:
 1833                             		.loc 1 2187 0
 1834 00a0 3F 7D 07                		rtsd	#28, r7-r13
 1835                             	.LFE24:
 1837 00a3 03                      		.section	.text.cloneSector,"ax",@progbits
 1838                             		.global	_cloneSector
 1840                             	_cloneSector:
 1841                             	.LFB18:
1865:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1842                             		.loc 1 1865 0
 1843                             	.LVL196:
 1844 0000 6E 7D                   		pushm	r7-r13
 1845                             	.LCFI14:
 1846 0002 60 80                   		sub	#8, r0
 1847                             	.LCFI15:
1865:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1848                             		.loc 1 1865 0
 1849 0004 EF 27                   		mov.L	r2, r7
1870:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	result = R_FlashEraseRange(dest, CLONE_BLOCK_SIZE);
 1850                             		.loc 1 1870 0
 1851 0006 75 42 80                		mov.L	#0x80, r2
 1852                             	.LVL197:
1865:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1853                             		.loc 1 1865 0
 1854 0009 EF 1C                   		mov.L	r1, r12
1870:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	result = R_FlashEraseRange(dest, CLONE_BLOCK_SIZE);
 1855                             		.loc 1 1870 0
 1856 000b 05 00 00 00             		bsr	_R_FlashEraseRange
 1857                             	.LVL198:
1871:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	if(result == FLASH_SUCCESS )
 1858                             		.loc 1 1871 0
 1859 000f 5B 1A                   		movu.B	r1, r10
 1860 0011 61 0A                   		cmp	#0, r10
1870:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	result = R_FlashEraseRange(dest, CLONE_BLOCK_SIZE);
 1861                             		.loc 1 1870 0
 1862 0013 CF 1B                   		mov.B	r1, r11
 1863                             	.LVL199:
1871:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	if(result == FLASH_SUCCESS )
 1864                             		.loc 1 1871 0
 1865 0015 21 37                   		bne	.L233
 1866                             	.LVL200:
 1867 0017 03                      		.balign 2,3,1
 1868                             	.L235:
1876:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 			if(BlankCheckDataFlash((source + i), FLS_WRITE_SIZE) != FLASH_BLANK)
 1869                             		.loc 1 1876 0
 1870 0018 EF 71                   		mov.L	r7, r1
 1871 001a 66 82                   		mov.L	#8, r2
 1872 001c 05 00 00 00             		bsr	_BlankCheckDataFlash
 1873                             	.LVL201:
 1874 0020 5B 11                   		movu.B	r1, r1
 1875 0022 61 01                   		cmp	#0, r1
 1876 0024 21 0D                   		bne	.L234
 1877                             		.balign 2,3,1
 1878                             	.L236:
 1879                             	.LVL202:
1874:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		for(i = 0; i < CLONE_BLOCK_SIZE; i+= FLS_WRITE_SIZE)
 1880                             		.loc 1 1874 0
 1881 0026 62 8A                   		add	#8, r10
 1882                             	.LVL203:
 1883 0028 62 87                   		add	#8, r7
 1884 002a 75 5A 80                		cmp	#0x80, r10
 1885 002d 21 EB                   		bne	.L235
 1886 002f 2E 1D                   		bra	.L233
 1887                             	.LVL204:
 1888                             	.L234:
1880:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				buff[0] = *(uint32_t*)(source+i);
 1889                             		.loc 1 1880 0
 1890 0031 EC 7D                   		mov.L	[r7], r13
1884:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				result = R_FlashWrite(dest + i, (uint32_t)&buff[0], FLS_WRITE_SIZE);
 1891                             		.loc 1 1884 0
 1892 0033 FF 21 CA                		add	r12, r10, r1
1880:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				buff[0] = *(uint32_t*)(source+i);
 1893                             		.loc 1 1880 0
 1894 0036 E3 0D                   		mov.L	r13, [r0]
1881:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				buff[1] = *(uint32_t*)(source+i+4);
 1895                             		.loc 1 1881 0
 1896 0038 ED 7D 01                		mov.L	4[r7], r13
1884:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				result = R_FlashWrite(dest + i, (uint32_t)&buff[0], FLS_WRITE_SIZE);
 1897                             		.loc 1 1884 0
 1898 003b EF 02                   		mov.L	r0, r2
 1899 003d 66 83                   		mov	#8, r3
1881:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				buff[1] = *(uint32_t*)(source+i+4);
 1900                             		.loc 1 1881 0
 1901 003f E7 0D 01                		mov.L	r13, 4[r0]
1884:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				result = R_FlashWrite(dest + i, (uint32_t)&buff[0], FLS_WRITE_SIZE);
 1902                             		.loc 1 1884 0
 1903 0042 05 00 00 00             		bsr	_R_FlashWrite_1
 1904                             	.LVL205:
1885:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				if(result != FLASH_SUCCESS )
 1905                             		.loc 1 1885 0
 1906 0046 61 01                   		cmp	#0, r1
 1907 0048 20 DE                   		beq	.L236
1884:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 				result = R_FlashWrite(dest + i, (uint32_t)&buff[0], FLS_WRITE_SIZE);
 1908                             		.loc 1 1884 0
 1909 004a CF 1B                   		mov.B	r1, r11
 1910                             	.LVL206:
 1911                             		.balign 2,3,1
 1912                             	.L233:
1891:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1913                             		.loc 1 1891 0
 1914 004c 5B B1                   		movu.B	r11, r1
 1915 004e 3F 7D 09                		rtsd	#36, r7-r13
 1916                             	.LFE18:
 1918 0051 03                      		.section	.text.FLS_BlankCheck,"ax",@progbits
 1919                             		.global	_FLS_BlankCheck
 1921                             	_FLS_BlankCheck:
 1922                             	.LFB25:
2188:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2189:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
2190:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Function: FLS_BlankCheck
2191:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** * Description:
2192:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** */
2193:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_BlankCheck(FLS_sizeType size, FLS_positionType position)
2194:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1923                             		.loc 1 2194 0
 1924                             	.LVL207:
2195:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     char *p = (char*)position;
2196:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int i = 0;
2197:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
2198:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* Check if ROM PROGRAM FLASH IS BLANK */
2199:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((position >= FLASH_BASE_ADDRESS) && (position < FLASH_END_ADDRESS))
 1925                             		.loc 1 2199 0
 1926 0000 73 23 00 00 02          		add	#0x20000, r2, r3
 1927 0005 77 03 FE FF 01          		cmp	#0x1fffe, r3
2194:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1928                             		.loc 1 2194 0
 1929 000a EF 14                   		mov.L	r1, r4
 1930                             		.loc 1 2199 0
 1931 000c 24 18                   		bgtu	.L243
2193:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_BlankCheck(FLS_sizeType size, FLS_positionType position)
 1932                             		.loc 1 2193 0
 1933 000e 4B 24                   		add	r2, r4
 1934 0010 2E 0E                   		bra	.L244
 1935                             	.LVL208:
 1936                             	.L246:
2200:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2201:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(i = 0; i < size; i++, p++)
2202:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2203:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( *p != 0xFF )
 1937                             		.loc 1 2203 0
 1938 0012 FD 38 23                		movu.B	[r2+], r3
 1939 0015 75 53 FF                		cmp	#0xff, r3
 1940 0018 20 06                   		beq	.L244
 1941                             	.LVL209:
 1942                             		.balign 2,3,1
 1943                             	.L247:
2204:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2205:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 result = FLASH_FAILURE;
 1944                             		.loc 1 2205 0
 1945 001a 66 61                   		mov	#6, r1
 1946 001c 2E 26                   		bra	.L245
 1947                             	.LVL210:
 1948                             	.L244:
2201:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(i = 0; i < size; i++, p++)
 1949                             		.loc 1 2201 0 discriminator 1
 1950 001e 47 42                   		cmp	r4, r2
 1951 0020 21 F2                   		bne	.L246
 1952 0022 2E 1D                   		bra	.L248
 1953                             	.LVL211:
 1954                             	.L243:
2206:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 break;
2207:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2208:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2209:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2210:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     else
2211:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2212:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* Check if DATA FLASH IS BLANK */
2213:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if((position >= FLASH_DATA_BASE_ADDRESS) && (position <= FLASH_DATA_END_ADDRESS))
 1955                             		.loc 1 2213 0
 1956 0024 73 23 00 00 F0          		add	#0xfff00000, r2, r3
 1957 0029 76 03 FF 1F             		cmp	#0x1fff, r3
 1958 002d 24 12                   		bgtu	.L248
2214:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2215:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = BlankCheckDataFlash(position, size);
 1959                             		.loc 1 2215 0
 1960 002f EF 21                   		mov.L	r2, r1
 1961                             	.LVL212:
 1962 0031 EF 42                   		mov.L	r4, r2
 1963                             	.LVL213:
 1964 0033 05 00 00 00             		bsr	_BlankCheckDataFlash
 1965                             	.LVL214:
2216:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( result != FLASH_BLANK)
 1966                             		.loc 1 2216 0
 1967 0037 5B 1E                   		movu.B	r1, r14
 1968 0039 61 0E                   		cmp	#0, r14
 1969 003b 21 DF                   		bne	.L247
 1970 003d 2E 05                   		bra	.L245
 1971                             	.LVL215:
 1972                             	.L248:
2197:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
 1973                             		.loc 1 2197 0
 1974 003f 66 01                   		mov	#0, r1
 1975                             	.LVL216:
 1976 0041 03                      		.balign 2,3,1
 1977                             	.L245:
2217:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	result = FLASH_FAILURE;
2218:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2219:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2220:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return result;
2221:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 1978                             		.loc 1 2221 0
 1979 0042 5B 11                   		movu.B	r1, r1
 1980 0044 02                      		rts
 1981                             	.LFE25:
 1983 0045 03                      		.section	.text.FLS_DataFlashClone,"ax",@progbits
 1984                             		.global	_FLS_DataFlashClone
 1986                             	_FLS_DataFlashClone:
 1987                             	.LFB26:
2222:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2223:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
2224:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Function: DataFlashClone(FLS_positionType dest)
2225:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Parameters:
2226:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * source: of DATA to clone
2227:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * data: New data to write
2228:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  *
2229:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  */
2230:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_DataFlashClone(FLS_positionType aligned_address, uint32_t pSource, uint32_t len, uint8_
2231:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 1988                             		.loc 1 2231 0
 1989                             	.LVL217:
 1990 0000 6E 6D                   		pushm	r6-r13
 1991                             	.LCFI16:
 1992 0002 60 80                   		sub	#8, r0
 1993                             	.LCFI17:
 1994                             	.LVL218:
 1995                             		.loc 1 2231 0
 1996 0004 EF 1A                   		mov.L	r1, r10
 1997                             	.LVL219:
 1998 0006 EF 2D                   		mov.L	r2, r13
2232:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = 0;
2233:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     int i = 0;
2234:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     int j = 0;
2235:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t  wBuff[FLS_WRITE_SIZE/sizeof(uint32_t)];
2236:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t  *writeBuff;
2237:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint32_t sector_addr;
2238:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2239:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     writeBuff = (uint8_t*)wBuff;
2240:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     sector_addr = aligned_address & 0xFFFFFF80;
2241:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2242:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*== a. Erase the clone sector  ==*/
2243:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     result = R_FlashEraseRange(CLONE_BLOCK_ADDRESS, CLONE_BLOCK_SIZE);
 1999                             		.loc 1 2243 0
 2000 0008 FB 1E 00 1F 10          		mov.L	#0x101f00, r1
 2001                             	.LVL220:
 2002 000d 75 42 80                		mov.L	#0x80, r2
 2003                             	.LVL221:
2231:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2004                             		.loc 1 2231 0
 2005 0010 EF 39                   		mov.L	r3, r9
 2006 0012 CF 4C                   		mov.B	r4, r12
 2007                             		.loc 1 2243 0
 2008 0014 05 00 00 00             		bsr	_R_FlashEraseRange
 2009                             	.LVL222:
2244:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS)
 2010                             		.loc 1 2244 0
 2011 0018 5B 11                   		movu.B	r1, r1
 2012 001a 61 01                   		cmp	#0, r1
 2013 001c 20 07                   		beq	.L254
 2014                             	.LVL223:
 2015                             		.balign 2,3,1
 2016                             	.L256:
2245:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2246:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 2017                             		.loc 1 2246 0
 2018 001e 66 61                   		mov	#6, r1
 2019 0020 38 87 00                		bra	.L255
 2020                             	.LVL224:
 2021                             	.L254:
2240:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     sector_addr = aligned_address & 0xFFFFFF80;
 2022                             		.loc 1 2240 0
 2023 0023 EF AB                   		mov.L	r10, r11
 2024 0025 75 2B 80                		and	#0xffffff80, r11
2247:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2248:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2249:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*== b. Clone the sector to write - preserve the blank block ==*/
2250:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     result = cloneSector(CLONE_BLOCK_ADDRESS, sector_addr);
 2025                             		.loc 1 2250 0
 2026 0028 EF B2                   		mov.L	r11, r2
 2027 002a FB 1E 00 1F 10          		mov.L	#0x101f00, r1
 2028                             	.LVL225:
 2029 002f 05 00 00 00             		bsr	_cloneSector
 2030                             	.LVL226:
2251:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2252:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(DATA_CLONE_RECOVERY)
2253:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2254:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(BlankCheckDataFlash(CLONE_TRANS_BLOCK_ADDRESS, FLS_WRITE_SIZE) != FLASH_BLANK)
2255:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2256:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         result = R_FlashEraseRange(CLONE_TRANS_BLOCK_ADDRESS, CLONE_BLOCK_SIZE);
2257:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		if(result != FLASH_SUCCESS)
2258:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		{
2259:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 			return FLASH_FAILURE;
2260:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		}
2261:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2262:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*== c. Write address of block to clone ==*/
2263:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wBuff[0] = sector_addr;
2264:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2265:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     wBuff[CLONE_START_WORD_POS/sizeof(uint32_t)] = CLONE_START_WORD_VALUE;
2266:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     result = R_FlashWrite(CLONE_TRANS_BLOCK_ADDRESS, (uint32_t)&wBuff[0], FLS_WRITE_SIZE);
2267:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS)
2268:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2269:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
2270:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }/* end if error in flash critical section write */
2271:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif /* defined(DATA_CLONE_RECOVERY) */
2272:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2273:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*== d. Erase sector to write ==*/
2274:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     result = R_FlashEraseRange(sector_addr, CLONE_BLOCK_SIZE);
 2031                             		.loc 1 2274 0
 2032 0033 EF B1                   		mov.L	r11, r1
 2033 0035 75 42 80                		mov.L	#0x80, r2
 2034 0038 05 00 00 00             		bsr	_R_FlashEraseRange
 2035                             	.LVL227:
2275:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS )
 2036                             		.loc 1 2275 0
 2037 003c 5B 11                   		movu.B	r1, r1
 2038 003e 61 01                   		cmp	#0, r1
 2039 0040 21 DE                   		bne	.L256
2276:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
2277:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*== e. copy data to clone sector ==*/
2278:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     for(i = 0; i < CLONE_BLOCK_SIZE ; i+=FLS_WRITE_SIZE)
2279:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2280:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash((CLONE_BLOCK_ADDRESS + i), FLS_WRITE_SIZE) != FLASH_BLANK)
2281:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2282:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             for(j = 0; j < FLS_WRITE_SIZE ; j++)
2283:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2284:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	if( (sector_addr+(i+j)) >= (aligned_address + headOffset)
 2040                             		.loc 1 2284 0
 2041 0042 5B CC                   		movu.B	r12, r12
 2042 0044 4B AC                   		add	r10, r12
 2043                             	.LVL228:
2275:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS )
 2044                             		.loc 1 2275 0
 2045 0046 EF 17                   		mov.L	r1, r7
2285:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             			&& (sector_addr+(i+j)) < (aligned_address + headOffset+ len))
 2046                             		.loc 1 2285 0
 2047 0048 4B C9                   		add	r12, r9
 2048                             	.LVL229:
 2049                             		.balign 2,3,4
 2050                             	.L258:
2230:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_DataFlashClone(FLS_positionType aligned_address, uint32_t pSource, uint32_t len, uint8_
 2051                             		.loc 1 2230 0
 2052 004a 73 7A 00 1F 10          		add	#0x101f00, r7, r10
2280:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash((CLONE_BLOCK_ADDRESS + i), FLS_WRITE_SIZE) != FLASH_BLANK)
 2053                             		.loc 1 2280 0
 2054 004f EF A1                   		mov.L	r10, r1
 2055 0051 66 82                   		mov.L	#8, r2
 2056 0053 05 00 00 00             		bsr	_BlankCheckDataFlash
 2057                             	.LVL230:
 2058 0057 5B 11                   		movu.B	r1, r1
 2059 0059 61 01                   		cmp	#0, r1
 2060 005b 21 0E                   		bne	.L257
 2061 005d 03                      		.balign 2,3,1
 2062                             	.L262:
2278:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     for(i = 0; i < CLONE_BLOCK_SIZE ; i+=FLS_WRITE_SIZE)
 2063                             		.loc 1 2278 0
 2064 005e 62 87                   		add	#8, r7
 2065                             	.LVL231:
 2066 0060 75 57 80                		cmp	#0x80, r7
 2067 0063 21 E7                   		bne	.L258
2286:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
2287:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[j] =  *(uint8_t*)(CLONE_BLOCK_ADDRESS+i+j) &  *((uint8_t*)pSource + j
2288:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
2289:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 else
2290:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 {
2291:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 	writeBuff[j] =  *(uint8_t*)(CLONE_BLOCK_ADDRESS+i+j);
2292:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 }
2293:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2294:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashWrite(sector_addr + i, (uint32_t)&writeBuff[0], FLS_WRITE_SIZE);
2295:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(result != FLASH_SUCCESS )
2296:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 return FLASH_FAILURE;
2297:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2298:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2299:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #if defined(DATA_CLONE_RECOVERY)
2300:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*== g. Erase of clone transaction  block ==*/
2301:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     result = R_FlashEraseRange((FLS_positionType) CLONE_TRANS_BLOCK_ADDRESS, CLONE_BLOCK_SIZE);
2302:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS)
2303:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2304:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
2305:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2306:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** #endif
2307:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
 2068                             		.loc 1 2307 0
 2069 0065 66 01                   		mov	#0, r1
 2070 0067 2E 40                   		bra	.L255
 2071                             	.LVL232:
 2072                             	.L257:
2230:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_DataFlashClone(FLS_positionType aligned_address, uint32_t pSource, uint32_t len, uint8_
 2073                             		.loc 1 2230 0
 2074 0069 FF 21 B7                		add	r11, r7, r1
 2075 006c 71 03 08                		add	#8, r0, r3
 2076 006f EF 06                   		mov.L	r0, r6
 2077 0071 EF D4                   		mov.L	r13, r4
 2078 0073 EF 1E                   		mov.L	r1, r14
 2079 0075 03                      		.balign 2,3,1
 2080                             	.L261:
2284:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	if( (sector_addr+(i+j)) >= (aligned_address + headOffset)
 2081                             		.loc 1 2284 0
 2082 0076 47 CE                   		cmp	r12, r14
 2083 0078 23 0E                   		bltu	.L259
2285:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             			&& (sector_addr+(i+j)) < (aligned_address + headOffset+ len))
 2084                             		.loc 1 2285 0
 2085 007a 47 9E                   		cmp	r9, r14
 2086 007c 22 0A                   		bgeu	.L259
2287:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[j] =  *(uint8_t*)(CLONE_BLOCK_ADDRESS+i+j) &  *((uint8_t*)pSource + j
 2087                             		.loc 1 2287 0
 2088 007e CC 45                   		mov.B	[r4], r5
 2089 0080 CC A2                   		mov.B	[r10], r2
 2090 0082 53 52                   		and	r5, r2
 2091 0084 2E 04                   		bra	.L266
 2092                             	.L259:
2291:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 	writeBuff[j] =  *(uint8_t*)(CLONE_BLOCK_ADDRESS+i+j);
 2093                             		.loc 1 2291 0
 2094 0086 CC A2                   		mov.B	[r10], r2
 2095                             		.balign 2,3,1
 2096                             	.L266:
 2097 0088 C3 62                   		mov.B	r2, [r6]
 2098 008a 62 1E                   		add	#1, r14
 2099 008c 62 1A                   		add	#1, r10
 2100 008e 62 14                   		add	#1, r4
 2101 0090 62 16                   		add	#1, r6
2282:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             for(j = 0; j < FLS_WRITE_SIZE ; j++)
 2102                             		.loc 1 2282 0
 2103 0092 47 36                   		cmp	r3, r6
 2104 0094 21 E2                   		bne	.L261
2294:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashWrite(sector_addr + i, (uint32_t)&writeBuff[0], FLS_WRITE_SIZE);
 2105                             		.loc 1 2294 0
 2106 0096 EF 02                   		mov.L	r0, r2
 2107 0098 66 83                   		mov	#8, r3
 2108 009a 05 00 00 00             		bsr	_R_FlashWrite_1
 2109                             	.LVL233:
2295:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(result != FLASH_SUCCESS )
 2110                             		.loc 1 2295 0
 2111 009e 5B 11                   		movu.B	r1, r1
 2112 00a0 61 01                   		cmp	#0, r1
 2113 00a2 20 BC                   		beq	.L262
 2114 00a4 38 7A FF                		bra	.L256
 2115                             	.LVL234:
 2116                             	.L255:
2308:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }/* end DataFlashClone */
 2117                             		.loc 1 2308 0
 2118 00a7 64 61                   		and	#6, r1
 2119 00a9 3F 6D 0A                		rtsd	#40, r6-r13
 2120                             	.LFE26:
 2122                             		.section	.text.FLS_ProgrammingData,"ax",@progbits
 2123                             		.global	_FLS_ProgrammingData
 2125                             	_FLS_ProgrammingData:
 2126                             	.LFB27:
2309:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2310:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /*
2311:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Function: FLS_ProgrammingData
2312:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  * Description:
2313:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  *
2314:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****  */
2315:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_ProgrammingData(uint8_t* pSource, uint32_t len, FLS_positionType dest)
2316:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2127                             		.loc 1 2316 0
 2128                             	.LVL235:
 2129 0000 6E 6D                   		pushm	r6-r13
 2130                             	.LCFI18:
2317:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	unsigned int headOffset = 0;
2318:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	unsigned int headLen = 0;
2319:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	unsigned int bodyLen = 0;
2320:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int i = 0;
2321:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLS_positionType alineated_address = 0;
2322:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t result = FLASH_SUCCESS;
2323:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t *srcPtr=(uint8_t *)pSource;
2324:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t writeBuff[ROM_PROGRAM_SIZE];
2325:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2326:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headOffset = (dest & (ROM_PROGRAM_SIZE-1));
 2131                             		.loc 1 2326 0
 2132 0002 EF 3D                   		mov.L	r3, r13
2327:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2328:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /*  Calcolus start address */
2329:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     alineated_address = (uint32_t)(dest-headOffset);
 2133                             		.loc 1 2329 0
 2134 0004 EF 3B                   		mov.L	r3, r11
2316:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2135                             		.loc 1 2316 0
 2136 0006 60 80                   		sub	#8, r0
 2137                             	.LCFI19:
2326:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     headOffset = (dest & (ROM_PROGRAM_SIZE-1));
 2138                             		.loc 1 2326 0
 2139 0008 64 7D                   		and	#7, r13
 2140                             	.LVL236:
 2141                             		.loc 1 2329 0
 2142 000a 75 2B F8                		and	#-8, r11
 2143                             	.LVL237:
2330:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2331:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* head ------------------------------------------*/
2332:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if (headOffset)
 2144                             		.loc 1 2332 0
 2145 000d 61 0D                   		cmp	#0, r13
2316:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2146                             		.loc 1 2316 0
 2147 000f EF 29                   		mov.L	r2, r9
 2148                             		.loc 1 2332 0
 2149 0011 20 5E                   		beq	.L289
 2150                             	.LVL238:
 2151 0013 66 8C                   		mov.L	#8, r12
 2152 0015 43 DC                   		sub	r13, r12
 2153                             	.LVL239:
 2154 0017 47 2C                   		cmp	r2, r12
 2155 0019 25 05                   		bleu	.L269
 2156 001b EF 2C                   		mov.L	r2, r12
 2157                             	.LVL240:
 2158 001d 03                      		.balign 2,3,1
 2159                             	.L269:
 2160 001e EF 06                   		mov.L	r0, r6
2323:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t *srcPtr=(uint8_t *)pSource;
 2161                             		.loc 1 2323 0
 2162 0020 EF 17                   		mov.L	r1, r7
2333:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2334:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         headLen    = ROM_PROGRAM_SIZE - headOffset;
2335:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2336:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if (headLen > len)
2337:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2338:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             headLen = len;
2339:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2340:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2341:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(i=0; i<ROM_PROGRAM_SIZE; i++)  /* init write buffer */
 2163                             		.loc 1 2341 0
 2164 0022 66 0A                   		mov.L	#0, r10
2342:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2343:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if ( (i < headOffset) || (i >= (headOffset + headLen)) )
 2165                             		.loc 1 2343 0
 2166 0024 FF 2E DC                		add	r13, r12, r14
 2167                             	.LVL241:
 2168 0027 03                      		.balign 2,3,1
 2169                             	.L273:
 2170 0028 47 DA                   		cmp	r13, r10
 2171 002a 23 06                   		bltu	.L270
 2172                             		.loc 1 2343 0 is_stmt 0 discriminator 1
 2173 002c 47 EA                   		cmp	r14, r10
 2174 002e 23 07                   		bltu	.L271
 2175                             		.balign 2,3,4
 2176                             	.L270:
2344:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2345:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 writeBuff[i] = 0xFF;
 2177                             		.loc 1 2345 0 is_stmt 1
 2178 0030 F8 64 FF                		mov.B	#-1, [r6]
 2179 0033 2E 07                   		bra	.L272
 2180                             	.L271:
2346:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2347:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             else
2348:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2349:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 writeBuff[i]=*srcPtr;
 2181                             		.loc 1 2349 0
 2182 0035 FD 28 74                		mov.B	[r7+], r4
 2183                             	.LVL242:
 2184 0038 C3 64                   		mov.B	r4, [r6]
 2185                             	.LVL243:
 2186                             		.balign 2,3,1
 2187                             	.L272:
2341:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(i=0; i<ROM_PROGRAM_SIZE; i++)  /* init write buffer */
 2188                             		.loc 1 2341 0
 2189 003a 62 1A                   		add	#1, r10
 2190                             	.LVL244:
 2191 003c 62 16                   		add	#1, r6
 2192 003e 61 8A                   		cmp	#8, r10
 2193 0040 21 E8                   		bne	.L273
2350:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 srcPtr++;
2351:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2352:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2353:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2354:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         /* scrive nel buffer i dati */
2355:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
 2194                             		.loc 1 2355 0
 2195 0042 EF A2                   		mov.L	r10, r2
 2196                             	.LVL245:
 2197 0044 EF B1                   		mov.L	r11, r1
 2198                             	.LVL246:
 2199 0046 05 00 00 00             		bsr	_BlankCheckDataFlash
 2200                             	.LVL247:
 2201 004a 5B 11                   		movu.B	r1, r1
 2202 004c 61 01                   		cmp	#0, r1
2356:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2357:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashWrite(alineated_address, (uint32_t)&writeBuff[0],ROM_PROGRAM_SIZE);
 2203                             		.loc 1 2357 0
 2204 004e EF 02                   		mov.L	r0, r2
 2205 0050 EF B1                   		mov.L	r11, r1
2355:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
 2206                             		.loc 1 2355 0
 2207 0052 21 0A                   		bne	.L274
 2208                             	.LVL248:
 2209                             		.loc 1 2357 0
 2210 0054 DF A3                   		mov.W	r10, r3
 2211 0056 05 00 00 00             		bsr	_R_FlashWrite_1
 2212                             	.LVL249:
 2213 005a 2E 0A                   		bra	.L275
 2214                             	.LVL250:
 2215                             	.L274:
2358:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2359:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         else
2360:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2361:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLS_DataFlashClone(alineated_address, (uint32_t)&writeBuff[0], headLen, headOf
 2216                             		.loc 1 2361 0
 2217 005c EF C3                   		mov.L	r12, r3
 2218 005e CF D4                   		mov.B	r13, r4
 2219 0060 05 00 00 00             		bsr	_FLS_DataFlashClone
 2220                             	.LVL251:
 2221                             		.balign 2,3,1
 2222                             	.L275:
2362:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2363:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2364:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         alineated_address += ROM_PROGRAM_SIZE;
2365:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2366:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }
2367:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2368:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* body -----------------------------------------*/
2369:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	if( result == FLASH_SUCCESS  )
 2223                             		.loc 1 2369 0
 2224 0064 5B 11                   		movu.B	r1, r1
 2225 0066 61 01                   		cmp	#0, r1
 2226 0068 3B 92 00                		bne	.L297
2364:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         alineated_address += ROM_PROGRAM_SIZE;
 2227                             		.loc 1 2364 0
 2228 006b 62 8B                   		add	#8, r11
 2229                             	.LVL252:
 2230 006d 2E 07                   		bra	.L268
 2231                             	.LVL253:
 2232                             	.L289:
2323:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t *srcPtr=(uint8_t *)pSource;
 2233                             		.loc 1 2323 0
 2234 006f EF 17                   		mov.L	r1, r7
2318:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 	unsigned int headLen = 0;
 2235                             		.loc 1 2318 0
 2236 0071 EF DC                   		mov.L	r13, r12
 2237                             	.LVL254:
 2238 0073 03                      		.balign 2,3,2
 2239                             	.L268:
2370:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2371:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		bodyLen = len - headLen;
 2240                             		.loc 1 2371 0
 2241 0074 FF 0C C9                		sub	r12, r9, r12
 2242                             	.LVL255:
2315:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_ProgrammingData(uint8_t* pSource, uint32_t len, FLS_positionType dest)
 2243                             		.loc 1 2315 0
 2244 0077 43 7B                   		sub	r7, r11
2372:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		while( bodyLen > ROM_PROGRAM_SIZE )
 2245                             		.loc 1 2372 0
 2246 0079 2E 2F                   		bra	.L277
 2247                             	.LVL256:
 2248                             	.L280:
2373:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2374:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 			if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
 2249                             		.loc 1 2374 0
 2250 007b 66 82                   		mov.L	#8, r2
 2251 007d EF D1                   		mov.L	r13, r1
 2252 007f 05 00 00 00             		bsr	_BlankCheckDataFlash
 2253                             	.LVL257:
 2254 0083 5B 11                   		movu.B	r1, r1
 2255 0085 61 01                   		cmp	#0, r1
2375:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2376:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 result = R_FlashWrite(alineated_address, (uint32_t)srcPtr, ROM_PROGRAM_SIZE);
 2256                             		.loc 1 2376 0
 2257 0087 EF 72                   		mov.L	r7, r2
 2258 0089 EF D1                   		mov.L	r13, r1
2374:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 			if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
 2259                             		.loc 1 2374 0
 2260 008b 21 0A                   		bne	.L278
 2261                             	.LVL258:
 2262                             		.loc 1 2376 0
 2263 008d 66 83                   		mov	#8, r3
 2264 008f 05 00 00 00             		bsr	_R_FlashWrite_1
 2265                             	.LVL259:
 2266 0093 2E 0B                   		bra	.L279
 2267                             	.LVL260:
 2268                             	.L278:
2377:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2378:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             else
2379:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2380:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 result = FLS_DataFlashClone(alineated_address, (uint32_t)srcPtr, ROM_PROGRAM_SIZE, 
 2269                             		.loc 1 2380 0
 2270 0095 66 83                   		mov.L	#8, r3
 2271 0097 66 04                   		mov	#0, r4
 2272 0099 05 00 00 00             		bsr	_FLS_DataFlashClone
 2273                             	.LVL261:
 2274 009d 03                      		.balign 2,3,1
 2275                             	.L279:
2381:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2382:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             bodyLen -= ROM_PROGRAM_SIZE;
 2276                             		.loc 1 2382 0
 2277 009e 60 8C                   		sub	#8, r12
 2278                             	.LVL262:
2383:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             srcPtr += ROM_PROGRAM_SIZE;
 2279                             		.loc 1 2383 0
 2280 00a0 62 87                   		add	#8, r7
 2281                             	.LVL263:
2384:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             alineated_address += ROM_PROGRAM_SIZE;
2385:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2386:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(FLASH_SUCCESS != result)
 2282                             		.loc 1 2386 0
 2283 00a2 5B 11                   		movu.B	r1, r1
 2284 00a4 61 01                   		cmp	#0, r1
 2285 00a6 21 54                   		bne	.L297
 2286                             	.LVL264:
 2287                             		.balign 2,3,2
 2288                             	.L277:
2315:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_ProgrammingData(uint8_t* pSource, uint32_t len, FLS_positionType dest)
 2289                             		.loc 1 2315 0 discriminator 1
 2290 00a8 FF 2D 7B                		add	r7, r11, r13
 2291                             	.LVL265:
2372:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 		while( bodyLen > ROM_PROGRAM_SIZE )
 2292                             		.loc 1 2372 0 discriminator 1
 2293 00ab 61 8C                   		cmp	#8, r12
 2294 00ad 24 CE                   		bgtu	.L280
2387:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 break;
2388:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2389:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }/* end if body */
2390:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2391:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     /* tail ------------------------------------------*/
2392:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( (result == FLASH_SUCCESS) &&  (bodyLen > 0))
 2295                             		.loc 1 2392 0
 2296 00af 61 0C                   		cmp	#0, r12
 2297 00b1 21 07                   		bne	.L281
 2298                             	.LVL266:
 2299 00b3 03                      		.balign 2,3,1
 2300                             	.L288:
2393:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     {
2394:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2395:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(i=0; i<ROM_PROGRAM_SIZE; i++)   /* init write buffer */
2396:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2397:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( i<bodyLen )
2398:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2399:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 writeBuff[i] = *srcPtr;
2400:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 srcPtr++;
2401:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2402:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             else
2403:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             {
2404:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 writeBuff[i] = 0xFF;
2405:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             }
2406:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2407:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2408:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
2409:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashWrite(alineated_address, (uint32_t)&writeBuff[0], ROM_PROGRAM_SIZE);
2411:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2412:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         else
2413:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         {
2414:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLS_DataFlashClone(alineated_address, (uint32_t)&writeBuff[0], ROM_PROGRAM_SIZ
2415:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         }
2416:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     }/* end if tail */
2417:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2418:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2419:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS)
2420:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
2421:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2422:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return FLASH_SUCCESS;
 2301                             		.loc 1 2422 0
 2302 00b4 66 01                   		mov	#0, r1
 2303 00b6 2E 46                   		bra	.L282
 2304                             	.LVL267:
 2305                             	.L281:
 2306 00b8 EF 06                   		mov.L	r0, r6
2392:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if( (result == FLASH_SUCCESS) &&  (bodyLen > 0))
 2307                             		.loc 1 2392 0
 2308 00ba 66 0A                   		mov.L	#0, r10
 2309                             		.balign 2,3,1
 2310                             	.L285:
2397:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( i<bodyLen )
 2311                             		.loc 1 2397 0
 2312 00bc 47 CA                   		cmp	r12, r10
 2313 00be 22 09                   		bgeu	.L283
2399:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 writeBuff[i] = *srcPtr;
 2314                             		.loc 1 2399 0
 2315 00c0 FD 28 7B                		mov.B	[r7+], r11
 2316                             	.LVL268:
 2317 00c3 C3 6B                   		mov.B	r11, [r6]
 2318                             	.LVL269:
 2319 00c5 2E 05                   		bra	.L284
 2320                             	.L283:
2404:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 writeBuff[i] = 0xFF;
 2321                             		.loc 1 2404 0
 2322 00c7 F8 64 FF                		mov.B	#-1, [r6]
 2323                             		.balign 2,3,1
 2324                             	.L284:
2395:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         for(i=0; i<ROM_PROGRAM_SIZE; i++)   /* init write buffer */
 2325                             		.loc 1 2395 0
 2326 00ca 62 1A                   		add	#1, r10
 2327                             	.LVL270:
 2328 00cc 62 16                   		add	#1, r6
 2329 00ce 61 8A                   		cmp	#8, r10
 2330 00d0 21 EC                   		bne	.L285
2408:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
 2331                             		.loc 1 2408 0
 2332 00d2 EF A2                   		mov.L	r10, r2
 2333 00d4 EF D1                   		mov.L	r13, r1
 2334 00d6 05 00 00 00             		bsr	_BlankCheckDataFlash
 2335                             	.LVL271:
 2336 00da 5B 11                   		movu.B	r1, r1
 2337 00dc 61 01                   		cmp	#0, r1
2410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashWrite(alineated_address, (uint32_t)&writeBuff[0], ROM_PROGRAM_SIZE);
 2338                             		.loc 1 2410 0
 2339 00de EF 02                   		mov.L	r0, r2
 2340 00e0 EF D1                   		mov.L	r13, r1
2408:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(BlankCheckDataFlash(alineated_address, ROM_PROGRAM_SIZE) == FLASH_BLANK)
 2341                             		.loc 1 2408 0
 2342 00e2 21 0A                   		bne	.L286
 2343                             	.LVL272:
2410:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = R_FlashWrite(alineated_address, (uint32_t)&writeBuff[0], ROM_PROGRAM_SIZE);
 2344                             		.loc 1 2410 0
 2345 00e4 DF A3                   		mov.W	r10, r3
 2346 00e6 05 00 00 00             		bsr	_R_FlashWrite_1
 2347                             	.LVL273:
 2348 00ea 2E 0A                   		bra	.L287
 2349                             	.LVL274:
 2350                             	.L286:
2414:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             result = FLS_DataFlashClone(alineated_address, (uint32_t)&writeBuff[0], ROM_PROGRAM_SIZ
 2351                             		.loc 1 2414 0
 2352 00ec EF A3                   		mov.L	r10, r3
 2353 00ee 66 04                   		mov	#0, r4
 2354 00f0 05 00 00 00             		bsr	_FLS_DataFlashClone
 2355                             	.LVL275:
 2356                             		.balign 2,3,1
 2357                             	.L287:
2419:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if(result != FLASH_SUCCESS)
 2358                             		.loc 1 2419 0
 2359 00f4 5B 11                   		movu.B	r1, r1
 2360 00f6 61 01                   		cmp	#0, r1
 2361 00f8 20 BC                   		beq	.L288
 2362                             	.LVL276:
 2363                             		.balign 2,3,1
 2364                             	.L297:
2420:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         return FLASH_FAILURE;
 2365                             		.loc 1 2420 0
 2366 00fa 66 61                   		mov	#6, r1
 2367                             		.balign 2,3,1
 2368                             	.L282:
 2369 00fc 5B 11                   		movu.B	r1, r1
2423:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }/* FLS_ProgrammingData */
 2370                             		.loc 1 2423 0
 2371 00fe 3F 6D 0A                		rtsd	#40, r6-r13
 2372                             	.LFE27:
 2374 0101 03                      		.section	.text.FLS_Programming,"ax",@progbits
 2375                             		.global	_FLS_Programming
 2377                             	_FLS_Programming:
 2378                             	.LFB21:
1980:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2379                             		.loc 1 1980 0
 2380                             	.LVL277:
 2381 0000 6E 6D                   		pushm	r6-r13
 2382                             	.LCFI20:
 2383                             	.LBB67:
 2384                             	.LBB68:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 2385                             		.loc 1 525 0
 2386 0002 FB 7E 40 C4 7F          		mov.L	#0x7fc440, r7
 2387 0007 F8 79 FF 2D             		mov.W	#0x2dff, [r7]
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 2388                             		.loc 1 528 0
 2389 000b FB 7E 50 C4 7F          		mov.L	#0x7fc450, r7
 2390                             	.LBE68:
 2391                             	.LBE67:
1980:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2392                             		.loc 1 1980 0
 2393 0010 60 80                   		sub	#8, r0
 2394                             	.LCFI21:
 2395                             	.LBB70:
 2396                             	.LBB69:
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 2397                             		.loc 1 528 0
 2398 0012 F8 79 FF 1E             		mov.W	#0x1eff, [r7]
 2399                             	.LBE69:
 2400                             	.LBE70:
1991:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((dest >= DF_ADDRESS) && (dest < DF_ADDRSS_END))	/* Write Data in DATA FLASH */
 2401                             		.loc 1 1991 0
 2402 0016 73 37 00 00 F0          		add	#0xfff00000, r3, r7
 2403 001b 76 07 FF 1F             		cmp	#0x1fff, r7
1980:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2404                             		.loc 1 1980 0
 2405 001f EF 3C                   		mov.L	r3, r12
1991:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     if((dest >= DF_ADDRESS) && (dest < DF_ADDRSS_END))	/* Write Data in DATA FLASH */
 2406                             		.loc 1 1991 0
 2407 0021 24 09                   		bgtu	.L299
1993:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         fls_programming_status=FLS_ProgrammingData( pSource, len, dest);
 2408                             		.loc 1 1993 0
 2409 0023 05 00 00 00             		bsr	_FLS_ProgrammingData
 2410                             	.LVL278:
 2411 0027 38 D3 00                		bra	.L300
 2412                             	.LVL279:
 2413                             	.L299:
1997:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         headOffset = (dest & ADDR_MASK);
 2414                             		.loc 1 1997 0
 2415 002a EF 37                   		mov.L	r3, r7
 2416 002c 64 77                   		and	#7, r7
 2417                             	.LVL280:
 2418 002e EF 1A                   		mov.L	r1, r10
 2419                             	.LVL281:
 2420 0030 EF 2D                   		mov.L	r2, r13
2000:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if(headOffset > 0)
 2421                             		.loc 1 2000 0
 2422 0032 20 3F                   		beq	.L312
 2423                             	.LVL282:
 2424 0034 66 8B                   		mov.L	#8, r11
 2425 0036 43 7B                   		sub	r7, r11
 2426                             	.LVL283:
 2427 0038 47 2B                   		cmp	r2, r11
 2428 003a 25 04                   		bleu	.L302
 2429 003c EF 2B                   		mov.L	r2, r11
 2430                             	.LVL284:
 2431                             		.balign 2,3,1
 2432                             	.L302:
 2433 003e EF 06                   		mov.L	r0, r6
2009:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             for(i=0; i<FLS_WRITE_SIZE; i++)  /* init write buffer */
 2434                             		.loc 1 2009 0
 2435 0040 66 03                   		mov.L	#0, r3
 2436                             	.LVL285:
2011:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	if ( (i < headOffset) || (i >= headOffset+headLen) )
 2437                             		.loc 1 2011 0
 2438 0042 FF 2E 7B                		add	r7, r11, r14
 2439                             	.LVL286:
 2440 0045 03                      		.balign 2,3,1
 2441                             	.L306:
 2442 0046 47 73                   		cmp	r7, r3
 2443 0048 23 06                   		bltu	.L303
2011:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             	if ( (i < headOffset) || (i >= headOffset+headLen) )
 2444                             		.loc 1 2011 0 is_stmt 0 discriminator 1
 2445 004a 47 E3                   		cmp	r14, r3
 2446 004c 23 07                   		bltu	.L304
 2447                             		.balign 2,3,4
 2448                             	.L303:
2013:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i] = 0xFF;
 2449                             		.loc 1 2013 0 is_stmt 1
 2450 004e F8 64 FF                		mov.B	#-1, [r6]
 2451 0051 2E 07                   		bra	.L305
 2452                             	.L304:
2017:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i]=*srcPtr;
 2453                             		.loc 1 2017 0
 2454 0053 FD 28 A4                		mov.B	[r10+], r4
 2455                             	.LVL287:
 2456 0056 C3 64                   		mov.B	r4, [r6]
 2457                             	.LVL288:
 2458                             		.balign 2,3,1
 2459                             	.L305:
2009:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             for(i=0; i<FLS_WRITE_SIZE; i++)  /* init write buffer */
 2460                             		.loc 1 2009 0
 2461 0058 62 13                   		add	#1, r3
 2462                             	.LVL289:
 2463 005a 62 16                   		add	#1, r6
 2464 005c 61 83                   		cmp	#8, r3
 2465 005e 21 E8                   		bne	.L306
2022:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             fls_programming_status=R_FlashWrite((uint32_t)dest-headOffset, (uint32_t)&writeBuff[0],
 2466                             		.loc 1 2022 0
 2467 0060 FF 01 7C                		sub	r7, r12, r1
 2468                             	.LVL290:
 2469 0063 EF 02                   		mov.L	r0, r2
 2470                             	.LVL291:
 2471 0065 05 00 00 00             		bsr	_R_FlashWrite_1
 2472                             	.LVL292:
2026:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( !fls_programming_status )
 2473                             		.loc 1 2026 0
 2474 0069 5B 1E                   		movu.B	r1, r14
 2475 006b 61 0E                   		cmp	#0, r14
 2476 006d 21 7B                   		bne	.L307
 2477 006f 2E 05                   		bra	.L301
 2478                             	.LVL293:
 2479                             	.L312:
1984:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     unsigned int headLen=0;
 2480                             		.loc 1 1984 0
 2481 0071 EF 7B                   		mov.L	r7, r11
 2482                             	.LVL294:
 2483 0073 03                      		.balign 2,3,1
 2484                             	.L301:
 2485                             	.LBB71:
2030:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             tailLen = (len + headOffset) & ADDR_MASK;
 2486                             		.loc 1 2030 0
 2487 0074 4B D7                   		add	r13, r7
 2488                             	.LVL295:
 2489 0076 64 77                   		and	#7, r7
 2490                             	.LVL296:
2031:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(headLen>0)
 2491                             		.loc 1 2031 0
 2492 0078 61 0B                   		cmp	#0, r11
 2493 007a 21 06                   		bne	.L308
2029:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             int nByte=len;
 2494                             		.loc 1 2029 0
 2495 007c EF D6                   		mov.L	r13, r6
 2496 007e 2E 06                   		bra	.L309
 2497                             	.L308:
2033:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 nByte -= headLen;
 2498                             		.loc 1 2033 0
 2499 0080 FF 06 BD                		sub	r11, r13, r6
 2500                             	.LVL297:
 2501 0083 03                      		.balign 2,3,1
 2502                             	.L309:
2035:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             nByte -= tailLen;
 2503                             		.loc 1 2035 0
 2504 0084 43 76                   		sub	r7, r6
 2505                             	.LVL298:
2036:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if(nByte>0)
 2506                             		.loc 1 2036 0
 2507 0086 61 06                   		cmp	#0, r6
 2508 0088 2B 16                   		ble	.L310
2038:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 fls_programming_status=R_FlashWrite(writePos, (uint32_t)srcPtr, nByte);
 2509                             		.loc 1 2038 0
 2510 008a FF 21 CB                		add	r12, r11, r1
 2511 008d EF A2                   		mov.L	r10, r2
 2512 008f DF 63                   		mov.W	r6, r3
 2513 0091 05 00 00 00             		bsr	_R_FlashWrite_1
 2514                             	.LVL299:
2039:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 srcPtr += nByte;
 2515                             		.loc 1 2039 0
 2516 0095 4B 6A                   		add	r6, r10
 2517                             	.LVL300:
 2518                             	.LBE71:
2044:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****         if( !fls_programming_status )
 2519                             		.loc 1 2044 0
 2520 0097 5B 1B                   		movu.B	r1, r11
 2521                             	.LVL301:
 2522 0099 61 0B                   		cmp	#0, r11
 2523 009b 21 4D                   		bne	.L307
 2524                             	.LVL302:
 2525 009d 03                      		.balign 2,3,1
 2526                             	.L310:
 2527                             	.LBB72:
2047:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( tailLen > 0 && dest < beginTail)
 2528                             		.loc 1 2047 0
 2529 009e 61 07                   		cmp	#0, r7
 2530 00a0 20 42                   		beq	.L313
2046:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             unsigned int beginTail = dest+(len-tailLen);
 2531                             		.loc 1 2046 0 discriminator 1
 2532 00a2 4B CD                   		add	r12, r13
 2533                             	.LVL303:
 2534 00a4 FF 01 7D                		sub	r7, r13, r1
2047:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( tailLen > 0 && dest < beginTail)
 2535                             		.loc 1 2047 0 discriminator 1
 2536 00a7 47 1C                   		cmp	r1, r12
 2537 00a9 22 3D                   		bgeu	.L314
2051:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i] = 0xFF;
 2538                             		.loc 1 2051 0
 2539 00ab F8 04 FF                		mov.B	#-1, [r0]
 2540                             	.LVL304:
 2541 00ae F9 04 01 FF             		mov.B	#-1, 1[r0]
 2542                             	.LVL305:
 2543 00b2 F9 04 02 FF             		mov.B	#-1, 2[r0]
 2544                             	.LVL306:
 2545 00b6 F9 04 03 FF             		mov.B	#-1, 3[r0]
 2546                             	.LVL307:
 2547 00ba F9 04 04 FF             		mov.B	#-1, 4[r0]
 2548                             	.LVL308:
 2549 00be F9 04 05 FF             		mov.B	#-1, 5[r0]
 2550                             	.LVL309:
 2551 00c2 F9 04 06 FF             		mov.B	#-1, 6[r0]
 2552                             	.LVL310:
 2553 00c6 F9 04 07 FF             		mov.B	#-1, 7[r0]
 2554                             	.LVL311:
 2555 00ca EF 06                   		mov.L	r0, r6
 2556                             	.LVL312:
1979:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t FLS_Programming(uint8_t* pSource, uint32_t len, FLS_positionType dest)
 2557                             		.loc 1 1979 0
 2558 00cc 4B A7                   		add	r10, r7
 2559                             	.LVL313:
 2560                             		.balign 2,3,5
 2561                             	.L311:
2055:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                     writeBuff[i] = *srcPtr++;
 2562                             		.loc 1 2055 0 discriminator 2
 2563 00ce FD 28 AB                		mov.B	[r10+], r11
 2564 00d1 FD 20 6B                		mov.B	r11, [r6+]
2053:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 for(i=0; i<tailLen; i++)
 2565                             		.loc 1 2053 0 discriminator 2
 2566 00d4 47 7A                   		cmp	r7, r10
 2567 00d6 21 F8                   		bne	.L311
2057:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****                 fls_programming_status=R_FlashWrite(beginTail, (uint32_t)&writeBuff[0], ROM_PROGRAM
 2568                             		.loc 1 2057 0
 2569 00d8 EF 02                   		mov.L	r0, r2
 2570 00da 66 83                   		mov	#8, r3
 2571 00dc 05 00 00 00             		bsr	_R_FlashWrite_1
 2572                             	.LVL314:
 2573 00e0 2E 08                   		bra	.L307
 2574                             	.LVL315:
 2575                             	.L313:
2047:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****             if( tailLen > 0 && dest < beginTail)
 2576                             		.loc 1 2047 0
 2577 00e2 CF 71                   		mov.B	r7, r1
 2578 00e4 2E 04                   		bra	.L307
 2579                             	.LVL316:
 2580                             	.L314:
 2581 00e6 66 01                   		mov	#0, r1
 2582                             	.LVL317:
 2583                             		.balign 2,3,4
 2584                             	.L307:
 2585                             	.LBE72:
 2586                             	.LBB73:
 2587                             	.LBB74:
 525:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLRE0.WORD = 0x2D00 | (read_en_mask & 0x00FF);
 2588                             		.loc 1 525 0
 2589 00e8 FB 7E 40 C4 7F          		mov.L	#0x7fc440, r7
 2590 00ed F8 79 FF 2D             		mov.W	#0x2dff, [r7]
 528:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     FLASH.DFLWE0.WORD = 0x1E00 |  (write_en_mask & 0x00FF);
 2591                             		.loc 1 528 0
 2592 00f1 FB 7E 50 C4 7F          		mov.L	#0x7fc450, r7
 2593 00f6 F8 79 00 1E             		mov.W	#0x1e00, [r7]
 2594                             	.LVL318:
 2595                             		.balign 2,3,1
 2596                             	.L300:
 2597                             	.LBE74:
 2598                             	.LBE73:
2064:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 2599                             		.loc 1 2064 0
 2600 00fa 5B 11                   		movu.B	r1, r1
 2601 00fc 3F 6D 0A                		rtsd	#40, r6-r13
 2602                             	.LFE21:
 2604 00ff 03                      		.section	.text.R_FlashErase_2,"ax",@progbits
 2605                             		.global	_R_FlashErase_2
 2607                             	_R_FlashErase_2:
 2608                             	.LFB28:
2424:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2425:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** /******************************************************************************
2426:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** Typedef definitions
2427:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** ******************************************************************************/
2428:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** extern char _load_start_PRAMERASE, _load_stop_PRAMERASE;
2429:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** extern char _load_start_PRAMWRITE, _load_stop_PRAMWRITE;
2430:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** extern char hal_ovl ;
2431:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2432:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashErase_2(uint8_t block)
2433:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2609                             		.loc 1 2433 0
 2610                             	.LVL319:
2434:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t retVal=FLASH_SUCCESS;
2435:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2436:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     memcpy( (void*)&hal_ovl, (const void*)&_load_start_PRAMERASE, (&_load_stop_PRAMERASE - &_load_s
 2611                             		.loc 1 2436 0
 2612 0000 FB 22 00 00 00 00       		mov.L	#__load_start_PRAMERASE, r2
 2613 0006 FB 32 00 00 00 00       		mov.L	#__load_stop_PRAMERASE, r3
2433:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2614                             		.loc 1 2433 0
 2615 000c CF 1E                   		mov.B	r1, r14
 2616 000e 7E A7                   		push.l	r7
 2617                             	.LCFI22:
 2618                             		.loc 1 2436 0
 2619 0010 FB 12 00 00 00 00       		mov.L	#_hal_ovl, r1
 2620                             	.LVL320:
 2621 0016 43 23                   		sub	r2, r3
 2622 0018 7F 8F                   		smovf
2437:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2438:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     retVal = R_FlashErase_1(block);
2439:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2440:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return retVal;
2441:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 2623                             		.loc 1 2441 0
 2624 001a 7E B7                   		pop	r7
2438:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     retVal = R_FlashErase_1(block);
 2625                             		.loc 1 2438 0
 2626 001c CF E1                   		mov.B	r14, r1
 2627 001e 04 00 00 00             		bra	_R_FlashErase_1
 2628                             	.LVL321:
 2629                             	.LFE28:
 2631                             		.section	.text.R_FlashWrite_2,"ax",@progbits
 2632                             		.global	_R_FlashWrite_2
 2634                             	_R_FlashWrite_2:
 2635                             	.LFB29:
2442:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2443:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** uint8_t R_FlashWrite_2 ( uint32_t flash_addr, uint32_t buffer_addr, uint16_t bytes )
2444:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2636                             		.loc 1 2444 0
 2637                             	.LVL322:
 2638 0000 EF 24                   		mov.L	r2, r4
 2639 0002 DF 3E                   		mov.W	r3, r14
2445:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     uint8_t retVal=FLASH_SUCCESS;
2446:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2447:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     memcpy( (void*)&hal_ovl, (const void*)&_load_start_PRAMWRITE, (&_load_stop_PRAMWRITE - &_load_s
 2640                             		.loc 1 2447 0
 2641 0004 FB 22 00 00 00 00       		mov.L	#__load_start_PRAMWRITE, r2
 2642                             	.LVL323:
 2643 000a FB 32 00 00 00 00       		mov.L	#__load_stop_PRAMWRITE, r3
 2644                             	.LVL324:
2444:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** {
 2645                             		.loc 1 2444 0
 2646 0010 EF 15                   		mov.L	r1, r5
 2647 0012 7E A7                   		push.l	r7
 2648                             	.LCFI23:
 2649                             		.loc 1 2447 0
 2650 0014 FB 12 00 00 00 00       		mov.L	#_hal_ovl, r1
 2651                             	.LVL325:
 2652 001a 43 23                   		sub	r2, r3
 2653 001c 7F 8F                   		smovf
2448:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2449:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     retVal = R_FlashWrite_1 ( flash_addr, buffer_addr, bytes );
2450:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** 
2451:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     return retVal;
2452:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c **** }
 2654                             		.loc 1 2452 0
 2655 001e 7E B7                   		pop	r7
2449:C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200\RN_RX200_hal_Flash.c ****     retVal = R_FlashWrite_1 ( flash_addr, buffer_addr, bytes );
 2656                             		.loc 1 2449 0
 2657 0020 EF 51                   		mov.L	r5, r1
 2658 0022 EF 42                   		mov.L	r4, r2
 2659 0024 DF E3                   		mov.W	r14, r3
 2660 0026 04 00 00 00             		bra	_R_FlashWrite_1
 2661                             	.LVL326:
 2662                             	.LFE29:
 2664                             		.section	.bss.fcu_transfer_complete,"aw",@nobits
 2667                             	_fcu_transfer_complete:
 2668 0000 00                      		.zero	1
 2669                             		.section	.bss.current_mode,"aw",@nobits
 2672                             	_current_mode:
 2673 0000 00                      		.zero	1
 2674                             		.section	.bss.flash_semaphore,"aw",@nobits
 2675                             		.balign 4
 2678                             	_flash_semaphore:
 2679 0000 00 00 00 00             		.zero	4
 2680                             		.section	.bss.flash_state,"aw",@nobits
 2681                             		.balign 4
 2684                             	_flash_state:
 2685 0000 00 00 00 00             		.zero	4
 2686                             		.section	.bss.fcu_pclk_command,"aw",@nobits
 2689                             	_fcu_pclk_command:
 2690 0000 00                      		.zero	1
 3137                             	.Letext0:
 3138                             		.file 2 "C:\\Workspace\\FW_Platform2_5\\trunk\\HAL\\HAL_General/StandardTypes.h"
 3139                             		.file 3 "C:\\Workspace\\FW_Platform2_5\\trunk\\OS\\EmbOS\\RX200_GNU\\V388\\Inc/RTOS.h"
 3140                             		.file 4 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_reg.h"
 3141                             		.file 5 "C:/Workspace/FW_Platform2_5/trunk/HAL/RN_RX200/RN_RX200_cfg.h"
